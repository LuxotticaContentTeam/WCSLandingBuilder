utagFiller={partNumber:null,name:null,buyable:null,smartGlasses:!1,initialize:function(){utag_data.Page_Country="US",utag_data.Page_Language="EN",utag_data.Page_Brand="TO",utag_data.Page_DeviceType="M",utag_data.Page_Platform="WCS",utag_data.Order_CodeVersion="1",constants.ajaxParams.loggedIn&&"R"==constants.ajaxParams.loggedIn?(utag_data.user_id=constants.ajaxParams.userId,utag_data.User_LoginStatus="Logged",utag_data.User_Id=constants.ajaxParams.userId,utag_data.User_LoginType="Standard"):utag_data.User_LoginStatus="Guest",this.setMiniCartId()},formatSectionText(e){return this.camelizeText(e,!0).replaceAll("-","")},camelizeText:function(e,t){return(t?e.replace(/(^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}):w.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},getFirstFolderInUrl:function(){var e=window.location.pathname.split("/");if(2<e.length)return this.formatSectionText(e[2])},getSecondFolderInUrl:function(){var e=window.location.pathname.split("/");if(3<e.length)return this.formatSectionText(e[3])},setPage:function(e,t,a){utag_data.Page_Type=e,null==t&&(t=e),utag_data.Page_Section1=t,void 0!==a&&(utag_data.Page_Section2=a)},setCategory:function(){1==$(".facet-subnav.gender li.active").toArray().length&&"undefined"!=typeof globalFacet&&null!==globalFacet&&(-1!==globalFacet.indexOf("Women")?a="Women":-1!==globalFacet.indexOf("Men")&&(a="Men"));var e=$("#categoryName").val().toLowerCase(),t=-1!==e.indexOf("eyeglasses")||-1!==e.indexOf("kid")?"Eyeglasses":-1!==e.indexOf("sunglasses")?"Sunglasses":this.getFirstFolderInUrl(),a=-1!==e.indexOf("men")?"Men":-1!==e.indexOf("women")?"Women":-1!==e.indexOf("kid")?"Kids":this.getSecondFolderInUrl();utag_data.Page_Type="Plp",utag_data.Page_Section1=t,utag_data.Page_Section2="",null!=a&&(utag_data.Page_Section2=a),utag_data.Order_Currency="USD",this.setPLPList(),this.setFilters()},setSearchFlag:function(){sessionStorage.setItem("utagSearchType","free")},setContactsCategory:function(){utag_data.Page_Type="Plp",utag_data.Page_Section1="ContactLenses",utag_data.Page_Section2="",this.setCLFilters(),this.setCLPLPList(),utag_data.Order_Currency="USD"},setPDP:function(e,t,a,r,o){this.partNumber=e,this.name=t,this.buyable=a,this.smartGlasses=r;var s=$("h2.to-brand").text(),n=o,i=parseInt($(productInventory).val());n.Products={},n.Page_Type="Pdp",n.Page_Section1=s,n.Page_Section2=e,n.Products[e]={};r=$("#framePrice").val(),o=$("#frameFullPrice").val();if(r==o||(n.Products[e].PriceFull=o),n.Products[e].Price=r,n.Products[e].Units="1",n.Products[e].Status=0<a&&0<i?"Available":"Out-of-stock",n.Products[e].Engraving="N","true"==this.smartGlasses)n.Products[e].Category="ELECTRONICS";else switch($("#frameCategory").val()){case"sunglasses":n.Products[e].Category="SUN";break;case"eyeglasses":n.Products[e].Category="OPTICS"}n.Products[e].Brand=s,n.Products[e].Sku=t;t=$("#frameModel").val();null!=t&&(n.Products[e].ModelName=t),n.Order_Currency="USD";t=$(".to-select-colors-icon.active").attr("title");return null!=t&&(n.Products[e].FrameColor=t.charAt(0).toUpperCase()+t.slice(1)),n.Products[e].Type="STD",n},updatePDPProduct:function(){var e;0<$("h1.to-brand").length&&(void 0!==(e=this.setPDP(this.partNumber,this.name,this.buyable,this.smartGlasses,{}))&&void 0!==e.Products&&(e.Products[this.partNumber].LensTechnology=$("input[name=productId]:checked").attr("data-upc"),e.Products[this.partNumber].LensUPC=$("input[name=productId]:checked").attr("data-upc2"),e.Products[this.partNumber].Type="RX",e.id="WCS-M-PDP-Prods-Update"),tealium_data2track.push(e))},updatePDPLensColor:function(e){var t;0<$("h1.to-brand").length&&(void 0!==(t=this.setPDP(this.partNumber,this.name,this.buyable,this.smartGlasses,{}))&&void 0!==t.Products&&(t.Products[this.partNumber].LensColor=e,t.Products[this.partNumber].LensTechnology=$("input[name=productId]:checked").attr("data-upc"),t.Products[this.partNumber].LensUPC=$("input[name=productId]:checked").attr("data-upc2"),t.Products[this.partNumber].Type="RX",t.id="WCS-M-PDP-Prods-Update"),tealium_data2track.push(t))},addToCartFromPDP:function(){var e=this.setPDP(this.partNumber,this.name,this.buyable,this.smartGlasses,{});void 0!==e&&void 0!==e.Products&&(e.Products[this.partNumber].ModelName=$("input[name=productId]:checked").attr("data-upc2"),e.Products[this.partNumber].LensColor=$("input[name=lens]:checked").parent().find(".nome").text(),e.Products[this.partNumber].LensTechnology=$("input[name=productId]:checked").attr("data-upc"),e.Products[this.partNumber].LensUPC=$("input[name=productId]:checked").attr("data-upc2"),e.Products[this.partNumber].Type="RX",e.id="WCS-M-PDP-AddToCart"),tealium_data2track.push(e)},setContactsPDP:function(e,t,a){this.partNumber=e,this.name=t,this.buyable=a;var r={Products:{},Page_Type:"Pdp"};r.Page_Section1=$(".to-add-to-cart-container .brand.to-model").text().trim(),r.Page_Section2=e,r.Products[e]={};var o,s,n=$(".box-normal-price").toArray(),t=$(".to-title-item-evidence").toArray();return(o=1==n.length?$(n)[0].innerHTML.replace("$","").trim():o)==(s=1==t.length?$(t)[0].innerHTML.split("$").pop().trim():s)||(r.Products[e].PriceFull=s),r.Products[e].Price=o,r.Products[e].Units=(2*parseInt($("#rightQuantity").val())).toString(),r.Products[e].Status=0<a?"Available":"Not-for-sale",r.Products[e].Category="CONTACT LENSES",r.Products[e].Brand=r.Page_Section1,r.Products[e].ModelName=$(".to-add-to-cart-container h1.to-brand").text(),r.Products[e].Type="RX",r.Products[e].LensUPC=e,r.Order_Currency="USD",r},updateContactsPDPProduct:function(){var e=this.setContactsPDP(this.partNumber,this.name,this.buyable);e.id="WCS-D-PDP-Prods-Update",tealium_data2track.push(e)},setSearchPage:function(e,t){utag_data.Page_Type="Search",utag_data.Page_Section1="Common",utag_data.Page_Section2="InternalSearch",utag_data.Search_Keyword=e,utag_data.Search_Type="free",0<t.length&&0<$(t[0]).text()&&(utag_data.Search_ResultItemsQnt=$(t[0]).text()),utag_data.Order_Currency="USD"},setInPageSearch:function(e,t,a){"undefined"!=a&&null!=a&&tealium_data2track.push({id:"SearchPageReady",Search_Keyword:e,Search_Type:t,Search_ResultItemsQnt:a})},setEmptyCart:function(){utag_data.Page_Type="CartPage",utag_data.Page_Section1="EmptyBag"},setContentCart:function(){utag_data.Page_Type="CartPage",utag_data.Page_Section1="Cart";var e,t,a,r=null,o=-1,s=!(utag_data.Products={}),n=$("#hidden-items [data-description]").toArray(),i=!1,d=n.length,l=0,c=!1;for(index in n){var u,g,p,m,_,h=$(n[index]).attr("data-description"),f=$(n[index]).attr("data-orderitemid");"SUN"==$(n[index]).attr("data-comment")||"EYE"==$(n[index]).attr("data-comment")?(utag_data.Products[h]={},utag_data.Products[h].Type="STD",f=$(n[index]).attr("data-orderitemid"),"Electronics"==document.getElementById(f+"_CATEGORY").value?utag_data.Products[h].Category="ELECTRONICS":(utag_data.Products[h].Category=$(n[index]).attr("data-comment"),"EYE"==$(n[index]).attr("data-comment")&&(utag_data.Products[h].Category="OPTICS")),utag_data.Products[h].Units="1",utag_data.Products[h].Engraving="N",utag_data.Products[h].PerkCode="",0<parseInt($(n[index]).attr("data-inventory"))?utag_data.Products[h].Status="Available":utag_data.Products[h].Status="Out-of-stock",utag_data.Products[h].TaxRate="",m=$(n[index]).attr("data-orderItemId"),utag_data.Products[h].PriceFull=parseFloat($(".to-prices-row.to-total[data-orderitemid='"+m+"']").attr("data-price")),utag_data.Products[h].Price=utag_data.Products[h].PriceFull,utag_data.Products[h].Brand=$("#"+m+"_FRAME_BRAND").val(),0<$("#"+m+"_FRAME_MODEL").length&&(utag_data.Products[h].ModelName=$("#"+m+"_FRAME_MODEL").val()),utag_data.Products[h].Shape=$("#"+m+"_FRAME_SHAPE").val(),r=h,0<(u=$(".insurance_unique_disc").toArray()).length&&(utag_data.Products[h].InsuranceAmount=(-1*parseFloat($(u[0]).text().split("$").pop())).toString(),sessionStorage.setItem("utagInsuranceCodePartNumber",h),sessionStorage.setItem("utagInsuranceCode","Eyemed - applied"),sessionStorage.setItem("utagInsuranceBenefits",utag_data.Order_InsuranceBenefits),s=!0,utag_data.Products[h].PriceFull=(utag_data.Products[h].PriceFull-utag_data.Products[h].InsuranceAmount).toString()),o=index,this.getCartAdditionalInfo(h,f)):"LCON"==$(n[index]).attr("data-comment")?(utag_data.Products[h]={},utag_data.Products[h].Category="CONTACT LENSES",utag_data.Products[h].Status="Available",utag_data.Products[h].Engraving="",utag_data.Products[h].PerkCode="",utag_data.Products[h].TaxRate="",m=$(n[index]).attr("data-orderItemId"),_=$(n[index]).attr("data-catalogentryid"),utag_data.Products[h].Brand=$("."+m+"__L_QNT input[name=contactBrand]").val(),utag_data.Products[h].Sku=$("."+m+"__L_QNT input[name=contactPN]").val(),utag_data.Products[h].PriceFull="",utag_data.Products[h].Units=$("."+m+"__L_QNT select [selected]").val(),0<(g=$("."+f+"_Price").toArray()).length&&(utag_data.Products[h].Price=parseFloat($(g[0]).val()).toFixed(2).toString()),utag_data.Products[h].PriceFull=utag_data.Products[h].Price,0<(p=$(".offer_catalogentry_"+_).toArray()).length&&(utag_data.Products[h].Price=$(p[0]).text().split("$").pop(),utag_data.Products[h].Price=(parseFloat(utag_data.Products[h].Price.replace(",",""))/parseFloat(utag_data.Products[h].Units)).toFixed(2).toString(),c=!0),0!==p.length&&(utag_data.Products[h].Price=(parseFloat(utag_data.Products[h].PriceFull)-parseFloat(utag_data.Products[h].Price)/2).toFixed(2).toString()),i=!0,l+=parseFloat(utag_data.Products[h].Units),utag_data.Products[h].Type="RX",utag_data.Products[h].LensUPC=utag_data.Products[h].Sku,this.getCartAdditionalInfo(h)):"RCON"==$(n[index]).attr("data-comment")?void 0===utag_data.Products[h]?(utag_data.Products[h]={},utag_data.Products[h].Category="CONTACT LENSES",utag_data.Products[h].Status="Available",utag_data.Products[h].Engraving="",utag_data.Products[h].PerkCode="",utag_data.Products[h].TaxRate="",m=$(n[index]).attr("data-orderItemId"),_=$(n[index]).attr("data-catalogentryid"),utag_data.Products[h].PriceFull="",utag_data.Products[h].Units=$("."+m+"__R_QNT select [selected]").val(),0<(g=$("."+f+"_Price").toArray()).length&&(utag_data.Products[h].Price=parseFloat($(g[0]).val()).toFixed(2).toString()),utag_data.Products[h].PriceFull=utag_data.Products[h].Price,0<(p=$(".offer_catalogentry_"+_).toArray()).length&&(utag_data.Products[h].Price=$(p[0]).text().split("$").pop(),utag_data.Products[h].Price=(parseFloat(utag_data.Products[h].Price.replace(",",""))/parseFloat(utag_data.Products[h].Units)).toFixed(2).toString(),c=!0),0!==p.length&&(utag_data.Products[h].Price=(parseFloat(utag_data.Products[h].PriceFull)-parseFloat(utag_data.Products[h].Price)/2).toFixed(2).toString()),utag_data.Products[h].Brand=$("."+m+"__R_QNT input[name=contactBrand]").val(),utag_data.Products[h].Sku=$("."+m+"__R_QNT input[name=contactPN]").val(),i=!0,l+=parseFloat(utag_data.Products[h].Units),utag_data.Products[h].Type="RX",utag_data.Products[h].LensUPC=utag_data.Products[h].Sku,this.getCartAdditionalInfo(h)):0<utag_data.Products[h].Units&&(m=$(n[index]).attr("data-orderItemId"),utag_data.Products[h].Units=(parseFloat(utag_data.Products[h].Units)+parseFloat($("."+m+"__R_QNT select [selected]").val())).toString(),l=parseFloat(utag_data.Products[h].Units),d=1):"LENS"==$(n[index]).attr("data-comment")&&(null!==o&&index-o==1&&null!==r&&(utag_data.Products[r].Sku=$(n[index]).attr("data-description")),_=$(n[index]).attr("data-catalogentryid"),0<$("."+_+"_lens-name").length&&(utag_data.Products[r].LensTechnology=$("."+_+"_lens-name").text().trim()),0<$("."+_+"_treatment").length&&(utag_data.Products[r].LensColor=$("."+_+"_treatment").attr("data-treatment")),utag_data.Products[r].LensUPC=utag_data.Products[r].Sku,utag_data.Products[r].Type="RX")}if(0<(u=$("."+_+"__Insurance").toArray()).length&&i){var s=!0,v=parseFloat($(u[0]).text().split("$").pop()),P=-1*v/l;for(index in utag_data.Products)utag_data.Products[index].InsuranceAmount=(v/d*-1).toFixed(2).toString(),sessionStorage.setItem("utagInsuranceCodePartNumber",h),sessionStorage.setItem("utagInsuranceCode","Eyemed - applied"),sessionStorage.setItem("utagInsuranceBenefits",utag_data.Order_InsuranceBenefits),utag_data.Products[index].Price=(parseFloat(utag_data.Products[index].Price)+P).toFixed(2).toString()}utag_data.Order_Currency="USD",utag_data.Order_GiftCardCode="",0<$("#ShoppingCart_RedCard_Checkbox").length&&$("#ShoppingCart_RedCard_Checkbox").is(":checked")&&(utag_data.Order_GiftCardCode="REDCARD"),sessionStorage.setItem("utagGiftCard",utag_data.Order_GiftCardCode),utag_data.Order_DiscountCode="",0<$(".promotionCodeHidden").length&&(e=[],$(".promotionCodeHidden").each(function(){e.push($(this).val())}),utag_data.Order_DiscountCode=e.join(",")),sessionStorage.setItem("utagDiscCode",utag_data.Order_DiscountCode),utag_data.Order_DiscountAmount="0",0<$(".totalsavingdiscount").length&&!c&&!s&&(a=Number($(".totalsavingdiscount").text().replace(",",".")),t=isNaN(a)?0:0<a?"-"+a:""+a,utag_data.Order_DiscountAmount=t),sessionStorage.setItem("utagDiscAmount",utag_data.Order_DiscountAmount),utag_data.Order_DiscountName="",0<$("#promo-names").length&&(utag_data.Order_DiscountName=$("#promo-names").data("promoNames").trim()),sessionStorage.setItem("utagDiscName",utag_data.Order_DiscountName),utag_data.Order_ProductsAmount="",0<$("#UtagOrderAmt").length&&(utag_data.Order_ProductsAmount=parseFloat($("#UtagOrderAmt").val()).toFixed(2).toString()),sessionStorage.setItem("utagProductsAmount",utag_data.Order_ProductsAmount),sessionStorage.setItem("utagProducts",JSON.stringify(utag_data.Products)),null!==$("#shipModeAnalytics").val()&&void 0!==$("#shipModeAnalytics").val()&&(a="",a="Collect in store"==(t=$("#shipModeAnalytics").val())?"Pick-up-point":"next day air"==t?"Next Business Day":"2 day air"==t?"2 business day":"Ground",utag_data.Order_ShippingMode=a),this.addAbandonedCartUrl(),this.retrieveRecommendedProducts()},setCheckoutDelivery:function(){var e,t;utag_data.Page_Type="Delivery",utag_data.Page_Section1="Checkout",utag_data.Order_Currency="USD",null!==sessionStorage.getItem("utagGiftCard")&&(utag_data.Order_GiftCardCode=sessionStorage.getItem("utagGiftCard")),null!==sessionStorage.getItem("utagDiscCode")&&(utag_data.Order_DiscountCode=sessionStorage.getItem("utagDiscCode")),null!==sessionStorage.getItem("utagDiscAmount")&&(utag_data.Order_DiscountAmount=sessionStorage.getItem("utagDiscAmount")),null!==sessionStorage.getItem("utagDiscName")&&(utag_data.Order_DiscountName=sessionStorage.getItem("utagDiscName")),utag_data.Order_ProductsAmount="",0<$("#UtagOrderAmt").length?(utag_data.Order_ProductsAmount=parseFloat($("#UtagOrderAmt").val()).toFixed(2).toString(),0<parseFloat(utag_data.Order_TaxAmount)&&(utag_data.Order_ProductsAmount=(parseFloat(utag_data.Order_ProductsAmount)-utag_data.Order_TaxAmount).toFixed(2).toString()),sessionStorage.setItem("utagProdAmount",utag_data.Order_ProductsAmount)):null!==sessionStorage.getItem("utagProdAmount")&&(utag_data.Order_ProductsAmount=parseFloat(sessionStorage.getItem("utagProdAmount")).toFixed(2).toString()),null!==sessionStorage.getItem("utagProducts")&&(utag_data.Products=$.parseJSON(sessionStorage.getItem("utagProducts")),utag_data.Products=null==utag_data.Products?{}:utag_data.Products),null!==$("#shipModeAnalytics").val()&&void 0!==$("#shipModeAnalytics").val()&&(t="",t="Collect in store"==(e=$("#shipModeAnalytics").val())?"Pick-up-point":"next day air"==e?"Next Business Day":"2 day air"==e?"2 business day":"Ground",utag_data.Order_ShippingMode=t)},setCheckoutPayment:function(){utag_data.Page_Type="Payment",utag_data.Page_Section1="Checkout",utag_data.Order_Currency="USD",null!==sessionStorage.getItem("utagGiftCard")&&(utag_data.Order_GiftCardCode=sessionStorage.getItem("utagGiftCard")),null!==sessionStorage.getItem("utagDiscCode")&&(utag_data.Order_DiscountCode=sessionStorage.getItem("utagDiscCode")),null!==sessionStorage.getItem("utagDiscAmount")&&(utag_data.Order_DiscountAmount=sessionStorage.getItem("utagDiscAmount")),null!==sessionStorage.getItem("utagDiscName")&&(utag_data.Order_DiscountName=sessionStorage.getItem("utagDiscName")),null!==sessionStorage.getItem("utagProducts")&&(utag_data.Products=$.parseJSON(sessionStorage.getItem("utagProducts")),utag_data.Products=null==utag_data.Products?{}:utag_data.Products),utag_data.Order_ShippingAmount="",null!==sessionStorage.getItem("utagShipCart")&&(utag_data.Order_ShippingAmount=parseFloat(sessionStorage.getItem("utagShipCart")).toFixed(2).toString()),null!==sessionStorage.getItem("utagShipMode")&&(utag_data.Order_ShippingMode=sessionStorage.getItem("utagShipMode"),"ground"===utag_data.Order_ShippingMode.toLowerCase()&&(utag_data.Order_ShippingAmount="0.00",utag_data.Order_ShippingMode="Ground")),null!==sessionStorage.getItem("utagShipTax")&&(utag_data.Order_ShippingTaxRate=parseFloat(sessionStorage.getItem("utagShipTax")).toFixed(2).toString()),null!==sessionStorage.getItem("utagTotalTax")&&(utag_data.Order_TaxAmount=sessionStorage.getItem("utagTotalTax")),utag_data.Order_ProductsAmount="",0<$("#UtagOrderAmt").length?(utag_data.Order_ProductsAmount=parseFloat($("#UtagOrderAmt").val()).toFixed(2).toString(),0<parseFloat(utag_data.Order_TaxAmount)&&(utag_data.Order_ProductsAmount=parseFloat(utag_data.Order_ProductsAmount)-parseFloat(utag_data.Order_TaxAmount)),0<parseFloat(utag_data.Order_ShippingAmount)&&(utag_data.Order_ProductsAmount=parseFloat(utag_data.Order_ProductsAmount)-parseFloat(utag_data.Order_ShippingAmount)),utag_data.Order_ProductsAmount=parseFloat(utag_data.Order_ProductsAmount).toFixed(2).toString(),sessionStorage.setItem("utagProdAmount",utag_data.Order_ProductsAmount)):null!==sessionStorage.getItem("utagProdAmount")&&(utag_data.Order_ProductsAmount=parseFloat(sessionStorage.getItem("utagProdAmount")).toFixed(2).toString()),null!==sessionStorage.getItem("utagShippingZipCode")&&(utag_data.Order_ZipCode=sessionStorage.getItem("utagShippingZipCode")),null!==sessionStorage.getItem("utagShippingState")&&(utag_data.Order_State=sessionStorage.getItem("utagShippingState"));var e=$("#UtagOrderAmt").val(),t=Number(e.replace(/[^0-9.-]+/g,""));if(0<$("#afterpayPlacement").length&&$("#afterpayPlacement").attr("data-amount",t),"undefined"!=typeof affirm){$("#affirmPrice").attr("data-amount",100*t);try{affirm.ui.ready(function(){affirm.ui.refresh()})}catch(e){console.error("Error refreshing Affirm: "+e)}}null!==$("#shipModeAnalytics").val()&&void 0!==$("#shipModeAnalytics").val()&&(e="",e="Collect in store"==(t=$("#shipModeAnalytics").val())?"Pick-up-point":"next day air"==t?"Next Business Day":"2 day air"==t?"2 business day":"Ground",utag_data.Order_ShippingMode=e),-1<window.location.href.indexOf("reorder=true")?utag_data.Page_Section2="Reorder":utag_data.Page_Section2="Standard",sessionStorage.setItem("utagDataPageSection2",utag_data.Page_Section2)},setCheckoutThankYou:function(){var e,t;utag_data.Page_Type="Thankyou",utag_data.Page_Section1="Checkout",null!==sessionStorage.getItem("utagDataPageSection2")&&(utag_data.Page_Section2=sessionStorage.getItem("utagDataPageSection2")),utag_data.Order_Currency="USD",utag_data.Order_PaymentInstallments="",null!==sessionStorage.getItem("utagGiftCard")&&(utag_data.Order_GiftCardCode=sessionStorage.getItem("utagGiftCard")),null!==sessionStorage.getItem("utagDiscCode")&&(utag_data.Order_DiscountCode=sessionStorage.getItem("utagDiscCode")),null!==sessionStorage.getItem("utagDiscAmount")&&(utag_data.Order_DiscountAmount=sessionStorage.getItem("utagDiscAmount")),null!==sessionStorage.getItem("utagDiscName")&&(utag_data.Order_DiscountName=sessionStorage.getItem("utagDiscName")),utag_data.Products={},null!==sessionStorage.getItem("utagProducts")&&(utag_data.Products=$.parseJSON(sessionStorage.getItem("utagProducts")),utag_data.Products=null==utag_data.Products?{}:utag_data.Products),0<$(".specific_order_id").length&&(utag_data.Order_Id=$(".specific_order_id").attr("data-orderid")),utag_data.Order_ShippingAmount="",null!==sessionStorage.getItem("utagShipCart")&&(utag_data.Order_ShippingAmount=parseFloat(sessionStorage.getItem("utagShipCart")).toFixed(2).toString()),null!==sessionStorage.getItem("utagShipMode")&&(utag_data.Order_ShippingMode=sessionStorage.getItem("utagShipMode"),"ground"===utag_data.Order_ShippingMode.toLowerCase()&&(utag_data.Order_ShippingAmount="0.00",utag_data.Order_ShippingMode="Ground")),utag_data.Order_ShippingTaxRate="",null!==sessionStorage.getItem("utagShipTax")&&(utag_data.Order_ShippingTaxRate=parseFloat(sessionStorage.getItem("utagShipTax")).toFixed(2).toString()),utag_data.Order_TaxAmount="",null!==sessionStorage.getItem("utagTotalTax")&&(utag_data.Order_TaxAmount=sessionStorage.getItem("utagTotalTax")),utag_data.Order_PaymentType=this.getOrderPayment(),"Affirm"===utag_data.Order_PaymentType&&null!==sessionStorage.getItem("affirmInstallments")&&(utag_data.Order_PaymentInstallments=sessionStorage.getItem("affirmInstallments")),utag_data.Order_ProductsAmount="",null!==sessionStorage.getItem("utagProdAmount")&&(utag_data.Order_ProductsAmount=sessionStorage.getItem("utagProdAmount"),sessionStorage.removeItem("utagProdAmount")),null!==sessionStorage.getItem("utagShippingZipCode")&&(utag_data.Order_ZipCode=sessionStorage.getItem("utagShippingZipCode")),null!==sessionStorage.getItem("utagShippingState")&&(utag_data.Order_State=sessionStorage.getItem("utagShippingState")),null!==sessionStorage.getItem("utagInsuranceCodePartNumber")&&null!==sessionStorage.getItem("utagInsuranceCode")&&(utag_data.Products[sessionStorage.getItem("utagInsuranceCodePartNumber")].InsuranceCode=sessionStorage.getItem("utagInsuranceCode")),null!==sessionStorage.getItem("utagOrderInsuranceBenefits")&&(utag_data.Order_InsuranceBenefits=sessionStorage.getItem("utagOrderInsuranceBenefits")),null!==sessionStorage.getItem("utagInsuranceCodePartNumber")&&null!==sessionStorage.getItem("utagInsuranceBenefits")&&(utag_data.Products[sessionStorage.getItem("utagInsuranceCodePartNumber")].InsuranceBenefits=sessionStorage.getItem("utagInsuranceBenefits")),null!==$("#shipModeAnalytics").val()&&void 0!==$("#shipModeAnalytics").val()&&(t="",t="Collect in store"==(e=$("#shipModeAnalytics").val())?"Pick-up-point":"next day air"==e?"Next Business Day":"2 day air"==e?"2 business day":"Ground",utag_data.Order_ShippingMode=t)},getOrderPayment:function(){var e="";if(null!==sessionStorage.getItem("utagCreditCard"))switch(e=sessionStorage.getItem("utagCreditCard")){case"VISA":e="Visa";break;case"Master Card":e="MasterCard";break;case"AMEX":e="Amex";break;case"DISCOVER":e="Discover";break;case"DINERS":e="Diners";break;case"PAYPAL":e="PayPal";break;case"PayPalExpressCheckout":e="PayPalExpressCheckout";break;case"AFFIRM":e="Affirm";break;case"AFTERPAY":e="Afterpay";break;default:e=""}return e},setCheckoutDoctor:function(){utag_data.Page_Type="Prescription",utag_data.Page_Section1="Checkout",utag_data.Order_Currency="USD",null!==sessionStorage.getItem("utagGiftCard")&&(utag_data.Order_GiftCardCode=sessionStorage.getItem("utagGiftCard"),sessionStorage.removeItem("utagGiftCard")),null!==sessionStorage.getItem("utagDiscCode")&&(utag_data.Order_DiscountCode=sessionStorage.getItem("utagDiscCode"),sessionStorage.removeItem("utagDiscCode")),null!==sessionStorage.getItem("utagDiscAmount")&&(utag_data.Order_DiscountAmount=sessionStorage.getItem("utagDiscAmount"),sessionStorage.removeItem("utagDiscAmount")),null!==sessionStorage.getItem("utagDiscName")&&(utag_data.Order_DiscountName=sessionStorage.getItem("utagDiscName"),sessionStorage.removeItem("utagDiscName")),utag_data.Order_ShippingAmount="",null!==sessionStorage.getItem("utagShipCart")&&(utag_data.Order_ShippingAmount=parseFloat(sessionStorage.getItem("utagShipCart")).toFixed(2).toString(),sessionStorage.removeItem("utagShipCart")),null!==sessionStorage.getItem("utagShipMode")&&(utag_data.Order_ShippingMode=sessionStorage.getItem("utagShipMode"),"ground"===utag_data.Order_ShippingMode.toLowerCase()&&(utag_data.Order_ShippingAmount="0.00",utag_data.Order_ShippingMode="Ground")),utag_data.Products={},null!==sessionStorage.getItem("utagProducts")&&(utag_data.Products=$.parseJSON(sessionStorage.getItem("utagProducts")),utag_data.Products=null==utag_data.Products?{}:utag_data.Products,sessionStorage.removeItem("utagProducts")),utag_data.Order_ShippingTaxRate="",null!==sessionStorage.getItem("utagShipTax")&&(utag_data.Order_ShippingTaxRate=parseFloat(sessionStorage.getItem("utagShipTax")).toFixed(2).toString(),sessionStorage.removeItem("utagShipTax")),utag_data.Order_TaxAmount="",null!==sessionStorage.getItem("utagTotalTax")&&(utag_data.Order_TaxAmount=sessionStorage.getItem("utagTotalTax"),sessionStorage.removeItem("utagTotalTax")),null!==sessionStorage.getItem("utagShippingZipCode")&&(utag_data.Order_ZipCode=sessionStorage.getItem("utagShippingZipCode"),sessionStorage.removeItem("utagShippingZipCode")),null!==sessionStorage.getItem("utagShippingState")&&(utag_data.Order_State=sessionStorage.getItem("utagShippingState"),sessionStorage.removeItem("utagShippingState"))},setSentPrescription:function(){var e={Order_PrescriptionMethod:""};0<$("input[name='prescription']:checked").length&&(e.Order_PrescriptionMethod=$("input[name='prescription']:checked").val()),e.id="WCS-M-Checkout-Order-PrescriptionOk",tealium_data2track.push(e)},setRegistrationFlag:function(){sessionStorage.setItem("registration","true"),"checked"===$("#receiveEmail_checkBox").attr("checked")&&sessionStorage.setItem("emailSignUp","true")},setRegLoginConfirm:function(){utag_data.Page_Type="Static",utag_data.Page_Section1="MyAccount",null!==sessionStorage.getItem("registration")?(utag_data.Page_Section2="Register",utag_data.Events_UserAccountNew="1",sessionStorage.removeItem("registration")):(utag_data.Page_Section2="Login",utag_data.Events_UserLogin="1"),null!==sessionStorage.getItem("emailSignUp")&&(sessionStorage.removeItem("emailSignUp"),this.setEmailSignUp())},setEmailSignUp:function(){tealium_data2track.push({id:"WCS-M-SignupForm",Events_UserEmailSub:"1"})},setStoreLocator:function(){utag_data.Page_Type="FindStore",utag_data.Page_Section1="Exam",utag_data.Page_Section2=""},setDeleteExam:function(){tealium_data2track.push({id:"WCS-M-Exam-Funnel-Cancellation",Events_AppointmentCanceled:"1"})},setPersonalInfo:function(){utag_data.Page_Type="Info",utag_data.Page_Section1="Exam",utag_data.Page_Section2="PersonalInfo",null!==sessionStorage.getItem("anotherExam")&&(sessionStorage.removeItem("anotherExam"),tealium_data2track.push({id:"WCS-M-Exam-Funnel-AddExam"}))},setExamPageInfo:function(e,t){if(utag_data.Page_Section1="Exam",utag_data.Page_Section2="",utag_data.Page_Type="ThankYouSchedulingPage"!==t?"Review":"Confirmation",utag_data.Exam_ZipCode=e,null!==sessionStorage.getItem("examContents")){var a=JSON.parse(sessionStorage.getItem("examContents"));if(0<a.length){for(var r=[],o=[],s=[],n=0;n<a.length;n++)r.push(a[n].previousExam),o.push(a[n].fitting),void 0!==a[n].wornBefore&&s.push(a[n].wornBefore);utag_data.Exam_PreviousExam=r.join(","),utag_data.Exam_Fitting=o.join(","),utag_data.Exam_WornBefore=s.join(","),utag_data.Exam_PatientNum=""+r.length,"ThankYouSchedulingPage"===t&&sessionStorage.removeItem("examContents")}}},setExamFlag:function(){sessionStorage.setItem("anotherExam","true")},setOtherPage:function(e,t){utag_data.Page_Type=t,utag_data.Page_Section1=e,utag_data.Page_Section2="CMC Content"},setStaticPage:function(e){utag_data.Page_Type="Static";var t=this.getFirstFolderInUrl();utag_data.Page_Section1=t;t=this.getSecondFolderInUrl();utag_data.Page_Section2="",null!=t&&(utag_data.Page_Section2=t)},setNotFoundPage:function(){utag_data.Page_Type="Error",utag_data.Page_Section1="Other",utag_data.Page_Section2="ErrorHttp404",utag_data.Error_Source="404",utag_data.Error_Code="404 - page not found"},setGenericServerError:function(){obj={id:"Error",Error_Source:"Server",Error_Details:"Generic Server Errors"},tealium_data2track.push(obj)},setMiniCartId:function(){"undefined"!=typeof constants&&void 0!==constants.ajaxParams&&(utag_data.Cart_Id=constants.ajaxParams.orderId)},setOrderId:function(e){"Thankyou"===utag_data.Page_Type&&(utag_data.Order_Id=e),utag_data.Cart_Id=e,_dl.cart_id=e},setExamContent:function(e){"undefined"!=typeof jsonExams&&null!==jsonExams||(jsonExams=JSON.parse(sessionStorage.getItem("examContents")),null===jsonExams&&(jsonExams=[]));var t={},e=e.attr("data-exam-number");t.examNumber=parseInt(e),t.previousExam=$("#previousExam_"+e+"_yes").prop("checked")?"Y":"N",t.fitting=$("#fitting_"+e+"_yes").prop("checked")?"Y":"N","Y"===t.fitting&&(t.wornBefore=$("#contacts_"+e+"_yes").prop("checked")?"Y":"N");for(var a=-1,r=0;r<jsonExams.length;r++)jsonExams[r].examNumber===t.examNumber&&(a=r);-1===a?jsonExams.push(t):jsonExams[a]=t},setExamContentFlag:function(){"undefined"!=typeof jsonExams&&null!==jsonExams&&sessionStorage.setItem("examContents",JSON.stringify(jsonExams))},setFilters:function(){var r,e;0<$("#facetList .facet .facet-subnav .facet-link.active").length?(utag_data.Events_SearchFiltering="1",r="",$(".facet-options>li").each(function(){var e=$(this).attr("id");void 0!==e&&(e=e.split("-").pop()+"=");for(var t=[],a=0;a<$(this).find(".facet-subnav li.active").length;a++)t.push(decodeURIComponent($($(this).find(".facet-subnav li.active")[a]).attr("data-facetvalue")).split(":").pop().replace(/"/g,""));0<t.length&&(r=r+e+t.join("|")+"&")}),e=r.length-1,0<r.length&&"&"===r[e]&&(r=r.substr(0,e)),utag_data.Search_FacetValues_String=r,0<$(".total-items").length&&(utag_data.Search_ResultItemsQnt=$($(".total-items")[0]).text())):utag_data.Events_SearchFiltering="0"},setCLFilters:function(){var r,e;0<$("#facetList .facet .facet-subnav .facet-link.active").length?(utag_data.Events_SearchFiltering="1",r="",$(".facet-options>li").each(function(){var e=$(this).find(".facet-subnav").attr("data-facet-name");void 0!==e&&(e=e.split("-").pop()+"=");for(var t=[],a=0;a<$(this).find(".facet-subnav li.active").length;a++)t.push(decodeURIComponent($($(this).find(".facet-subnav li.active")[a]).attr("data-facetvalue")).split(":").pop().replace(/"/g,""));0<t.length&&(r=r+e+t.join("|")+"&")}),e=r.length-1,0<r.length&&"&"===r[e]&&(r=r.substr(0,e)),utag_data.Search_FacetValues_String=r,0<$("#totalResultsCopy").length&&(utag_data.Search_ResultItemsQnt=$("#totalResultsCopy").text())):utag_data.Events_SearchFiltering="0"},setPLPList:function(){utag_data.Products={},$(".item").each(function(e){if(5==e)return!1;var t=$(this).attr("data-partNumber"),e=parseInt($(this).attr("data-inventory"));void 0!==t&&(utag_data.Products[t]={},utag_data.Products[t].Status=0<e?"Available":"Out-of-stock",utag_data.Products[t].Engraving="N",e=$(this).find(".__prjid5_price").attr("data-catentryid"),$(this).find("#currentCategory_"+e)&&(e=$(this).find("#currentCategory_"+e).val().toLowerCase(),utag_data.Products[t].Category="sunglasses"===e?"SUN":"OPTICS"),0<$(this).find(".offerprice").length&&(utag_data.Products[t].Price=$(this).find(".offerprice").text().split("$").pop().trim()),0<$(this).find(".listPrice").length?utag_data.Products[t].PriceFull=$(this).find(".listPrice").text().split("$").pop().trim():(utag_data.Products[t].PriceFull=utag_data.Products[t].Price,delete utag_data.Products[t].Price))})},setCLPLPList:function(){utag_data.Products={},$(".results_grid .item").each(function(e){if(5==e)return!1;e=$(this).attr("data-partnumber");void 0!==e&&(utag_data.Products[e]={},utag_data.Products[e].Status="Available",utag_data.Products[e].Category="CONTACT LENSES",0<$(this).find(".offerprice").length&&(utag_data.Products[e].Price=$(this).find(".offerprice").text().split("$").pop().trim()),0<$(this).find(".listPrice").length?utag_data.Products[e].PriceFull=$(this).find(".listPrice").text().split("$").pop().trim():(utag_data.Products[e].PriceFull=utag_data.Products[e].Price,delete utag_data.Products[e].Price))})},setCartProducts:function(){if(null!==sessionStorage.getItem("trackShoppingCart")){var e=$.parseJSON(sessionStorage.getItem("trackShoppingCart"));for(item in e)"contact lenses"!==e[item].product_id.category&&void 0!==utag_data.Products[e[item].product_id]&&void 0!==e[item].frame_shape&&(utag_data.Products[e[item].product_id].Shape=e[item].frame_shape.trim())}},setAddToCart:function(){var e=this.setContactsPDP(this.partNumber,this.name,this.buyable);e.id="AddToCart",tealium_data2track.push(e)},setPayWithPaymentType:function(){var e={id:"Checkout-Step-Gateway"};e.Order_PaymentType=this.getOrderPayment(),"Affirm"===e.Order_PaymentType&&null!==sessionStorage.getItem("affirmInstallments")&&(e.Order_PaymentInstallments=sessionStorage.getItem("affirmInstallments")),null!==sessionStorage.getItem("utagProducts")&&(e.Products=$.parseJSON(sessionStorage.getItem("utagProducts"))),tealium_data2track.push(e)},getCartAdditionalInfo:function(e,t){var a=$("[data-cart-element="+e+"]");0<a.length&&(utag_data.Products[e].Url=$(a).attr("href"),void 0!==$(a).attr("data-alt-url")&&null!==$(a).attr("data-alt-url")&&(utag_data.Products[e].Url=$(a).attr("data-alt-url")),utag_data.Products[e].MoCo=$(a).attr("data-prod-name"));a=$("[data-cart-element="+e+"] img");0<a.length&&(utag_data.Products[e].Image=$(a).attr("src")),null!=t&&""!==t&&(utag_data.Products[e].MoCo=$("#"+t+"_FRAME_MODEL").val()+"_"+$("#"+t+"_SAP_MATERIAL_CODE").val(),utag_data.Products[e].Size=$("#"+t+"_SAP_SIZE").val())},addAbandonedCartUrl:function(){var e,t;0<$("#orderIdCodElem").length&&0<$("#membIdCodElem").length&&(e=$("#orderIdCodElem").val(),t=$("#membIdCodElem").val(),utag_data.Order_CartUrl=location.origin+"/PlaceNewOrderTO?encOrderid="+e+"&storeId="+storeId+"&fromCart=true&encMemberId="+t)},populateRecommendedProducts:function(){var e={},t=$("#others .catEntryThumbnail");if(0<t.length)for(var a=0;a<t.length;a++){var r,o,s=$($("#others .catEntryThumbnail")[a]).attr("data-element-catId"),n=$("#"+s+"_partnumber").val();null!=n&&""!==n&&(r="#others [data-element-catId="+s+"]",(o={}).Recommended_Url=$(r+" .productImagePdpLink").attr("href"),o.Recommended_ModelName=$("#"+s+"_modelName").val(),o.Recommended_Price=$("#"+s+"_price").val(),void 0!==o.Recommended_Price&&null!==o.Recommended_Price&&(o.Recommended_Price=o.Recommended_Price.replace("$","")),o.Recommended_Image=$(r+" .productImagePdpLink img").attr("src"),o.Recommended_Brand=$("#"+s+"_brand").val(),e[n]=o)}sessionStorage.setItem("utagRecommendation",JSON.stringify(e))},retrieveRecommendedProducts:function(){utag_data.Recommendations=[],null!==sessionStorage.getItem("utagRecommendation")&&(utag_data.Recommendations=$.parseJSON(sessionStorage.getItem("utagRecommendation")))},insuranceApplied:function(e,t){utag_data.Order_InsuranceCode=t||"Unknown",utag_data.Order_InsuranceBenefits=e,sessionStorage.setItem("utagOrderInsuranceBenefits",e)},insuranceAppliedEvent:function(e,t){obj={id:"Insurance-Applied",Order_InsuranceCode:t||"Unknown",Order_InsuranceBenefits:e},tealium_data2track.push(obj)},insuranceTentative:function(e,t,a){obj={id:"Insurance-Tentative",Order_InsuranceCode:a||"Unknown",Error_Source:"User",Error_Code:"Insurance - "+e,Error_Message:t},tealium_data2track.push(obj)},setOEEError:function(e){obj={id:"Error",Error_Source:"Server",Error_Code:"OEE",Error_Details:e},tealium_data2track.push(obj)},setUserRegistrationError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Signup",Error_Details:"Sign up Request Failed"},tealium_data2track.push(obj)},setUnableToSearchError:function(){obj={id:"Error",Error_Source:"Client",Error_Code:"Search",Error_Details:"Unable to search for products"},tealium_data2track.push(obj)},setPPExpressError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment",Error_Details:"Paypal express"},tealium_data2track.push(obj)},setPPError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment",Error_Details:"Paypal"},tealium_data2track.push(obj)},setAffirmError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment",Error_Details:"Affirm"},tealium_data2track.push(obj)},setAfterpayError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment",Error_Details:"Afterpay"},tealium_data2track.push(obj)},setPaymentDeclinedError:function(e){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment declined",Error_Details:e},tealium_data2track.push(obj)},setProductError:function(){obj={id:"Error",Error_Source:"Product",Error_Code:"404 - Inactive or Unpublished Product"},tealium_data2track.push(obj)},setIncorrectFileTypeError:function(){obj={id:"Error",Error_Source:"User",Error_Code:"RX panel",Error_Message:"Incorrect File Type"},tealium_data2track.push(obj)},setFileisTooBigtoUploadError:function(){obj={id:"Error",Error_Source:"User",Error_Code:"RX panel",Error_Message:"File is too big to upload"},tealium_data2track.push(obj)},setUnabletogetdoctorlist:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"RX panel",Error_Details:"Unable to get doctor list"},tealium_data2track.push(obj)},setMissingFieldDuringUploadPrescription:function(){obj={id:"Error",Error_Source:"User",Error_Code:"RX panel",Error_Message:"Missing select doctor"},tealium_data2track.push(obj)},setCartLoadingError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Cart",Error_Details:"Cart Loading Error"},tealium_data2track.push(obj)},setCartReloadingError:function(e){obj={id:"Error",Error_Source:"Server",Error_Code:"Cart",Error_Details:e||"Unable to reload cart"},tealium_data2track.push(obj)},setUnableUploadRXImage:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"RX panel",Error_Details:"Unable to upload the RX image"},tealium_data2track.push(obj)},setUnableToLoadRX:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"RX panel",Error_Details:"Unable to load prescription detail"},tealium_data2track.push(obj)},setUnableToAddToCart:function(){obj={id:"Error",Error_Source:"Client",Error_Code:"AddtoCart",Error_Details:"Unable to add product in the cart"},tealium_data2track.push(obj)},setUnableToSaveShippingPage:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Shipping",Error_Message:"Unable to save billing page"},tealium_data2track.push(obj)},setInvalidFieldShippingPage:function(){obj={id:"Error",Error_Source:"User",Error_Code:"Checkout - Shipping",Error_Details:"Please provide a valid city, zip code, etc"},tealium_data2track.push(obj)},setAddToCartDelay:function(){obj={id:"Error",Error_Source:"Client",Error_Code:"AddtoCart",Error_Details:"Add to cart over 10sec"},tealium_data2track.push(obj)},setTYPError:function(){obj={id:"Error",Error_Source:"Client",Error_Code:"Checkout - Thank You Page",Error_Details:"Thank You Page Redirect Error"},tealium_data2track.push(obj)}},"undefined"!=typeof MessageHelper&&MessageHelper&&MessageHelper.topicNamespace||(MessageHelper={messages:{},identifier:"",getCurrentYear:function(){return(new Date).getFullYear()},getCurrentMonth:function(){return(new Date).getMonth()+1},getCurrentDay:function(){return(new Date).getDate()},getRenderContextProperty:function(e,t){if(console.debug("enter getRenderContextProperty with propertyName = "+t),null==e)return console.debug("context is null. Return null..."),null;t=e.properties[t];return console.debug("the found property value is: "+t),t},setMessage:function(e,t){this.messages[e]=t},showHideMessageArea:function(e){cursor_clear(),null!=e&&null!=e||(e=0);dojo.byId("MessageArea");$("#ErrorMessageText").dialog({width:350,open:function(e,t){setTimeout(function(){$("#ErrorMessageText").dialog("close")},7e3)}})},displayErrorCybersource:function(){top.MessageHelper.showErrorCybersource()},showErrorCybersource:function(){cursor_clear(),/iphone|ipad|android|ie|blackberry|fennec/.test(navigator.userAgent.toLowerCase())?$("#to-warn-cybersource-error").dialog({position:{my:"center",at:"center",of:window},modal:!0,draggable:!1,open:function(e,t){$(this).removeClass("hide")},close:function(){}}):$("#to-warn-cybersource-error").dialog({position:{my:"center",at:"center",of:window},modal:!0,draggable:!1,appendTo:"#modalList",open:function(e,t){$(this).removeClass("hide")},close:function(){}}),$("#to-warn-cybersource-error").dialog("open")},hideMessageArea:function(){cursor_clear();var e=dojo.byId("MessageArea"),t=new Array;return t.node=e,t.duration=500,t.onEnd=function(){dojo.style(e,"display","none"),dojo.style(e,"opacity",100)},dojo.fadeOut(t).play(),dojo.byId("ErrorMessageText").innerHTML="",!1},displayErrorMessage:function(e,t,a){null!=t&&null!=t||(t=0),null!=a&&null!=a&&1!=a||null!=this.messages.ERROR_MESSAGE_TYPE&&"undefined"!=this.messages.ERROR_MESSAGE_TYPE&&(e=this.messages.ERROR_MESSAGE_TYPE+e),this.setMessageAreaStyle("2"),dojo.byId("ErrorMessageText").innerHTML=e,this.showHideMessageArea(t),dojo.byId("MessageArea").focus(),setTimeout("dojo.byId('ErrorMessageText').focus()",1e3)},setMessageAreaStyle:function(e){null!=dojo.byId("MessageArea")&&(dojo.byId("MessageArea").className="msgpopup"+e)},displayStatusMessage:function(e,t){null!=t&&null!=t||(t=0),this.setMessageAreaStyle("1"),dojo.byId("ErrorMessageText").innerHTML=e,this.showHideMessageArea(t),dojo.byId("MessageArea").focus(),setTimeout("dojo.byId('ErrorMessageText').focus()",1e3)},hideAndClearMessage:function(){null!=dojo.byId("ErrorMessageText")&&(dojo.byId("ErrorMessageText").innerHTML=""),null!=dojo.byId("MessageArea")&&(dojo.byId("MessageArea").style.display="none")},adjustCoordinates:function(e){var t,a,r;"none"!=dojo.style("MessageArea","display")&&(r=dojo.byId("page"),t=dojo.byId("MessageArea"),null!=r&&null!=t&&(r=(a=dojo.coords(r,!0)).w,dojo.isSafari&&(r=dojo.style("page","width")),null!=e&&null!=e||(e=0),dojo.style(t,{width:r+20+"px",left:a.x-10+"px",top:a.y+e+"px"})))},formErrorHandle:function(e,t){this.formErrorHandleClient(e.errorMessageParam,e.errorMessage)},formErrorHandleClient:function(e,t){var a,e=dojo.byId(e);null!=t?e&&((a=$("<div />").text(t)).dialog({create:function(){setTimeout(function(){a.dialog("destroy")},5e3)}}),this.identifier):console.debug("formErrorHandleClient: The error message is null.")},clearCurrentIdentifier:function(){this.identifier=""},emptyFunc:function(e){},containsDoubleByte:function(e){for(var t=new String(e),a=0;a<t.length;a++)if(chr=t.charCodeAt(a),127<chr)return!0;return!1},isValidEmail:function(e){return!this.containsDoubleByte(e)&&(0==e.length||!(e.length<5)&&(!(0<e.indexOf(" "))&&(!(e.indexOf("@")<1)&&(!(e.lastIndexOf(".")<e.indexOf("@")+2)&&!(e.lastIndexOf(".")>=e.length-2)))))},isValidUTF8length:function(e,t){return!(this.utf8StringByteLength(e)>t)},utf8StringByteLength:function(e){if(null===e)return 0;var t=String(e),a=t.length;for(i=0;i<t.length;i++)chr=t.charCodeAt(i),127<chr&&(a+=1),2047<chr&&(a+=1);return a},IsNumeric:function(e,t){var a;a=t?"0123456789.":"0123456789";var r,o=!0;for(i=0;i<e.length&&1==o;i++)r=e.charAt(i),-1==a.indexOf(r)&&(o=!1);return o},IsValidPhone:function(e){var t,a=!0;for(i=0;i<e.length&&1==a;i++)t=e.charAt(i),-1=="0123456789()-+ ".indexOf(t)&&(a=!1);return a}}),dojo.addOnLoad(function(){MessageHelper.setMessage("US_ZIP_ERROR","Please enter a valid US address, city or Zip Code."),MessageHelper.setMessage("ERROR_RETRIEVE_PRICE","The store has encountered a problem processing the last request. Please try again. If the problem persists, contact us for assistance."),MessageHelper.setMessage("ERR_RESOLVING_SKU","Your selection is either incomplete or not in stock. Please be sure to supply a value for each attribute or consider a different combination of values."),MessageHelper.setMessage("QUANTITY_INPUT_ERROR","The value in the Quantity field is invalid. Ensure the value is a positive integer and try again."),MessageHelper.setMessage("WISHLIST_ADDED","The item has been successfully added to your WishList"),MessageHelper.setMessage("SHOPCART_ADDED","The item has been successfully added to your shopping cart"),MessageHelper.setMessage("SHOPCART_REMOVEITEM","The item was removed from the Shopping Cart."),MessageHelper.setMessage("ERROR_CONTRACT_EXPIRED_GOTO_ORDER","Expired contract: go to order"),MessageHelper.setMessage("ERROR_Logon_modal_EmailInvalid","Please enter a valid email address."),MessageHelper.setMessage("ERROR_LOGON_MODEL_EMAIL_CONFIRM","Please re-enter your email address."),MessageHelper.setMessage("ERROR_PASSWORD_VALID","Please enter a valid password."),MessageHelper.setMessage("ERROR_PASSWORD_UPDATE_VALID","Password does not meet the requirements."),MessageHelper.setMessage("ERROR_EMAIL_MISMATCH","The email addresses you entered do not match."),MessageHelper.setMessage("ERROR_RecipientTooLong","The value entered in the recipient field is too long."),MessageHelper.setMessage("ERROR_FirstNameTooLong","The value entered in the first name field is too long."),MessageHelper.setMessage("ERROR_LastNameTooLong","The value entered in the first name field is too long."),MessageHelper.setMessage("ERROR_MiddleNameTooLong","The value entered in the middle name field is too long."),MessageHelper.setMessage("ERROR_AddressTooLong","The value entered in the street address field is too long."),MessageHelper.setMessage("ERROR_CityTooLong","The value entered in the city field is too long."),MessageHelper.setMessage("ERROR_StateTooLong","The value entered in the state field is too long."),MessageHelper.setMessage("ERROR_CountryTooLong","The value entered in the country/region field is too long."),MessageHelper.setMessage("ERROR_ZipCodeTooLong","The value entered in the ZIP code field is too long."),MessageHelper.setMessage("ERROR_EmailTooLong","The value entered in the email field is too long."),MessageHelper.setMessage("ERROR_PhoneTooLong","The value entered in the phone number field is too long."),MessageHelper.setMessage("ERROR_RecipientEmpty","The recipient field cannot be empty."),MessageHelper.setMessage("ERROR_LastNameEmpty","Please provide your last name."),MessageHelper.setMessage("ERROR_MiddleNameEmpty","The middle name field cannot be empty."),MessageHelper.setMessage("ERROR_AddressEmpty","Please provide a valid address."),MessageHelper.setMessage("ERROR_CityEmpty","Please provide a valid city."),MessageHelper.setMessage("ERROR_StateEmpty","Please select a valid state."),MessageHelper.setMessage("ERROR_CountryEmpty","The country/region field cannot be empty."),MessageHelper.setMessage("ERROR_ZipCodeEmpty","Please provide a valid zip code."),MessageHelper.setMessage("ERROR_EmailEmpty","Please provide a valid email address."),MessageHelper.setMessage("ERROR_FirstNameEmpty","Please provide your first name."),MessageHelper.setMessage("ERROR_INVALIDEMAILFORMAT","The email entered is not in a valid format."),MessageHelper.setMessage("ERROR_MESSAGE_TYPE","Error:message type"),MessageHelper.setMessage("ERROR_INVALIDPHONE","The phone number entered is not in a valid format."),MessageHelper.setMessage("ERROR_PromoEmpty","Error: promo is empty"),MessageHelper.setMessage("ERROR_INVALIDPHONE","The phone number entered is not in a valid format."),MessageHelper.setMessage("ERROR_PhonenumberEmpty","Please provide a valid phone number in the following format: xxx-xxx-xxxx."),MessageHelper.setMessage("ERROR_RecipientInvalid","Error: Recipient is invalid"),MessageHelper.setMessage("ERROR_FirstNameInvalid","Please provide your first name."),MessageHelper.setMessage("ERROR_LastNameInvalid","Please provide your last name. "),MessageHelper.setMessage("ERROR_InvalidFieldChar",'This field may not contain the characters "!" or "#".'),MessageHelper.setMessage("ERROR_UPDATE_FIRST","The shipping information has been modified. Please click Update before continuing."),MessageHelper.setMessage("SHIPPING_INVALID_ADDRESS","Please select a valid address"),MessageHelper.setMessage("ERROR_QUICKCHECKOUT_ADDRESS_CHANGE","Please use My Account to change your quick checkout profile address."),MessageHelper.setMessage("REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR","The requested shipping date must be a future date."),MessageHelper.setMessage("ERROR_ShippingInstructions_TooLong","The value entered in the Shipping Instructions field is too long."),MessageHelper.setMessage("PAST_DATE_ERROR","Error: past date"),MessageHelper.setMessage("SCHEDULE_ORDER_MISSING_START_DATE","Error: order missing start date"),MessageHelper.setMessage("SCHEDULE_ORDER_MISSING_FREQUENCY","Error: order missing frequency"),MessageHelper.setMessage("ERROR_SWITCH_SINGLE_SHIPMENT","Error on switching to single shipment"),MessageHelper.setMessage("ERROR_LOGON_EMAIL","Please provide a valid email address."),MessageHelper.setMessage("ERROR_PasswordEmpty","The password field cannot be empty."),MessageHelper.setMessage("SELECT_BILLINGADDRESS_ERROR","Error: you must select a billing address"),MessageHelper.setMessage("ERROR_PromoEmpty","Error: promo Empty"),MessageHelper.setMessage("ERROR_Password_checks","Password does not meet the requirements."),MessageHelper.setMessage("ERROR_SHIPPING_METHOD_UPDATED","Your Shipping method has been updated, please verify your shipping info."),$("#clickableErrorMessage").on("click",function(){MessageHelper.hideMessageArea()}),$("#clickableErrorMessage").on("keypress",function(){MessageHelper.hideMessageArea()}),$("clickableErrorMessageImg").on("click",function(){MessageHelper.hideMessageArea()}),$("clickableErrorMessageImg").on("keypress",function(){MessageHelper.hideMessageArea()})}),function(e){"use strict";function u(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function i(e,t,a,r,o,s){return u((s=u(u(t,e),u(r,s)))<<(o=o)|s>>>32-o,a)}function g(e,t,a,r,o,s,n){return i(t&a|~t&r,e,t,o,s,n)}function p(e,t,a,r,o,s,n){return i(t&r|a&~r,e,t,o,s,n)}function m(e,t,a,r,o,s,n){return i(t^a^r,e,t,o,s,n)}function _(e,t,a,r,o,s,n){return i(a^(t|~r),e,t,o,s,n)}function n(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var a,r,o,s,n=1732584193,i=-271733879,d=-1732584194,l=271733878,c=0;c<e.length;c+=16)i=_(i=_(i=_(i=_(i=m(i=m(i=m(i=m(i=p(i=p(i=p(i=p(i=g(i=g(i=g(i=g(r=i,d=g(o=d,l=g(s=l,n=g(a=n,i,d,l,e[c],7,-680876936),i,d,e[c+1],12,-389564586),n,i,e[c+2],17,606105819),l,n,e[c+3],22,-1044525330),d=g(d,l=g(l,n=g(n,i,d,l,e[c+4],7,-176418897),i,d,e[c+5],12,1200080426),n,i,e[c+6],17,-1473231341),l,n,e[c+7],22,-45705983),d=g(d,l=g(l,n=g(n,i,d,l,e[c+8],7,1770035416),i,d,e[c+9],12,-1958414417),n,i,e[c+10],17,-42063),l,n,e[c+11],22,-1990404162),d=g(d,l=g(l,n=g(n,i,d,l,e[c+12],7,1804603682),i,d,e[c+13],12,-40341101),n,i,e[c+14],17,-1502002290),l,n,e[c+15],22,1236535329),d=p(d,l=p(l,n=p(n,i,d,l,e[c+1],5,-165796510),i,d,e[c+6],9,-1069501632),n,i,e[c+11],14,643717713),l,n,e[c],20,-373897302),d=p(d,l=p(l,n=p(n,i,d,l,e[c+5],5,-701558691),i,d,e[c+10],9,38016083),n,i,e[c+15],14,-660478335),l,n,e[c+4],20,-405537848),d=p(d,l=p(l,n=p(n,i,d,l,e[c+9],5,568446438),i,d,e[c+14],9,-1019803690),n,i,e[c+3],14,-187363961),l,n,e[c+8],20,1163531501),d=p(d,l=p(l,n=p(n,i,d,l,e[c+13],5,-1444681467),i,d,e[c+2],9,-51403784),n,i,e[c+7],14,1735328473),l,n,e[c+12],20,-1926607734),d=m(d,l=m(l,n=m(n,i,d,l,e[c+5],4,-378558),i,d,e[c+8],11,-2022574463),n,i,e[c+11],16,1839030562),l,n,e[c+14],23,-35309556),d=m(d,l=m(l,n=m(n,i,d,l,e[c+1],4,-1530992060),i,d,e[c+4],11,1272893353),n,i,e[c+7],16,-155497632),l,n,e[c+10],23,-1094730640),d=m(d,l=m(l,n=m(n,i,d,l,e[c+13],4,681279174),i,d,e[c],11,-358537222),n,i,e[c+3],16,-722521979),l,n,e[c+6],23,76029189),d=m(d,l=m(l,n=m(n,i,d,l,e[c+9],4,-640364487),i,d,e[c+12],11,-421815835),n,i,e[c+15],16,530742520),l,n,e[c+2],23,-995338651),d=_(d,l=_(l,n=_(n,i,d,l,e[c],6,-198630844),i,d,e[c+7],10,1126891415),n,i,e[c+14],15,-1416354905),l,n,e[c+5],21,-57434055),d=_(d,l=_(l,n=_(n,i,d,l,e[c+12],6,1700485571),i,d,e[c+3],10,-1894986606),n,i,e[c+10],15,-1051523),l,n,e[c+1],21,-2054922799),d=_(d,l=_(l,n=_(n,i,d,l,e[c+8],6,1873313359),i,d,e[c+15],10,-30611744),n,i,e[c+6],15,-1560198380),l,n,e[c+13],21,1309151649),d=_(d,l=_(l,n=_(n,i,d,l,e[c+4],6,-145523070),i,d,e[c+11],10,-1120210379),n,i,e[c+2],15,718787259),l,n,e[c+9],21,-343485551),n=u(n,a),i=u(i,r),d=u(d,o),l=u(l,s);return[n,i,d,l]}function d(e){for(var t="",a=32*e.length,r=0;r<a;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function l(e){var t=[];for(t[(e.length>>2)-1]=void 0,r=0;r<t.length;r+=1)t[r]=0;for(var a=8*e.length,r=0;r<a;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function r(e){for(var t,a="",r=0;r<e.length;r+=1)t=e.charCodeAt(r),a+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return a}function a(e){return unescape(encodeURIComponent(e))}function o(e){return d(n(l(e=a(e)),8*e.length))}function s(e,t){return function(e,t){var a,r=l(e),o=[],s=[];for(o[15]=s[15]=void 0,16<r.length&&(r=n(r,8*e.length)),a=0;a<16;a+=1)o[a]=909522486^r[a],s[a]=1549556828^r[a];return t=n(o.concat(l(t)),512+8*t.length),d(n(s.concat(t),640))}(a(e),a(t))}function t(e,t,a){return t?a?s(t,e):r(s(t,e)):a?o(e):r(o(e))}"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.md5=t}(this),function(a){var e=new function(e){this.configs={debug:!1},e&&function(e,t,a){if(t)for(var r in t)a&&-1===a.indexOf(r)||(e[r]=t[r])}(this.configs,e),this.removedKeys={},this.functionArraysMap={},this.TYPES={AFTER_BODY_START:{value:0,name:"AFTER_BODY_START"},BEFORE_BODY_END:{value:1,name:"BEFORE_BODY_END"}},this.removeFunctions=function(e){if(e){var t=this;function a(e){t.removedKeys[e]=e}if(e.constructor===Array)for(var r=0;r<e.length;r++)a(e[r]);else("string"==typeof e||e instanceof String)&&a(e)}},this.addFunction=function(e,t,a){if(a&&a.name||(a=this.TYPES.BEFORE_BODY_END),this.removedKeys[e])return!1;var r=this.functionArraysMap[a.name];r||(this.functionArraysMap[a.name]=r={});a=r[e];return a||(r[e]=a=[]),a.push(t),!0},this.addFunctionAfterBodyStart=function(e,t){this.addFunction(e,t,this.TYPES.AFTER_BODY_START)},this.execute=function(e,t){e&&e.name||(e=this.TYPES.BEFORE_BODY_END);var a=this.functionArraysMap[e.name];if(a)for(var r in a=d(a,t))if(this.removedKeys[r])i("EspotManager - "+e.name+' : functions not executed for key "'+r+'"');else{var o=a[r];if(o&&1<=o.length){for(var s=0;s<o.length;s++){var n=o[s];n&&n()}i("EspotManager - "+e.name+" : executed "+o.length+' function(s) for key "'+r+'"')}}l(e,t)},this.reportLog=function(e,t){e||t?l(e,t,!0):(l(this.TYPES.AFTER_BODY_START,null,!0),l(this.TYPES.BEFORE_BODY_END,null,!0))};var n=this;function i(e,t){(t||n.configs.debug)&&a.console&&"function"==typeof a.console.log&&console.log(e)}function d(e,t){if(!t)return e;var a,r={};for(a in e)-1!==t.indexOf(a)&&(r[a]=e[a]);return r}function l(e,t,a){var r='*** EspotManagerJS - REPORT for "'+e.name+'" ***\n\n';if(1<=n.removedKeys.length?r+='--- keys to remove:\n"'+Object.keys(n.removedKeys).join('"\n"')+'"':r+="--- no keys to remove",r+="\n",e=n.functionArraysMap[e.name]){var o,s=[];for(o in e=d(e,t))n.removedKeys[o]||s.push(o);r+='--- keys to execute:\n"'+s.join('"\n"')+'"'}else r+="--- no functions to execute";i(r,a)}};a.EspotManagerJS=e}(window);var currentTopPosition,zipRegex,EspotManagerJS=window.EspotManagerJS;function getCustId(){return constants.ajaxParams.userId||""}function closeUpdatePsw(){return $(".header-update-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".background-update-reset").css("display","none"),$("#new-password-update").val(""),$("#confirm-new-password-update").val(""),$("#logonPasswordOld").val(""),!1}function showPassword(e){var t=document.getElementById(e),e=document.getElementById(e+"-icon");"password"===t.type?(t.type="text",e.querySelector(".hide-password").style.display="",e.querySelector(".show-password").style.display="none"):(t.type="password",e.querySelector(".show-password").style.display="",e.querySelector(".hide-password").style.display="none")}function checkPswDouble(e,t){var a=document.getElementById(e).value,r=document.getElementById("eight-char-"+t),o=document.getElementById("upper-char-"+t),s=document.getElementById("lower-char-"+t),n=document.getElementById("number-char-"+t),e=document.getElementById("special-char-"+t);""!==a?(8<=a.length?(r.classList.add("correct"),r.classList.remove("error")):(r.classList.add("error"),r.classList.remove("correct")),hasUpperCase(a)?(o.classList.add("correct"),o.classList.remove("error")):(o.classList.add("error"),o.classList.remove("correct")),hasLowerCase(a)?(s.classList.add("correct"),s.classList.remove("error")):(s.classList.add("error"),s.classList.remove("correct")),hasNumber(a)?(n.classList.add("correct"),n.classList.remove("error")):(n.classList.add("error"),n.classList.remove("correct")),hasSpecialChar(a)?(e.classList.add("correct"),e.classList.remove("error")):(e.classList.add("error"),e.classList.remove("correct"))):clearErrorDouble(t)}function clearErrorDouble(e){var t=document.getElementById("eight-char-"+e),a=document.getElementById("upper-char-"+e),r=document.getElementById("lower-char-"+e),o=document.getElementById("number-char-"+e),e=document.getElementById("special-char-"+e);t.classList.remove("error"),t.classList.remove("correct"),a.classList.remove("error"),a.classList.remove("correct"),r.classList.remove("error"),r.classList.remove("correct"),o.classList.remove("error"),o.classList.remove("correct"),e.classList.remove("error"),e.classList.remove("correct")}function hasUpperCase(e){return/[A-Z]/.test(e)}function hasLowerCase(e){return/[a-z]/.test(e)}function hasNumber(e){return/\d/.test(e)}function hasSpecialChar(e){return/[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(e)}function isUserAuthenticated(){var e="not authenticated";return e=constants.ajaxParams.loggedIn?"authenticated":e}function getUserRegistrationStatus(){var e="undefined";return e=constants.ajaxParams.loggedIn?"registered":e}function setCookie(e,t,a){var r=new Date;r.setDate(r.getDate()+a);r=escape(t)+(null==a?"":"; expires="+r.toUTCString());document.cookie=e+"="+r}function isCorrectDate(e,t,a){try{var r=e+"/"+t+"/"+a;$.datepicker.parseDate("mm/dd/yy",r),valid=!0}catch(e){utag_data.form_field="invalid date",valid=!1}return valid}function read_cookie(e){return(e=new RegExp("(?:^|; )"+e+"=([^;]*)").exec(document.cookie))?e[1]:null}function validateAge(e,t,a,r){var o=!1,r=r-e.birth_year.value;return(18<r||18==r&&(e.birth_month.value<t||e.birth_month.value==t&&e.birth_date.value<=a))&&(o=!0),validateAge||error_list.push("not 18"),o}function goToDesktop(){return setCookie("WC_MOBILEDEVICEID","0",null),location.reload(!0),!1}function isMilitaryState(e){return"AA"==e||"AE"==e||"AP"==e||"Armed Forces Americas"==e||"Armed Forces Europe"==e||"Armed Forces Pacific"==e}function isMilitaryCity(e){return"APO"==e.toUpperCase()||"FPO"==e.toUpperCase()}function isPOBox(e){var t=new RegExp("[PO.]*\\s?B(ox)?.*\\d+","i");return!!e&&(/\b[P|p]*(OST|ost)*\.*\s*[O|o|0]*(ffice|FFICE)*\.*\s*[B|b][O|o|0][X|x]\b/.test(e)||t.test(e))}function setupValidation(){$.validator.addMethod("validEmail",function(e,t){if(""==e)return!0;var a=e.indexOf("@"),r=e.substr(a+1),r=r.substr(0,r.indexOf("."));if(r.lastIndexOf("-")==r.length-1||r.indexOf("-")!=r.lastIndexOf("-"))return!1;a=e.substr(0,a);return a.lastIndexOf("_")!=a.length-1&&a.lastIndexOf(".")!=a.length-1&&a.lastIndexOf("-")!=a.length-1&&(str=/^([a-zA-Z0-9]+[\._-]??)*([a-zA-Z0-9]+[_]??)+@([a-zA-Z0-9]+[-]??)+(\.[a-zA-Z0-9]+)*(\.[a-zA-Z]{2,3})$/,str.test(e))},MessageHelper.messages.ERROR_EmailEmpty),$.validator.addMethod("postalFormatCheck",function(e,t){var a=/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i,r=/^\d{5}(-\d{4})?$/;return""==$("#storeCountryName").val()||"US"!=$("#storeCountryName").val()?new RegExp(a).test(e):new RegExp(r).test(e)}),$.validator.addMethod("phoneValidation",function(e,t){if(0!=e.length)return e.length==t.maxLength;var a=$(this).closest(".row").children(":radio").is(":checked");return $(t).closest(".row").find("input:text").each(function(){a=a||0<$(this).val().length}),!a},"Please enter a valid number"),$.validator.addMethod("zipCode",function(e,t){var a=!1,e=e;return null==zipRegex?(regexp=new RegExp(/^\d{5}(-\d{4})?$/),regexp.test(e)&&(a=!0)):(regexp=new RegExp(zipRegex),a=!!regexp.test(e)),a},"* invalid"),$.validator.addMethod("date",function(e,t){var a=$(t).parents("form"),r=a.find(".validate-day").val(),t=a.find(".validate-month").val(),a=a.find(".validate-year").val();return!(0!=a||0!=r||0!=t)||function(e,t,a){if(!/^(\d{8})$/.test(""+e+t+a))return!1;var r=parseInt(e,10),o=parseInt(t,10),s=parseInt(a,10),e=r%4==0&&(r%100!=0||r%400==0);{if(o<1||12<o)return!1;if(s<1||31<s)return!1;if((4==o||6==o||9==o||11==o)&&31==s)return!1;if(2==o&&(29<s||29==s&&!e))return!1}t=(new Date).getFullYear(),a=(new Date).getMonth()+1,e=(new Date).getDate();if(t<=r&&a<=o&&e<s)return!1;return!0}(a,t,r)},"* invalid"),$.validator.addMethod("contactQuantity",function(e,t,a){return 0<parseInt($(a.left).val(),10)+parseInt($(a.right).val(),10)}),$.validator.addMethod("age",function(e,t){var a=$(t).parents("form"),r=a.find(".validate-day").val(),t=a.find(".validate-month").val(),a=a.find(".validate-year").val();return!(0!=a||0!=r||0!=t)||MyAccountDisplayExtJS.validateAge(new Date(a,t-1,r))},"* invalid"),jQuery.validator.addMethod("zip",function(e,t){e=$.trim(e);return e.match(constants.regex.zip.usa)||e.match(constants.regex.zip.canada)},MessageHelper.messages.ERROR_ZipCodeEmpty),$.validator.addMethod("dotPos_formatCheck",function(e){return 2<=e.length-(e.lastIndexOf(".")+1)},MessageHelper.messages.ERROR_EmailEmpty),$.validator.addMethod("specialCharacters",function(e){var t=e,e=!1;return e=-1==t.indexOf("!")&&-1==t.indexOf("#")?!0:e},"* invalid"),""!=$("#storeCountryName").val()&&"US"==$("#storeCountryName").val()?$.validator.messages.postalFormatCheck="Please enter a valid zip code":$.validator.messages.postalFormatCheck="Please enter a valid postal code",$(".UpdatePasswordUpdateSubmitForm").validate({onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",rules:{logonId:{required:!0,email:!0},logonPasswordOld:{required:!0,minlength:2},logonPassword:{required:!0,minlength:8,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:!0},logonPasswordVerify:{required:!0,equalTo:".logonPassword_updateModel"}},messages:{logonId:{required:MessageHelper.messages.ERROR_Logon_model_EmailInvalid,email:MessageHelper.messages.ERROR_Logon_model_EmailInvalid},logonPasswordOld:{required:MessageHelper.messages.OLD_PASSWORD_EMPTY_ERROR,minlength:MessageHelper.messages.OLD_PASSWORD_EMPTY_ERROR},logonPassword:{required:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,minlength:MessageHelper.messages.ERROR_PASSWORD_UPDATE_VALID,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:MessageHelper.messages.ERROR_PASSWORD_UPDATE_VALID},logonPasswordVerify:{required:MessageHelper.messages.PASSWORD_UPDATE_CONFIRM_ERROR,equalTo:MessageHelper.messages.ERROR_PASSWORD_MISMATCH}},showErrors:function(e,t){console.log(e,t),this.defaultShowErrors()}}),$(".UpdatePasswordUpdateSubmitForm").on("submit",function(){return function(e){var t=$(e),a=(new Date).valueOf();startTime=(new Date).valueOf();e=a-startTime,a=$(".sessionDuration").val()||"";{var s;a<=e&&""!=a?window.location.reload():t.valid()&&($("#successPassword").hide(),s=$("#passwordUpdateEmailInput").val(),t=$(".WC_PasswordUpdateForm_FormInput_logonPasswordOld_In_Logon_1").val(),$(".autoPopulatedEmailHiddenDesktop").val(),t={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,logonId:s,logonPassword:t,errorViewName:"LogonAjaxView",reLogonURL:"LogonAjaxView",rememberMe:"true",URL:"LogonAjaxView",temp_signinPassword:""},$.ajax({url:getAbsoluteURL(!0)+"LogonAjax",data:t,type:"POST",dataType:"json",success:function(e){if(e.success){var t=$(".UpdatePasswordUpdateSubmitForm").serializeArray(),a=[];myperksURL=null;for(var r=0;r<t.length;r++){var o=t[r];"URL"==o.name?(o.value,a.push({name:"URL",value:"ResetPasswordAjaxView"})):"logonId"==o.name?a.push({name:"logonId",value:s}):a.push(o)}$.ajax({url:getAbsoluteURL(!0)+"ResetPassword",data:a,type:"POST",dataType:"json",success:function(e){var t,a,r,o;e.success?($("#guestShopperContinue")[0]&&(t=document.getElementById("userType").value,a=document.getElementById("nextStepURL").value,r=document.getElementById("PhysicalStoreSelectionURL").value,setTimeout(function(){CheckoutHelperJS.canCheckoutContinue(t)&&CheckoutHelperJS.updateShoppingCart(document.ShopCartForm,!0)&&ShipmodeSelectionExtJS.guestShopperContinue(a,r)},500)),$(".schedule-exam-reset")[0]?(sessionStorage.setItem("psw_reset",$("#new-password-update").val()),$(".schedule-exam-reset")[0].click()):(o="/myAccount?myAcctMain=1&catalogId="+constants.ajaxParams.catalogId+"&langId="+constants.ajaxParams.langId+"&storeId="+constants.ajaxParams.storeId,window.location=o)):$(".PasswordUpdateFailureResponseMessageDiv").html(e.errorMessage)},error:function(e,t,a){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.")}})}else"20101"==e.errorCode?$(".WC_PasswordUpdateForm_FormInput_EmailAddress").addClass("required").removeClass("valid resetHighlight"):"20301"==e.errorCode&&$(".WC_PasswordUpdateForm_FormInput_logonPasswordOld_In_Logon_1").addClass("required").removeClass("valid resetHighlight"),$(".PasswordUpdateFailureResponseMessageDiv").html(e.errorMessage).show(),tealium_data2track.push({id:"Error",Error_Source:"User",Error_Code:"Form Filling Error",Error_Message:e.errorMessage,Error_Details:e.errorMessage})},error:function(e,t,a){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.").show()}}))}}($(this)),!1}),$("#LogonDialogForm").validate({onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",rules:{logonId:{required:!0,email:!0,validEmail:!0},logonPassword:{required:!0,maxlength:32}},messages:{logonId:MessageHelper.messages.ERROR_Logon_modal_EmailInvalid,logonPassword:MessageHelper.messages.ERROR_Logon_modal_PasswordEmpty}}),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$.validator.addMethod("atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial",function(e,t){return/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~])(.*)$/.test(e)}),$("#userRegModelForm").validate({onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",rules:{logonId:{required:!0,email:!0,validEmail:!0},logonIdVerify:{required:!0,email:!0,validEmail:!0,equalTo:"#logonId_regModelField"},logonPassword:{required:!0,minlength:8,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:!0},logonPasswordVerify:{required:!0,equalTo:"#logonPassword_regModelField",minlength:6,maxlength:32},optin_18yrs:{required:!0}},messages:{logonId:MessageHelper.messages.ERROR_Logon_modal_EmailInvalid,logonIdVerify:{required:MessageHelper.messages.ERROR_Logon_modal_EmailInvalid,email:MessageHelper.messages.ERROR_Logon_modal_EmailInvalid,equalTo:MessageHelper.messages.ERROR_Logon_modal_EmailMatch,validEmail:MessageHelper.messages.ERROR_Logon_modal_EmailInvalid},logonPassword:{required:MessageHelper.messages.ERROR_Logon_modal_PasswordEmpty,minlength:MessageHelper.messages.ERROR_Password_checks,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:MessageHelper.messages.ERROR_Password_checks},logonPasswordVerify:{required:MessageHelper.messages.ERROR_Logon_modal_PasswordEmpty,minlength:MessageHelper.messages.ERROR_Logon_modal_PasswordEmpty,maxlength:MessageHelper.messages.ERROR_Logon_modal_PasswordEmpty,equalTo:MessageHelper.messages.ERROR_Logon_modal_PasswordMatch}},invalidHandler:function(e,t){tealium_data2track.push({id:"Error",Error_Source:"User",Error_Code:"Form Filling Error",Error_Message:t.errorList[0].message,Error_Details:t.errorList[0].message})},errorPlacement:function(e,t){console.log($(t).attr("name")),"optin_18yrs"==t.attr("name")?e.insertAfter($(t).next()):e.insertAfter(t)}}),$.validator.addMethod("notEqualTo",function(e,t,a){return e!=$(a).val()},"Please enter a different value"),$("#PasswordUpdateSubmitForm").validate({onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",rules:{logonPasswordOld:{required:!0},logonPassword:{required:!0,minlength:8,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:!0,notEqualTo:"input[name=logonPasswordOld]"},logonPasswordVerify:{required:!0,equalTo:"#logonPassword_updateModal"}},messages:{logonPasswordOld:{required:MessageHelper.messages.OLD_PASSWORD_EMPTY_ERROR},logonPassword:{required:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,minlength:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,notEqualTo:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR},logonPasswordVerify:{required:MessageHelper.messages.PASSWORD_UPDATE_CONFIRM_ERROR,equalTo:MessageHelper.messages.PASSWORD_UPDATE_MISMATCH}},submitHandler:function(e){$(".success").hide(),$("#PasswordUpdateFailureResponseMessageDiv").html(""),$.ajax({url:getAbsoluteURL(!0)+"AjaxResetPassword",data:$(e).serializeArray(),dataType:"jsonp",crossDomain:!0,success:function(e){e.success?$("#PasswordUpdateSubmitForm").parents("#header-set-a-new-password-modal").length?window.location=$("#WC_PasswordResetForm_FormInput_Forward_In_ResetPasswordForm_1").val():$("#PasswordUpdateSubmitForm .fe.buttons").before('<div class="success">Your changes have been updated successfully.</div>'):$("#PasswordUpdateFailureResponseMessageDiv").html(e.errorMessage)},error:function(e,t,a){$("#PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.")}})}}),$.validator.addMethod("cvv",function(e){return e==/^[0-9]{3,4}$/.exec(e)},"Invalid CVV value")}function getParameterByName(e,t){t=(t=t||window.location.href).toLowerCase(),e=e.replace(/[\[\]]/g,"\\$&").toLowerCase();t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function resetPassword(){var e=document.ResetPasswordForm,t={};t.challengeAnswer=e.challengeAnswer.value,t.state=e.state.value,t.URL=e.URL.value,t.errorViewName=e.errorViewName.value,t.logonId=e.logonId.value,t.email1=e.logonId.value,t.emailType="forgotpassword",t.senderEmail=e.logonId.value,t.senderName=e.logonId.value,t.email1=e.logonId.value,t.receiveEmail="true",t.recipientEmail=e.logonId.value,t.receiveEmail="true",t.fromName=e.logonId.value,t.pdp_18yrs="true",t.storeId=e.storeId.value,invokeResetPasswordService(t)}function invokeResetPasswordService(e){return $.ajax({url:getAbsoluteURL()+"AjaxResetPassword",data:e,dataType:"html",type:"post",success:function(e){try{var t=e;if(null!=(t="string"==typeof t?filterAjaxResponse(e):t).ErrorMessageJson&&!t.ErrorMessageJson.success||0==t.success){var a=$("#ResetPasswordErrorMsg").html();0<$("#ResetPasswordFailureResponseMessageDiv").length&&$("#ResetPasswordFailureResponseMessageDiv").html(t.errorMessage),0<$("#examResetPasswordFailureResponseMessageDiv").length&&$("#examResetPasswordFailureResponseMessageDiv").html(a)}else{if(null!=t.PASSWORDEXPIRED)return $("#header-reset-password-modal").css("display","none"),$("#header-set-a-new-password-modal").css("display","block"),$(".sign-in-link").addClass("open"),removeUIoverlay(),addUIoverlay(),!1;0<$("#ResetPasswordSuccessFullResponseMessageDiv").length&&($("#ResetPasswordFailureResponseMessageDiv").html(""),$("#ResetPasswordFormContainer").addClass("hide"),$("#header-reset-password-done-modal").removeClass("hide")),0<$("#examResetPasswordSuccessFullResponseMessageDiv").length&&$("#examResetPasswordSuccessFullResponseMessageDiv").html(MessageHelper.messages.PASSWORD_RESET_SUCCESS)}}catch(e){console.error(e)}},error:function(e){if(e)try{var t=filterAjaxResponse(e.responseText);t&&(t.errorMessage?0<$("#ResetPasswordFailureResponseMessageDiv").length&&$("#ResetPasswordFailureResponseMessageDiv").html(t.errorMessage):t.errorMessageKey&&0<$("#ResetPasswordFailureResponseMessageDiv").length&&$("#ResetPasswordFailureResponseMessageDiv").html(t.errorMessageKey))}catch(e){console.error(e)}}})}function removeEmptyUtagEntries(a){$.each(a,function(e,t){null!=t&&(""!=t&&null!=t||delete a[e],"string"==typeof t?(t=(t=(t=t.replace(/\\/g,"\\\\")).replace(/'/g,"\\'")).replace(/"/g,'\\"'),document.title=document.title.split(String.fromCharCode(8217)).join("")):a.length<=0&&delete a[e],a[e]=t)})}function filterAjaxResponse(e){return e&&"string"==typeof e&&e.length?$.parseJSON(e.replace(/^\s*\/\*/,"").replace(/\*\/\s*$/,"")):e}function clearResetPasswordFormErrorMessage(){0<$("#ResetPasswordFailureResponseMessageDiv").length&&$("#ResetPasswordFailureResponseMessageDiv").html("")}function utagLinkSafe(){try{utag.link.apply(utag,arguments)}catch(e){console.error(e)}}function utagViewSafe(){try{utag.view.apply(utag,arguments)}catch(e){console.error(e)}}var error_list=new Array;function removeExamCookies(){$.cookie("exam1","",{expires:-1,path:"/"}),$.cookie("exam2","",{expires:-1,path:"/"}),$.cookie("exam3","",{expires:-1,path:"/"}),$.cookie("eapptsUserId","",{expires:-1,path:"/"})}function isUserAuthenticated(){var e="not authenticated";return e=constants.ajaxParams.loggedIn?"authenticated":e}function getUserRegistrationStatus(){var e="";return e=constants.ajaxParams.loggedIn?"registered":e}function getUserInsuranceEligibilityStatus(){var e="not synced";return e=constants.ajaxParams.insuranceCheckEligibility?"synced":e}function initStickyAddToCart(){var t;0<$(".to-cart-total").length&&($("body.expanded, html.expanded").css("padding-bottom","110px"),t=window.onscroll,window.onscroll=function(e){$(".to-add-to-cart-container").outerHeight()+$(".to-add-to-cart-container").offset().top+$(".to-cart-total").outerHeight()>window.innerHeight+window.pageYOffset?$(".to-cart-total").css("position","unset"):$(".to-cart-total").css("position","fixed"),"function"==typeof oldScroll&&t(e)})}function updateFavoritesCount(e){$.get(getAbsoluteURL()+"AjaxMiniWishListDisplay",e,function(e){$("#favorites-tray").html(e)},"html")}function openFavesTray(){closeMainNav(),$(".js-close").click(),$("html, body").animate({scrollTop:0},250),$("#favorites-tray").css({minHeight:$(document).height()}),$("#favorites-tray").removeClass("hide");var e={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,cache:!1};$.get("AjaxGetWishListInfo",e,function(e){var r;e&&(e=e.replace(/^\s*\/\*/,"").replace(/\*\/\s*$/,""),e=$.parseJSON(JSON.stringify(e)),e=$.parseJSON(e),r=[],"false"!=e.success&&$.each(e,function(e,t){var a={};a.product_id=t.UPC,a.reg_price=t.price,a.category=t.category,r.push(a)}),(e={page_name:"",authentication_status:"",registration_status:"",country:"us",page_layout:"mobile",language:"en"}).authentication_status=isUserAuthenticated(),e.registration_status=getUserRegistrationStatus(),e.favorite_products=r,e.site_events={view_favorites:!0},callTrackAnalytics(e),$("#favorites-tray-button").addClass("active"),$("#favorites-tray").css({minHeight:$(document).height()}),$("#favorites-tray").removeClass("hide"),$("#favorites-tray").animate({left:0},1))})}function closeFavesTray(){$("#favorites-tray-button").removeClass("active");var e=$("#favorites-tray");e.animate({left:"0px"},100,function(){e.addClass("hide")})}function toggleFavesTray(){($("#favorites-tray-button").hasClass("active")?closeFavesTray:openFavesTray)()}function showStandardModal(e,t){e=$(e);if(e.length<1)return!1;e.dialog({modal:!0,resizeable:!1,draggable:!1,width:"520px",dialogClass:t+" standard-modal"})}function setupMainNav(){$("#navigation").css({left:-$(document).width()}),$(".hamburger").on("click",function(e){e.preventDefault(),toggleMainNav(),closeFavesTray()})}function openMainNav(){closeFavesTray();var e=$("#navigation");$(".hamburger").addClass("active"),e.css({left:-$(document).width()}),e.height($(document).height()-$("#headerContainer").height()),e.show(),e.animate({left:0},100)}function closeMainNav(){var e=$("#navigation");$(".hamburger").removeClass("active"),e.animate({left:-$(document).width()},100,function(){e.hide()})}function toggleMainNav(e){$(".hamburger").hasClass("active")?(closeMainNav(),$("footer").show()):(openMainNav(),$("footer").hide()),"function"==typeof e&&e()}function setupBrowseFilters(){$(".browse").on("click",function(){savePlacement(),$("#facets").dialog({modal:!0,draggable:!1,close:function(){$(window).scrollTop(getPlacement())}})}),$("h4",".faceted_searchCL #facets").not(".header").on("click",function(){$(this).toggleClass("collapsed")})}function setupDropDowns(){$(".selector",".accordion-menu").on("click",function(){return $(this).closest(".accordion-menu").toggleClass("active"),$(".accordion-menu").hasClass("active")?$("#chooserbrand").find(".sort-by-options li a").attr("tabindex","0"):$("#chooserbrand").find(".sort-by-options li a").attr("tabindex","-1"),!1})}function initColorCarousel(){$(".color-carousel").each(function(e,t){t=$(t);0==$("#plp").length&&0==t.find(".slick-track").length&&6<t.find(".icon").length&&t.slick({dots:!1,infinite:!1,arrows:!1,slidesToShow:6,slidesToScroll:6,responsive:[{breakpoint:415,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:375,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:320,settings:{slidesToShow:6,slidesToScroll:6}}]})})}function initPDPColorCarousel(){$(".change-colors-views").each(function(e,t){t=$(t);1==$("#pdp").length&&0==t.find(".slick-track").length&&6<t.find(".icon").length&&0==t.closest("#others")&&t.slick({dots:!1,infinite:!1,arrows:!1,slidesToShow:6,slidesToScroll:6,responsive:[{breakpoint:415,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:375,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:320,settings:{slidesToShow:6,slidesToScroll:6}}]})})}function initFaceShapeModal(){$(".what-frames").on("click",function(){savePlacement(),$("#face-shape-modal").dialog({modal:!0,resizeable:!1,draggable:!1,open:function(){$(window).scrollTop(0)},close:function(){$(window).scrollTop(getPlacement())}})})}function initPupModal(){$(".pup-distance").on("click",function(){savePlacement(),$("#pup-modal").dialog({modal:!0,resizeable:!1,draggable:!1,closeText:"",close:function(){$(window).scrollTop(getPlacement())}})})}function initAffirmAfterpayModal(){$(".affirm-afterpay-modal-trigger").on("click",function(){savePlacement(),$("#affirm-afterpay-modal").dialog({modal:!0,resizeable:!1,draggable:!1,closeText:"",close:function(){$(window).scrollTop(getPlacement())}}),document.querySelector('[aria-describedby="affirm-afterpay-modal"]').getElementsByTagName("button")[0].classList.add("changeStyleButton")})}function initInterrupter(){return!constants.ajaxParams.loggedIn&&($.cookie("interrupterCounter")<1&&0<$("#InterrupterModal").length&&($.cookie("interrupterCounter",1,{expires:7}),savePlacement(),$("#InterrupterModal").dialog({modal:!0,resizeable:!1,draggable:!1,close:function(){$(window).scrollTop(getPlacement())},autoOpen:!0})),!0)}function initPupCartModal(){$(".pup-cart").on("click",function(){savePlacement(),window.scrollTo(0,0),$("#pup-cart-modal").dialog({modal:!0,resizeable:!1,draggable:!1,closeText:"",close:function(){$(window).scrollTop(getPlacement())}})})}function ajaxAddToFavorites(n,i){var e={};e.storeId=constants.ajaxParams.storeId,e.catalogId=constants.ajaxParams.catalogId,e.langId=constants.ajaxParams.langId,e.catEntryId=n,e.URL="AjaxGetWishListInfo",$.post(getAbsoluteURL()+"GuestInterestItemAdd",e,function(e){i();var t=getBasicDLObject(),a=$("#pdpUPC").val(),r=[],o={},s=$("#currentUPC_"+n).val();o.product_id=s,void 0!==a?(t.page_name=["store front","product details"],o.reg_price=$("#currentPrice_"+s).val()):(s=$("#WC_CatalogEntryDBThumbnailDisplayJSPF_"+n+"_div_10").text().trim().replace("$",""),o.reg_price=s,"undefined"!=typeof pageNameArray&&(t.page_name=pageNameArray)),o.category=$("#currentCategory_"+n).val(),r.push(o),t.products=r,t.favorite_products=[],t.site_events={add_to_favorites:!0},callTrackAnalytics(t)})}function ajaxRemoveFromFavorites(n,i){var e={};e.storeId=constants.ajaxParams.storeId,e.catalogId=constants.ajaxParams.catalogId,e.langId=constants.ajaxParams.langId,e.catEntryId=n,e.URL="AjaxGetWishListInfo",$.post(getAbsoluteURL()+"GuestInterestItemDelete",e,function(e){i();var t={};t.storeId=constants.ajaxParams.storeId,t.catalogId=constants.ajaxParams.catalogId,t.langId=constants.ajaxParams.langId,t.catEntryId=n,t.URL="AjaxGetWishListInfo",$.get("AjaxGetWishListInfo",t,function(e){var r,t,a,o;e&&(e=e.replace(/^\s*\/\*/,"").replace(/\*\/\s*$/,""),o=$.parseJSON(JSON.stringify(e)),o=$.parseJSON(o),r=[],"false"!=o.success&&$.each(o,function(e,t){var a={};a.product_id=t.UPC,a.reg_price=t.price,a.category=t.category,r.push(a)}),s=getBasicDLObject(),t=$("#lensCategory").val(),a=[],e={},o=$("#currentUPC_"+n).val(),e.product_id=o,void 0!==t?(s.page_name=["store front","product details"],e.reg_price=$("#currentPrice_"+o).val()):(e.reg_price=$("#currentPrice_"+o).val(),"undefined"!=typeof pageNameArray&&(s.page_name=pageNameArray)),e.category=$("#currentCategory_"+n).val(),a.push(e),s.products=a,s.favorite_products=r,s.site_events={remove_from_favorites:!0},callTrackAnalytics(s));var s={};s.storeId=constants.ajaxParams.storeId,s.catalogId=constants.ajaxParams.catalogId,s.langId=constants.ajaxParams.langId,s.catEntryId=n,s.URL="AjaxGetWishListInfo",$.post(getAbsoluteURL()+"GuestInterestItemDelete",s,i)})})}function savePlacement(){currentTopPosition=$(window).scrollTop()}function getPlacement(){return currentTopPosition}function callTrackAnalytics(e){try{var t;void 0===e.shopping_cart&&null!==sessionStorage.getItem("trackShoppingCart")&&(t=null==(t=$.parseJSON(sessionStorage.getItem("trackShoppingCart")))?[]:t,e.shopping_cart=t),e.favorite_products=[],removeUndefinedRegistrationEntry(e);var a=!1;$.each(e,function(e,t){"site_events"==e&&$.each(t,function(e,t){0==a&&("remove_from_cart"!=e&&"add_to_cart"!=e&&"add_to_favorites"!=e&&"remove_from_favorites"!=e||(a=!0))})}),_trackAnalytics(e)}catch(e){console.debug("error on _dl tracking")}}function getBasicDLObject(){var e={page_name:"",authentication_status:"",registration_status:"",country:"us",page_layout:"mobile",language:"en"};return e.authentication_status=isUserAuthenticated(),e.registration_status=getUserRegistrationStatus(),e.cust_id=getCustId(),e}function removeUndefinedRegistrationEntry(a){$.each(a,function(e,t){"registration_status"==e&&"undefined"==t&&(a[e]="")})}function removeNullEntries(e){var a=[];return $.each(e,function(e,t){void 0===t||null==t||"null"==t||a.push(t)}),a}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function loadMoreOrders(){var e,t;0==parseInt($("#loadMorePressedFlag").val())&&($("#loadMorePressedFlag").val(1),t=parseInt($("#resultsLeft").val()),e=parseInt($("#beginIndexCount").val()),console.debug("beginIndexCount: "+e+":"+t),0<t&&(t={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,beginIndex:e,selectedTab:"PreviouslyProcessed",pageSize:t,isQuote:"false",showReorder:"true",showStatus:"true"},$.get("AjaxOrderStatusDetailsView",t,function(e){$(".products-holder").append(e),$("#loadResultsButton").hide(),$("#loadMorePressedFlag").val(0)},"html")))}function setupPhoneFields(e,t,a){$(e,t,a).bind("keydown",function(e){var t=e.which||e.keyCode;return!e.shiftKey&&!e.altKey&&!e.ctrlKey&&48<=t&&t<=57||96<=t&&t<=105||8==t||9==t||13==t||35==t||36==t||37==t||39==t||46==t||45==t})}function checkAllBenefits(){var e,t=!1;if($.cookie("json_insurance"))for(e=JSON.parse($.cookie("json_insurance")).data,i=0;i<Object.keys(e).length&&!t;i++)1==e[Object.keys(e)[i]][0].available&&(t=!0);return t}function checkSingleBenefit(e){var t;if($.cookie("json_insurance"))for(t=JSON.parse($.cookie("json_insurance")).data,i=0;i<Object.keys(t).length;i++)if(Object.keys(t)[i]==e)return t[Object.keys(t)[i]][0].available;return!1}$.extend({getUrlVars:function(){for(var e,t=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<a.length;r++)e=a[r].split("="),t.push(e[0]),t[e[0]]=decodeURIComponent(e[1]);return t},getUrlVar:function(e){return $.getUrlVars()[e]}}),$(document).ready(function(){setupValidation(),setupMainNav(),setupBrowseFilters(),setupDropDowns(),initColorCarousel(),initPDPColorCarousel(),initFaceShapeModal(),initInterrupter(),initStickyAddToCart(),setTimeout(function(){initPupModal(),initPupCartModal(),initAffirmAfterpayModal()},2e3),constants.ajaxParams.loggedIn||0<$(".registered").length?($("#login-user-hamburger").hide(),$(".registered","#navigation").show(),0<$(".name","#navigation").length&&$(".name","#navigation").html($("#contact-info").html().trim()),$(".guest","#navigation").hide()):($("#login-user-hamburger").show(),$("#login-user-hamburger .submenu").hide(),$("#login-user-hamburger").removeClass("has-drop"),$("#login-user-hamburger a").attr("href","LogonForm?catalogId=12751&langId=-1&storeId=12001"),$(".guest","#navigation").show()),$(document).ready(function(){null!=window.EmailSignupForm&&EmailSignupForm.setupValidation()}),$("#headerLogout").on("click",function(){removeExamCookies(),sessionStorage.removeItem("trackShoppingCart"),$.cookie("WC_PERSISTENT","",{expires:-1,path:"/"}),document.location=$(this).attr("data-url")}),$(".genInfo").on("click",function(){$(this).toggleClass("collapsed")}),$(".charsOnly").on("keyup",function(e){var t=$(this);t.val().match(/[^a-zA-Z ]/g)&&t.val(t.val().replace(/[^a-zA-Z ]/g,""))}),$(".charsNumbersOnly").on("keyup",function(e){var t=$(this);t.val().match(/[^a-zA-Z0-9 ]/g)&&t.val(t.val().replace(/[^a-zA-Z ]/g,""))}),$(".numbersOnly").on("keyup",function(e){var t=$(this);t.val().match(/[^0-9]/g)&&t.val(t.val().replace(/[^0-9]/g,""))}),$(function(){$(".phoneNumberOnly").on("keyup",function(e){var t=$(this);t.val().match(/[^0-9-]/g)&&t.val(t.val().replace(/[^0-9-]/g,"")),t.val().match(/[0-9]{10}/)&&t.val(t.val().match(new RegExp("[0-9]{4,6}$|[0-9]{3}","g")).join("-").substr(0,12))})}),$(function(){$(".newPhoneNumberOnly").on("keypress",function(e){if(1===e.target.value.length?e.target.value="("+e.target.value:4===e.target.value.length?e.target.value=e.target.value+") ":9===e.target.value.length&&(e.target.value+=" - "),16===e.target.value.length)return e.target.value;var t=e.keyCode;8===t?(2===e.target.value.length||6===e.target.value.length?e.target.value=e.target.value.substr(0,e.target.value.length-2):12===e.target.value.length&&(e.target.value=e.target.value.substr(0,e.target.value.length-3)),e.target.value=e.target.value.substr(0,e.target.value.length)):(47<t&&t<58||95<t&&t<106)&&16!==e.target.value.length&&!e.shiftKey||9==t||37==t||39==t||e.preventDefault(),e.target.value.match(/[^0-9\s()-]/g)&&(e.target.value=e.target.value.replace(/[^0-9\s()-]/g,""))})}),$(".email-friend").click(function(){var e=$(this).attr("generic_email_view_url");return $.ajax({url:getAbsoluteURL()+e,success:function(e){$("#EmailFriendFormDiv").removeClass("hide"),$("#EmailFriendFormDiv").html(e);setTimeout(function(){0==$("#EmailThankYouSection").find("a.un_w94c").length&&$("#EmailThankYouSection").append('<a href="#" class="un_tertiary_action un_w94c cancel" id="backto">BACK TO PRODUCT</a>'),$("#EmailFriendFormDiv .cancel").bind("click",function(e){e.preventDefault(),$("#EmailFriendFormDiv").addClass("hide"),$("#content_wrapper_box").removeClass("hide")})},2e3);0<$("input[name=directions]").length&&$("input[name=directions]").val($("#allDirections").text()),0<$("input[name=totalDistance]").length&&$("input[name=totalDistance]").val($("#totalDist").text()),0<$("input[name=mapImage]").length&&$("input[name=mapImage]").val($("#imageUrl").text()),0<$("input[name=totalTime]").length&&$("input[name=totalTime]").val($("#timeTaken").text()),$("#content_wrapper_box").addClass("hide"),$(window).scrollTop(0)}}),utagLinkSafe({link_name:"emailPDP"}),!1}),$("body").on("click",".close-favorites-modal",function(e){e.preventDefault(),$("#AddedWishlistDialogDiv").attr("aria-hidden","true").slideUp()}),$(".goToDesktop").click(goToDesktop),$(".email-friend").click(function(){utagLinkSafe({link_name:"emailPDP"})}),$("#social_facebook_Details_Like_Button_Display").click(function(){utagLinkSafe({link_name:"socialShare",social_site:"facebook"})}),$(".pin-it-button").click(function(e){utag.link({link_name:"SocialShare",social_site:"Pinterest"})}),$(".twitter-share-button").click(function(e){utag.link({link_name:"SocialShare",social_site:"Twitter"})}),$("#StoreLocatorPdpModelDiv").bind("dialogopen",function(e,t){$(this).parent().addClass("store-pop"),$(window).scrollTop(0),$(this).height($(document).height())}),$("#EmailFriendFormDiv").bind("dialogopen",function(e,t){$(this).parent().addClass("store-pop no-close"),$(window).scrollTop(0),$(this).height($(document).height())}),$("#AddedWishlistDialogDiv").height($(document).height()),$("#favorites").insertAfter($(".un_header_menu div").eq(3)).show(),$("#ResetPasswordForm").keypress(function(e){return 13!=e.keyCode||(clearResetPasswordFormErrorMessage(),$("#ResetPasswordForm").valid()&&resetPassword(),!1)}),$("#passwordResetSubmitButton").click(function(){return clearResetPasswordFormErrorMessage(),$("#ResetPasswordForm").valid()&&resetPassword(),!1}),jQuery.validator.addMethod("antipattern",function(e,t,a){return $("span[for=locationEntry],#ErrorDivStoreSearch").hide(),this.optional(t)||!a.test(e)},"Invalid format."),jQuery.validator.addMethod("logonIdVerifyRequired",function(e,t,a){return"Enter e-mail address"!=e},"Please re-enter your email address");var e=$("#CancelAppointmentModalDiv").dialog({autoOpen:!1,draggable:!1,resizable:!1,modal:!0,zIndex:9999,width:$(window).width()-45,position:[10,$(window).height()/2-$("#CancelAppointmentModalDiv").height()/2],open:function(){$("#CancelAppointmentModalDiv").parent().addClass("myAccountModal"),$("#CancelAppointmentModalDiv .cancel").bind("click",function(){$("#CancelAppointmentModalDiv").dialog("close")})},close:function(){$("#CancelAppointmentModalDiv .cancel").unbind("click")}});$(".exam-list.upcoming").on("click","a.cancelAppointment[data-appointment-id]",function(){return $("#cancelAppointmentId").val($(this).attr("data-appointment-id")),e.dialog("open"),utagLinkSafe({link_name:"apptRemove"}),!1}),$("#EyeExamsModalDiv .show-past-exam").on("click",function(){var e=$(this).index("#EyeExamsModalDiv .show-past-exam");$("#EyeExamsModalDiv .show-past-exam").eq(e).toggle(),$("#EyeExamsModalDiv .hide-past-exam").eq(e).toggle(),$("#EyeExamsModalDiv .past .each-exam").eq(e).toggle()}),$("#EyeExamsModalDiv .hide-past-exam").on("click",function(){var e=$(this).index("#EyeExamsModalDiv .hide-past-exam");$("#EyeExamsModalDiv .show-past-exam").eq(e).toggle(),$("#EyeExamsModalDiv .hide-past-exam").eq(e).toggle(),$("#EyeExamsModalDiv .past .each-exam").eq(e).toggle()}),$("#CancelAppointmentModalDiv .yes-cancel").on("click",function(){utagLinkSafe({link_id:"apptRemove"})}),$("#myAccountControl").change(function(){var e=$(this).find("option:selected").attr("data-url");document.location=e}),$("#myAccountControl").change(function(){var e=$(this).find("option:selected").attr("data-url");document.location=e}),$(".editLensesLinkShoppingCart").click(function(){var e={page_name:["checkout","cart"],authentication_status:"",registration_status:"",country:"us",page_layout:"mobile",language:"en"};e.authentication_status=isAuthenticated,e.registration_status=isRegistered;var t=$(this).attr("data-orderitem-id"),a=$("#"+t+"_AssociatedLenseOrderItemId").val(),r=[],o={},e={};o.product_id=$("#"+t+"_UPC").val(),o.reg_price=$("#"+t+"_Price").val(),o.category=$("#"+t+"_Category").val(),"undefined"==a&&null==a||(t=$("#"+a+"_UPC").val(),e.product_id=t,e.reg_price=$("#"+a+"_Price").val(),e.category=$("#"+a+"_Category").val(),o.applied_lenses=e),r.push(o),_dl.products=r,_dl.site_events={edit_lens:!0},callTrackAnalytics(_dl);r=$(this).attr("data-url");document.location=r}),$(".re-order-order-history").click(function(){var e={page_name:"",authentication_status:"",registration_status:"",country:"us",page_layout:"mobile",language:"en"};e.authentication_status=isUserAuthenticated(),e.registration_status=getUserRegistrationStatus(),e.page_name=["account","order-history"];var t=[],a={},r=$(this).attr("data-order-id");a.order_id=r,a.order_value=$("#"+r+"_Order_Total").val(),a.order_status=$("#"+r+"_Order_Status").val(),e.site_events={reorder_product:!0},t.push(a),e.orders=t,callTrackAnalytics(e);e=$(this).attr("data-url");document.location=e}),$("button.button-order").click(function(){var e={page_name:"",authentication_status:"",registration_status:"",country:"us",page_layout:"mobile",language:"en"};e.authentication_status=isUserAuthenticated(),e.registration_status=getUserRegistrationStatus(),e.page_name=["account","order-history"];var t=[],a={};a.order_id=$(this).attr("data-info-id"),a.order_value=$(this).attr("data-order-price"),a.order_status=$(this).attr("data-order-status"),e.site_events={reorder_product:!0},t.push(a),e.orders=t,callTrackAnalytics(e)}),$(".pdp-change-color").click(function(){var e={page_name:["store front","product details"],authentication_status:"",registration_status:"",country:"us",page_layout:"mobile",language:"en"};e.authentication_status=isUserAuthenticated(),e.registration_status=getUserRegistrationStatus();var t=[],a={},r=$("#currentUPC").val();a.product_id=r,a.reg_price=$("#currentProducrPrice_"+r).val(),a.category=$("#Item_Category").val(),e.site_events={change_color:!0},t.push(a),e.products=t,e.page_name=["store front","product details"],callTrackAnalytics(e);e=$(this).attr("data-url");document.location=e}),$("#sendAText").click(function(){_dl.page_name=["checkout","doctor info"],_dl.site_events={submit_prescription_info:!0},callTrackAnalytics(_dl),$("#sendAText").addClass("disabled"),$("#contact_information").hide();var e="sms:"+$(this).attr("data-phone");console.debug("url:"+e),document.location=e}),$(".submit-on-change").change(function(){$("input[id=nickName]").val($(this).val()),""!=$(this).val()&&submitRequest()&&$("input[name=newQuantity]").val($(this).val()),$(this).parents("form").submit()}),$("body").on("click","#favorites-tray-button, .favoriteli, .favoriteMobile",function(e){e.preventDefault(),toggleFavesTray()}),$(".favorite-button").on("touchstart click",function(e){e.preventDefault();var t=$(this),a={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId};t.hasClass("favorited")?ajaxRemoveFromFavorites($(this).data("catentryid"),function(e){t.removeClass("favorited"),updateFavoritesCount(a)}):ajaxAddToFavorites($(this).data("catentryid"),function(e){t.addClass("favorited"),updateFavoritesCount(a)})}),$("body").on("click touchstart",".favorite-button-tray",function(){var a=$(this);return ajaxRemoveFromFavorites($(this).data("catentryid"),function(e){var t={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId};$.get(getAbsoluteURL()+"AjaxMiniWishListDisplay",t,function(e){$("#favorites-tray").html(e),$(".favorite-button").filter(function(e,t){return $(t).data("catentryid")==a.data("catentryid")}).removeClass("favorited")},"html"),openFavesTray()}),!1}),$('input[type="text"], input[type="password"], input[type="tel"], input[type="email"], input[type="number"]').on("focus",function(){0<$("#scrollBar").length&&$("#scrollBar").addClass("input-focused")}).on("blur",function(){0<$("#scrollBar").length&&$("#scrollBar").removeClass("input-focused")}),$(".tah-link").on("click",function(){return showStandardModal("#tah-modal","tah-modal"),!1}),$(".custom-select select").before('<span class="custom-select-before" />').after('<span class="custom-select-after" />')});var RiaHelper={getCookie:function(e){for(var t="",a=document.cookie.split(";").map(function(t){try{return decodeURIComponent(t)}catch(e){return t}}),r=0;r<a.length;r++){for(var o=a[r];" "==o.charAt(0);)o=o.substring(1);0==o.indexOf(e)&&(t=o.substring(e.length+1,o.length))}return t},getInsuranceCookie:function(){return RiaHelper.getCookie("json_insurance")},loadJsonInsurance:function(){var e=RiaHelper.getInsuranceCookie();return e?JSON.parse(e):null},getTentativeUserCookie:function(){return RiaHelper.getCookie("tentative_user")},setInsuranceCookie:function(e){var t=new Date,a=t.getTime()+18e5;t.setTime(a),document.cookie="json_insurance="+JSON.stringify(e)+"; path=/; expires="+t.toUTCString()+";"},saveJsonInsurance:function(e){RiaHelper.setInsuranceCookie(e)},setTentativeCookie:function(e){var t=new Date,a=t.getTime()+36e5;t.setTime(a),document.cookie=e?"tentative_user="+e+"; path=/;":"tentative_user=0; path=/; expires="+t.toUTCString()+";"},removeInsuranceCookie:function(){document.cookie="json_insurance=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="tentative_user=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},checkAllBenefits:function(){var e,t=!1;if(RiaHelper.getInsuranceCookie())for(e=JSON.parse(RiaHelper.getInsuranceCookie()).data,i=0;i<Object.keys(e).length&&!t;i++)1==e[Object.keys(e)[i]][0].available&&(t=!0);return t},checkSingleBenefit:function(e){var t;if(RiaHelper.getInsuranceCookie())for(t=JSON.parse(RiaHelper.getInsuranceCookie()).data,i=0;i<Object.keys(t).length;i++)if(Object.keys(t)[i]==e)return t[Object.keys(t)[i]][0].available;return!1}},MobileDeviceCookieManager=function(e){this.defaultCookieValue=e,this.setMobileDeviceCookie=function(e){document.cookie=MobileDeviceCookieManager.MOBILE_DEVICE_COOKIE_NAME+"="+e+";path=/"},this.doesMobileDeviceCookieExist=function(){document.cookie.indexOf(MobileDeviceCookieManager.MOBILE_DEVICE_COOKIE_NAME)<0&&this.setMobileDeviceCookie(this.defaultCookieValue)},this.redirectTo=function(e,t){this.setMobileDeviceCookie(e),"function"==typeof t&&t(),location.reload(!0)},this.redirectToDesktop=function(){this.redirectTo(MobileDeviceCookieManager.MOBILE_DEVICE_COOKIE_VALUE_DESKTOP,function(){$.cookie("mobile","")})}};MobileDeviceCookieManager.MOBILE_DEVICE_COOKIE_NAME="WC_MOBILEDEVICEID",MobileDeviceCookieManager.MOBILE_DEVICE_COOKIE_VALUE_DESKTOP="0",MobileDeviceCookieManager.MOBILE_DEVICE_COOKIE_VALUE_MOBILE="1",MobileDeviceCookieManager.MOBILE_DEVICE_COOKIE_VALUE_TABLET="2";var mobileDeviceCookieManager=new MobileDeviceCookieManager(MobileDeviceCookieManager.MOBILE_DEVICE_COOKIE_VALUE_MOBILE);function accordion(e,t){$('div[accordion="'+t+'"]').hasClass("to-hide")?($('div[accordion="'+t+'"]').removeClass("to-hide"),$(e).children().children().attr("src","/webapp/wcs/stores/TargetOpticalStorefrontAssetStore/images/insurance/arrow-up.png")):($('div[accordion="'+t+'"]').addClass("to-hide"),$(e).children().children().attr("src","/webapp/wcs/stores/TargetOpticalStorefrontAssetStore/images/insurance/arrow-down.png"))}function accordionPDPLenses(e,t){$(".to-table-row.list-lenses").each(function(){$(this).hasClass("to-hide")||$(this).addClass("to-hide"),0<$(".select-color-lens").length&&$(".select-color-lens").show(),$("#select-lens-alert").addClass("hide")}),$('div[class*="first-level-"]').each(function(){"false"==$("#selectLensOrAddToCartPDPScrollBar").attr("data-is_sunglasses")||"false"==$("#data-holder").attr("data-issunglasses")?($(this).find(".namebrand").hasClass("copy-input-lenses")&&$(this).find(".namebrand").removeClass("copy-input-lenses"),$(this).find(".namebrand").hasClass("default-choose-lens")||$(this).find(".namebrand").addClass("default-choose-lens")):("true"!=$("#selectLensOrAddToCartPDPScrollBar").attr("data-is_sunglasses")&&"true"!=$("#data-holder").attr("data-issunglasses")||$(this).find(".lens-option-title").hasClass("copy-input-lenses")&&$(this).find(".lens-option-title").removeClass("copy-input-lenses"),$(this).find(".lens-option-title").hasClass("default-choose-lens")||$(this).find(".lens-option-title").addClass("default-choose-lens"))}),$('div[accordion="'+t+'"]').hasClass("to-hide")?$('div[accordion="'+t+'"]').removeClass("to-hide"):$('div[accordion="'+t+'"]').addClass("to-hide")}function eraseForm(e){$(":input","#"+e).not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected"),-1!=e.indexOf("billing_address")&&($("#shipping-method-1").prop("selected",!0).trigger("change"),$("#US_states").prop("selectedIndex",0)),-1!=e.indexOf("doctor")&&($("#doctorstabelresult").hide(),$("#choosePDistances").hide(),document.getElementById("rx").value="pd",$("#submitDoctorInformation").removeClass("button-green").html("select"))}function searchProductFromArray(e,t){for(var a=0;a<t.length;a++)if(t[a].product_id===e)return!0;return!1}function sendDLOnEditLensButtonClick(){var e=getBasicDLObject();e.site_events={choose_your_lens:!0},callTrackAnalytics(e)}function sendDLOnSearchLocationFooter(e){var t=getBasicDLObject();t.site_events={exam_scheduler_footer_search:!0},t.zip_code=e,callTrackAnalytics(t)}String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},EspotManagerJS.removeFunctions("NEW_LABEL_PDP_INSURANCE"),$(document).ready(function(){$("#locationSubmit_from_menu").parent().append('<span class="ErrorMessageDiv required" style="display: none;">Please enter a valid City/State OR ZIP Code.</span>'),$("#locationSubmit_from_menu").on("click",function(e){$.cookie("to_lastValidStoreSearch",$("#location_from_menu")[0].value,{path:"/"}),$("#zipOrCity").attr("value",$("#location_from_menu")[0].value),$("#zipOrCityFooter").attr("value",$("#location_from_menu")[0].value),storeLocatorJS.checkField(document.homePage_store_locator_form,$("#location_from_menu").parent().find(".ErrorMessageDiv"))}),$("#locationSubmit_from_home_page").parent().parent().append('<p class="ErrorMessageDiv" style="color:white; display:none;">Please enter a valid City/State OR ZIP Code.</p>'),$("#locationSubmit_from_home_page").on("click",function(e){$.cookie("to_lastValidStoreSearch",$("#location_from_home_page")[0].value,{path:"/"}),$("#zip_or_city").attr("value",$("#location_from_home_page")[0].value),storeLocatorJS.checkField(document.homePage_store_locator_form,$("#location_from_home_page").parent().parent().find(".ErrorMessageDiv"))})});var getUrlParameter=function(e){for(var t,a=decodeURIComponent(window.location.search.substring(1)).split("&"),r=0;r<a.length;r++)if((t=a[r].split("="))[0]===e)return void 0===t[1]||t[1]};function sendDLOnEditLensButtonClick(){var e=getBasicDLObject();e.site_events={choose_your_lens:!0},callTrackAnalytics(e)}function sendDLOnInsuranceToggleClick(){var e=getBasicDLObject();e.site_events={"toggle_insurance_eligibility ":!0},callTrackAnalytics(e)}function __prjid5_createDLCookie(e){$.cookie("insuranceSyncMod",e+" information",{path:"/"})}function sendDLOnInsuranceSync(e,t){var a=getBasicDLObject();null==e?(a.site_events={"insurance_sync_failure ":!0},a.failure_reason="Server - Insurance failure - RIA missing response"):"ok"==e.result?(a.site_events={"insurance_sync_successful ":!0},a.sync_method="personal information",null!=e.patientInfo&&"undefined"!=e.patientInfo&&(a.zip_code=e.patientInfo.zip_code,null!=e.patientInfo.dateOfBirth&&"undefined"!=e.patientInfo.dateOfBirth&&(a.age=(new Date).getFullYear()-e.patientInfo.dateOfBirth.split("/").pop())),"undefined"!=$.cookie("insuranceSyncMod")&&null!=$.cookie("insuranceSyncMod")&&""!=$.cookie("insuranceSyncMod")&&(a.sync_method=$.cookie("insuranceSyncMod"))):"ko"==e.result?(a.site_events={"insurance_sync_failure ":!0},a.failure_reason="User  - Insurance failure -  wrong data",null!==t&&(a.failure_try_count=5-(t+1))):(a.site_events={"insurance_sync_failure ":!0},a.failure_reason="Frontend  - Insurance failure -  RIA data not readable"),callTrackAnalytics(a)}function sendDLonReorder(e,t,a){var r=getBasicDLObject();r.site_events={reorder_product:!0},r.page_name=["account page"],r.orders=[];var o={};o.order_id=e,o.order_value=parseFloat(Math.round(100*a)/100).toFixed(2),o.order_status=t,r.orders[0]=o,callTrackAnalytics(r)}function sendDLonAddToCart(e){var t=getBasicDLObject();if(t.site_events={add_to_cart:!0,cart_start:!0},t.page_name=["account page"],t.products_added=[],0<$("#OrderTableDisplayExt_"+e+" .reorder_partnumber").length){var a=$("#OrderTableDisplayExt_"+e+" .reorder_partnumber").toArray();for(i=0;i<a.length;i++){var r={partNumber:a[i].innerHTML};t.products_added.push(r)}}callTrackAnalytics(t)}function selectedBrandsFromSite(e,t){$.cookie("facets","",{path:"/"}),setFacetCookieFromSite("CLB",e,null),window.location.href=t}function selectedManufacturerFromSite(e,t){$.cookie("facets","",{path:"/"}),setFacetCookieFromSite("CLM",e,null),window.location.href=t}function setFacetCookieFromSite(e,t,a){var r=decodeURIComponent(read_cookie("facets"));"BR"!=e&&"CLB"!=e||(t=decodeURIComponent(t));for(var o,s=r.split("|"),n=0;n<s.length;n++)""!==s[n]&&null!==s[n]&&void 0!==s[n]&&(o=s[n].split(":"),(-1<e.indexOf("CL")&&-1==o[0].indexOf("CL")||-1==e.indexOf("CL")&&-1<o[0].indexOf("CL"))&&(r=r.replace("|"+o[0]+":"+o[1],"")));t=encodeURIComponent(r+("|"+e+":"+t));document.cookie="facets="+t+"; path=/;",a&&(a=$(a),document.location.href=a.attr("href"))}function openLoginMenu(){$("#headerContainer .hamburger").click(),$("#login-user-hamburger").hasClass("open")||$("#login-user-hamburger").addClass("open"),$("#login-user-hamburger").animate({scrollTop:0},100)}function openLoginMenuWithSamePageRedirect(){$("#login-form-scheduler").hasClass("open")?$("#login-form-scheduler").removeClass("open"):($("#login-form-scheduler").addClass("open"),$("#scheduler-email-address-field").focus(),$("#login-form-scheduler input[name=URL]").val(location.href))}function goToCreateAccountWithSamePageRedirect(e,t,a){var r="UserRegistrationAddFormView";r+="?catalogId="+t,r+="&storeId="+e,r+="&langId="+a,r+="&returnPage="+encodeURIComponent(location.href),location.href=r}function openDiv(e,t,a){jQuery(e).toggleClass("open"),(a?jQuery(e).find(jQuery(t)):jQuery(t)).toggleClass("hide")}function openDivExclusive(e,t,a,r){jQuery(".to-select-product").removeClass("open"),jQuery(e).toggleClass("open"),""!=r&&null!=r&&jQuery(r).hide(),(a?jQuery(e).find(jQuery(t)):jQuery(t)).toggle()}function removeCookieWithName(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}function createCookieWithExp(e,t,a){var r=new Date;r.setTime(r.getTime()+60*a*1e3),$.cookie(e,t,{expires:r,path:"/"})}function isValidBirthDate(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),a=parseInt(t[1],10),r=parseInt(t[0],10),e=parseInt(t[2],10);if(e<1918||e>(new Date).getFullYear()||0==r||12<r)return!1;t=[31,28,31,30,31,30,31,31,30,31,30,31];return(e%400==0||e%100!=0&&e%4==0)&&(t[1]=29),0<a&&a<=t[r-1]}function isValidPhoneNumber(e){e=e.replace(/\D+/g,"");return result=/^\d{10}$/.test(e)}function triggerCurrentBlockClick(e){13===e.keyCode&&$(event.target).click()}$(document).ready(function(){$(".detailScheduleItem > a").on("click",function(){$(this).toggleClass("open"),$(this).hasClass("open")?$(this).html("Less details"):$(this).html("More details")})}),$(window).on("load",function(){$("#homepage-slider ul.slick-dots li").attr("role","tab").removeAttr("aria-controls"),$("#homepage-slider ul.slick-dots li button").removeAttr("aria-required")});var initializeGoogleElements=function(){$(window).load(function(){0<$("#address_google_1").length&&googlePlaceLoader()})};function modalTooltip(e,t){t.preventDefault();t=$(".result-single-vision").offset().top;$("#"+e).dialog({width:500,modal:!0,autoOpen:!1}),$("#"+e).on("dialogopen",function(e,t){return $(".ui-dialog").addClass("mobile-modal-tooltip"),!1}),$("html, body").animate({scrollTop:t},500,"swing",function(){return $("#"+e).dialog("open"),!1})}function getInputHiddenValue(e){return 0<$("#"+e).length?$("#"+e).val():""}function TealiumConsentPrivacyLink(){window.location.href="/to-us/privacy-policy"}function addTrackProducts(e,t){null==_dl.products&&(_dl.products=[]),e.applied_lenses=t,_dl.products.push(e)}function addTrackProductsValues(e,t,a,r,o,s,n,i,d,l,c,u,g){null==_dl.products&&(_dl.products=[]);var p={};p.product_id=e,p.reg_price=t,p.category=a,p.brand=r,p.frame_fit=o,p.model=s,p.frame_shape=n,p.face_shape=i,p.hto_product=d,p.badges=l;l={};l.product_id=c,l.reg_price=u,l.category=g,p.applied_lenses=l,_dl.products.push(p)}function globalAddTrackProductsValues(e,t,a,r,o,s,n,i,d,l,c,u,g){null==_dl.products&&(_dl.products=[]);var p={};p.product_id=e,p.reg_price=t,p.category=a,p.brand=r,p.frame_fit=o,p.model=s,p.frame_shape=n,p.face_shape=i,p.hto_product=d,p.badges=l;l={};return l.product_id=c,l.reg_price=u,l.category=g,p.applied_lenses=l,p}function addTrackProductsShoppingCart(e,t){null==_dl.shopping_cart&&(_dl.shopping_cart=[]),e.applied_lenses=t,_dl.shopping_cart.push(e)}function addTrackProductsValuesShoppingCart(e,t,a,r,o,s,n,i,d,l,c,u,g){null==_dl.shopping_cart&&(_dl.shopping_cart=[]);var p={};p.product_id=e,p.reg_price=t,p.category=a,p.brand=r,p.frame_fit=o,p.model=s,p.frame_shape=n,p.face_shape=i,p.hto_product=d,p.badges=l;l={};l.product_id=c,l.reg_price=u,l.category=g,p.applied_lenses=l,_dl.shopping_cart.push(p)}function addTrackProductsProductsViewed(e,t){null==_dl.products_viewed&&(_dl.products_viewed=[]),e.applied_lenses=t,_dl.products_viewed.push(e)}function addTrackProductsValuesProductsViewed(e,t,a,r,o,s,n,i,d,l,c,u,g){null==_dl.products_viewed&&(_dl.products_viewed=[]);var p={};p.product_id=e,p.reg_price=t,p.category=a,p.brand=r,p.frame_fit=o,p.model=s,p.frame_shape=n,p.face_shape=i,p.hto_product=d,p.badges=l;l={};l.product_id=c,l.reg_price=u,l.category=g,p.applied_lenses=l,_dl.products_viewed.push(p)}function addTrackProductsFavoriteProducts(e,t){null==_dl.favorite_products&&(_dl.favorite_products=[]),e.applied_lenses=t,_dl.favorite_products.push(e)}function addTrackProductsValuesFavoriteProducts(e,t,a,r,o,s,n,i,d,l,c,u,g){null==_dl.favorite_products&&(_dl.favorite_products=[]);var p={};p.product_id=e,p.reg_price=t,p.category=a,p.brand=r,p.frame_fit=o,p.model=s,p.frame_shape=n,p.face_shape=i,p.hto_product=d,p.badges=l;l={};l.product_id=c,l.reg_price=u,l.category=g,p.applied_lenses=l,_dl.favorite_products.push(p)}function sendDLAtEmailUs(){var e=getBasicDLObject();e.site_events={click_to_email:!0},callTrackAnalytics(e)}function sendDLAtClickToCall(){var e=getBasicDLObject();e.site_events={click_to_call:!0},callTrackAnalytics(e)}function getListDetails(e){$("#no-results").length<=0&&(e.items_count_limit=$(".resultsNumber span.total-items").toArray()[0].innerText,e.items_sort=$(".sort-by .selected").toArray()[0].innerText)}function addFilterToDL(e){e.filters={gender:void 0,type:void 0,collection:void 0,special_offers:void 0,brands:void 0,manufacturers:void 0,price:{min:void 0,max:void 0},frame_shape:void 0,color:void 0,face_shape:void 0,fit:void 0,materials:void 0},e.filters.gender=getFilterValues("#facet-gender","indent"),e.filters.type=getFilterValues("#facet-type","indent"),e.filters.collection=getFilterValues("#facet-collections","indent"),e.filters.special_offers=getFilterValues("#facet-special-offers","indent"),e.filters.brands=getFilterValues("#facet-brands","indent"),e.filters.price=setPriceFilter(),e.filters.frame_shape=getFilterValues("#facet-frame-shape","indent"),e.filters.color=getFilterValues("#facet-color","indent"),e.filters.face_shape=getFilterValues("#facet-face-shape","face"),e.filters.fit=getFilterValues("#facet-fit","indent"),e.filters.materials=getFilterValues("#facet-material","indent")}function getFilterValues(e,t){for(resultArray=[],tmpArray=$(e+" .active span."+t).toArray(),i=0;i<tmpArray.length;i++)elem=tmpArray[i].innerText.trim(),""!=elem&&-1===elem.indexOf("filter")&&resultArray.push(elem);return resultArray}function setPriceFilter(){price={min:void 0,max:void 0};var e=decodeURIComponent(read_cookie("facets"));return upperSelected=null!=e&&-1!=e.indexOf("PR:")?(e=e.split("PR:")[1].split("|")[0].split("-"),lowerSelected=e[0],e[1]):(lowerSelected=0,defaultMax),price.min=lowerSelected,price.max=upperSelected,price}function socialClick(e){var t=getBasicDLObject();t.site_events={social_media_share:!0},t.social_network=e,callTrackAnalytics(t)}function exitFromSite(){var e=getBasicDLObject();e.site_events={property_referral:!0},e.exit_url="https://www.target.com",callTrackAnalytics(e)}function sendDLforChat(){var e=getBasicDLObject();e.site_events={start_chat_session:!0},callTrackAnalytics(e)}function addSimilarProductsTo(e){var t=[],a=$("#others .item .brand").toArray(),r=$("#others .productImagePdpLink").toArray(),o=$("#others .item .price").toArray();for(i=0;i<a.length;i++){var s={};s.model=a[i].innerText,s.product_id=$(r[i]).attr("href").split("/").pop().split("-").pop(),s.reg_price=o[i].innerText,t.push(s)}e.similar_products=t}function sendDLRegisterRequest(){var e=getBasicDLObject();e.site_events={registration_start:!0},callTrackAnalytics(e)}function changeLens(){$(".shopCartTotals").length<=0&&(getBasicDLObject(),sendDLWhenPDPLoads(),_dl.site_events={select_lens_tint:!0},callTrackAnalytics(_dl))}function sendDLRegistration(e){var t=getBasicDLObject();t.site_events={registration_complete:!0,authentication_complete:!0,email_opt_in:e},callTrackAnalytics(t)}function sendDLOnOpenOrderDetail(e){var t=getBasicDLObject();t.page_name=["account","order-history"];var a=[],r={};r.order_id=$("#"+e).find(".order_content").attr("data-id"),r.order_value=$("#"+e).find(".price")[0].innerText,r.order_status=$("#"+e).find(".order-status")[0].innerText,t.site_events={reorder_product:!0},a.push(r),t.orders=a,callTrackAnalytics(t)}function sendDLOnEmailPref(){var e=getBasicDLObject();0<$("#receiveEmail_CheckBox:checked").length?(e.site_events={email_opt_in:!0},e.customer_lead_id=e.cust_id,e.customer_lead_type="receive_updates",e.customer_lead_level="partial:email"):e.site_events={email_opt_out:!0},callTrackAnalytics(e)}function sendDLForExameSchedule(e){var t=getBasicDLObject(),a=[];for(null!==sessionStorage.getItem("store_list")&&(a=JSON.parse(sessionStorage.getItem("store_list"))),i=0;i<a.length;i++)a[i].store_id==e&&(t.stores=[a[i]],sessionStorage.setItem("stores",JSON.stringify(a[i])));t.zip_code=JSON.parse($.cookie("zip_code")),t.site_events={exam_scheduler_schedule:!0},callTrackAnalytics(t)}function getExamsFromCode(){var n=[];return $(".each-exam").each(function(e){var t,a,r,o,s;0<e&&((t={}).exam_id=$(this).find("input[name='lockId']")[0].value,s=$(this).find("li.date_time")[0].innerText,a=("0"+(r=new Date(s.split(" at ")[0])).getDate()).slice(-2),e=("0"+(r.getMonth()+1)).slice(-2),r=r.getFullYear().toString().substr(2,2),t.exam_date=e+""+a+r,"PM"===(s=s.split(" at ").pop().split(" "))[1]?(o=parseInt(s[0].split(":")[0])+12,t.exam_time=o+":"+s[0].split(":")[1]):t.exam_time=s[0],s=("0"+(o=new Date).getDate()).slice(-2),t.date_created=o.getMonth()+1+""+s+o.getFullYear().toString().substr(2,2),t.time_created=o.getHours()+":"+o.getMinutes(),null!==sessionStorage.getItem("stores")&&(t.stores=[JSON.parse(sessionStorage.getItem("stores"))]),n.push(t))}),n}function sendDLForExamReview(){var e=getBasicDLObject();e.site_events={exam_scheduler_review:!0},e.page_name=["eye-exam","step3"],e.exams=getExamsFromCode(),$.cookie("exams",JSON.stringify(e.exams),{path:"/"}),callTrackAnalytics(e)}function sendDLForExamConfirm(){var e=getBasicDLObject();e.site_events={exam_scheduler_complete:!0},e.page_name=["eye_exam","step4"],e.exams=[],JSON.parse($.cookie("exams"))&&void 0!==JSON.parse($.cookie("exams"))&&(e.exams=[JSON.parse($.cookie("exams"))]),e.customer_lead_type="exam scheduler",e.customer_lead_level="fully qualified",e.customer_lead_id=e.exams[0].exam_id,callTrackAnalytics(e)}function getStoreDataExamModal(e){var t={},e=$(".visit-info").toArray()[e];return t.store_id=e.id.split("_").pop(),t.online_scheduling=!0,t.avail_exam=!0,t.address=$(e).find(".address")[0].innerText.trim(),t.city=$(e).find(".city")[0].innerText.trim(),t.state=$(e).find(".state")[0].innerText.trim(),t.zip=$(e).find(".postalCode")[0].innerText.trim(),t.miles_from_customer=void 0,t.result_position=0,t}function sendDLForExamDataModal(){var o=getBasicDLObject();o.site_events={eye_exam_info:!0},o.exams=[],o.page_name=["account_page","eye exams"];var s=0;$(".exam-info").each(function(){var e={};e.exam_id=$(this)[0].id.split("_").pop();var t=new Date($(this).find(".date_time")[0].innerText.trim()),a=("0"+t.getDate()).slice(-2),r=("0"+(t.getMonth()+1)).slice(-2),t=t.getFullYear().toString().substr(2,2);e.exam_date=r+""+a+t,e.exam_date;a=$(this).find(".time")[0].innerText.trim().split(" ");"PM"===a[1]?(t=parseInt(a[0].split(":")[0])+12,e.exam_time=t+":"+a[0].split(":")[1]):e.exam_time=a[0],e.store=[getStoreDataExamModal(s)],o.exams.push(e),s++}),callTrackAnalytics(o)}$("document").ready(function(){$("#reorderLink").on("click",function(e){e.preventDefault(),constants.ajaxParams.loggedIn?window.location=$("#contact-info a").attr("href"):window.location=$("#reorderLink").attr("href")})}),$(document).ready(function(){$(".keyboardAccessible").on("keydown",function(e){13===e.keyCode&&$(this).click()})}),$(document).ready(function(){function t(){var e=$(this).parents("li.has-drop");e.hasClass("open")||$(".mainnav .has-drop").removeClass("open"),e.toggleClass("open")}$(".has-drop > a").on("click",t),$(".has-drop > a").on("keydown",function(e){13===e.keyCode&&t.apply(this)})}),$(document).ready(function(){0<$("#menuContactLensOffersContainer").length&&$("#menuContactLensOffers")&&($("#menuContactLensOffers").appendTo($("#menuContactLensOffersContainer")),$("#menuContactLensOffers").removeClass("d-none"))}),$(".editLensesLinkShoppingCart").click(function(){var e={page_name:["checkout","cart"],authentication_status:"",registration_status:"",country:"us",page_layout:"mobile",language:"en"};e.authentication_status=isUserAuthenticated(),e.registration_status=getUserRegistrationStatus()}),jQuery(document.body).on("click","footer .phoneNumber",function(e){sendDLAtClickToCall()}),jQuery(document.body).on("click","footer .emailLink",function(e){sendDLAtEmailUs()}),jQuery(document).on("click",'a[href*="target.com"]',function(){exitFromSite()}),jQuery(document).on("click","#navigation .guest",sendDLRegisterRequest),jQuery(document).on("click","a.to-select-colors-icon",function(e){var t=getBasicDLObject();(t=sendDLWhenPDPLoads()).site_events={change_color:!0},callTrackAnalytics(t)}),jQuery(document).on("click",".itemS .catEntryThumbnail",function(e){var t=getBasicDLObject();console.log($(this)),(t=sendDLWhenPDPLoads()).site_events={select_similar_products:!0};var a=$(this).find("div.brand")[0].baseURI.split("/").pop().split("-").pop();addSimilarProductsTo(t),console.log(a);var r=t.similar_products,o=!1;for(i=0;i<r.length&&!o;i++)r[i].product_id===a&&(o=!0,t.products=[r[i]]);callTrackAnalytics(t)}),jQuery(document).on("click","#hic-colors .catentry-radio",changeLens),$(window).on("load",function(e){if(void 0!==$("#TOStoreNameForGetDirections")[0]){var t={};t.store_name=$("#TOStoreNameForGetDirections")[0].innerText;var a=getBasicDLObject(),r=!(a.site_events={get_directions:!0}),o=[];for(null!==sessionStorage.getItem("store_list")&&(o=JSON.parse(sessionStorage.getItem("store_list"))),i=0;i<o.length&&!r;i++)o[i].store_name.toUpperCase()===t.store_name&&(t=o[i],r=!0);a.page_name=["store_locator","get_directions"],a.site_events="get_directions",a.stores=[t],callTrackAnalytics(a)}}),jQuery(document).on("click",".schedule-exam-store",function(e){var t=getBasicDLObject();t.stores=[],null!==sessionStorage.getItem("store_list")&&(t.stores=JSON.parse(sessionStorage.getItem("store_list"))),t.zip_code=JSON.parse($.cookie("zip_code")),t.site_events={exam_scheduler_schedule:!0},callTrackAnalytics(t)}),jQuery(document).on("load","#examContentTemplate",sendDLForExamReview()),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.Blazy=t()}(this,function(){function r(e){var t=e._util;t.elements=function(e){for(var t=[],a=(e=e.root.querySelectorAll(e.selector)).length;a--;t.unshift(e[a]));return t}(e.options),t.count=t.elements.length,t.destroyed&&(t.destroyed=!1,e.options.container&&h(e.options.container,function(e){m(e,"scroll",t.validateT)}),m(window,"resize",t.saveViewportOffsetT),m(window,"resize",t.validateT),m(window,"scroll",t.validateT)),o(e)}function o(e){for(var t=e._util,a=0;a<t.count;a++){var r=t.elements[a],o=r,s=e.options,n=o.getBoundingClientRect();s.container&&S&&(o=o.closest(s.containerClass))?s=!!i(o=o.getBoundingClientRect(),v)&&i(n,{top:o.top-s.offset,right:o.right+s.offset,bottom:o.bottom+s.offset,left:o.left-s.offset}):s=i(n,v),(s||g(r,e.options.successClass))&&(e.load(r),t.elements.splice(a,1),t.count--,a--)}0===t.count&&e.destroy()}function i(e,t){return e.right>=t.left&&e.bottom>=t.top&&e.left<=t.right&&e.top<=t.bottom}function n(e,t,r){var a,o,s,n,i,d,l;!g(e,r.successClass)&&(t||r.loadInvisible||0<e.offsetWidth&&0<e.offsetHeight)&&((t=e.getAttribute(f)||e.getAttribute(r.src))?(a=(t=t.split(r.separator))[P&&1<t.length?1:0],o=e.getAttribute(r.srcset),s="img"===e.nodeName.toLowerCase(),n=(t=e.parentNode)&&"picture"===t.nodeName.toLowerCase(),s||void 0===e.src?(i=new Image,d=function(){r.error&&r.error(e,"invalid"),p(e,r.errorClass),_(i,"error",d),_(i,"load",l)},l=function(){s?n||u(e,a,o):e.style.backgroundImage='url("'+a+'")',c(e,r),_(i,"load",l),_(i,"error",d)},n&&(i=e,h(t.getElementsByTagName("source"),function(e){var t=r.srcset,a=e.getAttribute(t);a&&(e.setAttribute("srcset",a),e.removeAttribute(t))})),m(i,"error",d),m(i,"load",l),u(i,a,o)):(e.src=a,c(e,r))):"video"===e.nodeName.toLowerCase()?(h(e.getElementsByTagName("source"),function(e){var t=r.src,a=e.getAttribute(t);a&&(e.setAttribute("src",a),e.removeAttribute(t))}),e.load(),c(e,r)):(r.error&&r.error(e,"missing"),p(e,r.errorClass)))}function c(t,e){p(t,e.successClass),e.success&&e.success(t),t.removeAttribute(e.src),t.removeAttribute(e.srcset),h(e.breakpoints,function(e){t.removeAttribute(e.src)})}function u(e,t,a){a&&e.setAttribute("srcset",a),e.src=t}function g(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function p(e,t){g(e,t)||(e.className+=" "+t)}function d(e){v.bottom=(window.innerHeight||document.documentElement.clientHeight)+e,v.right=(window.innerWidth||document.documentElement.clientWidth)+e}function m(e,t,a){e.attachEvent?e.attachEvent&&e.attachEvent("on"+t,a):e.addEventListener(t,a,{capture:!1,passive:!0})}function _(e,t,a){e.detachEvent?e.detachEvent&&e.detachEvent("on"+t,a):e.removeEventListener(t,a,{capture:!1,passive:!0})}function h(e,t){if(e&&t)for(var a=e.length,r=0;r<a&&!1!==t(e[r],r);r++);}function l(t,a,r){var o=0;return function(){var e=+new Date;e-o<a||(o=e,t.apply(r,arguments))}}var f,v,P,S;return function(e){var s;document.querySelectorAll||(s=document.createStyleSheet(),document.querySelectorAll=function(e,t,a,r,o){for(o=document.all,t=[],a=(e=e.replace(/\[for\b/gi,"[htmlFor").split(",")).length;a--;){for(s.addRule(e[a],"k:v"),r=o.length;r--;)o[r].currentStyle.k&&t.push(o[r]);s.removeRule(0)}return t});var t=this,a=t._util={};a.elements=[],a.destroyed=!0,t.options=e||{},t.options.error=t.options.error||!1,t.options.offset=t.options.offset||100,t.options.root=t.options.root||document,t.options.success=t.options.success||!1,t.options.selector=t.options.selector||".b-lazy",t.options.separator=t.options.separator||"|",t.options.containerClass=t.options.container,t.options.container=!!t.options.containerClass&&document.querySelectorAll(t.options.containerClass),t.options.errorClass=t.options.errorClass||"b-error",t.options.breakpoints=t.options.breakpoints||!1,t.options.loadInvisible=t.options.loadInvisible||!1,t.options.successClass=t.options.successClass||"b-loaded",t.options.validateDelay=t.options.validateDelay||25,t.options.saveViewportOffsetDelay=t.options.saveViewportOffsetDelay||50,t.options.srcset=t.options.srcset||"data-srcset",t.options.src=f=t.options.src||"data-src",S=Element.prototype.closest,P=1<window.devicePixelRatio,(v={}).top=0-t.options.offset,v.left=0-t.options.offset,t.revalidate=function(){r(t)},t.load=function(e,t){var a=this.options;void 0===e.length?n(e,t,a):h(e,function(e){n(e,t,a)})},t.destroy=function(){var t=this._util;this.options.container&&h(this.options.container,function(e){_(e,"scroll",t.validateT)}),_(window,"scroll",t.validateT),_(window,"resize",t.validateT),_(window,"resize",t.saveViewportOffsetT),t.count=0,t.elements.length=0,t.destroyed=!0},a.validateT=l(function(){o(t)},t.options.validateDelay,t),a.saveViewportOffsetT=l(function(){d(t.options.offset)},t.options.saveViewportOffsetDelay,t),d(t.options.offset),h(t.options.breakpoints,function(e){if(e.width>=window.screen.width)return f=e.src,!1}),setTimeout(function(){r(t)})}});