<<<<<<< HEAD
!function o(n,r,c){function s(t,e){if(!r[t]){if(!n[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(a)return a(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}i=r[t]={exports:{}},n[t][0].call(i.exports,function(e){return s(n[t][1][e]||e)},i,i.exports,o,n,r,c)}return r[t].exports}for(var a="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,i){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,i){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault"),n=(Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,o(e("./utilities")));i.default={init:function(){n.default.initializeSwiper(".controls-choices-slider",{slidesPerView:"auto",centeredSlides:!0,loopedSlides:2,spaceBetween:32,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{1024:{spaceBetween:64}}})}}},{"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default={init:function(){var e=navigator.userAgent.toLowerCase(),t=-1<e.indexOf("android"),e=/(iphone|ipad|ipod|ios)/i.test(e),i=document.getElementById("downloadCTA");t?i.href="https://play.google.com/store/apps/details?id=com.facebook.stella&hl=en_US":e&&(i.href="https://apps.apple.com/it/app/meta-view-for-smart-glasses/id1558240027")}}},{}],4:[function(e,t,i){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault"),n=(Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,o(e("./utilities")));i.default={init:function(){n.default.initializeSwiperOnMobile(".features-slider",{slidesPerView:1.25,pagination:{el:".swiper-pagination"}})}}},{"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],5:[function(e,t,i){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault"),n=(Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,o(e("./utilities")));i.default={init:function(){n.default.initializeSwiperOnMobile(".four-video-slider",{slidesPerView:1.2})}}},{"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],6:[function(e,t,i){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault"),n=(Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,o(e("./utilities")));i.default={init:function(){n.default.initializeSwiperOnMobile(".get-support-slider",{slidesPerView:1.25,pagination:{el:".swiper-pagination"}})}}},{"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],7:[function(e,t,i){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault"),n=o(e("./utilities")),r=o(e("./fourVideos")),c=o(e("./getSupport")),s=o(e("./features")),a=o(e("./controlsChoices")),l=o(e("./products")),d=o(e("./downloadApp")),u={setTextOnStickyBanner:function(){window.addEventListener("scroll",function(){var e=document.querySelectorAll("section"),t=document.getElementById("products").offsetTop,i=document.getElementById("stickyBanner"),o=i.querySelector("#stickyBannerText"),n=null;e.forEach(function(e){var t=e.offsetTop,i=t+e.clientHeight;window.scrollY>=t&&window.scrollY<i&&(n=e)}),n&&(e=n.querySelector("[data-title]"),window.scrollY>=t?i.classList.remove("cb_d-none"):i.classList.add("cb_d-none"),e)&&(t=e.getAttribute("data-title"),o.textContent=t)})},init:function(){this.setTextOnStickyBanner(),n.default.playPauseVideoWithControls(),n.default.volumeOnOffVideo(),n.default.manageAccordion(),r.default.init(),c.default.init(),s.default.init(),a.default.init(),l.default.init(),d.default.init()}};document.addEventListener("DOMContentLoaded",function(){u.init();var e=document.querySelector("#hero .video-control.play-pause"),t=(e.click(),document.querySelector("#hero video")),i=document.querySelector("#hero .video-cover");t.addEventListener("ended",function(){e.click(),t.classList.add("cb_d-none"),i.classList.remove("cb_d-none")},!1)})},{"./controlsChoices":2,"./downloadApp":3,"./features":4,"./fourVideos":5,"./getSupport":6,"./products":8,"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default={init:function(){function t(){$(".ct_midProducts_carousel .ct_category").removeClass("ct_selected"),$(this).addClass("ct_selected"),$(".ct_midProducts_carousel .swiper-slide").remove();o("ct_SearchRule_CategoryCarousel__"+$(this).attr("ct_category"));var e=$(this).attr("ct_category_URL"),t="X_"+$(this).attr("ct_category")+"_Carousel";$(".ct_midProducts_carousel .ct_carousel_view_all").each(function(){$(this).attr("href",e),$(this).attr("data-element-id",t)})}function e(){var e=this.querySelector("img").getAttribute("src").replace("shad__fr","shad__qt");this.querySelector("img").setAttribute("src",e)}function i(){var e=this.querySelector("img").getAttribute("src").replace("shad__qt","shad__fr");this.querySelector("img").setAttribute("src",e)}function o(e){window.location.href.indexOf("lenscrafter.com");var t="/ajaxSearchDisplayView?storeId="+storeId+"&catalogId=22701&langId=-1&pageSize=120&orderBy=0&searchTerm="+e,i="https://media.lenscrafters.com/2023/SUPERNOVA/JSON/".concat(e,"_Variants.json");function o(e){return fetch(e).then(function(e){return e.json()}).catch(function(e){console.error("Errore nel caricamento JSON:",e)})}o(t).then(function(m){o(i).then(function(e){for(var t=m.products.products.product,i=t.length-1;0<=i;i--){var o=e["variants"+i]||[],o=(t[i].variants=o,t[i].pdpURL),n=t[i].upc,r=t[i].brand,c=t[i].productName.substring(1).split("_")[0],s=t[i].listPrice.replace("$ 0",""),a=t[i].price,l=Math.floor((100-parseInt(a.replace("$ ",""))/parseInt(s.replace("$ ",""))*100)/5*5),d=document.querySelector(".ct_midProducts_carousel .ct_category_carousel .swiper-wrapper"),u=document.createElement("a"),o=(u.classList.add("swiper-slide","ct_slide","ct_productImage"),u.href=o,u.setAttribute("data-element-id","X_ProductCarousel_LP"),u.setAttribute("data-description",n),u.setAttribute("aria-label","Shop "+c),document.createElement("div")),p=(o.classList.add("ct_box"),document.createElement("img")),f=(p.src="https://assets.lenscrafters.com/is/image/LensCrafters/"+n+"__STD__shad__fr.png?imwidth=1024",p.alt="",o.appendChild(p),u.appendChild(o),document.createElement("div")),n=(f.classList.add("ct_description"),document.createElement("p")),p=(n.classList.add("ct_brand"),n.textContent=r,f.appendChild(n),document.createElement("p")),_=(p.classList.add("ct_name"),p.textContent=c,f.appendChild(p),document.createElement("p")),o=(_.classList.add("ct_variant_name"),t[i].variants.forEach(function(e){e&&(f.appendChild(_),_.textContent=e.variantColor)}),document.createElement("div")),r=(o.classList.add("ct_price","ct_price_mob_hide"),document.createElement("p")),n=(r.classList.add("ct_from"),r.textContent="From",document.createElement("p")),c=(n.classList.add("ct_list_price"),n.textContent="$"+s,document.createElement("p")),p=(c.classList.add("ct_discounted_price"),c.textContent="$"+a,document.createElement("p")),s=(p.classList.add("ct_discount"),p.textContent=l+"% Off",o.appendChild(r),o.appendChild(n),o.appendChild(c),o.appendChild(p),f.appendChild(o),document.createElement("div")),l=(s.classList.add("ct_price","cb_d-lg-none"),document.createElement("p")),r=(l.classList.add("ct_from"),l.textContent="Frame only",document.createElement("p"));r.classList.add("ct_discounted_price"),r.textContent="$"+a,s.appendChild(l),s.appendChild(r),f.appendChild(s),u.appendChild(f),d.prepend(u)}document.querySelectorAll(".ct_discount").forEach(function(e){"NaN% Off"===e.textContent&&(e.style.display="none",e=e.parentNode.querySelector(".ct_list_price"))&&(e.style.display="none")}),new Swiper(".ct_midProducts_carousel .ct_category_carousel",{slidesPerView:"1.5",centeredSlides:!0,spaceBetween:16,initialSlide:4,pagination:{el:".swiper-pagination"},breakpoints:{1024:{slidesPerView:"3.5",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}})})})}var n,r;n=document.querySelector(".ct_midProducts_carousel .ct_category.ct_selected").getAttribute("ct_category_URL"),r="X_"+document.querySelector(".ct_midProducts_carousel .ct_category.ct_selected").getAttribute("ct_category")+"_Carousel",document.querySelectorAll(".ct_midProducts_carousel .ct_carousel_view_all").forEach(function(e){e.setAttribute("href",n),e.setAttribute("data-element-id",r)}),document.querySelectorAll(".ct_midProducts_carousel .ct_category").forEach(function(e){e.addEventListener("click",t)}),$(document).on("mouseenter",".ct_category_carousel_module .ct_slide .ct_box",e),$(document).on("mouseleave",".ct_category_carousel_module .ct_slide .ct_box",i),o("ct_SearchRule_CategoryCarousel__Wayfarer"),document.querySelectorAll(".ct_midProducts_carousel .ct_category")}}},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default={setVideoUrl:function(e){var t=window.matchMedia("(max-width: 768px)"),i=e.getAttribute("data-video-mob"),o=e.getAttribute("data-video-desk"),t=t.matches?'<source src="'.concat(i,'" type="video/mp4">Your browser does not support the video tag.'):'<source src="'.concat(o,'" type="video/mp4">Your browser does not support the video tag.');e.innerHTML=t},playPauseVideoWithControls:function(){for(var c=this,e=document.querySelectorAll(".video-control.play-pause"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.preventDefault();var e=this.closest("section>div"),t=this.closest(".video-container"),i=t.querySelector("video"),o=t.querySelector(".video-cover"),n=t.nextElementSibling,t=this.querySelector(".play"),r=this.querySelector(".pause");if(c.setVideoUrl(i),o.classList.add("cb_d-none"),i.classList.remove("cb_d-none"),e.classList.contains("is-banner"))for(;n;)n.classList.add("cb_d-none"),n=n.nextElementSibling;t.classList.toggle("cb_d-none"),r.classList.toggle("cb_d-none"),i.classList.contains("is-playing")?(i.pause(),i.classList.remove("is-playing")):(document.querySelectorAll("video.is-playing").forEach(function(e){e.classList.remove("is-playing"),e.closest(".video-container").querySelector(".play").classList.remove("cb_d-none"),e.closest(".video-container").querySelector(".pause").classList.add("cb_d-none"),e.pause()}),i.play(),i.classList.add("is-playing"))})},volumeOnOffVideo:function(){for(var e=document.querySelectorAll(".video-control.volume-on-off"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.preventDefault();var e=this.closest(".video-container").querySelector("video"),t=this.querySelector(".volume-on"),i=this.querySelector(".volume-off");t.classList.toggle("cb_d-none"),i.classList.toggle("cb_d-none"),t.classList.contains("cb_d-none")?e.muted=!0:e.muted=!1})},manageAccordion:function(){for(var e=document.querySelectorAll(".accordion-button"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("active");var t,e=this.nextElementSibling;e.classList.contains("opened")?(e.classList.remove("opened"),e.style.height=0):(e.classList.add("opened"),t=e.children[0].offsetHeight,e.style.height=t+"px")})},initializeSwiper:function(e,t){return new Swiper(e,t)},initializeSwiperOnMobile:function(i,e){function o(){n.matches&&(t=new Swiper(i,e))}var t,n=window.matchMedia("(max-width: 767px)");return o(),window.addEventListener("resize",function(){for(var e=document.querySelectorAll(i),t=0;t<e.length;t++)e[t].classList.contains("swiper-initialized")?n.matches||(e[t].swiper.disable(),e[t].swiper.destroy(!0,!0)):o()}),t},pauseVideoOnPrevNextSlide:function(e){var t=document.querySelector(e);t.swiper.on("slideChange",function(){t.querySelectorAll("video.is-playing").forEach(function(e){e.classList.remove("is-playing"),e.closest(".video-container").querySelector(".play").classList.remove("cb_d-none"),e.closest(".video-container").querySelector(".pause").classList.add("cb_d-none"),e.pause()})})}}},{}]},{},[7]);
=======
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}
module.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],2:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _utilities = _interopRequireDefault(require("./utilities"));
var controlsChoicesManager = {
  init: function init() {
    var swiperOptions = {
      slidesPerView: "auto",
      centeredSlides: true,
      spaceBetween: 32,
      loop: true,
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev"
      },
      breakpoints: {
        1024: {
          spaceBetween: 64
        }
      }
    };
    _utilities["default"].initializeSwiper(".controls-choices-slider", swiperOptions);

    // utilitiesManager.pauseVideoOnPrevNextSlide(".controls-choices-slider");
  }
};
var _default = controlsChoicesManager;
exports["default"] = _default;

},{"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var downloadAppManager = {
  init: function init() {
    var userAgent = navigator.userAgent.toLowerCase();
    var isAndroid = userAgent.indexOf("android") > -1;
    var isiOS = /(iphone|ipad|ipod|ios)/i.test(userAgent);
    var downloadCTA = document.getElementById("downloadCTA");
    if (isAndroid) {
      downloadCTA.href = "https://play.google.com/store/apps/details?id=com.facebook.stella&hl=en_US";
    } else if (isiOS) {
      downloadCTA.href = "https://apps.apple.com/it/app/meta-view-for-smart-glasses/id1558240027";
    }
  }
};
var _default = downloadAppManager;
exports["default"] = _default;

},{}],4:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _utilities = _interopRequireDefault(require("./utilities"));
var featuresManager = {
  init: function init() {
    var swiperOptions = {
      slidesPerView: 1.25,
      pagination: {
        el: ".swiper-pagination"
      }
    };
    _utilities["default"].initializeSwiperOnMobile(".features-slider", swiperOptions);
  }
};
var _default = featuresManager;
exports["default"] = _default;

},{"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],5:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _utilities = _interopRequireDefault(require("./utilities"));
var fourVideosManager = {
  init: function init() {
    var swiperOptions = {
      slidesPerView: 1.2
    };
    _utilities["default"].initializeSwiperOnMobile(".four-video-slider", swiperOptions);
  }
};
var _default = fourVideosManager;
exports["default"] = _default;

},{"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],6:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _utilities = _interopRequireDefault(require("./utilities"));
var getSupportManager = {
  init: function init() {
    var swiperOptions = {
      slidesPerView: 1.25,
      pagination: {
        el: ".swiper-pagination"
      }
    };
    _utilities["default"].initializeSwiperOnMobile(".get-support-slider", swiperOptions);
  }
};
var _default = getSupportManager;
exports["default"] = _default;

},{"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],7:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _utilities = _interopRequireDefault(require("./utilities"));
var _fourVideos = _interopRequireDefault(require("./fourVideos"));
var _getSupport = _interopRequireDefault(require("./getSupport"));
var _features = _interopRequireDefault(require("./features"));
var _controlsChoices = _interopRequireDefault(require("./controlsChoices"));
var _products = _interopRequireDefault(require("./products"));
var _downloadApp = _interopRequireDefault(require("./downloadApp"));
// import Swiper JS
// import Swiper from "swiper/swiper-bundle.min.js";

//class that handler generic scripts of LP
var mainManager = {
  setTextOnStickyBanner: function setTextOnStickyBanner() {
    window.addEventListener("scroll", function () {
      var sections = document.querySelectorAll("section");
      var productSection = document.getElementById("products");
      var productSectionTop = productSection.offsetTop;
      var stickyBannerEl = document.getElementById("stickyBanner");
      var stickyBannerText = stickyBannerEl.querySelector("#stickyBannerText");
      var currentSection = null;
      sections.forEach(function (section) {
        var sectionTop = section.offsetTop;
        var sectionBottom = sectionTop + section.clientHeight;
        if (window.scrollY >= sectionTop && window.scrollY < sectionBottom) {
          currentSection = section;
        }
      });
      if (currentSection) {
        var attribute = currentSection.querySelector("[data-title]");
        if (window.scrollY >= productSectionTop) {
          stickyBannerEl.classList.remove("cb_d-none");
        } else {
          stickyBannerEl.classList.add("cb_d-none");
        }
        if (attribute) {
          var attributeValue = attribute.getAttribute("data-title");
          stickyBannerText.textContent = attributeValue;
        }
      }
    });
  },
  init: function init() {
    var thisClass = this;
    thisClass.setTextOnStickyBanner();
    _utilities["default"].playPauseVideoWithControls();
    _utilities["default"].volumeOnOffVideo();
    _utilities["default"].manageAccordion();
    _fourVideos["default"].init();
    _getSupport["default"].init();
    _features["default"].init();
    _controlsChoices["default"].init();
    _products["default"].init();
    _downloadApp["default"].init();
  }
};
document.addEventListener("DOMContentLoaded", function () {
  mainManager.init();

  //Manage Hero video behaviour
  var heroPlayPause = document.querySelector("#hero .video-control.play-pause");
  heroPlayPause.click();
  var heroVideoEl = document.querySelector("#hero video");
  var heroCoverImg = document.querySelector("#hero .video-cover");
  heroVideoEl.addEventListener("ended", function () {
    heroPlayPause.click();
    heroVideoEl.classList.add("cb_d-none");
    heroCoverImg.classList.remove("cb_d-none");
  }, false);
});

},{"./controlsChoices":2,"./downloadApp":3,"./features":4,"./fourVideos":5,"./getSupport":6,"./products":8,"./utilities":9,"@babel/runtime/helpers/interopRequireDefault":1}],8:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var productsManager = {
  init: function init() {
    function ct_loadSelectedViewAllURLMidProducts() {
      /* Get URL from selected category */
      var ct_mainURL = document.querySelector(".ct_midProducts_carousel .ct_category.ct_selected").getAttribute("ct_category_URL");
      var ct_mainDataElementID = "X_" + document.querySelector(".ct_midProducts_carousel .ct_category.ct_selected").getAttribute("ct_category") + "_Carousel";

      /* Update all View all URL's */
      var viewAllLinks = document.querySelectorAll(".ct_midProducts_carousel .ct_carousel_view_all");
      viewAllLinks.forEach(function (link) {
        link.setAttribute("href", ct_mainURL);
        link.setAttribute("data-element-id", ct_mainDataElementID);
      });
    }
    function ct_category_swapMidProducts() {
      /* Updates the style of selected category */
      $(".ct_midProducts_carousel .ct_category").removeClass("ct_selected");
      $(this).addClass("ct_selected");

      /* Hides old carousel tiles */
      $(".ct_midProducts_carousel .swiper-slide").remove();

      /* Get searchTerm from clicked category and populate the carousel */
      var ct_selected_category = $(this).attr("ct_category");
      var ct_searchTerm = "ct_SearchRule_CategoryCarousel__" + ct_selected_category;
      ct_populate_category_carouselMidProducts(ct_searchTerm);

      /* Get products value from local storage */
      // const storedValue = localStorage.getItem(ct_selected_category);
      // if (this.classList.contains("ct_clicked")) {
      //   const retrievedObject = JSON.parse(storedValue);
      //   console.log(retrievedObject);
      // } else {
      //   ct_populate_category_carouselMidProducts(ct_searchTerm);
      // }
      // this.classList.add("ct_clicked");

      /* Get URL and data-element-id from clicked category and update view all data */
      var ct_viewAllURL = $(this).attr("ct_category_URL");
      var ct_viewAllDataElementID = "X_" + $(this).attr("ct_category") + "_Carousel";
      $(".ct_midProducts_carousel .ct_carousel_view_all").each(function () {
        $(this).attr("href", ct_viewAllURL);
        $(this).attr("data-element-id", ct_viewAllDataElementID);
      });
    }
    function ct_category_carouselMidProducts() {
      /* Creates the carousel */
      var ct_categoryCarouselMidProducts = new Swiper(".ct_midProducts_carousel .ct_category_carousel", {
        slidesPerView: "1.5",
        centeredSlides: true,
        spaceBetween: 16,
        initialSlide: 4,
        pagination: {
          el: ".swiper-pagination"
        },
        breakpoints: {
          1024: {
            slidesPerView: "3.5",
            navigation: {
              nextEl: ".swiper-button-next",
              prevEl: ".swiper-button-prev"
            }
          }
        }
      });
    }
    function ct_checkDiscountMidProducts() {
      /* Check if Product is on discount, if not hides the discount percentage and full price */
      var ct_discountElements = document.querySelectorAll(".ct_discount");
      ct_discountElements.forEach(function (discountElement) {
        if (discountElement.textContent === "NaN% Off") {
          discountElement.style.display = "none";
          var ct_listPriceElement = discountElement.parentNode.querySelector(".ct_list_price");
          if (ct_listPriceElement) {
            ct_listPriceElement.style.display = "none";
          }
        }
      });
    }

    /* Both functions manage the image on mouse enter and mouse leave */
    function ct_hoverProductMidProducts() {
      var ct_imgPath = this.querySelector("img").getAttribute("src");
      var ct_updatedImgPath = ct_imgPath.replace("shad__fr", "shad__qt");
      this.querySelector("img").setAttribute("src", ct_updatedImgPath);
    }
    function ct_unHoverProductMidProducts() {
      var ct_imgPath = this.querySelector("img").getAttribute("src");
      var ct_updatedImgPath = ct_imgPath.replace("shad__qt", "shad__fr");
      this.querySelector("img").setAttribute("src", ct_updatedImgPath);
    }
    function ct_populate_category_carouselMidProducts(ct_searchTermMidProducts, ct_dataElementID) {
      /* Set the data-element-id of carousel tiles */
      var ct_dataElementID = "X_ProductCarousel_LP";

      /* Check and add store ID to Ajax call */
      var ct_storeID = window.location.href.indexOf("lenscrafter.com") > -1 ? "10851" : "10852";

      /* Get products from WCS and create a tile for each one */
      var urlToCall = "/ajaxSearchDisplayView?storeId=" + storeId + "&catalogId=22701&langId=-1&pageSize=120&orderBy=0&searchTerm=" + ct_searchTermMidProducts;
      var variantJsonUrl = "https://media.lenscrafters.com/2023/SUPERNOVA/JSON/".concat(ct_searchTermMidProducts, "_Variants.json");

      /* Funzione per eseguire il fetch di un JSON */
      function fetchJSON(url) {
        return fetch(url).then(function (response) {
          return response.json();
        })["catch"](function (error) {
          console.error("Errore nel caricamento JSON:", error);
        });
      }
      fetchJSON(urlToCall).then(function (productsJson) {
        fetchJSON(variantJsonUrl).then(function (variantsJson) {
          var products = productsJson.products.products.product;

          /* Push categorized data to local storage */
          // if (
          //   ct_searchTermMidProducts ==
          //   "ct_SearchRule_CategoryCarousel__Wayfarer"
          // ) {
          //   localStorage.setItem("Wayfarer", JSON.stringify(products));
          // }
          // if (
          //   ct_searchTermMidProducts ==
          //   "ct_SearchRule_CategoryCarousel__Headliner"
          // ) {
          //   localStorage.setItem("Headliner", JSON.stringify(products));
          // }

          for (var i = products.length - 1; i >= 0; i--) {
            /* Aggiungi le varianti a ciascun prodotto */
            var variantsKey = "variants" + i; // L'indice di posizionamento parte da 0
            var variants = variantsJson[variantsKey] || [];
            products[i].variants = variants;
            var ct_cc_url = products[i].pdpURL;
            var ct_cc_upc = products[i].upc;
            var ct_cc_brand = products[i].brand;
            var ct_cc_productName = products[i].productName.substring(1).split("_")[0];
            var ct_cc_listPrice = products[i].listPrice.replace("$ 0", "");
            var ct_cc_price = products[i].price;
            var ct_cc_discountPercentage = Math.floor((100 - parseInt(ct_cc_price.replace("$ ", "")) / parseInt(ct_cc_listPrice.replace("$ ", "")) * 100) / 5 * 5);
            var ct_categoryCarousel = document.querySelector(".ct_midProducts_carousel .ct_category_carousel .swiper-wrapper");
            var ct_slide = document.createElement("a");
            ct_slide.classList.add("swiper-slide", "ct_slide", "ct_productImage");
            ct_slide.href = ct_cc_url;
            ct_slide.setAttribute("data-element-id", ct_dataElementID);
            ct_slide.setAttribute("data-description", ct_cc_upc);
            ct_slide.setAttribute("aria-label", "Shop " + ct_cc_productName);
            var ct_box = document.createElement("div");
            ct_box.classList.add("ct_box");
            var ct_img = document.createElement("img");
            ct_img.src = "https://assets.lenscrafters.com/is/image/LensCrafters/" + ct_cc_upc + "__STD__shad__fr.png?imwidth=1024";
            ct_img.alt = "";
            ct_box.appendChild(ct_img);
            ct_slide.appendChild(ct_box);
            var ct_description = document.createElement("div");
            ct_description.classList.add("ct_description");
            var ct_brand = document.createElement("p");
            ct_brand.classList.add("ct_brand");
            ct_brand.textContent = ct_cc_brand;
            ct_description.appendChild(ct_brand);
            var ct_name = document.createElement("p");
            ct_name.classList.add("ct_name");
            ct_name.textContent = ct_cc_productName;
            ct_description.appendChild(ct_name);
            var ct_variant_name = document.createElement("p");
            ct_variant_name.classList.add("ct_variant_name");

            // Iteriamo sulle varianti del prodotto
            products[i].variants.forEach(function (variant) {
              if (variant) {
                ct_description.appendChild(ct_variant_name);
                ct_variant_name.textContent = variant.variantColor;
              }
            });
            var ct_priceMobHide = document.createElement("div");
            ct_priceMobHide.classList.add("ct_price", "ct_price_mob_hide");
            var ct_fromMob = document.createElement("p");
            ct_fromMob.classList.add("ct_from");
            ct_fromMob.textContent = "From";
            var ct_listPrice = document.createElement("p");
            ct_listPrice.classList.add("ct_list_price");
            ct_listPrice.textContent = "$" + ct_cc_listPrice;
            var ct_discountedPrice = document.createElement("p");
            ct_discountedPrice.classList.add("ct_discounted_price");
            ct_discountedPrice.textContent = "$" + ct_cc_price;
            var ct_discount = document.createElement("p");
            ct_discount.classList.add("ct_discount");
            ct_discount.textContent = ct_cc_discountPercentage + "% Off";
            ct_priceMobHide.appendChild(ct_fromMob);
            ct_priceMobHide.appendChild(ct_listPrice);
            ct_priceMobHide.appendChild(ct_discountedPrice);
            ct_priceMobHide.appendChild(ct_discount);
            ct_description.appendChild(ct_priceMobHide);
            var ct_priceDeskHide = document.createElement("div");
            ct_priceDeskHide.classList.add("ct_price", "cb_d-lg-none");
            var ct_fromDesk = document.createElement("p");
            ct_fromDesk.classList.add("ct_from");
            ct_fromDesk.textContent = "Frame only";
            var ct_discountedPriceDesk = document.createElement("p");
            ct_discountedPriceDesk.classList.add("ct_discounted_price");
            ct_discountedPriceDesk.textContent = "$" + ct_cc_price;
            ct_priceDeskHide.appendChild(ct_fromDesk);
            ct_priceDeskHide.appendChild(ct_discountedPriceDesk);
            ct_description.appendChild(ct_priceDeskHide);
            ct_slide.appendChild(ct_description);
            ct_categoryCarousel.prepend(ct_slide);
          }
          ct_checkDiscountMidProducts();
          ct_category_carouselMidProducts();
        });
      });
    }
    function ct_init() {
      /* Compiles View All URL on load */
      ct_loadSelectedViewAllURLMidProducts();

      /* Manage the swap between categories */
      var ct_categoriesMidProducts = document.querySelectorAll(".ct_midProducts_carousel .ct_category");
      ct_categoriesMidProducts.forEach(function (categoryMidproducts) {
        categoryMidproducts.addEventListener("click", ct_category_swapMidProducts);
      });

      /* Hover products animation */
      $(document).on("mouseenter", ".ct_category_carousel_module .ct_slide .ct_box", ct_hoverProductMidProducts);
      $(document).on("mouseleave", ".ct_category_carousel_module .ct_slide .ct_box", ct_unHoverProductMidProducts);

      /* Populate products and create carousel */
      var ct_searchTermMidProducts = "ct_SearchRule_CategoryCarousel__Wayfarer";
      ct_populate_category_carouselMidProducts(ct_searchTermMidProducts);
      var ct_categoriesMidProducts = document.querySelectorAll(".ct_midProducts_carousel .ct_category");
    }
    ct_init();
  }
};
var _default = productsManager;
exports["default"] = _default;

},{}],9:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
//class that handler utilitis that can be reused everywhere
var utilitiesManager = {
  setVideoUrl: function setVideoUrl(currentVideoEl) {
    var mediaQuery = window.matchMedia("(max-width: 768px)");
    var videoMob = currentVideoEl.getAttribute("data-video-mob");
    var videoDesk = currentVideoEl.getAttribute("data-video-desk");
    var videoSource;
    if (mediaQuery.matches) {
      videoSource = "<source src=\"".concat(videoMob, "\" type=\"video/mp4\">Your browser does not support the video tag.");
    } else {
      videoSource = "<source src=\"".concat(videoDesk, "\" type=\"video/mp4\">Your browser does not support the video tag.");
    }
    currentVideoEl.innerHTML = videoSource;
  },
  playPauseVideoWithControls: function playPauseVideoWithControls() {
    var thisClass = this;
    var playPauseControl = document.querySelectorAll(".video-control.play-pause");
    for (var i = 0; i < playPauseControl.length; i++) {
      playPauseControl[i].addEventListener("click", function (event) {
        event.preventDefault();
        var currentClosestContainer = this.closest("section>div");
        var currentVideoContainer = this.closest(".video-container");
        var currentVideoEl = currentVideoContainer.querySelector("video");
        var currentVideoCover = currentVideoContainer.querySelector(".video-cover");
        var nextElem = currentVideoContainer.nextElementSibling;
        var playIcon = this.querySelector(".play");
        var pauseIcon = this.querySelector(".pause");
        thisClass.setVideoUrl(currentVideoEl);
        currentVideoCover.classList.add("cb_d-none");
        currentVideoEl.classList.remove("cb_d-none");
        if (currentClosestContainer.classList.contains("is-banner")) {
          while (nextElem) {
            nextElem.classList.add("cb_d-none");
            nextElem = nextElem.nextElementSibling;
          }
        }
        playIcon.classList.toggle("cb_d-none");
        pauseIcon.classList.toggle("cb_d-none");
        if (!currentVideoEl.classList.contains("is-playing")) {
          document.querySelectorAll("video.is-playing").forEach(function (video) {
            video.classList.remove("is-playing");
            video.closest(".video-container").querySelector(".play").classList.remove("cb_d-none");
            video.closest(".video-container").querySelector(".pause").classList.add("cb_d-none");
            video.pause();
          });
          currentVideoEl.play();
          currentVideoEl.classList.add("is-playing");
        } else {
          currentVideoEl.pause();
          currentVideoEl.classList.remove("is-playing");
        }
      });
    }
  },
  volumeOnOffVideo: function volumeOnOffVideo() {
    var volumeOnOffControl = document.querySelectorAll(".video-control.volume-on-off");
    for (var i = 0; i < volumeOnOffControl.length; i++) {
      volumeOnOffControl[i].addEventListener("click", function (event) {
        event.preventDefault();
        var currentVideoContainer = this.closest(".video-container");
        var currentVideoEl = currentVideoContainer.querySelector("video");
        var volumeOnIcon = this.querySelector(".volume-on");
        var volumeOffIcon = this.querySelector(".volume-off");
        volumeOnIcon.classList.toggle("cb_d-none");
        volumeOffIcon.classList.toggle("cb_d-none");
        if (volumeOnIcon.classList.contains("cb_d-none")) {
          currentVideoEl.muted = true;
        } else {
          currentVideoEl.muted = false;
        }
      });
    }
  },
  manageAccordion: function manageAccordion() {
    var accordionButton = document.querySelectorAll(".accordion-button");
    for (var i = 0; i < accordionButton.length; i++) {
      accordionButton[i].addEventListener("click", function (event) {
        event.preventDefault();
        this.classList.toggle("active");
        var nextAccordionDetails = this.nextElementSibling;
        if (!nextAccordionDetails.classList.contains("opened")) {
          nextAccordionDetails.classList.add("opened");
          var nextAccordionDetailsHeight = nextAccordionDetails.children[0].offsetHeight;
          nextAccordionDetails.style.height = nextAccordionDetailsHeight + "px";
        } else {
          nextAccordionDetails.classList.remove("opened");
          nextAccordionDetails.style.height = 0;
        }
      });
    }
  },
  initializeSwiper: function initializeSwiper(sliderClass, options) {
    var currentSlider = new Swiper(sliderClass, options);
    return currentSlider;
  },
  initializeSwiperOnMobile: function initializeSwiperOnMobile(sliderClass, options) {
    var mediaQuery = window.matchMedia("(max-width: 767px)");
    var currentSlider;
    var initializeSwiper = function initializeSwiper() {
      if (mediaQuery.matches) {
        currentSlider = new Swiper(sliderClass, options);
      }
    };
    initializeSwiper();
    window.addEventListener("resize", function () {
      var swiperEl = document.querySelectorAll(sliderClass);
      for (var i = 0; i < swiperEl.length; i++) {
        if (!swiperEl[i].classList.contains("swiper-initialized")) {
          initializeSwiper();
        } else if (!mediaQuery.matches) {
          swiperEl[i].swiper.disable();
          swiperEl[i].swiper.destroy(true, true);
        }
      }
    });
    return currentSlider;
  },
  pauseVideoOnPrevNextSlide: function pauseVideoOnPrevNextSlide(sliderClass) {
    var currentSwiperEl = document.querySelector(sliderClass);
    currentSwiperEl.swiper.on("slideChange", function () {
      currentSwiperEl.querySelectorAll("video.is-playing").forEach(function (video) {
        video.classList.remove("is-playing");
        video.closest(".video-container").querySelector(".play").classList.remove("cb_d-none");
        video.closest(".video-container").querySelector(".pause").classList.add("cb_d-none");
        video.pause();
      });
    });
  }
};
var _default = utilitiesManager;
exports["default"] = _default;

},{}]},{},[7]);
>>>>>>> 2023fbb74c689d189bcfe341e99873271ab19e22
