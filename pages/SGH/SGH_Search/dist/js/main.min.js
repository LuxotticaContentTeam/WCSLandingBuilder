!function r(n,o,c){function i(e,t){if(!o[e]){if(!n[e]){var s="function"==typeof require&&require;if(!t&&s)return s(e,!0);if(a)return a(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}s=o[e]={exports:{}},n[e][0].call(s.exports,function(t){return i(n[e][1][t]||t)},s,s.exports,r,n,o,c)}return o[e].exports}for(var a="function"==typeof require&&require,t=0;t<c.length;t++)i(c[t]);return i}({1:[function(t,e,s){"use strict";var r,n,o=t("./modules/accessibility"),c=t("./modules/loader"),i=t("./modules/storeInfo"),a=t("./modules/utils");window.ct_wow__search.structure={device:(0,a.getDevice)(),container:null,prod_list_container:null,prod_list:[],shuffleData:{missingProd:null,missingPos:null},accessibility_mode:!1,placeholders:{utils:{mainCircle:{container:null,prodsCount:3,radius:null},firstCircle:{container:null,prodsCount:13,radius:null},secondCircle:{container:null,prodsCount:14}},coordinates:[]},init:function(t){var e=this;window.ct_wow__search.opening=!0,(0,a.customLog)("WOW SEARCH INIT"),i.storeInfo.getInfo(),t||(this.container=document.querySelector("#ct_wow__search"),this.container.classList.add("ct_active"),this.setCloseHandler(),this.prod_list_container=document.querySelector(".ct_wow__search__products_list"),"D"===this.device&&this.setMouseMove()),"D"!=this.device&&this.calcHeight(),t||(this.buildHtml(),this.setPlaceholders(!0),ct_wow__search.inputManagement.init()),this.entry(),t||c.loader.init(1500),window.addEventListener("resize",this.refreshPositionsDebounced),this.container.addEventListener("keyup",function(t){9!==t.keyCode&&9!==t.which||!1!==e.accessibility_mode||o.accessibility.init(!0)}),window.ct_wow__search.opening=!1},calcHeight:function(){(0,a.customLog)("Calc Height"),window.ct_wow__search.structure.container.style.setProperty("--ct-wow-search-height","".concat(window.innerHeight,"px")),window.addEventListener("resize",this.calcHeight)},buildHtml:function(){var e=this;Object.keys(window.ct_wow__search.data.products).forEach(function(t){e.prod_list_container.innerHTML+='\n      <li class="ct_wow_search__product" data-upc="'.concat(t,'">\n        <div class="ct_wow_search__product__wrap">\n          <a href="').concat("https://www.sunglasshut.com/us"+window.ct_wow__search.data.products[t].url,'" aria-label="shop now ').concat(t,'" data-element-id="X_X_WowSearch_Banner" data-description-="').concat(t,'" tabindex="0">\n              <div class="ct_wow_search__img_container">\n                  <img src="').concat(window.ct_wow__search.data.products[t].img||"https://assets.sunglasshut.com/is/image/LuxotticaRetail/"+t+"__STD__shad__fr.png?impolicy=SGH_bgtransparent&width=640",'" alt="').concat(t,'">\n              </div>\n          </a>\n        </div>\n      </li>\n      ')}),document.querySelectorAll("#ct_wow__search .ct_wow_search__product").forEach(function(t){e.prod_list.push({originElem:t,elem:t.querySelector(".ct_wow_search__product__wrap"),x:t.getBoundingClientRect().x+t.clientWidth/2,y:t.getBoundingClientRect().y+t.clientHeight/2,scalingElem:t.querySelector(".ct_wow_search__product__wrap a"),upc:t.dataset.upc,pos:null,score:0})})},refreshProdPos:function(){this.prod_list.forEach(function(t){t.x=t.originElem.getBoundingClientRect().x+t.originElem.clientWidth/2,t.y=t.originElem.getBoundingClientRect().y+t.originElem.clientWidth/2})},setPlaceholders:function(t){var o,c,i=this;o=t,t=Object.keys(i.placeholders.utils),c=0,t.forEach(function(t,e){var s=i.placeholders.utils[t].container=document.querySelector("#ct_wow__search .ct_wow__search__pos_placeholders__".concat(t," "));if(o)for(var r=0;r<i.placeholders.utils[t].prodsCount;r++)s.innerHTML+='\n              <div class="ct_wow__search__pos_placeholders__'.concat(t,'__placeholder"></div>\n            ');i.placeholders.utils[t].radius=s.clientWidth/2;var n=(0,a.calcCoordinates)(i.placeholders.utils[t].prodsCount,i.placeholders.utils[t].radius);s.querySelectorAll("div").forEach(function(t,e){t.style.top=n[e].y+"px",t.style.left=n[e].x+"px",o?i.placeholders.coordinates.push({elem:t,x:t.getBoundingClientRect().x+t.clientWidth/2,y:t.getBoundingClientRect().y+t.clientHeight/2,pos:e+c}):(i.placeholders.coordinates[e+c].x=i.placeholders.coordinates[e+c].elem.getBoundingClientRect().x+i.placeholders.coordinates[e+c].elem.clientWidth/2,i.placeholders.coordinates[e+c].y=i.placeholders.coordinates[e+c].elem.getBoundingClientRect().y+i.placeholders.coordinates[e+c].elem.clientHeight/2)}),c+=i.placeholders.utils[t].prodsCount})},entry:function(){this.container.classList.add("ct_in"),document.body.style.overflow="hidden",document.addEventListener("loaderOut",function(){window.ct_wow__search.structure.prod_list_container.classList.add("ct_in")})},rankingProducts:function(t,e){var s=this;window.ct_wow__search.inputManagement.answers.state[t]=parseInt(e),this.prod_list.forEach(function(t){t.score=s.calcScore(t.upc)}),this.prod_list.sort(function(t,e){return t.score<e.score?1:-1}),this.prod_list.forEach(function(t,e){t.elem.style.transform="\n      translate(\n        ".concat(s.placeholders.coordinates[e].x-t.x,"px,\n        ").concat(s.placeholders.coordinates[e].y-t.y,"px\n      )"),e<3&&(t.scalingElem.style.transform="translate(-50%,-50%) scale(2)"),3<=e&&e<s.placeholders.utils.secondCircle.prodsCount+3&&(t.scalingElem.style.transform="translate(-50%,-50%) scale(1.1)"),e>=s.placeholders.utils.secondCircle.prodsCount+3&&(t.scalingElem.style.transform="translate(-50%,-50%) scale(.6)")}),window.ct_wow__search.inputManagement.results.state=[this.prod_list[0].upc,this.prod_list[1].upc,this.prod_list[2].upc,this.prod_list[3].upc]},calcScore:function(s){var r=0;return window.ct_wow__search.inputManagement.answers.state.forEach(function(t,e){r+=window.ct_wow__search.data.products[s].specs[e][t]}),r},refreshPositionsDebounced:(0,a.debounce)(function(){"D"!=ct_wow__search.structure.device&&(ct_wow__search.structure.prod_list_container.parentNode.scrollTop=0,ct_wow__search.structure.prod_list_container.parentNode.scrollLeft=ct_wow__search.structure.prod_list_container.parentNode.clientWidth/4),ct_wow__search.structure.container.classList.contains("ct_shuffled")&&(ct_wow__search.structure.setPlaceholders(!1),ct_wow__search.structure.refreshProdPos(),ct_wow__search.structure.adjustProdPos())}),refreshPositions:function(){"D"!=ct_wow__search.structure.device&&(ct_wow__search.structure.prod_list_container.parentNode.scrollTop=0,ct_wow__search.structure.prod_list_container.parentNode.scrollLeft=ct_wow__search.structure.prod_list_container.parentNode.clientWidth/4),this.container.classList.contains("ct_shuffled")&&(ct_wow__search.structure.setPlaceholders(!1),ct_wow__search.structure.refreshProdPos(),ct_wow__search.structure.adjustProdPos())},adjustProdPos:function(){var s=this;this.prod_list.forEach(function(t,e){t.elem.style.transform="\n      translate(\n        ".concat(s.placeholders.coordinates[e].x-t.x,"px,\n        ").concat(s.placeholders.coordinates[e].y-t.y,"px\n      )")})},setMouseMove:function(){var e=this;this.prod_list_container.addEventListener("mousemove",function(t){e.prod_list_container.style.transform="translate(".concat(.01*-(t.clientX-window.innerWidth/2),"px,").concat(.01*-(t.clientY-window.innerHeight/2),"px)")}),document.querySelector("#ct_wow__search__input").addEventListener("mouseenter",function(t){e.prod_list_container.style.transform="translate(0,0)"})},setCloseHandler:function(){var t=this;document.querySelector("#ct_wow__search__close").addEventListener("click",function(){t.container.classList.remove("ct_in"),document.body.style.overflow="auto",t.resetStructure(),window.ct_wow__search.inputManagement.resetQuestions(),window.removeEventListener("resize",window.ct_wow__search.structure.refreshPositionsDebounced),"D"!=t.device&&window.removeEventListener("resize",window.ct_wow__search.structure.calcHeight)})},resetStructure:function(){(0,a.customLog)("- RESET Structure -"),window.ct_wow__search.structure.prod_list_container.style.transform="scale(1)",this.prod_list_container.querySelectorAll(".ct_wow_search__product__wrap").forEach(function(t){t.style.transform="none",t.querySelector("a").style.transform="translate(-50%,-50%)"})}},window.ct_wow__search.inputManagement={container:null,stepsCount:0,blockerActive:!1,progress:{container:null,current:null,state:1,style:null},questions:{container:null,state:0},answers:{container:null,state:[]},buttons:{next:null,prev:null,results:null,restart:null},results:{container:null,state:[]},init:function(t){this.setElements(),this.fillData(),this.setButtonsHandler()},setElements:function(){this.container=document.querySelector("#ct_wow__search__input"),this.progress.container=document.querySelector(".ct_wow__search__input_progress"),this.progress.current=document.querySelector(".ct_wow__search__input_progress .ct_wow__search__input_progress__current"),this.questions.container=document.querySelector(".ct_wow__search__input_questions"),this.answers.container=document.querySelector(".ct_wow__search__input_answers"),this.buttons.next=document.querySelector(".ct_wow__search__input_commands__next"),this.buttons.prev=document.querySelector(".ct_wow__search__input_commands__prev"),this.buttons.restart=document.querySelector(".ct_wow__search__restart"),this.results.container=document.querySelector("#ct_wow__search__results")},fillData:function(){this.stepsCount=ct_wow__search.data.questions.length,this.progress.container.querySelector(".ct_wow__search__input_progress__current + span").innerHTML=" /".concat(this.stepsCount),this.updateProgress(),this.setButtonCopy(),this.updateQuestionCopy(),this.buildAnswers(),this.updateAnswer(),this.setResultsCopy()},setButtonsHandler:function(){var t=this;this.buttons.prev.addEventListener("click",function(){t.changeQuestions("prev")}),this.buttons.next.addEventListener("click",function(){t.changeQuestions("next")}),this.buttons.restart.addEventListener("click",function(){t.restartQuiz()})},updateProgress:function(t){var e=this;this.blockerActive=!0,t&&(this.progress.current.dataset.next=this.progress.state,this.progress.container.style.setProperty("--ct-wow-search-input-progress-before-opacity","1"),this.progress.container.style.setProperty("--ct-wow-search-input-progress-after-opacity","0"),this.progress.current.querySelector("span").style.opacity=0,this.progress.container.style.setProperty("--ct-wow-search-input-progress-before-translate","translateY(0)"),"next"===t?this.progress.container.style.setProperty("--ct-wow-search-input-progress-after-translate","translateY(-100%)"):this.progress.container.style.setProperty("--ct-wow-search-input-progress-after-translate","translateY(100%)"),setTimeout(function(){e.progress.current.classList.add("ct_animation"),e.progress.container.style.setProperty("--ct-wow-search-input-progress-after-translate","translateY(0%)"),e.progress.container.style.setProperty("--ct-wow-search-input-progress-after-opacity","1"),"next"===t?e.progress.container.style.setProperty("--ct-wow-search-input-progress-before-translate","translateY(100%)"):e.progress.container.style.setProperty("--ct-wow-search-input-progress-before-translate","translateY(-100%)"),e.progress.container.style.setProperty("--ct-wow-search-input-progress-before-opacity","0")},10)),setTimeout(function(){e.progress.container.querySelector(".ct_wow__search__input_progress__current span").innerHTML=e.progress.state,e.progress.current.dataset.current=e.progress.state,e.progress.current.querySelector("span").style.opacity=1,e.progress.current.classList.remove("ct_animation"),e.blockerActive=!1},410)},setButtonCopy:function(){this.buttons.restart.innerHTML=i.storeInfo.getLang(window.ct_wow__search.data.copy.results.restart)},updateQuestionCopy:function(){var t=this;this.questions.container.querySelector("h3").style.opacity=0,setTimeout(function(){t.questions.container.querySelector("h3").innerHTML=i.storeInfo.getLang(window.ct_wow__search.data.questions[t.progress.state-1].question),t.questions.container.querySelector("h3").style.opacity=1},400)},buildAnswers:function(){var r="";window.ct_wow__search.data.questions.forEach(function(t,s){r+='<div class="ct_wow__search__input_answer"  data-answer="'.concat(s,'">'),t.answers.forEach(function(t,e){r+='\n        <div class="ct_wow__search__button_wrap">\n          <button class="ct_cta ct_cta__white " data-q="'.concat(s,'" tabindex="-1" data-a="').concat(e,'">').concat(i.storeInfo.getLang(t),"</button>\n        </div>\n        ")}),r+="</div>"}),this.answers.container.innerHTML=r,this.answersButtonHandler()},answersButtonHandler:function(){var e=this;this.answers.container.querySelectorAll("button").forEach(function(t){t.addEventListener("click",function(){t.classList.contains("ct_active")||(e.progress.state<e.stepsCount?(window.ct_wow__search.structure.container.classList.contains("ct_shuffled")||window.ct_wow__search.structure.container.classList.add("ct_shuffled"),window.ct_wow__search.structure.refreshPositions(),window.ct_wow__search.structure.rankingProducts(t.dataset.q,t.dataset.a),t.parentNode.parentNode.querySelector("button.ct_active")&&t.parentNode.parentNode.querySelector("button.ct_active").classList.remove("ct_active"),t.classList.add("ct_active"),t.parentNode.parentNode.classList.add("ct_aswered"),e.container.classList.add("ct_can_proceed"),e.changeQuestions("next")):e.showResult())})})},updateAnswer:function(){this.answers.container.querySelector(".ct_wow__search__input_answer.ct_active")&&this.answers.container.querySelector(".ct_wow__search__input_answer.ct_active").classList.remove("ct_active"),this.answers.container.querySelector('.ct_wow__search__input_answer[data-answer="'.concat(this.progress.state-1,'"]')).classList.add("ct_active")},setResultsCopy:function(){this.results.container.querySelector("h2").innerHTML=i.storeInfo.getLang(window.ct_wow__search.data.copy.results.title),this.results.container.querySelector("p").innerHTML=i.storeInfo.getLang(window.ct_wow__search.data.copy.results.subtitle),this.results.container.querySelector(".ct_cta.ct_cta__black").innerHTML=i.storeInfo.getLang(window.ct_wow__search.data.copy.results.viewAll.label),this.results.container.querySelector(".ct_cta.ct_cta__black").href=i.storeInfo.getLang(window.ct_wow__search.data.copy.results.viewAll.url)},changeQuestions:function(t){this.blockerActive||("next"===t?(this.progress.state+=1,this.progress.state!==this.stepsCount||this.buttons.next.classList.contains("ct_disabled")||(this.buttons.next.classList.add("ct_disabled"),this.answers.container.querySelector('.ct_wow__search__input_answer[data-answer="'.concat(this.progress.state-1,'"]')).classList.contains("ct_aswered")&&this.container.classList.add("ct_last_step")),this.answers.container.querySelector('.ct_wow__search__input_answer[data-answer="'.concat(this.progress.state-1,'"]')).classList.contains("ct_aswered")||this.container.classList.remove("ct_can_proceed"),this.buttons.prev.classList.contains("ct_disabled")&&this.buttons.prev.classList.remove("ct_disabled"),1===this.progress.state&&(this.buttons.next.classList.remove("ct_disabled"),this.buttons.prev.classList.add("ct_disabled"),this.container.classList.remove("ct_last_step"))):(--this.progress.state,1!==this.progress.state||this.buttons.prev.classList.contains("ct_disabled")||this.buttons.prev.classList.add("ct_disabled"),this.buttons.next.classList.contains("ct_disabled")&&(this.buttons.next.classList.remove("ct_disabled"),this.container.classList.remove("ct_last_step")),this.answers.container.querySelector('.ct_wow__search__input_answer[data-answer="'.concat(this.progress.state-1,'"]')).classList.contains("ct_aswered")&&this.container.classList.add("ct_can_proceed")),this.updateProgress(t),this.updateQuestionCopy(),this.updateAnswer())},showResult:function(){var t=this;this.results.container.classList.add("ct_in"),this.results.container.classList.add("ct_loader_in"),c.loader.loaderIn(2e3,"results"),this.setResult(),setTimeout(function(){t.results.container.classList.remove("ct_loader_in")},2e3)},setResult:function(){var e=this.results.container.querySelector("#ct_wow__search__results_products");e.innerHTML="";this.results.state.forEach(function(t){e.innerHTML+='\n      <a href="'.concat("https://www.sunglasshut.com/us"+window.ct_wow__search.data.products[t].url,'" class="ct_wow__search__results_product">\n          <img src="').concat(window.ct_wow__search.data.products[t].img||"https://assets.sunglasshut.com/is/image/LuxotticaRetail/"+t+"__STD__shad__fr.png?impolicy=SGH_bgtransparent&width=640",'" alt="').concat(t,'">\n          <span>').concat(window.ct_wow__search.data.products[t].brand,"</span>\n        </a>\n      ")})},restartQuiz:function(){var t=this;c.loader.loaderIn(1e3,"restart"),setTimeout(function(){window.ct_wow__search.structure.resetStructure(),t.resetQuestions(),t.results.container.classList.remove("ct_in"),t.results.container.classList.add("ct_loader_in")},400)},resetQuestions:function(){(0,a.customLog)("resetQuestions"),this.progress.state=0,this.answers.container.querySelectorAll("button.ct_active").forEach(function(t){return t.classList.remove("ct_active")}),this.answers.container.querySelectorAll(".ct_aswered").forEach(function(t){return t.classList.remove("ct_aswered")}),this.answers.state=[],this.container.classList.remove("ct_can_proceed"),window.ct_wow__search.structure.container.classList.remove("ct_shuffled"),this.results.container.classList.remove("ct_in"),this.changeQuestions("next")}},document.querySelector("#ct_wow__search")?window.ct_wow__search.structure.init():(r=0,n=setInterval(function(){document.querySelector("#ct_wow__search")?(window.ct_wow__search.structure.init(),clearInterval(n)):5e3<(r+=200)&&((0,a.customLog)("WOW SEARCH - Search not initialized!"),clearInterval(n))},200))},{"./modules/accessibility":2,"./modules/loader":3,"./modules/storeInfo":4,"./modules/utils":5}],2:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.accessibility=void 0,s.accessibility={init:function(t){t?(window.ct_wow__search.structure.accessibility_mode=!0,window.ct_wow__search.structure.prod_list_container.querySelector(".ct_wow_search__product:nth-child(2) a").focus(),window.ct_wow__search.structure.container.classList.add("ct_wow__search__accessibility_mode")):console.log("not active")}}},{}],3:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.loader=void 0;var r=t("./storeInfo"),t=(t("./utils"),{elem:null,loaderEvent:new CustomEvent("loaderOut"),init:function(t){this.elem=document.querySelector("#ct_wow__search__loader"),this.loaderIn(t)},loaderIn:function(t,e){var s=this;e&&"init"!==e||(this.elem.querySelector("h3").innerHTML=r.storeInfo.getLang(window.ct_wow__search.data.copy.loader.init)),"restart"===e&&(this.elem.querySelector("h3").innerHTML=r.storeInfo.getLang(window.ct_wow__search.data.copy.loader.restart)),"results"===e&&(this.elem.querySelector("h3").innerHTML=r.storeInfo.getLang(window.ct_wow__search.data.copy.loader.results)),this.elem.classList.add("ct_in"),setTimeout(function(){s.loaderOut()},t)},loaderOut:function(){this.elem.classList.remove("ct_in"),document.dispatchEvent(this.loaderEvent)}});s.loader=t},{"./storeInfo":4,"./utils":5}],4:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.storeInfo=void 0,s.storeInfo={getInfo:function(){var t=0,e=setInterval(function(){t+=200,window.wcs_config?(window.ct_wow__search.data.storeInfo.lang=wcs_config.locale.toLowerCase().replace("_","-"),window.ct_wow__search.data.storeInfo.lang_short=wcs_config.locale.match("^[^_]+")[0],clearInterval(e)):1e4<=t&&clearInterval(e)},400)},getLang:function(t){try{var e=Object.keys(t);return e.includes(window.ct_wow__search.data.storeInfo.lang)?t[window.ct_wow__search.data.storeInfo.lang]:e.includes(window.ct_wow__search.data.storeInfo.lang_short)?t[window.ct_wow__search.data.storeInfo.lang_short]:t.en}catch(t){return t}}}},{}],5:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getDevice=s.debounce=s.customLog=s.calcCoordinates=void 0;s.calcCoordinates=function(t,e){for(var s=e,r=e,n=2*Math.PI/t,o=Math.PI/2+n,c=[],i=0;i<t;i++)c.push({x:(s+e*Math.cos(o)).toFixed(2),y:(r+e*Math.sin(o)).toFixed(2)}),o+=n;return c},s.debounce=function(e,t){var s;return function(t){s&&clearTimeout(s),s=setTimeout(e,500,t)}},s.customLog=function(t,e){console.log("%c "+t,"background:#E8DBBD;padding:3px 5px; border-radius:4px; color:#000;font-family:helvetica; ".concat(e,";"))};s.getDevice=function(){return 1025<window.innerWidth?"D":window.innerWidth<1025&&768<=window.innerWidth?"T":window.innerWidth<768?"M":"not recognized"}},{}]},{},[1]);