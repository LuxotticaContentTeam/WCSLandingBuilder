var savedPlpName=window.location.href,globalItemsCountSearch=0,isFilterValueChecked=!1,flagIsVMEnabled=!1;function isVMEnabled(){return flagIsVMEnabled}function collectionPage(){return"undefined"!=typeof isCollectionPage&&isCollectionPage}function landingPdp(){return"undefined"!=typeof isLandingPdp&&isLandingPdp}function hasVmUpcAvailability(e){return"undefined"!=typeof vmUpcAvailability&&Object.keys(vmUpcAvailability).length&&void 0!==vmUpcAvailability[e]&&vmUpcAvailability[e].available}function initPLP(){initPromoBanner(),initLandingPdp(),initDesktop(),initBrandCollaboration(),$(document).on("click",".item_container .fixed_ratio .image-holder a",function(){return!1}),$("body").on("focus",".js-input-cardNumber",function(e){$(".js-mark-cardNumber").show()}).on("blur",".js-input-cardNumber",function(e){$(".js-mark-cardNumber").hide()}),$("body").on("focus",".js-input-cardName",function(e){$(".js-mark-cardName").show()}).on("blur",".js-input-cardName",function(e){$(".js-mark-cardName").hide()}),$("body").on("click",".js-addLenses-button",function(e){try{var t=null!=window.productDetails.getLandingProductId()?window.productDetails.getLandingProductId():window.productDetails.getCurrentProductId(),a=(window.productDetails.get(t),null!=window.productDetails.getLandingSubProductId()?window.productDetails.getLandingSubProductId():window.productDetails.getCurrentSubProductId()),n=window.productDetails.getSubProduct(t,a),o={};o[n.partNumber]=utag_data.Products[n.partNumber]||{},"sunglasses"!==n.category.toLowerCase()&&n.frameType.toLowerCase().indexOf("sunglasses")<0?tealium_data2track.push({id:"Click",Tracking_Type:"link",data_element_id:"X_Pdp_Prod_AddLens",data_description:n.partNumber,Products:o}):tealium_data2track.push({id:"Click",Tracking_Type:"link",data_element_id:"X_Pdp_Prod_AddLens",data_description:"Selectlenses",Products:o})}catch(e){console.error(e)}})}function initBrandCollaboration(){if($("#brands-collaboration-header").length>0)try{const e=$(".fading-out"),t=$(".products_holder").offset().top;e.length>0&&$(window).scroll(function(){var e=$(window).scrollTop()-t;e>0&&$(".fading-out").css("opacity",1-e/500),0==$(window).scrollTop()&&$(".fading-out").css("opacity",1)})}catch(e){console.log(e)}}function initLandingPdp(){var e=$(".c-landing-pdp");if(0!==e.length){var t=window.productDetails.getLandingProductId(),a=window.productDetails.get(t),n=window.productDetails.getLandingSubProductId(),o=window.productDetails.getSubProduct(t,n);null==o&&(o=window.productDetails.getSibling(t,n)),$(".c-landing-pdp #detail_box_content_"+t+" .close").on("click",function(){closeLandingDetailBox(),$(".category-title").length&&$(".category-title").show()}),selectSubProductHandler(a.id,o.subId,!0,[],function(){$(".c-landing-pdp .slick-slider").on("init",function(e,t){slick_init(t),window.onresize=function(e){slick_init(t)}}),$(".pdp_main_carousel").on("init",function(t,a){e&&$(".close.top-right").remove()}),$(".detail_box . pdp-det__carousel .slick-slider").not(".slick-initialized").slick({infinite:!1,prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>',variableWidth:!0,focusOnSelect:!1}),$(".c-landing-pdp .slick-slider").not(".slick-initialized").slick({infinite:!1,prevArrow:'<button type="button" class="slick-prev"><i class="iconglasses-home-arrow-left"></i></button>',nextArrow:'<button type="button" class="slick-next"><i class="iconglasses-home-arrow-right"></i></button>',variableWidth:!0,focusOnSelect:!1}),$("<span class='slick-counter'>"+$(".subProduct-element:visible").length+" colors </span>").appendTo($(".c-landing-pdp .slick-slider").not(".pdp_main_carousel")),$(".detail_box_content .pdp-det__carousel .slick-track").width()>$(".detail_box_content .pdp-det__carousel .slick-list").width()?$(".detail_box .pdp-det__carousel .slick-arrow, .detail_box_content .pdp-det__carousel .slick-counter").show():$(".detail_box_content .pdp-det__carousel .slick-arrow, .detail_box_content .pdp-det__carousel .slick-counter").hide(),$(".subProduct-element:visible").length<=1&&($(".slick-counter").hide(),$(".slick-arrow").hide()),"desktop"==site_layout&&($(".c-landing-pdp .slick-slider:not('.pdp_main_carousel') .slick-list").addClass("js-x-scroll"),$(".c-landing-pdp .slick-slider .slick-list.js-x-scroll").each(function(){new PerfectScrollbar($(this)[0],{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],suppressScrollY:!0,wheelPropagation:!0,swipeEasing:!0})})),$(".js-x-scroll").on("ps-scroll-x",function(){$(".c-landing-pdp .pdp-det__carousel .slick-slider").slick("setPosition")}),$(".c-landing-pdp .pdp-det__carousel .slick-slider").on("setPosition",function(e,t){if($(".c-landing-pdp .pdp-det__carousel  .slick-track").width()<=$(".c-landing-pdp .pdp-det__carousel  .slick-list").width()){var a=$(".c-landing-pdp .pdp-det__carousel .slick-slide").length-1;$(".pdp-det__carousel div[data-slick-index="+a+"]").visible()?($(".c-landing-pdp .pdp-det__carousel button.slick-next.slick-arrow").addClass("btn-disabled"),$(".c-landing-pdp .pdp-det__carousel button.slick-next.slick-arrow").addClass("slick-disabled")):($(".c-landing-pdp .pdp-det__carousel button.slick-next.slick-arrow").removeClass("btn-disabled"),$(".c-landing-pdp .pdp-det__carousel button.slick-next.slick-arrow").removeClass("slick-disabled")),$(".c-landing-pdp .pdp-det__carousel .slick-track").position().left<0&&($(".c-landing-pdp .pdp-det__carouselbutton.slick-prev.slick-arrow").removeClass("btn-disabled"),$(".c-landing-pdp .pdp-det__carousel button.slick-prev.slick-arrow").removeClass("slick-disabled"))}else prev_callback(),next_callback()}),$(".js-x-scroll").on("ps-x-reach-start",function(){$(".c-landing-pdp .pdp-det__carousel .slick-track").width()<=$(".c-landing-pdp .slick-list").width()&&($(".c-landing-pdp .pdp-det__carousel button.slick-prev.slick-arrow").addClass("btn-disabled"),$(".c-landing-pdp .pdp-det__carousel button.slick-prev.slick-arrow").addClass("slick-disabled"))})}),initializePolarizedSwitch(a.id,o.subId);var i=$("[data='pdp-polarized-switch']");i&&switchPolarizedChangeHandlerLanding(a.id,i.is(":checked")),$('[data-toggle="popover"]').popover(),$("#lens-selection-area").length>0&&initializePdpListeners(t,n),monetateLandingPdp(),$(".lazy-desk-pdp-sku-carousel").length>0&&(window.glassesFunctions.setTransparencyNeeded(!1),registerLazyLoadByClass("div.pdp-img-container.dots-loader",50),$(window).scroll());var r=o.frameType.split(" "),s=r[r.length-1],l=s.substring(0,3).toUpperCase(),d="";d=1==o.buyable?"Available":"Out-of-stock";var c="0",p="0",u=hasVmUpcAvailability(subProduct.partNumber);u&&1==Object.values(u)[0]?(c="1",p="1"):c="0",0=="0".localeCompare(c)&&isVMSupported&&(p="1");var h={};h[o.partNumber]={Sku:a.name,Category:l,Engraving:"",Status:d,Vto:"",Price:maxFractionDigits(o.price,2),PriceFull:maxFractionDigits(o.originalPrice,2),Vm_IsUpcSupported:c,Brand:a.brandName,ModelName:a.name,LensColor:o.lensColor,LensTechnology:o.frameMaterial,FrameColor:o.frameColor,Shape:o.frameType,Type:"STD"},void 0===window.utag_data&&(window.utag_data={}),utag_data.Vm_IsBrowserSupported=p,utag_data.Page_Brand="GL",utag_data.Page_Country="US",utag_data.Page_Language="EN",utag_data.Page_DeviceType="D",utag_data.Page_Platform="WCS",utag_data.Page_Type="Pdp",utag_data.Page_Section1=s,utag_data.Page_Section2=t.toString(),utag_data.Cart_Id="",utag_data.Order_Currency="USD",utag_data.Products=h}}function mouseWheel(e){$(".pdp_main_carousel").on("wheel",{$slider:e},mouseWheelHandler)}function mouseWheelHandler(e){e.preventDefault();const t=e.data.$slider,a=e.originalEvent.deltaY;a<-50?t.slick("slickPrev"):a>50&&t.slick("slickNext")}function initPromoBanner(){const e=$(".header-promo-banner-wrapper"),t=$(".header-promo-banner-text");$(t).height()>0?($(t).show(),$(e).show()):($(t).hide(),$(e).hide());let a=$(".marquee-text"),n=a.width();if(a.length>0&&n>0){let e=2e3/n+2;for(i=0;i<e;i++)$(".marquee-ready").append(a.html()),$(".marquee-delayed").append(a.html())}setTimeout(function(){$(".marquee-ready, .marquee-delayed").css("-webkit-animation-play-state","paused")},5e3),$(".marquee-container").hover(function(){"paused"==$(".marquee-ready, .marquee-delayed").css("-webkit-animation-play-state")&&$(".marquee-ready, .marquee-delayed").css("-webkit-animation-play-state","running")},function(){$(".marquee-ready, .marquee-delayed").css("-webkit-animation-play-state","paused")})}function initDesktop(){if(initFilterUniqueChoiceHandler(),initPerfectScroll(),$("#filterBar-content-wrapper").length>0)var e=new PerfectScrollbar("#filterBar-content-wrapper",{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],wheelPropagation:!0,swipeEasing:!0});const t=$(".filter-overlay");$(".nav-item.dropdown").on("hide.bs.dropdown",function(e){t.hide(),$("body").removeClass("filter-overlay-active"),$(".marquee-container").removeClass("filter-overlay-promostripe"),$("body").removeClass("noScroll"),$("html").removeClass("noScroll"),applyFilterClickOutsideModal()}).on("show.bs.dropdown",function(e){t.show(),$("body").addClass("filter-overlay-active"),$(".marquee-container").addClass("filter-overlay-promostripe"),$("body").addClass("noScroll"),$("html").addClass("noScroll"),$(e.target).find(".wrapper-dropdown-menu").css({position:"fixed",left:$(e.target).offset().left,top:$(e.target).offset().top-$(window).scrollTop()}),"brands_filter"==e.target.id&&(window.glassesFunctions.setTransparencyNeeded(!0),registerLazyLoadByClass("div.brand-filter-img-container.dots-loader",50))}),$("body").on("click",".dropdown-wrapper .filter-control-wrapper span",function(e){t.hide(),$("body").removeClass("filter-overlay-active"),$("body").removeClass("noScroll"),$("html").removeClass("noScroll")}),$("body").on("click",".dropdown-wrapper .filter-close",function(e){t.hide(),$("body").removeClass("filter-overlay-active"),$("body").removeClass("noScroll"),$("html").removeClass("noScroll")}),$("body").on("click","#sort_by_filter .dropdown-wrapper .filter-options label",function(e){t.hide(),$("body").removeClass("filter-overlay-active"),$("body").removeClass("noScroll"),$("html").removeClass("noScroll")}),stopDropdownEventPropagation(),$("#full-images-container").on("show",function(){$("body").addClass("modal-open")}).on("hidden",function(){$("body").removeClass("modal-open")}),horizontalDragInit(),fixItemsHeight(),window.addEventListener("resize",function(){fixItemsHeight(),void 0!==e&&e.update()}),navbarAnimationInit()}function fixItemsHeight(){var e=1.38*$($(".products_holder .item_container:not(.item_container_full)").get(0)).width();e=Math.floor(e),$(".item_container:not(.js-ignore-height-fix)").height(e+"px"),collectionPage()&&$(".pdp_main_carousel .slick-list").css({height:1.38*$(".pdp_main_carousel").width()+"px"}),$(".home-page").length||$(".modal-search-result-grid").height(e+"px")}function openProductPage(e){event.stopImmediatePropagation(),window.open(e,"_self")}function closeLandingDetailBox(){isVMEnabled()&&hideVM(!0);var e=window.productDetails.getLandingProductId(),t=$(".c-landing-pdp #detail_box_content_"+e);$(t).slideUp("slow"),hideImagesContainer(),$(".products_holder .item.selected").removeClass("selected");try{var a,n=window.location.search;a=n.indexOf("?")>-1?savedPlpName.split("?")[0]+n:savedPlpName.split("?")[0],window.history.pushState(null,null,a)}catch(e){console.error("error push state: "+e)}return setTimeout(function(){$(window).scroll()},1e3),!1}function prev_callback(){$(".pdp-det__carousel .slick-slide.selected").nextAll(":visible").length>0&&($(".pdp-det__carousel .slick-slide.selected").nextAll(":visible").closest(".slick-slider").find(".pdp-det__carousel button.slick-next.slick-arrow").removeClass("btn-disabled"),$(".pdp-det__carousel .slick-slide.selected").nextAll(":visible").closest(".slick-slider").find(".pdp-det__carousel button.slick-next.slick-arrow").removeClass("slick-disabled")),0==$(".pdp-det__carousel .slick-slide.selected").prevAll(":visible").length&&($(".pdp-det__carousel .slick-slide.selected").prevAll(":visible").closest(".slick-slider").find(".pdp-det__carousel button.slick-prev.slick-arrow").addClass("btn-disabled"),$(".pdp-det__carousel .slick-slide.selected").prevAll(":visible").closest(".slick-slider").find(".pdp-det__carousel button.slick-prev.slick-arrow").addClass("slick-disabled"))}function next_callback(){$(".pdp-det__carousel .slick-slide.selected").prevAll(":visible").length>0&&($(".pdp-det__carousel .slick-slide.selected").prevAll(":visible").closest(".slick-slider").find(".pdp-det__carousel button.slick-prev.slick-arrow").removeClass("btn-disabled"),$(".pdp-det__carousel .slick-slide.selected").prevAll(":visible").closest(".slick-slider").find(".pdp-det__carousel button.slick-prev.slick-arrow").removeClass("slick-disabled")),0==$(".pdp-det__carousel .slick-slide.selected").nextAll(":visible").length&&($(".pdp-det__carousel .slick-slide.selected").nextAll(":visible").closest(".slick-slider").find(".pdp-det__carousel button.slick-next.slick-arrow").addClass("btn-disabled"),$(".pdp-det__carousel .slick-slide.selected").nextAll(":visible").closest(".slick-slider").find(".pdp-det__carousel button.slick-next.slick-arrow").addClass("slick-disabled"))}function slick_init(e){if(e.$slider.find(".slick-track").width()>e.$slider.find(".slick-list").width()){if(e.setOption("focusOnSelect",!0,!0),collectionPage()){var t=e.$slider.find(".slick-slide.selected").data("slick-index");try{e.$slider.slick("slickGoTo",t)}catch(e){console.log("slickGoTo failed")}}else e.$slider.find(".slick-slide.selected").trigger("click",["slick-autofocus"]);e.$slider.find(".slick-arrow, .slick-counter").show(),e.$slider.find("button.slick-prev.slick-arrow").off("click").on("click",function(e){$(e.target).closest(".slick-slider").find(".slick-slide.selected").prevAll(":visible").first().click(),$(window).scroll(),prev_callback()}),e.$slider.find("button.slick-next.slick-arrow").off("click").on("click",function(e){$(e.target).closest(".slick-slider").find(".slick-slide.selected").nextAll(":visible").first().click(),$(window).scroll(),next_callback()});var a=$(".subProduct-element:visible").length;a>1?($(".slick-arrow").show(),$(".slick-counter").html(a+" colors "),$(".slick-counter").show()):($(".slick-arrow").hide(),$(".slick-counter").hide()),prev_callback(),next_callback()}else{e.setOption("focusOnSelect",!1,!0),e.$slider.find(".slick-arrow, .slick-counter").hide();try{e.$slider.slick("slickGoTo",0)}catch(e){console.error("Error in calling slick - "+e)}}}function initializePolarizedSwitch(e,t){checkPolarizedSwitch(e,t),hidePolarizedSwitch(e),disablePolarizedSwitch(e)}function checkPolarizedSwitch(e,t){for(var a=$('[data="pdp-polarized-switch"]'),n=window.productDetails.get(e),o=n.subProductsArray,i=0,r=0,s=o.length;r<s;r++){o[r].isPolarized&&i++}if(i==o.length&&$(".c-pdp-det__switch .switch").hide(),t){window.productDetails.getSubProduct(e,t).isPolarized?$(a).prop("checked",!0):$(a).removeProp("checked")}else{var l=0;for(s=o.length;l<s;l++){if(o[l].isPolarized)return void $(a).prop("checked",!0)}$(a).removeProp("checked")}}function hidePolarizedSwitch(t){var a=$(".c-pdp-det__switch"),n=window.productDetails.get(t);void 0!==n&&null!==n||e.debug("--\x3e no product found for productId: ",t);for(var o=n.subProductsArray,i=0,r=o.length;i<r;i++){if(o[i].isPolarized)return void $(a).removeClass("hide")}$(a).addClass("hide")}function disablePolarizedSwitch(e){for(var t=$(".c-pdp-det__switch .switch"),a=$('[data="pdp-polarized-switch"]'),n=window.productDetails.get(e),o=n.subProductsArray,i=0,r=0,s=0,l=o.length;s<l;s++){o[s].isPolarized?i++:r++}o.length===i||o.length===r?($(a).prop("disabled",!0),$(t).addClass("disabled")):($(a).removeProp("disabled"),$(t).removeClass("disabled"))}function buildTemplate(e,t){Handlebars.registerHelper("stringifyFunc",function(e){return new Handlebars.SafeString("("+e.toString().replace(/\"/g,"'")+")()")}),Handlebars.registerHelper("anyPolarized",function(e){for(var t=0,a=e.length;t<a;t++){if(e[t].isPolarized)return"checked"}return""}),Handlebars.registerHelper("hideSwitch",function(e){for(var t=!1,a=0,n=e.length;a<n;a++){e[a].isPolarized&&(t=!0)}return t?"":" hide "}),Handlebars.registerHelper("disableSwitch",function(e){for(var t=!1,a=0,n=e.length;a<n;a++){e[a].isPolarized||(t=!0)}return t?"":"disabled"}),Handlebars.registerHelper("greaterThan",function(e,t,a){return e>t?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("onlyDigits",function(e){return e.replace(/\D/g,"")}),Handlebars.registerHelper("setNextGenFormatAkamaiIM",function(e,t){return setNextGenImgAkamaiIMUrl(e,t)}),Handlebars.registerHelper("priceFormatter",function(e,t){return priceFormatter(e,t)}),Handlebars.registerHelper("offerBadge",function(e){return null!=e&&e.length?'<span class="offer-badge offer-'+e.substr(0,e.indexOf("%").replace("-",""))+'">'+e+"</span>":""});var a=$(e).html();return Handlebars.compile(a)(t)}function selectSubProductHandler(e,t,a,n,o){try{if($(".pdp_main_carousel").hasClass("slick-slider")&&($(".pdp_main_carousel").slick("unslick"),$(".pdp_main_carousel").empty()),collectionPage())var r=window.productDetails.getSubProduct(e,t),s=r.gender,l=r.partNumber;if(isVMEnabled()){var d=function(){setTimeout(function(){refreshVmArea(e,window.productDetails.getSubProduct(e,t))},1e3)};$("#detail_box_content_"+e+" [data='pdp-mainImage']").off("load").on("load",function(){d(),"function"==typeof o&&(collectionPage()&&initCollectionCarousel(l,e,s),o(),o=void 0)}).off("error").on("error",function(){d(),"function"==typeof o&&(collectionPage()&&initCollectionCarousel(l,e,s),o(),o=void 0)})}else $("#detail_box_content_"+e+" [data='pdp-mainImage']").one("load",function(){"function"==typeof o&&(collectionPage()&&initCollectionCarousel(l,e,s),o(),o=void 0)}).one("error",function(){"function"==typeof o&&(collectionPage()&&initCollectionCarousel(l,e,s),o(),o=void 0)});pdpLanding&&collectionPage()&&($(".pdp_main_carousel").off("init").on("init",function(e,t){$(".close.top-right").remove(),mouseWheel($(".pdp_main_carousel"));var a=$("#indexToAppend").val();void 0===a&&(a="1"),window.productDetails.getCurrentSubProduct()&&void 0!==window.productDetails.getCurrentSubProduct().hasVideo&&"1"===window.productDetails.getCurrentSubProduct().hasVideo&&$($(".slick-dots li")[a-1]).addClass("video-tag")}),$("#landing-pdp").on("click","#collection-video",function(e){e.preventDefault()}),$(".pdp_main_carousel").off("afterChange").on("afterChange",function(e,t,a,n){$(".main-slide.slick-slide.slick-active").hasClass("video-cont")?$("#collection-video").length>0&&($("#collection-video").off("mouseover").on("mouseover",function(){$("#collection-video")[0].paused?($(".video-cont .gl-cursors #gl-play-light").css({opacity:"1"}),$(".video-cont .gl-cursors #gl-play-light div").css({transform:"scale(1)"})):($(".video-cont .gl-cursors #gl-pause-light ").css({opacity:"1"}),$(".video-cont .gl-cursors #gl-pause-light div").css({transform:"scale(1)"})),$("#collection-video").css({cursor:"none"})}),$("#collection-video").off("mousemove").on("mousemove",function(e){var t=e.pageY-$(".detail_box, #landing-pdp .detail_box_content").first().offset().top;$(".video-cont .gl-cursors #gl-play-light").css({left:e.pageX-50,top:t-50}),$(".video-cont .gl-cursors #gl-pause-light").css({left:e.pageX-50,top:t-50})}),$("#collection-video").off("mouseout").on("mouseout",function(){$("#collection-video")[0].paused?($(".video-cont .gl-cursors #gl-play-light").css({opacity:"0"}),$(".video-cont .gl-cursors #gl-play-light div").css({transform:"scale(0)"})):($(".video-cont .gl-cursors #gl-pause-light").css({opacity:"0"}),$(".video-cont .gl-cursors #gl-pause-light div").css({transform:"scale(0)"}))}),$("#collection-video").off("ended").on("ended",function(e){this.currentTime=0,$(".video-cont .gl-cursors #gl-play-light div").css({transform:"scale(1)"}),$(".video-cont .gl-cursors #gl-play-light").css({opacity:"1"}),$(".video-cont .gl-cursors #gl-pause-light").css({opacity:"0"}),$(".video-cont .gl-cursors #gl-pause-light div").css({transform:"scale(0)"})}),$("#collection-video")[0].paused?($("#collection-video")[0].play(),$(".video-cont .gl-cursors #gl-play-light div").css({transform:"scale(0)"}),$(".video-cont .gl-cursors #gl-play-light").css({opacity:"0"}),$(".video-cont .gl-cursors #gl-pause-light div").css({transform:"scale(1)"}),$(".video-cont .gl-cursors #gl-pause-light").css({opacity:"1"})):($("#collection-video")[0].pause(),$(".video-cont .gl-cursors #gl-play-light div").css({transform:"scale(1)"}),$(".video-cont .gl-cursors #gl-play-light").css({opacity:"1"}),$(".video-cont .gl-cursors #gl-pause-light").css({opacity:"0"}),$(".video-cont .gl-cursors #gl-pause-light div").css({transform:"scale(0)"}))):$("#collection-video").length>0&&$("#collection-video")[0].pause()})),$(".select-edit-lens").find("i").is(":visible")||($(".select-edit-lens").disabled=!0,$(".select-edit-lens").find("i").show()),frameCatentryId=t,window.productDetails.setCurrentProductId(e),window.productDetails.setCurrentSubProductId(t),$("#detail_box_content_"+e+" .subProduct-element.selected").removeClass("selected");var c=window.productDetails.getSubProduct(e,t);window.glassesFunctions.setTransparencyNeeded(!1);var p="#detail_box_content_"+e+" .subProduct-element[data-ids='"+e+"_"+t+"']";if(0==$(p).length&&void 0!==c&&void 0!==c.sizes)for(let[t,a]of c.sizes)p="#detail_box_content_"+e+" .subProduct-element[data-ids='"+e+"_"+t+"']",0!=$(p).length&&$(p).addClass("selected");else $(p).addClass("selected");if(collectionPage()&&0==$("#landing-pdp").length){l=c.partNumber;var u=c.gender;initPDP(l,e),initCollectionCarousel(l,e,u)}else{initPDP(l=c.partNumber,e)}if(c.offerPerc.length){var h=$("#detail_box_content_"+e+" .c-pdp-det__left .offer-badge");h.removeClass(),h.addClass("offer-badge offer-"+c.offerPerc.substr(0,c.offerPerc.indexOf("%")).replace("-","")),h.text(c.offerPerc),h.show()}else $("#detail_box_content_"+e+" .c-pdp-det__left .offer-badge").hide();$.each(c,function(t,a){hideBlank("#detail_box_content_"+e+" [data='field-"+t+"']",a),updateInnerHtml("#detail_box_content_"+e+" [data='pdp-"+t+"']",a)}),affirmUpdatePrice("#detail_box_content_"+e);var m="#detail_box_content_"+e+" #pdp-size";if(c.sizes.size>1){var g='<div class="select_container_gl" style="display: inline-block;"><select class="size-select">',f=Array.from(c.sizes.entries());for(i=0;i<f.length;i++)f[i][0]==t?g+='<option data-id="'+e+'" data-subid="'+t+'" value='+f[i][0]+" selected>"+f[i][1].substring(0,f[i][1].indexOf("|"))+" "+f[i][1].substring(f[i][1].indexOf("|")+1,f[i][1].lastIndexOf("-"))+"</option>":g+='<option data-id="'+e+'" data-subid="'+t+'" value='+f[i][0]+">"+f[i][1].substring(0,f[i][1].indexOf("|"))+" "+f[i][1].substring(f[i][1].indexOf("|")+1,f[i][1].lastIndexOf("-"))+"</option>";g+="</select></div>",$(m).text(""),$(m).append(g),$(m+" .size-select").selectBox({mobile:!0,keepInViewport:!0})}else null==c.sizeDescription||""==c.sizeDescription?$(m).text("Standard "+c.size.substring(0,c.size.lastIndexOf("-"))):$(m).text(c.sizeDescription+" "+c.size.substring(0,c.size.lastIndexOf("-")));var v=$("#detail_box_content_"+e+" .js-addLenses-button"),y=$("#soldout");1==c.buyable?(v.show(),y.addClass("hidden")):(v.attr("style","display: none !important"),y.removeClass("hidden")),c&&c.frameGroup&&"no_prescription"==c.frameGroup.toLowerCase()?($("div.c-pdp-det__buttons span.js-addLenses-label").attr("data-frameonly","true"),$("div.c-pdp-det__buttons span.js-addLenses-label").text("Add to bag"),$("div.c-pdp-det__buttons span.js-addLenses-label").attr("aria-label","Add to bag")):($("div.c-pdp-det__buttons span.js-addLenses-label").attr("data-frameonly","false"),$("div.c-pdp-det__buttons span.js-addLenses-label").text("Select lenses"),$("div.c-pdp-det__buttons span.js-addLenses-label").attr("aria-label","Select lenses"));var w=$("#detail_box_content_"+e+" .js-favorite");c.isFavorite?w.addClass("active"):w.removeClass("active"),"Unisex"==c.gender&&$("#detail_box_content_"+e+" .c-prod__unisex").removeClass("hide");var b=window.productDetails.currentProductId,_=window.productDetails.currentSubProductId,k=window.productDetails.getSubProduct(b,_),C=window.productDetails.get(b),P="",x="";"sunglasses"==k.category.toLowerCase()?P="SUN":"eyeglasses"==k.category.toLowerCase()&&(P="OPTICS"),1==k.buyable&&(x="Available");var S=!1;void 0!=n&&n.length>1&&void 0!=n[1]&&null!=n[1]&&(S=n[1].bypassClick);var I={};if(!a&&!S){I[k.partNumber]={Sku:k.sku,Category:P,Engraving:"",Status:x,Price:maxFractionDigits(k.price,2),PriceFull:maxFractionDigits(k.price,2),Brand:C.brandName,ModelName:C.name,LensColor:k.lensColor,LensTechnology:"",FrameColor:k.frameColor,FrameTechnology:k.frameMaterial,Shape:k.frameType,TaxRate:"",Type:"STD"};try{var L={id:"Prods-Update",Products:I};tealium_data2track.push(L)}catch(e){L={id:"Prods-Update-Tentative",Error_Source:"Product",Error_Code:"UPC Update"};tealium_data2track.push(L)}}if(1!=c.buyable)try{L={id:"Error",Error_Source:"Product",Error_Code:"Out of Stock",Error_Details:k.partNumber,Products:I};tealium_data2track.push(L)}catch(e){console.error(e)}if(-1!=k.urlProduct.indexOf("?"))if(window.location.search.includes("cart")){var D=getNewURL(k.urlProduct,k.urlProduct.split("?")[1]+"&cart=true");window.history.replaceState(null,null,D)}else{D=getNewURL(k.urlProduct,k.urlProduct.split("?")[1]);window.history.replaceState(null,null,D)}else window.history.replaceState(null,null,k.urlProduct+window.location.search)}catch(e){console.error(e);L={id:"Error",Error_Source:"Client",Error_Code:"Pdp",Error_Details:"Select frame color no response - "+e};tealium_data2track.push(L)}}function initCollectionProducts(){window.productDetails.getAll().forEach(function(e,t){var a=e.subProducts.values().next().value;a&&("unisex"===a.gender.toLowerCase()?setToMatch=akamaiIMPicsSetCollUnisex.split(","):setToMatch=akamaiIMPicsSetCollGender.split(","),akamaiIMGetJSON(a.partNumber,t,setToMatch,"dde6f7",900,2,initCollectionProductPost))})}function initCollectionProductPost(e,t,a){if(e.length){var n=!1;e.forEach(function(e,t){"On Model Front"===e.type&&(n=!0)}),n||(void 0!==e[0]&&($(".item_container_collection#prod_"+a+" img.collection-front-pic").eq(0).data("original",e[0].url),$(".item_container_collection#prod_"+a+" img.collection-front-pic").eq(0).attr("src",e[0].url)),void 0!==e[1]&&($(".item_container_collection#prod_"+a+" img.collection-front-pic").eq(1).data("original",e[1].url),$(".item_container_collection#prod_"+a+" img.collection-front-pic").eq(1).attr("src",e[1].url)))}}function initPDP(e,t){akamaiIMGetJSON(e,t,akamaiIMPicsSet2.split(","),"f7f7f9",900,1,initPDPPost)}function initPDPPost(e,t,a){e.length>1||1==e.length&&"video"!=e[0].type?renderPicturesPDP(e,t,a):akamaiIMGetJSON(t,a,akamaiIMPicsSet.split(","),"f7f7f9",900,1,initPDPPostFallback)}function initPDPPostFallback(e,t,a){(e.length>1||1==e.length&&"video"!=e[0].type)&&renderPicturesPDP(e,t,a)}function renderPicturesPDP(e,t,a){$("#detail_box_content_"+a+" [data='pdp-mainImage']").parent().removeClass("glass-view"),$("#detail_box_content_"+a+" [data='pdp-mainImage']").parent().addClass(e[0].cssClass),$("#detail_box_content_"+a+" [data='pdp-mainImage']").attr("src",e[0].url),$("#detail_box_content_"+a+" [data='pdp-mainImage']").attr("alt",e[0].alt)}function initPDPZoom(e,t){akamaiIMGetJSON(e,t,akamaiIMPicsSetZoom2.split(","),"f7f7f9",2e3,20,initPDPZoomPost)}function initPDPZoomPost(e,t,a){e.length>1||1==e.length&&"video"!=e[0].type?renderPicturesPDPZoom(e,t,a):akamaiIMGetJSON(t,a,akamaiIMPicsSetZoom.split(","),"f7f7f9",2e3,20,initPDPZoomPostFallback)}function initPDPZoomPostFallback(e,t,a){(e.length>1||1==e.length&&"video"!=e[0].type)&&renderPicturesPDPZoom(e,t,a)}function renderPicturesPDPZoom(e,t,a){for(var n=0;n<e.length;n++)if("video"!=e[n].type){var o=$("#pdp-images-wrapper .pdp-images-item-tpl").clone();o.find(".pdp-images-item-img").attr("data-original",e[n].url),o.find(".pdp-images-item-img").attr("alt",e[n].alt),o.removeClass("pdp-images-item-tpl"),$("#pdp-images-wrapper").append(o)}}function initLensSelectionModal(e,t){var a=akamaiIMPicsSet.split(",");collectionPage()?akamaiIMGetJSON(e,t,a,"dde6f7",900,1,initLensSelectionModalPost):akamaiIMGetJSON(e,t,a,"f7f7f9",900,1,initLensSelectionModalPost)}function initLensSelectionModalPost(e,t,a){e.length&&($(".lens-selection-column-left").removeClass("glass-view"),$(".lens-selection-column-left").addClass(e[0].cssClass),$(".lens-selection-column-left .column-left-image-container").css("background-image","url("+e[0].url+")"))}function initCollectionCarousel(e,t,a){$("#detail_box_content_"+t+" [data='pdp-mainImage']").hide(),akamaiIMGetJSON(e,t,akamaiIMPicsSetColl2.split(","),"dde6f7",900,20,initCollectionCarouselPost)}function initCollectionCarouselPost(e,t,a){e.length>1||1==e.length&&"video"!=e[0].type?renderPicturesCollectionCarousel(e,t,a):akamaiIMGetJSON(t,a,akamaiIMPicsSetCollUnisex.split(","),"dde6f7",900,20,initCollectionCarouselPostFallback)}function initCollectionCarouselPostFallback(e,t,a){(e.length>1||1==e.length&&"video"!=e[0].type)&&renderPicturesCollectionCarousel(e,t,a)}function renderPicturesCollectionCarousel(e,t,a){for(var n=$("#indexToAppend").val(),o="",i=0;i<e.length;i++)"video"==e[i].type?o='<div class="main-slide video-cont"><video id="collection-video" width="" height="700" muted poster='+e[i].poster+" > <source src="+e[i].url+' type="video/mp4"></video><div class="gl-cursors"> <div id="gl-play-light" class="gl-cursor gl-light" style="opacity: 0;  user-select: none; top: 607px; left: -44px;">  <div style="transform: scale(0);"> <p class="gl-cta">Play</p> </div></div> <div id="gl-pause-light" class="gl-cursor gl-light gl_pause" style="opacity: 0; position: fixed; user-select: none; top: 40px; left: 1132px;"><div style="transform: scale(0);"><p class="gl-cta">Pause</p></div></div></div>':$(".pdp_main_carousel").append('<div class="main-slide '+e[i].cssClass+'"><img src="'+e[i].url+'" alt="'+e[i].alt+'" title="'+e[i].title+'"></div>');o.length>0&&(void 0===n?(n="1",$($(".pdp_main_carousel").children()[n-1]).before(o)):$($(".pdp_main_carousel").children()[n-1]).before(o)),$(".pdp_main_carousel").on("init",function(e,t){var a=$("#indexToAppend").val();void 0===a&&(a="1"),"1"==a&&t.slickPrev()}),setTimeout(function(){$(".pdp_main_carousel").slick({slide:".main-slide",dots:!0,vertical:!0,slidesToShow:1,infinite:!1,slidesToScroll:1,verticalSwiping:!0,arrows:!1,focusOnSelect:!0})},10)}function akamaiIMGetJSON(e,t,a,n,o,i,r){console.log("Start manifest.json request");try{t=parseInt(t)}catch(e){console.error("Parsing to int error value: "+t)}var s=window[e+"_manifest"];void 0===s||null==s?$.getJSON("https://assets.glasses.com/is/image/Glasses/"+e+"_manifest_2.json",function(s){console.log("Get manifest.json"),window[e+"_manifest"]=s,akamaiIMPicsSetMatch(e,t,a,s,n,o,i,r),console.log("Processed manifest.json")}).fail(function(){akamaiIMPicsSetMatch(e,t,a,JSON.parse(akamaiIMJsonSetDefault),n,o,i,r)}):akamaiIMPicsSetMatch(e,t,a,s,n,o,i,r)}function akamaiIMPicsSetMatch(e,t,a,n,o,i,r,s){var l="",d=n.items,c=[],p="?impolicy=GL_parameters_transp";null!=o&&(p+="&bgcolor=%23"+o),null!=i&&(p+="&width="+i);for(var u=0,h=0;h<a.length&&!(r<=0);h++)for(var m=0;m<d.length&&!(r<=0);m++)if(d[m].file_key===a[h]){var g="https://assets.glasses.com/is/image/Glasses/"+e+"_"+d[m].file_key+".png"+p,f="";"On Model Front"===d[m].type?l=g:f="glass-view";var $=d[m].type,v=d[m].type;try{var y=window.productDetails.getCurrentProductId(),w=window.productDetails.map.get(y).brandName,b=window.productDetails.map.get(y).name,_=window.productDetails.currentSubProductId;v=w+" "+b+" "+window.productDetails.getSubProduct(y,_).frameColor+" "+window.productDetails.getSubProduct(y,_).category+" "+(u+1)}catch(e){console.error(e)}var k={url:g,title:$,alt:v,cssClass:f,type:d[m].type};c.push(k),r--,u++}if(r>0&&window.productDetails.getCurrentSubProduct()&&void 0!==window.productDetails.getCurrentSubProduct().hasVideo&&"1"===window.productDetails.getCurrentSubProduct().hasVideo){var C={url:"https://assets.glasses.com/extra/image/Glasses/VIDEO/"+e+"_GL_video1.mp4",title:"Video",alt:"Video",cssClass:"",type:"video",poster:l};c.push(C)}s(c,e,t)}function selectSiblingSubProductHandler(e,t,a,n,o){if(isVMEnabled()){var i=function(){var n=window.productDetails.getSiblingSubProduct(e,t,a);null==n&&(n=window.productDetails.getSibling(e,a)),refreshVmArea(e,n)};$("#detail_box_content_"+e+" [data='pdp-mainImage']").off("load").on("load",i).off("error").on("error",i)}$(".select-edit-lens").find("i").is(":visible")||($(".select-edit-lens").disabled=!0,$(".select-edit-lens").find("i").show()),frameCatentryId=a,window.productDetails.setCurrentProductId(e),window.productDetails.setCurrentSubProductId(a),$("#detail_box_content_"+e+" .subProduct-element.selected").removeClass("selected");var r=window.productDetails.getSiblingSubProduct(e,t,a);null==r&&(r=window.productDetails.getSibling(e,a));var s="#detail_box_content_"+e+" .subProduct-element[data-ids='"+e+"_"+t+"']";if(0==$(s).length&&void 0!==r&&void 0!==r.sizes)for(let[t,a]of r.sizes)s="#detail_box_content_"+e+" .subProduct-element[data-ids='"+e+"_"+t+"']",0!=$(s).length&&$(s).addClass("selected");else $(s).addClass("selected");if(collectionPage()&&0==$("#landing-pdp").length){var l=r.partNumber,d=r.gender;initPDP(l,e),initCollectionCarousel(l,e,d)}else{initPDP(l=r.partNumber,e)}if(r.offerPerc.length){var c=$("#detail_box_content_"+e+" .c-pdp-det__left .offer-badge");c.removeClass(),c.addClass("offer-badge offer-"+r.offerPerc.substr(0,r.offerPerc.indexOf("%")).replace("-","")),c.text(r.offerPerc),c.show(),$(".pdp-det__carousel__item.selected .offer-badge").show()}else $("#detail_box_content_"+e+" .c-pdp-det__left .offer-badge").hide(),$(".pdp-det__carousel__item.selected .offer-badge").hide();$.each(r,function(t,a){hideBlank("#detail_box_content_"+e+" [data='field-"+t+"']",a),updateInnerHtml("#detail_box_content_"+e+" [data='pdp-"+t+"']",a)});var p=$("#detail_box_content_"+e+" .js-addLenses-button"),u=$("#soldout");1==r.buyable?(p.show(),u.addClass("hidden")):(p.attr("style","display: none !important"),u.removeClass("hidden")),r&&r.frameGroup&&"no_prescription"==r.frameGroup.toLowerCase()?($("div.c-pdp-det__buttons span.js-addLenses-label").attr("data-frameonly","true"),$("div.c-pdp-det__buttons span.js-addLenses-label").text("Add to bag"),$("div.c-pdp-det__buttons span.js-addLenses-label").attr("aria-label","Add to bag")):($("div.c-pdp-det__buttons span.js-addLenses-label").attr("data-frameonly","false"),$("div.c-pdp-det__buttons span.js-addLenses-label").text("Select lenses"),$("div.c-pdp-det__buttons span.js-addLenses-label").attr("aria-label","Select lenses"));var h=$("#detail_box_content_"+e+" .js-favorite");r.isFavorite?h.addClass("active"):h.removeClass("active"),"Unisex"==r.gender&&$("#detail_box_content_"+e+" .c-prod__unisex").removeClass("hide");var m=window.productDetails.currentProductId,g=(window.productDetails.currentSubProductId,window.productDetails.getSiblingSubProduct(e,t,a));null==g&&(g=window.productDetails.getSibling(e,a));var f=window.productDetails.get(m),v="",y="";"sunglasses"==g.category.toLowerCase()?v="SUN":"eyeglasses"==g.category.toLowerCase()&&(v="OPTICS"),1==g.buyable&&(y="Available");var w=!1;void 0!=o&&o.length>1&&void 0!=o[1]&&null!=o[1]&&(w=o[1].bypassClick);var b={};if(!n&&!w){b[g.partNumber]={Sku:g.sku,Category:v,Engraving:"",Status:y,Price:maxFractionDigits(g.price,2),PriceFull:maxFractionDigits(g.price,2),Brand:f.brandName,ModelName:f.name,LensColor:g.lensColor,LensTechnology:"",FrameColor:g.frameColor,FrameTechnology:g.frameMaterial,Shape:g.frameType,TaxRate:""};try{var _={id:"Prods-Update",Products:b};tealium_data2track.push(_),monetateTrackProduct(m,v)}catch(e){_={id:"Prods-Update-Tentative",Error_Source:"Product",Error_Code:"UPC Update"};tealium_data2track.push(_)}}if(1!=r.buyable)try{_={id:"Error",Error_Source:"Product",Error_Code:"Out of Stock",Error_Details:g.partNumber,Products:b};tealium_data2track.push(_)}catch(e){console.error(e)}if(-1!=g.urlProduct.indexOf("?"))if(window.location.search.includes("cart")){var k=getNewURL(g.urlProduct,g.urlProduct.split("?")[1]+"&cart=true");window.history.replaceState(null,null,k)}else{k=getNewURL(g.urlProduct,g.urlProduct.split("?")[1]);window.history.replaceState(null,null,k)}else window.history.replaceState(null,null,g.urlProduct+window.location.search)}function getNewURL(e,t){if(void 0!==t){var a=e.split("?")[0];return a+"?"+t}return e}function callConfigurationLenses(e,t){initializePdpListeners(e,t)}function updateInnerHtml(e,t){var a=$(e);a&&a.html(t)}function hideBlank(e,t){var a=$(e);a&&(null===t||void 0===t||""===t?a.addClass("hide"):a.removeClass("hide"))}function showImagesContainer(){$("body").addClass("is-menu-hidden-when-modal");var e=window.productDetails.getCurrentProductId(),t=window.productDetails.getCurrentSubProductId(),a=window.productDetails.getSubProduct(e,t);null!==a&&(updateInnerHtml("#full-images-container",buildTemplate("#pdp-images",a.imagesUrls)),$("#full-images-container").show(),$("#main_content_wrapper").css("z-index","12"),$("html, body").addClass("noScroll"),initPDPZoom(a.partNumber,t),document.onkeydown=function(e){27==(e=e||window.event).keyCode&&hideImagesContainer()},registerLazyLoadByClass("div.lazy-detail-image.dots-loader",300),delayedScroll(200))}function hideImagesContainer(){$("body").removeClass("is-menu-hidden-when-modal"),$("#full-images-container").hide(),$("html, body").removeClass("noScroll"),$("#main_content_wrapper").css("z-index","auto"),document.onkeydown=null}function switchPolarizedChangeHandler(e,t,a){var n="#detail_box_content_"+e+" .subProduct-element.polarized-lenses",o="#detail_box_content_"+e+" .subProduct-element.normal-lenses";t?($(".switch-label").addClass("active"),$(n).show(),$(o).hide(),a||$(n).first().click()):($(".switch-label").removeClass("active"),$(o).show(),$(n).hide(),a||$(o).first().trigger("click",{bypassClick:!0}));var i=$(".subProduct-element:visible").length;i>1&&$(".pdp-det__carousel").find(".slick-track").width()>$(".pdp-det__carousel").find(".slick-list").width()?($(".slick-arrow").show(),$(".slick-counter").html(i+" colors "),$(".slick-counter").show()):($(".slick-arrow").hide(),$(".slick-counter").hide()),prev_callback(),next_callback()}function switchPolarizedChangeHandlerLanding(e,t){var a="#detail_box_content_"+e+" .subProduct-element.polarized-lenses",n="#detail_box_content_"+e+" .subProduct-element.normal-lenses";t?($(".switch-label").addClass("active"),$(a).show(),$(n).hide()):($(".switch-label").removeClass("active"),$(n).show(),$(a).hide())}function stopDropdownEventPropagation(){$(".dropdown-menu").off("click").on("click",function(e){$(e.target).hasClass("filter-apply")||$(e.target).hasClass("filter-clear")||$(e.target).hasClass("filter-close")||!$(this).hasClass("dropdown-menu")||e.stopPropagation()})}function navbarAnimationInit(){lastScrollTop=0;var e=0,t=$("#product_list_container").hasClass("branding-page");$(document).scroll(function(a){var n=$(window).scrollTop();if(n>1&&$("body").hasClass("is-menu-hidden")&&!$("body").hasClass("is-menu-animated")?(t?n<=lastScrollTop:n>lastScrollTop)?$("body").addClass("is-menu-hidden"):0==e?e=n:n<e-100&&($("body").removeClass("is-menu-hidden"),e=0):$("body").removeClass("is-menu-hidden"),$("body").delay(100).removeClass("is-menu-animated"),lastScrollTop=n,$("#side-logo").length>0){var o=0,i=0,r=$("#header_wrapper").height();$(".marquee-container").length>0&&$(".marquee-container").is(":visible")&&(r+=$(".marquee-container").height());var s=$("#product_list_container").height(),l=$("#side-logo").width(),d=l/2;$(".clp-hero-espot").length>0&&(o=$(".clp-hero-espot").height()),$(".clp-row-espot").length>0&&(i=$(".clp-row-espot").height()),n<=o?($("#side-logo").css("position","absolute"),$("#side-logo").css("top",d)):n>=o+s-i-100-l?($("#side-logo").css("position","absolute"),$("#side-logo").css("top",s-i-100-d)):($("#side-logo").css("position","fixed"),$("#side-logo").css("top",r+50+d))}})}function getDataFromElement(e){var t=$(e);return t?t.html():null}function horizontalDragInit(){$(".horizontal-drag").each(function(){const e=$(this);let t,a,n=!1;e.on("mousedown",function(o){n=!0,e.addClass("active"),t=o.pageX-e.offset().left,a=e.scrollLeft()}),e.on("mouseleave",function(){n=!1,e.removeClass("active")}),e.on("mouseup",function(){n=!1,e.removeClass("active")}),e.on("mousemove",function(o){if(!n)return;o.preventDefault();const i=o.pageX-e.offset().left-t;e.scrollLeft(a-i)})})}function openImagesModal(e,t){$("body").addClass("is-menu-hidden-when-modal");var a=window.productDetails.getSubProduct(e,t);null!==a&&(updateInnerHtml("#full-images-container",buildTemplate("#pdp-images",a.imagesUrls)),$("#full-images-container").show(),$("#main_content_wrapper").css("z-index","12"),$("html, body").addClass("noScroll"))}function showLandingImagesContainer(){openImagesModal(window.productDetails.getLandingProductId(),window.productDetails.getLandingSubProductId())}function hideLandingImagesContainer(){$("body").removeClass("is-menu-hidden-when-modal"),$("#full-images-container").hide(),$("html, body").removeClass("noScroll"),$("#main_content_wrapper").css("z-index","auto")}function addFavoritesHandler(e,t,a){var n,o;t&&a?(n=t,o=a):(n=window.productDetails.getCurrentProductId(),o=window.productDetails.getCurrentSubProductId());var i=window.productDetails.getSubProduct(n,o);i.isFavorite?(categoryDisplayJS.removeItemFromWishListAjax(o,"frame"),$(e).removeClass("active")):(categoryDisplayJS.addItemToWishListAjax(o,"frame"),$(e).addClass("active")),i.isFavorite=!i.isFavorite,window.productDetails.pushSubProduct(n,i);window.productDetails.get(n);var r=window.productDetails.getSubProduct(n,o),s="";"sunglasses"==r.category.toLowerCase()?s="SUN":"eyeglasses"==r.category.toLowerCase()&&(s="OPTICS");var l={};r.partNumber&&(l[r.partNumber]={Sku:r.sku,Category:s});var d="X_Pdp_Prod_AddToWishList";void 0!=e.getAttribute("data-element-id")&&e.getAttribute("data-element-id").length>0&&(d=e.getAttribute("data-element-id"));var c="";void 0!=e.getAttribute("data-description")&&e.getAttribute("data-description").length>0&&(c=e.getAttribute("data-description"));try{tealium_data2track.push({id:"Click",Tracking_Type:"link",data_element_id:d,data_description:c})}catch(e){var p={id:"Error",Error_Source:"Product",Error_Code:"Add to Favorites"};tealium_data2track.push(p)}try{p={id:"ProdFavAdd",Products:l};tealium_data2track.push(p)}catch(e){p={id:"ProdFavAdd-Tentative",Error_Source:"Product",Error_Code:"Add to Favorites"};tealium_data2track.push(p)}}function initPerfectScroll(){$(".js-scroll").length>0&&$(".js-scroll").each(function(){new PerfectScrollbar($(this)[0],{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],wheelPropagation:!0,swipeEasing:!0})}),$(".js-x-scroll").length>0&&$(".js-x-scroll").each(function(){new PerfectScrollbar($(this)[0],{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],suppressScrollY:!0,wheelPropagation:!0,swipeEasing:!0})}),$(".js-y-scroll").length>0&&$(".js-y-scroll").each(function(){new PerfectScrollbar($(this)[0],{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],suppressScrollX:!0,wheelPropagation:!0,swipeEasing:!0})})}function cleanBoolean(e){if(void 0!=e){var t=e.toString().toLowerCase();if("true"===t||"1"===t)return!0}return!1}function initFilterUniqueChoiceHandler(){$('.dropdown-wrapper.filter-options [type="checkbox"]').on("change",function(){let e=$(this).closest(".js-filter-unique");e.find('[type="checkbox"]').not(this).prop("checked",!1),$.each(e.find('[type="checkbox"]').not(this),function(e,t){categoryDisplayJS.removeFacetCookie($(t).data("name"),$(t).data("value"))})})}function initializePdpListeners(e,t){var a=$("#lens-selection-area"),n=$(".add-to-cart"),o=$(".order-subtotal .addToWishList"),i=$(".edit-wrapper a.styled-link");if(a.off("click"),a.off("change"),0==i.length&&initModalRelatedListeners(e,t),o.on("click",function(){$(this).addClass("added-to-tray")}),a.on("click","#lens-selection-area  #finish-lens-modal-button",function(){lensHaveBeenSelected=!0;var e=$(".lens-hidden-data > .lensCatentryId").val(),t=$(".lens-color-actual").find("input[type=radio][name=lens]:checked").data("skuid"),a=LC2.pdpUtils.getPropFromLensId(pdpLensInfo,"lens_sku_id",e,t),o=LC2.pdpUtils.getPropFromLensId(pdpLensInfo,"color",e,t),i=LC2.pdpUtils.getPropFromLensId(pdpLensInfo,"lens_sku_code",e,t);$("#lens-selection-area").hasClass("cart-lens-options")||trackApplyLensToFrame(pdpLensInfo,e,t),LC2.pdpUtils.printColor({color:o,lens_sku_id:a,lens_sku_code:i}),n.addClass("st-button-orange").removeClass("lens-not-selected");var r=n.next("span.select-lens-error-message");r&&r.addClass("hide")}),a.on("click","input[type=radio][name=lens]",function(){var e=$(this);LC2.pdpUtils.hideErrorMessages(),e.closest(".lens-holder.check-row").addClass("active"),e.getAssociatedRadios().filter(":not(:checked)").closest(".lens-holder.check-row").removeClass("active")}),a.on("click","#go-back-lens-modal-button-step0",function(e){e.preventDefault(),LC2.pdpUtils.openExitingFromLensSelection("modal-no-lens-choosed")}),a.on("click","#go-back-lens-modal-button-step1",function(e){showModalStep(0)}),a.on("click","#go-back-lens-modal-button-2",function(e){showModalStep(1)}),a.on("click",".lens-name-link",function(e){e.preventDefault(),$(this).closest(".step-template-html").find(".lens-modal-prev").eq(0).trigger("click")}),$(document).on("click",".edit-wrapper a.styled-link",function(e){e.preventDefault(),$(".step-template-html").empty();var t=$(this).data("sourceurl");$(".edit-wrapper a.styled-link").data("sourceurl",t),$(".edit-wrapper a.styled-link").data("editFromCart","true"),$(".lens-hidden-data > input[type=hidden]").val(""),$(".frame-hidden-data > .currentFramePrice").val($(this).data("frameprice")),$(".frame-hidden-data > .currentFrameUPC").val($(this).data("frameupc")),initModalRelatedListeners(function(){openLensSelectionModal(!1)},$(this).data("index"))}),$(".size-select").off("change"),$(".size-select").on("change",function(e){selectSiblingSubProductHandler($(this).find(":selected").data("id"),$(this).find(":selected").data("subid"),parseInt($(this).val()),!1),callConfigurationLenses($(this).data("id"),parseInt($(this).val()))}),$(".perk-check").on("click",function(){var e=[location.protocol,"//",location.host,location.pathname].join(""),t=$.query.REMOVE("selectedPerkCode").REMOVE("selectedPerk");if($(this).parent().hasClass("perk-box-active"))t=$.query.SET("selectedPerk",$(this).parent().data("perkname")).SET("selectedPerkCode",$(this).data("perkcode"));var a=$(".lens-hidden-data > .lensCatentryId").val();if(""!=a){$.query.REMOVE("selectedLens");t=$.query.SET("selectedLens",a)}window.location.href=e+t.toString()}),""!=$.query.get("selectedPerk")){var r=$.query.get("selectedPerk"),s=$(".perk-box[data-perkname="+r+"]");s.addClass("perk-box-active"),s.children(".perk-check").addClass("perk-check-active"),$(".perk-triangle").click()}}function initModalRelatedListeners(e,t){var a=$("#lens-selection-area"),n=$(".select-edit-lens, .edit-lens-link, .edit-link, .js-addLenses-button"),o=$("#lens-selection-area .lens-modal-exit");window.riaInProgress=!1;a.data("sourceurl");var i="input[type=radio][name=lens-type]",r="input[type=radio][name=addons-type]";initFrameLenses(e,t),a.on("click","input[type=radio][name=productId]",function(){var e=$(this);$("input[type=radio][name=productId]").parent().parent().removeClass("active"),e.filter(":checked").parent().parent().addClass("active");var t=LC2.pdpUtils.getSelectedProductInfo(e);LC2.pdpUtils.printLensInfoIntoMenu(t);var a=0,n={};if(e.isOnlyStep1Radio()){$addToCartButton.addClass("st-button-orange").removeClass("lens-not-selected"),$("#lens-selection-area").hasClass("cart-lens-options")||trackApplyLensToFrame(pdpLensInfo,e.data("lensid"));var o=LC2.pdpUtils.getPropFromLensId(pdpLensInfo,"color",e.val()),r=LC2.pdpUtils.getPropFromLensId(pdpLensInfo,"lens_sku_id",e.data("lensid")),s=LC2.pdpUtils.getPropFromLensId(pdpLensInfo,"lens_sku_code",e.data("lensid"));LC2.pdpUtils.printColor({color:o,lens_sku_id:r,lens_sku_code:s}),saveLensSelectionData(!1,pdpLensInfo,function(){$(".lens-selection-modal-page.current").removeClass("current hide"),closeLensSelectionModal()})}else{var l=e.val(),d=e.closest(".tab-pane").attr("id"),c=$("#lens-selection-modal-tabs a[href=#"+d+"]").text();pdpLensInfo.brand=window.productDetails.map.get(window.productDetails.currentProductId).brandName,pdpLensInfo.category=window.productDetails.map.get(window.productDetails.currentProductId).subProducts.get(window.productDetails.currentSubProductId).category;var p=LC2.pdpUtils.getPdpInfoSubset(pdpLensInfo,c,l);if((n=LC2.pdpUtils.formatJson(p,pdpLensInfo)).selectedLensType=$(i).filter(":checked").val(),RiaHelper.isInsuranceOn()){var u=p.ehnancements,h=p.addons,m=p.skus;void 0!==u&&u.length>0&&($.each(u,function(e,t){"false"==t.isStepUpPackage&&a++}),0!=a||void 0!==h&&0!=h.length||!(void 0===m||m.length<=1)||e.data("onlystep1",!0))}else $("#lc-lens-enh-row").show();LC2.pdpUtils.mountStepOnRadioClick(n,"#lens-selection-area-template-2","#lens-selection-area-3",e);var g=$("#lens-color-selection-modal-tabs ul"),f=$("#lens-color-selection-modal-tabs > form > div.tab-panes > div");g.tabs(f,{current:"active",history:!0}),RiaHelper.isInsuranceOn()?(a>0?$("input[data-ispackage=true]").closest(".lc-lens-enh-item").hide():$("#lc-lens-enh-row").hide(),$(".lc-lens-enh-price").hide()):$(".lc-lens-enh-price").show(),$(".accordion-menu a").on("click",function(){$(this).parent().siblings("ul").slideToggle(),$(this).toggleClass("expanded")}),$(".lc-lens-enh-item label").on("click",function(e){RiaHelper.isInsuranceOn()&&($(".calculate-price-enh").removeClass("hide"),$(".ria-modal-calculated-price").addClass("hide"));var t=$(".lc-lens-enh");$(this).parent().parent().toggleClass("added");var a=$(this).parent().find("input"),n=$(a).attr("data-excl").toString().split(",");$(this).parent().parent().hasClass("added")?$(n).each(function(e,a){var n=$(t).find('input[data-pn="'+a+'"]');$(n).prop("disabled",!0),$(n).parent().parent().parent().addClass("not-compatible"),$(n).parent().removeClass("added")}):$(n).each(function(e,a){var n=$(t).find('input[data-pn="'+a+'"]');$(n).prop("disabled",!1),$(n).parent().parent().parent().removeClass("not-compatible")})});var v=$.query.get("selectedEnh");v.length>0&&(_dl.site_events={select_lens_enhancement:"true"},$.each(v,function(e,t){$('input[data-sku-pn="'+t+'"]').closest(".lc-lens-enh-item label").click()})),$(".calculate-price-enh").on("click",function(){getRIAPricesForEnhancements(!1)}),_dl.site_events={select_lens_tint:"true"},callTrackAnalytics(_dl)}}),a.on("click","#confirm-lens-step",function(e){if(e.preventDefault(),riaInProgress)return!1;var t=window.productDetails.getCurrentProductId(),a=window.productDetails.getCurrentSubProductId();currentSubProd=window.productDetails.getSubProduct(t,a);$(i).filter(":checked");var n=$(i).filter(":checked").val(),o=$(".o-tabs__nav__item.is-active").text();""==o&&(o=pdpLensInfo.lens_categories[0].name);var s=LC2.pdpUtils.getLensCodeFromJson(pdpLensInfo,o,n),l=LC2.pdpUtils.getLenseListPriceFromJson(pdpLensInfo,o,n);if("PlanoSun"==s||"Plano"==s||$(i).filter(":checked").hasClass("addons_length_0")){e.preventDefault();var d=LC2.pdpUtils.getPdpInfoSubset(pdpLensInfo,o,n),c=[];$(r).filter(":checked").each(function(){c.push($(this).val())});var p=void 0;void 0!=$(r).filter(":checked").val()&&(p=LC2.pdpUtils.getAddonsInfoSubset(pdpLensInfo,n,c)),ajaxAddGlassesToCart(d,p)}else{LC2.pdpUtils.initLensSelectionSteps(o,n);var u=LC2.pdpUtils.getLensePriceFromJson(pdpLensInfo,o,n),h=(l=LC2.pdpUtils.getLenseListPriceFromJson(pdpLensInfo,o,n),!1),m="true"==$("input.c-complete-pair").val();null!=l&&l!=u&&(h=!0);parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim());var g=productDetails.getCurrentSubProduct().price,f=null;if(RiaHelper.isInsuranceOn()&&(!h||m)){f=$("#lens-selection-modal-page0 .o-steps__footer .o-resume__price").text();g=$("#lens-selection-modal-page0 .o-steps__footer .o-resume__price__insurance").text();$("#lens-selection-modal-page1 .o-steps__footer .o-resume__price").html(f),$("#lens-selection-modal-page1 .o-steps__footer .o-resume__price__insurance").html(g),$("#lens-selection-modal-page1 .o-steps__footer .o-resume__price__insurance").removeClass("hidden")}showModalPage1();var v=window.productDetails.getSubProduct(t,a),y=window.productDetails.get(t),w="",b="";"sunglasses"==v.category.toLowerCase()?w="SUN":"eyeglasses"==v.category.toLowerCase()&&(w="OPTICS"),1==v.buyable&&(b="Available");var _={};_[v.partNumber]={Sku:v.sku,Category:w,Engraving:"",Status:b,Price:maxFractionDigits(v.price,2),PriceFull:maxFractionDigits(v.price,2),Brand:y.brandName,ModelName:y.name,LensColor:v.lensColor,LensTechnology:v.frameMaterial,FrameColor:v.frameColor,FrameTechnology:v.frameMaterial,Shape:v.frameType,TaxRate:"",Type:"RX",LensUPC:s};try{var k={id:"Prods-Update",Products:_};tealium_data2track.push(k)}catch(e){k={id:"Prods-Update-Tentative",Error_Source:"Product",Error_Code:"UPC Update"};tealium_data2track.push(k)}}$(".lens-selection-column-right").focus();h=!1,m="true"==$("input.c-complete-pair").val();null!=l&&l!=u&&(h=!0,m||$("#insurance-switch-lenses-step-2").addClass("hidden"));changePriceDuringSelection("lens-selection-modal-page1",u,[],f);parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim());changePriceStrikeThrough(parseFloat(u),parseFloat(l),[]),m&&(RiaHelper.isInsuranceOn()?$(".c-price-list-price").each(function(e,t){$(t).prev(".c-price").text($(t).text()),$(t).addClass("hidden")}):$(".c-price-list-price").each(function(e,t){$(t).removeClass("hidden"),$(t).prev(".c-price").text($(t).next(".c-price-current").text())})),affirmUpdatePrice("#lens-selection-area .o-steps__footer")}),n.off("click").on("click",function(e){if(e.preventDefault(),e&&e.target&&e.target.dataset&&e.target.dataset.frameonly&&"true"===e.target.dataset.frameonly)ajaxAddGlassesToCart();else{if(riaInProgress)return!1;if(LC2.pdpUtils.isLensJsonValid(pdpLensInfo)||LC2.pdpUtils.isRXCLensJsonValid(pdpLensInfo)){var t=window.productDetails.getCurrentProductId(),a=window.productDetails.getCurrentSubProductId(),n=window.productDetails.getSubProduct(t,a);if(null==n&&(n=window.productDetails.getSibling(currentProductId,currentSubProductId)),!n.hasLensesServiceLoaded||!n.hasInventoryServiceLoaded)return;window.productDetails.map.get(t);if(savePlacement(),a==GLRXCModule.currentFrameId){var o=initRXC(t,a),i=utag_data.Products[n.partNumber]||{};utag_data.Products={},utag_data.Products[n.partNumber]=i,rxcWidget=RXC.rxcWidget.new(o),$("#rxcApp").removeClass("rxc-closed").addClass("rxc-opened"),rxcWidget.render()}else console.log("No lenses loaded for frame "+a+" yet")}}}),o.on("click",function(){a.dialog("close")}),a.on("click","#lens-infos-cta",function(e){LC2.pdpUtils.mountStep(LC2.currentLenses,"#lens-selection-information","#lens-selection-area-info"),"treatments_step"==!$(this).attr("data-step")?($("#learn_more_step1_div").hide(),$("#learn_more_step2_div").show()):($("#learn_more_step2_div").hide(),$("#learn_more_step1_div").show());var t=$("div[id^=lens-selection-modal-page]:visible");$(t).fadeOut("fast",function(){window.scrollTo(0,0),$("#lens-selection-modal-page-info").fadeIn("fast"),$(".lens-selection-modal a.ui-dialog-titlebar-close").hide(),$("#lens-selection-modal-page-info #closeInfoModal").focus()})}),a.on("click","#lens-infos-cta-oak",function(e){LC2.pdpUtils.mountStep(LC2.currentLenses,"#lens-selection-information-oak","#lens-selection-area-info"),"treatments_step"!=$(this).attr("data-step")&&$("#learn_more_step1_div_oak").show();var t=$("div[id^=lens-selection-modal-page]:visible");$(t).fadeOut("fast",function(){window.scrollTo(0,0),$("#lens-selection-modal-page-info-oak").fadeIn("fast"),$(".lens-selection-modal a.ui-dialog-titlebar-close").hide(),$("#lens-selection-modal-page-info-oak #closeInfoModal_oak").focus()})}),a.on("click","#closeInfoModal",function(e){var t;$("#learn_more_step1_div").is(":visible")?t="#lens-selection-modal-page0":$("#learn_more_step2_div").is(":visible")&&(t="#lens-selection-modal-page1"),$("#lens-selection-modal-page-info").fadeOut("fast",function(){window.scrollTo(0,0),$(t).fadeIn("fast"),$(".lens-selection-modal a.ui-dialog-titlebar-close").show(),$(".lens-selection-column-right").focus()})}),a.on("click","#closeInfoModal_oak",function(e){$("#lens-selection-modal-page-info-oak").fadeOut("fast",function(){window.scrollTo(0,0),$("#lens-selection-modal-page0").fadeIn("fast"),$(".lens-selection-modal a.ui-dialog-titlebar-close").show(),$(".lens-selection-column-right").focus()})}),a.on("click","#add-to-cart",function(e){if(e.preventDefault(),riaInProgress)return!1;LC2.currentLenses.selectedAddon=$(r).filter(":checked").val();var t=LC2.currentLenses,a=($(i).filter(":checked"),$(i).filter(":checked").val()),n=$(".o-tabs__nav__item.is-active").text();""==n&&(n=t.lens_categories[0].name);var o=LC2.pdpUtils.getPdpInfoSubset(t,n,a),s=[];$(r).filter(":checked").each(function(){s.push($(this).val())});var l=LC2.pdpUtils.getAddonsInfoSubset(t,a,s);ajaxAddGlassesToCart(o,l)}),a.on("click",".go-back-cta",function(e){if(e.preventDefault(),riaInProgress)return!1;$.each($("input[name='addons-type']:checked"),function(e,t){$(this).prop("checked",!1)});var t=$("div[id^=lens-selection-modal-page]:visible");"lens-selection-modal-page0"==$(t).attr("id")?(a.hide("slide",{direction:"left"},500).delay(500).dialog("close"),isVMEnabled()&&refreshVmArea(window.productDetails.currentProductId,window.productDetails.getSubProduct(window.productDetails.currentProductId,window.productDetails.currentSubProductId)),$(".l-pdp-det__model-detail a").focus()):($(t).fadeOut("fast",function(){window.scrollTo(0,0);var e=$(i).filter(":checked").val(),t=$(".o-tabs__nav__item.is-active").text(),a=LC2.pdpUtils.getLensePriceFromJson(pdpLensInfo,t,e),n=LC2.pdpUtils.getLenseListPriceFromJson(pdpLensInfo,t,e);if(!RiaHelper.isInsuranceOn()){changePriceDuringSelection("lens-selection-modal-page0",a,[]);var o=null,r=parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim());null!=n?(o=r+parseFloat(n),$(".o-original__price").text("$"+o.toFixed(2))):(o=r+parseFloat(a),$(".o-original__price").text("$"+o.toFixed(2))),$("#lens-selection-modal-page0 .o-steps__footer .o-resume__price__insurance").text("")}$("#lens-selection-modal-page0").show("slide",{direction:"left"},500)}),$(".lens-selection-column-right").focus())}),a.on("click","[data-tabs-nav]",function(e){if(tealium_data2track.push({id:"Click",Tracking_Type:"link",data_element_id:$(this).attr("data-element-id"),data_description:$(this).attr("data-description")}),e.preventDefault(),riaInProgress)return!1;var t=$(this).data("tabs-nav"),a=$(this).closest("[data-tabs]"),n=a.find("[data-tabs-nav]");a.find("[data-tabs-content]").removeClass("is-active"),n.removeClass("is-active"),$('[data-tabs-content="'+t+'"] .o-step-choice input[type="radio"]').filter(":first").prop("checked",!0),$('[data-tabs-content="'+t+'"]').addClass("is-active"),$(this).addClass("is-active");var o=$(i).filter(":checked").val(),r=$(".o-tabs__nav__item.is-active").text();""==r&&(r=pdpLensInfo.lens_categories[0].name);var s=LC2.pdpUtils.getLensePriceFromJson(pdpLensInfo,r,o),l=LC2.pdpUtils.getLenseListPriceFromJson(pdpLensInfo,r,o),d=(parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim()),!1),c="true"==$("input.c-complete-pair").val();null!=l&&l!=s&&(d=!0),!RiaHelper.isInsuranceOn()||"0.00"==s||d&&!c?changePriceDuringSelection("lens-selection-modal-page0",s,[]):($("#lens-selection-modal-page0 .o-steps__footer .o-resume__price__insurance").removeClass("hidden"),$("#confirm-lens-step").attr("style","pointer-events: none"),$("#lens-selection-modal-page0 .o-steps__footer .o-resume__price__insurance").html('<i class="fa fa-spinner fa-spin"></i>'),getRIA(function(e){changePriceDuringSelectionWithDiscount("lens-selection-modal-page0",[],e,c?l:s,[]),$("#confirm-lens-step").removeAttr("style")})),checkButtonTextAndSteps(pdpLensInfo,r,o,d),changePriceStrikeThrough(parseFloat(s),parseFloat(l),[])}),a.on("click",".js-select-label",function(e){if(tealium_data2track.push({id:"Click",Tracking_Type:"link",data_element_id:$(this).parent(".o-step-choice").attr("data-element-id"),data_description:$(this).parent(".o-step-choice").attr("data-description")}),riaInProgress)return!1;$(i).filter(":checked").val();var t=$(".o-tabs__nav__item.is-active").text();""==t&&(t=pdpLensInfo.lens_categories[0].name);var a=$(".lens-selection-column-left"),n=$(this).find(".js-select-icon").attr("class").split(" ")[2],o=$(this).find(".js-select-title").text(),r=($(this).find(".upcLens").val(),$(this).find(".c-price").text().replace("$","").trim(),'<div class="active-choice-effect" style="display:none;">\t                    <div class="active-choice-effect__centerer">\t    \t  \t\t\t\t<i class="c-icon-animation '+("glasses-rp-transitionsgray"==n||"glasses-rp-transitionsbrown"==n?"glasses-rp-transition-hover":n)+'" >'+("glasses-rp-transitionsgray"==n||"glasses-rp-transitionsbrown"==n?'<span class="path1"></span><span class="path2"></span><span class="path3"></span>':"")+'</i>\t                      <div class="js-select-title c-title">'+o+"</div>\t                    </div>\t                  </div>");"No Treatments"!=o&&$("#add-01-fake").removeAttr("checked"),a.append(r),$html=a.find(".active-choice-effect"),$html.fadeIn(150,function(){$(this).delay(1e3).fadeOut(500,function(){$(this).remove()})})}),a.on("change","input[type=radio][name=lens-type]",function(e){if(riaInProgress)return!1;var t=window.productDetails.getCurrentProductId(),a=window.productDetails.getCurrentSubProductId();currentSubProd=window.productDetails.getSubProduct(t,a);var n=currentSubProd.frameColor,o=$(i).filter(":checked").val(),r=$(".o-tabs__nav__item.is-active").text();""==r&&(r=pdpLensInfo.lens_categories[0].name);var s=LC2.pdpUtils.getLenseNameFromJson(pdpLensInfo,r,o),l=LC2.pdpUtils.getLensePriceFromJson(pdpLensInfo,r,o),d=LC2.pdpUtils.getLenseListPriceFromJson(pdpLensInfo,r,o);parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim());""!=n&&(n+=" / "),initialResumeText=n+s,$("#lens-selection-modal-page0 .o-resume__text .c-desc").text(n+s);var c=!1,p="true"==$("input.c-complete-pair").val();null!=d&&d!=l&&(c=!0),!RiaHelper.isInsuranceOn()||c&&!p||"0.00"==l?(changePriceDuringSelection("lens-selection-modal-page0",l,[]),changePriceStrikeThrough(parseFloat(l),parseFloat(d),[])):($("#lens-selection-area .o-steps__footer .o-resume__price__insurance").removeClass("hidden"),$("#confirm-lens-step").attr("style","pointer-events: none"),$("#lens-selection-area .o-steps__footer .o-resume__price__insurance").html('<i class="fa fa-spinner fa-spin"></i>'),getRIA(function(e){changePriceDuringSelectionWithDiscount("lens-selection-area",[],e,p?d:l,[]),$("#confirm-lens-step").removeAttr("style")})),checkButtonTextAndSteps(pdpLensInfo,r,o,c),changePriceStrikeThrough(parseFloat(l),parseFloat(d),[])}),a.on("change","input[type=radio][name=addons-type]",function(e){if(riaInProgress)return!1;var t=$(i).filter(":checked").val(),a=$(".o-tabs__nav__item.is-active").text(),n=[];$(r).filter(":checked").each(function(){n.push($(this).val())});LC2.pdpUtils.getLenseNameFromJson(pdpLensInfo,a,t);var o=LC2.pdpUtils.getLensePriceFromJson(pdpLensInfo,a,t),s=LC2.pdpUtils.getAddonNameFromJson(pdpLensInfo,a,t,n),l=LC2.pdpUtils.getAddonPriceFromJson(pdpLensInfo,a,t,n),d=LC2.pdpUtils.getAddonListPriceFromJson(pdpLensInfo,a,t,n),c=LC2.pdpUtils.getLenseListPriceFromJson(pdpLensInfo,a,t),p=!1,u="true"==$("input.c-complete-pair").val();null!=c&&c!=o&&(p=!0);var h=initialResumeText;void 0!=s&&0!=s.length&&s.forEach(function(e,t){h=h+" / "+e}),$("#lens-selection-modal-page1 .o-resume__text .c-desc").text(h),!RiaHelper.isInsuranceOn()||"0.00"==l||p&&!u?changePriceDuringSelection("lens-selection-modal-page1",o,l):($("#lens-selection-modal-page1 .o-steps__footer .o-resume__price__insurance").removeClass("hidden"),$("#lens-selection-modal-page1 .o-steps__footer .o-resume__price__insurance").html('<i class="fa fa-spinner fa-spin"></i>'),getRIA(function(e){changePriceDuringSelectionWithDiscount("lens-selection-modal-page1",u?d:l,e,u?c:o,u?d:l)})),changePriceStrikeThrough(parseFloat(o),parseFloat(c),d)})}function disablePdpLensSelectionLoading(e,t){var a=window.productDetails.getSubProduct(e,t);void 0!==a&&void 0!==a.hasLensesServiceLoaded&&a.hasLensesServiceLoaded&&void 0!==a.hasInventoryServiceLoaded&&a.hasInventoryServiceLoaded&&($(".select-edit-lens i, .edit-lens-link i, .edit-link i, .js-addLenses-button i").hide(),$(".product-box-detail .edit-lens i").hide())}function changePriceStrikeThrough(e,t,a){var n=parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim()),o=parseFloat(productDetails.getCurrentSubProduct().price.replace("$","").trim());$("input.c-complete-pair").val();if(n!=o&&!isNaN(n)&&null!=n){if(isNaN(parseFloat(t))?isNaN(e)||(n+=parseFloat(e)):n+=parseFloat(t),void 0!=a&&0!=a.length)for(var i=0;i<a.length;i++)n+=parseFloat(a[i].replace("$","").trim());$(".o-original__price").text("$"+n.toFixed(2))}}function changePriceDuringSelection(e,t,a,n){var o=window.productDetails.getCurrentProductId(),i=window.productDetails.getCurrentSubProductId();currentSubProd=window.productDetails.getSubProduct(o,i);var r=currentSubProd.price.replace("$","").trim(),s=parseFloat(r),l=parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim());void 0!=t&&(s=parseFloat(r)+parseFloat(t.replace("$","").trim()),l+=parseFloat(t));if(void 0!=a&&0!=a.length){for(var d=s,c=0;c<a.length;c++)d+=parseFloat(a[c].replace("$","").trim()),l+=parseFloat(a[c].replace("$","").trim());s=d}var p=parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim());productDetails.getCurrentSubProduct().price;p!=r&&$(".o-original__price").text("$"+l.toFixed(2)),void 0!=n&&(n=n.replace("$","").trim()),isNaN(parseFloat(n))&&void 0==n?$("#"+e+" .o-steps__footer .o-resume__price").text("$"+s.toFixed(2)):$("#"+e+" .o-steps__footer .o-resume__price").text("$"+parseFloat(n).toFixed(2)),affirmUpdatePrice("#"+e+" .o-steps__footer")}function changePriceDuringSelectionWithDiscount(e,t,a,n,o){var i=window.productDetails.getCurrentProductId(),r=window.productDetails.getCurrentSubProductId(),s=window.productDetails.getSubProduct(i,r).originalPrice.replace("$","").trim(),l=parseFloat(s-a.priceDiscount);parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim());if(void 0!=a.lensPrice){var d=parseFloat(a.lensPrice.replace("$","").trim())-a.lensPriceDiscount;d,l=l+d}if(void 0!=t&&0!=t.length){for(var c=l,p=0;p<t.length;p++)c+=d=parseFloat(t[p].replace("$","").trim())-a.addonsArray[p].priceAddonsDiscount,d;l=c}var u=parseFloat(productDetails.getCurrentSubProduct().originalPrice.replace("$","").trim()),h=parseFloat(productDetails.getCurrentSubProduct().price.replace("$","").trim());null==u&&""==u||u!=h||$("#"+e+" .o-steps__footer .o-resume__price").text("$"+l.toFixed(2)),currentSubProdOrig=window.productDetails.getSubProduct(i,r);var m=currentSubProdOrig.price.replace("$","").trim(),g=parseFloat(m);void 0!=n&&(g=parseFloat(m)+parseFloat(n.replace("$","").trim()));if(void 0!=o&&0!=o.length){for(c=g,p=0;p<t.length;p++)c+=parseFloat(o[p].replace("$","").trim());g=c}null==u&&""==u||u==h?$("#"+e+" .o-steps__footer .o-resume__price__insurance").text("$"+g.toFixed(2)):"hidden"==$("#insurance-switch-pdp-step-1").css("visibility")?$("#"+e+" .o-resume__price.o-insurance__price.affirm-price").text("$"+g.toFixed(2)):($("#"+e+" .o-resume__price.o-insurance__price.affirm-price").text("$"+l.toFixed(2)),$(".fa-spin").addClass("hidden")),"true"==$("input.c-complete-pair").val()&&(RiaHelper.isInsuranceOn()?$(".c-price-list-price").each(function(e,t){$(t).prev(".c-price").text($(t).text()),$(t).addClass("hidden")}):$(".c-price-list-price").each(function(e,t){$(t).removeClass("hidden"),$(t).prev(".c-price").text($(t).next(".c-price-current").text())})),affirmUpdatePrice("#"+e+" .o-steps__footer")}function showModalStep(e,t){setTimeout(function(){var a=$("div[id^=lens-selection-modal-page]:visible"),n=!1;a.length>0&&-1===$(a).attr("id").indexOf(""+e)&&($(a).fadeOut("fast",function(){window.scrollTo(0,0)}),$("#lens-selection-modal-page"+e).fadeIn("fast",function(){"function"!=typeof t||n||(n=!0,t())}))},100)}function checkButtonTextAndSteps(e,t,a,n){if(void 0!=e){e.brand=window.productDetails.map.get(window.productDetails.currentProductId).brandName,e.category=window.productDetails.map.get(window.productDetails.currentProductId).subProducts.get(window.productDetails.currentSubProductId).category;var o="true"==$("input.c-complete-pair").val();e.lens_categories.forEach(function(e){e.name.toString()==t&&e.lenses.forEach(function(e){if(e.lens_id.toString()==a){var t="Without Prescription"==e.name||"With Prescription"==e.name;0==e.addons.length||"Plano"==e.lens_code||"PlanoSun"==e.lens_code?changeButtonTextAndSteps("Add to bag",1,t):changeButtonTextAndSteps("Next",2,t),"PlanoSun"==e.lens_code||"Plano"==e.lens_code||n&&!o?($(".o-insurance").addClass("invisible"),$("#lens-selection-modal-page0 .o-steps__footer .o-resume__price__insurance").text("")):($(".o-insurance").removeClass("invisible"),t?$(".o-insurance a").attr("data-element-id","X_Pdp_SunLensPanel_Type-ApplyIns"):$(".o-insurance a").attr("data-element-id","X_Pdp_LensPanel_Type-ApplyIns"))}})})}}function changeButtonTextAndSteps(e,t,a){var n;n=a?"SunLensPanel":"LensPanel",$("#confirm-lens-step").text(e),"Next"==e?$("#confirm-lens-step").attr("data-element-id","X_Pdp_"+n+"_Type-Next"):"Add to bag"==e?$("#confirm-lens-step").attr("data-element-id","X_Pdp_"+n+"_AddCart"):$("#confirm-lens-step").removeAttr("data-element-id");var o=$(".c-step").text();if(void 0!=o&&""!=o){var i=o.split("of")[0]+" of "+t+" ";$(".c-step").text(i)}}function openSignInDirectly(){prepareModalOpen(),openLoginCreate()}function openFavoritesInDirectly(){prepareModalOpen(),openModalFavorites()}function prepareModalOpen(){$(".modals-container").show(),$("#header-sign-in-menu-modal").css({display:"block","background-color":"rgba(0, 0, 0, 0.4)"}),$("#header-sign-in-menu-modal .header-sign-in-menu-modal-column-right").css("display","block"),$("#header-sign-in-menu-modal").animate({left:"0"},600,function(){$("html").addClass("noScroll-menu")})}function closeAllModals(){hideModal($(".login-registration-in-modal-container.column-right-login-create-modal")),hideModal($(".reset-password-container.column-right-reset-password-modal")),hideModal($("#update-password-modal")),hideModal($(".modal-favorites-container")),hideModal($(".modal-my-account-container")),hideModal($(".modal-address-container")),hideModal($(".modal-see-detail-container")),hideModal($(".modal-support-container")),hideModal($(".modal-download-container")),hideModal($(".modal-chat-with-us-container")),hideModal($(".modal-contact-us")),hideModal($(".modal-special-offers-container")),$(".modals-container").hide(),$("#header-sign-in-menu-modal .header-sign-in-menu-modal-column-right").css("display","none"),$("#footer_wrapper").removeClass("footer-on-menu"),$("html").removeClass("noScroll-menu")}function hideModal(e){e.is(":visible")&&e.animate({left:"100%"},600,function(){})}function closeModalFavorites(){var e=$("#header-sign-in-menu-modal .close-modal-action"),t=$(e).parent().parent().parent();return t.css("display","none"),$(t).fadeOut("fast",function(){$(".header-sign-in-menu-modal-column-left .column-left-image-container div").removeClass("darker-overlay"),$("html").removeClass("noScroll-menu")}),!1}function closeModalLoginRegistration(){goBackOnLogin();var e=$("#header-sign-in-menu-modal .close-modal-action"),t=$(e).parent().parent().parent();return $(".header-logo").removeClass("white-logo"),$("#footer_wrapper").removeClass("footer-on-menu"),t.css("display","none"),$(t).fadeOut("fast",function(){$(".header-sign-in-menu-modal-column-left .column-left-image-container div").removeClass("darker-overlay"),$("html").removeClass("noScroll-menu")}),!1}function openMyAccountDirectly(){prepareModalOpen(),openMyAccount()}function hideCreateAccountHandler(){isUserLogged=constants.ajaxParams.loggedIn,isUserLogged&&$(".thank-you-footer").hide()}function openCartDirectly(e){showCartCheckoutModal(e)}function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,a,n){e[a]=n});return e}function hideIfLogged(){constants.ajaxParams.loggedIn&&$(".js-hideIfLogged").each(function(){$(this).hide()})}function getUrlParam(e,t){var a=t;return window.location.href.indexOf(e)>-1&&(a=getUrlVars()[e]),a}function escapeRegExp(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}"function"!=typeof initVM&&(window.initVM=function(e){e()}),$(document).ready(function(){collectionPage()&&!landingPdp()||initVM(initPLP),$(window).bind("popstate",function(e){e.originalEvent.state;if($("#lens-selection-modal-page0").is(":visible"))return $("#lens-selection-modal-page0 .go-back-cta").click(),!1;if($("#lens-selection-modal-page1").is(":visible"))return $("#lens-selection-modal-page1 .go-back-cta").click(),!1;if($("#lens-selection-modal-page2").is(":visible"))return $("#lens-selection-modal-page2 .go-back-cta").click(),!1;if($(".full-images-container").is(":visible"))return hideImagesContainer(),!1;if(collectionPage()&&!$("#rxcApp").hasClass("rxc-closed")&&!$("#rxcApp").hasClass("rxc-opened")&&$(".back-to-collection").length){var t=$(".back-to-collection").attr("href");return void 0!==t&&""!=t&&(window.location.href=t),!1}})}),$.fn.isInViewport=function(){if(0==$(this).length)return!1;var e=$(this).offset().top,t=e+$(this).outerHeight(),a=$(window).scrollTop(),n=a+$(window).height();return t>a&&e<n};var checkAvailableAgentAfterCheckAjax=0;function showLogonMenuModal(){if(hideSaveFavorites(),$("#header-register-modal").css("display","none").attr("aria-hidden","true"),$(".reset-password-container").css("display","none"),$("#header-reset-password-done-modal").css("display","none").attr("aria-hidden","true"),$("#header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true"),$("#header-sign-in-modal").css("display","none").attr("aria-hidden","true"),$("#header-sign-in-menu-modal").toggle().fadeIn(1e3,function(){$("html").addClass("noScroll-menu")}),lineHoverMenu(),$(".notification-count").removeClass("active"),window.scrollTo(0,0),$("#headerEmailAddress").focus(),clearResetPwdErrorMessages(),clearResetForgotPWDErrors(),clearRegErrorMessages(),clearNesweletterErrorMessage(),void 0!==$.getUrlVar("resetPassword")&&"true"==$.getUrlVar("resetPassword")){$("#header-set-a-new-password-modal").css("display","block").attr("aria-hidden","false");var e="";void 0!==$.getUrlVar("emailId")&&(e=$.getUrlVar("emailId"),document.getElementById("WC_PasswordUpdateForm_FormInput_EmailAddress").value=e)}$("#header-sign-in-menu-modal .back-tab-deny").focus();try{var t={id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"Common",Page_Section2:"Menu"};tealium_data2track.push(t)}catch(e){t={id:"MenuPage-Tentative",Error_Source:"Menu",Error_Code:"Menu"};tealium_data2track.push(t)}}function showContactModal(){hideSaveFavorites(),$("#footer_wrapper").addClass("footer-on-menu"),$("#header-register-modal").css("display","none").attr("aria-hidden","true"),$(".reset-password-container").css("display","none"),$("#header-reset-password-done-modal").css("display","none").attr("aria-hidden","true"),$("#header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true"),$("#header-sign-in-modal").css("display","none").attr("aria-hidden","true"),$("#modal-contact-us").show(),$("#header-sign-in-menu-modal").fadeIn(1e3,function(){$("html").addClass("noScroll-menu"),$("#modal-contact-us").addClass("openedFromFooter")}),window.scrollTo(0,0)}function hideModalDirectlyOpened(){$(".header-logo").removeClass("white-logo"),$("#footer_wrapper").removeClass("footer-on-menu"),$("#header-sign-in-menu-modal").toggle().fadeOut(1e3,function(){$(".header-sign-in-menu-modal-column-left .column-left-image-container div").removeClass("darker-overlay"),$("html").removeClass("noScroll-menu")})}function showResetUpdatePasswordModal(){$("#footer_wrapper").addClass("footer-on-menu"),$("#header-register-modal").css("display","none").attr("aria-hidden","true"),$(".reset-password-container").css("display","none"),$("#header-reset-password-done-modal").css("display","none").attr("aria-hidden","true"),$("#header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true"),$("#header-sign-in-modal").css("display","none").attr("aria-hidden","true"),$(".update-password-container").show(),$("#header-sign-in-menu-modal").toggle().fadeIn(1e3,function(){$("html").addClass("noScroll-menu"),$(".update-password-container").addClass("openedDirectly")}),window.scrollTo(0,0)}function showHidePassword(){var e=document.getElementById("logonPassword_landing");"password"===e.type?($("#hidden-password").hide(),$("#visible-password").show(),e.type="text"):($("#visible-password").hide(),$("#hidden-password").show(),e.type="password")}function lineHoverMenu(){var e=$("ul.nav-list").length>0?$("ul.nav-list").offset().top:100;$(".line-menu").css("min-height",e+"px")}function goBackOnLogin(){var e=$(".reset-password-container.column-right-reset-password-modal");$(".login-registration-in-modal-container.column-right-login-create-modal").show(),$(".login-registration-in-modal-container.column-right-login-create-modal .arrow-left-container").show(),e.show().animate({left:"100%"},600,function(){$(".reset-password-container.column-right-reset-password-modal .arrow-left-container").hide(),$(".reset-password-container.column-right-reset-password-modal").hide()}),$(".login-registration-in-modal-container").focus()}function openLoginCreate(){var e=$(".login-registration-in-modal-container.column-right-login-create-modal");if(0!=e.length){e.show().animate({left:"0"},600,function(){$(".header-sign-in-menu-modal-column-left .column-left-image-container div").addClass("darker-overlay")}),$(".login-registration-in-modal-container").focus();try{var t={id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"AccountSection",Page_Section2:"LoginRegForm"};tealium_data2track.push(t)}catch(e){t={id:"AccountSection-Tentative",Error_Source:"LoginRegForm",Error_Code:"LoginRegForm"};tealium_data2track.push(t)}monetateLogin(),navigator.userAgent.indexOf("Firefox")>0&&($("#logonId_landing").focus(),$("#logonPassword_landing").focus(),$("#emailAddress").focus(),$("#logonPasswordLanding").focus())}else window.setTimeout(openLoginCreate,100)}function trackOrder(e){e.preventDefault();var t=$("#track-order-form").serializeArray();$.ajax({url:getAbsoluteURL()+"AjaxRetrieveGuestsOrdersCmd",type:"post",data:t}).done(function(e){var t=JSON.parse(e);if("ok"==t.status){var a={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,orderId:t.orderId};$.ajax({url:getAbsoluteURL()+"AjaxOrderDetail",type:"post",data:a}).done(function(e){$(".modal-track-order-container").html(e)}).fail(function(){$(".modal-track-order-container").html(getAjaxErrorMessage())})}else $("#error-order-not-found").show()}).fail(function(){})}function showResetPasswordModal(){$(".reset-password-container.column-right-reset-password-modal").show().animate({left:"0"},600,function(){$(".login-registration-in-modal-container.column-right-login-create-modal").hide(),$(".login-registration-in-modal-container.column-right-login-create-modal .arrow-left-container").hide(),$(".reset-password-container.column-right-reset-password-modal .arrow-left-container").show()})}function goBackOnMenu(){$(".header-sign-in-menu-newsletter-container").show().css("left","0"),$(".login-registration-in-modal-container.column-right-login-create-modal").animate({left:"100%"},600,function(){$(".header-sign-in-menu-modal-column-left .column-left-image-container div").removeClass("darker-overlay")}),$(".header-sign-in-menu-newsletter-container").focus()}function clearNesweletterErrorMessage(){$(".email-sign-up-form-container .required").html("")}function changeDeliveryMethod(){if($(".standard-delivery-container").is(":visible")){$(".standard-delivery-container").hide(),$(".express-delivery-container").show(),$(".delivery-action-link a").html("Remove Express Delivery"),$(".delivery-price-standard").hide(),$(".delivery-price-express").show();var e=$("#expressDeliveryShopModeId").val(),t=$("#customerOrderId").val();CheckoutHelperJS.updateShipMode(e,t)}else{$(".standard-delivery-container").show(),$(".express-delivery-container").hide(),$(".delivery-action-link a").html("Add Express Delivery"),$(".delivery-price-standard").show(),$(".delivery-price-express").hide();e=$("#standardDeliveryShopModeId").val(),t=$("#customerOrderId").val();CheckoutHelperJS.updateShipMode(e,t)}}function changePrescriptionMethod(){if($(".standard-delivery-container").is(":visible")){$(".standard-delivery-container").hide(),$(".express-delivery-container").show(),$(".delivery-action-link a").html("Remove Express Delivery"),$(".delivery-price-standard").hide(),$(".delivery-price-express").show();var e=$("#expressDeliveryShopModeId").val(),t=$("#customerOrderId").val();CheckoutHelperJS.updateShipMode(e,t)}else{$(".standard-delivery-container").show(),$(".express-delivery-container").hide(),$(".delivery-action-link a").html("Add Express Delivery"),$(".delivery-price-standard").show(),$(".delivery-price-express").hide();e=$("#standardDeliveryShopModeId").val(),t=$("#customerOrderId").val();CheckoutHelperJS.updateShipMode(e,t)}}function showBoxPrescription(e){openRXPanel(e)}function removePrescription(e,t){var a={orderItem:t};submitRequest()&&(cursor_wait(),$.ajax({type:"POST",url:getAbsoluteURL()+"DeletePrescriptionFromOrderItemCmd",data:a,success:function(e){e=e.replace("/*","").replace("*/",""),null!=JSON.parse(e).OK_MSG&&($(".box-prescription-show.lens-id-"+t).find(".add-or-change-click.change-prescription-click").hide(),$(".box-prescription-show.lens-id-"+t).find(".add-or-change-click.complete-prescription-click").hide(),$(".box-prescription-show.lens-id-"+t).find(".add-or-change-click.change-prescription-data-click").hide(),$(".box-prescription-show.lens-id-"+t).find(".add-or-change-click.add-prescription-click").show(),console.log("Prescription for item "+t+" removed with success"),rxPanelResetUploadImgView&&"function"==typeof rxPanelResetUploadImgView&&rxPanelResetUploadImgView(),void 0!==window.getPrescriptionByOrderIdData&&null!=window.getPrescriptionByOrderIdData&&void 0!==window.getPrescriptionByOrderIdData[t]&&null!=window.getPrescriptionByOrderIdData[t]&&delete window.getPrescriptionByOrderIdData[t]),cursor_clear()},error:function(e,t,a){cursor_clear()}}))}function showHideAddress2(){var e=$(this).parent().parent().parent();e.hasClass("showAddress2")?(e.removeClass("showAddress2"),e.find(".input-address2-order").hide(),e.find(".show-hide-address2 span").html("+")):(e.addClass("showAddress2"),e.find(".input-address2-order").show(),e.find(".show-hide-address2 span").html("-"))}function modalSearchClose(){$(".header-search-icon").removeClass("blue"),$("html").removeClass("noScroll-menu"),$(".subnav-search").hide(),document.getElementById("SimpleSearchForm_SearchTerm").value="",autoSuggestHover||showAutoSuggest(!1),monetateTrackCatalogItem()}$(document).ready(function(){initOpenAutomaticModal(),document.body.addEventListener("mousedown",function(){document.body.classList.add("using-mouse")}),document.body.addEventListener("wheel",function(){document.body.classList.add("using-mouse")}),document.body.addEventListener("keydown",function(e){9==e.keyCode&&document.body.classList.remove("using-mouse")}),$(document).on("change","input[name=addons-type]",function(){$("input[name=addons-type]").length;var e=0;$("input[name=addons-type]").each(function(t,a){$(a).is(":checked")&&e++}),e>0&&$("input[name=addons-type-fake]").removeAttr("checked"),0==e&&$("input[name=addons-type-fake]").attr("checked",!0)}),$(document).on("change","input[name=addons-type-fake]",function(){$("input[name=addons-type]:checked").click()}),$("body").hasClass("catalog-page")&&categoryDisplayJS.applyFilterLoadMore(),$(document).on("keydown",function(e){if(9==e.keyCode&&$("#use-insurance-modal").is(":visible")&&0===$("#use-insurance-modal").find(":focus").length&&$("#use-insurance-modal").focus(),9==e.keyCode&&$("#wrapper-sc").is(":visible")&&$(".shopping-bag-vision-insurance").focus(),9==e.keyCode&&$(document.activeElement).hasClass("jump-to-parent")&&$(document.activeElement).parent().is(":focusable")&&$(document.activeElement).parent().focus(),9==e.keyCode&&event.shiftKey&&$(document.activeElement).hasClass("back-tab-deny")&&e.preventDefault(),9==e.keyCode&&$(document.activeElement).hasClass("jump-to-top")&&$("#header_wrapper .header-logo a").get(0).focus(),32==e.keyCode&&(($(e.target).hasClass("sameAsShipping")||$(e.target).hasClass("newsletter"))&&$(e.target).find("input").click(),$(e.target).hasClass("sendEmail-custom-label")&&$(e.target).siblings("input").click()),13==e.keyCode){if("guestShopperContinue"==$(e.target).attr("id")&&$("#guestShopperContinue:focus").click(),$(e.target).hasClass("menu-sign-in-modal-link"))return showLogonMenuModal(),!1;if(($(e.target).hasClass("payment-second-radio")||$(e.target).hasClass("payment-first-radio"))&&$(e.target).find("input").click(),$(e.target).hasClass("see-detail-checkout")&&$(e.target).click(),($(e.target).hasClass("sameAsShipping")||$(e.target).hasClass("newsletter"))&&$(e.target).find("input").click(),"confirm-lens-step"==$(e.target).attr("id")&&($(e.target).click(),$(".shopping-bag-middle").focus()),$(e.target).hasClass("nav-item")&&($(e.target).find(".nav-link").click(),$($(".dropdown-menu.show .filter-card-wrapper")[0]).focus()),$(e.target).hasClass("o-tabs__nav__item")&&$(e.target).click(),"special-offers-menu"==$(e.target).attr("id")&&$(".modal-special-offers-container").focus(),"support-menu"==$(e.target).attr("id")&&$(".modal-support-container").focus(),"confirm-lens-step"==$(e.target).attr("id")&&$("#lens-selection-area-2 .o-tabs__content").focus(),$(e.target).hasClass("shopping-bag-vision-insurance")&&($(e.target).find("#insurance-shopping-bag-checkbox").click(),$("#use-insurance-modal").focus()),$(e.target).hasClass("load-more")&&$(e.target).parent().click(),$(e.target).hasClass("id-me-top-container")&&$(e.target).click(),$(e.target).hasClass("iconglasses-x")&&$(".header-sign-in-menu-newsletter-container").focus(),$(e.target).hasClass("shipping-go-back")&&$(e.target).click(),"closeInfoModal"==$(e.target).attr("id")&&$(e.target).click(),$(e.target).hasClass("close-modal-action")&&($(e.target).find(".iconglasses-x").length&&(e.preventDefault(),$(e.target).find(".iconglasses-x").click()),0==$(e.target).parent(".insurance-x").length&&$("#header_wrapper .header-logo a").get(0).focus()),$(e.target).parents(".back-button-container").length>0&&hidePaymentPage(),e.target.getAttribute("onClick")&&($(e.target).click(),$(e.target).hasClass("item-container")),$(e.target).hasClass("o-step-choice")&&$(".o-step-choice:focus .js-select-label").click(),"processToPayment"==$(e.target).attr("id")&&$(e.target).parents("form").submit(),$(e.target).find(" > div").hasClass("header-cart-icon"))return 0!=parseInt($("#cartQuantity").text())&&showCartCheckoutModal(),!1;"promo-code-container"==$(e.target).attr("id")&&("block"==$("#promo-code-container:focus #promo-code-shopping-bag-after").css("display")?$("#promo-code-container:focus #promo-code-shopping-bag-after").click():"block"==$("#promo-code-container:focus .promo-code-shopping-bag-before-top").css("display")&&$("#promo-code-container:focus .promo-code-shopping-bag-before-top").click()),"id-me-container"==$(e.target).attr("id")&&$("#id-me-container:focus .id-me-top-container").click(),$(e.target).hasClass("sign-in-order")&&$(e.target).click(),$(e.target).hasClass("dropdown-toggle")&&$(e.target).dropdown("toggle"),$(e.target).hasClass("arrow-left-container")&&$(e.target).click(),$(e.target).hasClass("wcag-trigger-click")&&$(e.target).click(),$(e.target).hasClass("wcag-label-trigger-click")&&$(e.target).find("label").get(0).click(),$(e.target).hasClass("wcag-anchor-trigger-click")&&$(e.target).find("a").get(0).click()}});var e=window.innerHeight-70;$(".menu-sign-in-modal-link").click(function(){return showLogonMenuModal(),!1}),$("body").on("focus",".input-x-container input",function(){$(this).prev().addClass("label-on-top"),$(this).parent().addClass("label-height"),$(this).next().css("top","13px")}),$("body").on("blur",".input-x-container input",function(){""===$(this).val()&&($(this).prev().removeClass("label-on-top"),$(this).parent().removeClass("label-height"),$(this).next().css("top","0"))}),$(".nav-list li").hover(function(){var e=$(".nav-list li").height()+$(this).offset().top;$(".line-menu").css("height",e+"px")},function(){$(".line-menu").css("height","auto")}),$(".email-sign-up-form, .email-signup").attr("autocomplete","off"),$("body").on("click",".newsletter-container",function(e){!function(){if($(".mailing-box-form").is(":visible")&&!$(".email-sign-up-form-left input").is(":focus")){$(".mailing-box-form").hide(),$(".mailing-box-message .mailing-box-message-sign-in").show(),$(".mailing-box-message-left").addClass("flex_70");try{var e={id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"Common",Page_Section2:"Menu"};tealium_data2track.push(e),$(".newsletter-container").removeClass("analytics-newsletters")}catch(t){var e={id:"MenuPage-Tentative",Error_Source:"Menu",Error_Code:"Menu"};tealium_data2track.push(e)}}else if($(".mailing-box-form").show(),$(".mailing-box-message .mailing-box-message-sign-in").hide(),$(".mailing-box-message-left").removeClass("flex_70"),$(".header-sign-in-menu-newsletter-container").animate({scrollTop:$("#newsletter-box").offset().top},1e3),$("#email-sign-up-form input[name=email]").focus(),!$(".newsletter-container").hasClass("analytics-newsletters"))try{var e={id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"Common",Page_Section2:"NewsletterForm"};tealium_data2track.push(e),$(".newsletter-container").addClass("analytics-newsletters")}catch(t){var e={id:"NewsletterForm-Tentative",Error_Source:"NewsletterForm",Error_Code:"NewsletterForm"};tealium_data2track.push(e)}}()}),-1!=$("#create-wrapper").length&&($("#create-sign-in-wrapper").css("height",e+"px"),$("#create-sign-in-wrapper .sign-in-registration-container .column-left-image").css("height",e+"px")),$("body").on("click",".see-detail-checkout",function(){var e=$(this).closest(".product-box"),t=!e.hasClass("showDetail");return $(".product-box-detail").removeClass("showDetail"),$(".product-box-detail").slideUp("slow"),$(".see-detail-checkout").text("view details"),t?(e.addClass("showDetail"),e.find(".product-box-detail").slideDown("slow"),e.find(".see-detail-checkout").text("view less")):e.removeClass("showDetail"),loadLensFromCart($(this).data("product-id"),$(this).data("item-id")),!1}),$("body").on("click",".see-detail-order",function(e){var t=$(e.target).parent().parent();return t.hasClass("showDetail")?(t.removeClass("showDetail"),t.find(".product-box-detail").slideToggle("slow"),t.find(".see-detail-order").text("view details")):(t.addClass("showDetail"),t.find(".product-box-detail").slideToggle("slow"),t.find(".see-detail-order").text("view less")),!1}),$("#collaboration").click(function(){$("#brands").removeClass("brand-colaboration-menu-li-select"),$("#collaboration").addClass("brand-colaboration-menu-li-select"),$(".collaborations-list").show(),$(".brands-list").hide()}),$("#brands").click(function(){$("#collaboration").removeClass("brand-colaboration-menu-li-select"),$("#brands").addClass("brand-colaboration-menu-li-select"),$(".collaborations-list").hide(),$(".brands-list").show()}),$("body").on("click",".footer-page, .newsletter-disclaimer-container .newsletter-disclaimer-label a",function(){var e=$(this).data("related-modal");$("#"+e).animate({top:"0"},600)}),$("body").on("click",".newsletter-disclaimer-container .newsletter-disclaimer-label a",function(){$("#privacy-policy-modal").animate({top:"0"},600)}),$("body").on("click",".footer-modal-close-action",function(){$(this).parent().parent().animate({top:"100%"},600)}),$("body").on("click","#account-info",function(){$("#account-info").addClass("modal-my-account-li-active"),$(".modal-my-account-info").show(),$("#order-history").removeClass("modal-my-account-li-active"),$(".modal-my-account-order-history").hide()}),$("body").on("click","#order-history",function(){$("#account-info").removeClass("modal-my-account-li-active"),$(".modal-my-account-info").hide(),$(".order-history-table-container").height()>380?$(".order-history-table").css("border-bottom","solid 0.5px #979797"):$(".order-history-table").css("border-bottom","none"),$("#order-history").addClass("modal-my-account-li-active"),$(".modal-my-account-order-history").show();new PerfectScrollbar("table.order-history-table tbody",{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],suppressScrollX:!0,wheelPropagation:!0,swipeEasing:!0})}),$("#address-form").validate({rules:{firstName:{lettersonly:!0,required:!0},lastName:{required:!0,lettersonly:!0},address1:{required:!0},zipCode:{required:!0,number:!0,maxlength:5,minlength:5,lettersonly:!1},city:{required:!0,lettersonly:!0},state:{required:!0,lettersonly:!0},phone1:{required:!0,number:!0}},messages:{firstName:{required:"The first name field cannot be empty.",lettersonly:"The provided first name is invalid."},lastName:{required:"The last name field cannot be empty.",lettersonly:"The provided last name is invalid."},address1:{required:"The address field cannot be empty."},zipCode:{required:"The zip code field cannot be empty.",number:"The provided zip code is invalid.",maxlength:"The provided zip code is invalid.",minlength:"The provided zip code is invalid.",lettersonly:"The provided zip code is invalid."},city:{required:"The city field cannot be empty.",lettersonly:"The provided city is invalid."},state:{required:"The state field cannot be empty.",lettersonly:"The provided state is invalid."},phone1:{required:"The phone number field cannot be empty.",number:"The provided phone number is invalid."}},errorPlacement:function(e,t){$(t).parent().next(".line").addClass("error-red"),$(t).parent().next(".line").after(e)},unhighlight:function(e,t){$(t).next("span").hide(),$(t).parent().next(".line").removeClass("error-red")}}),$("#my-account-form").validate({ignore:":not(:visible)",rules:{logonPasswordOld:{required:!0},logonPassword:{required:!0,minlength:6,atLeastOneLetterAndOneDigit:!0},birthday:{required:!0,birth:!0}},messages:{logonPasswordOld:{required:"The old password field cannot be empty."},logonPassword:{required:"The new password field cannot be empty.",minlength:"The provided password is invalid.",atLeastOneLetterAndOneDigit:"The provided password is invalid."},birthday:{required:"The birthday field cannot be empty."}},errorPlacement:function(e,t){$(t).next("span").show(),$(t).parent().next(".line").addClass("error-red"),$(t).parent().next(".line").after(e)},unhighlight:function(e,t){$(e).next("span").hide(),$(e).parent().next(".line").removeClass("error-red")}}),$("body").on("click","#address-reset-button",function(e){e.preventDefault(),$("#address-form input#firstname").val(""),$("#address-form input#lastname").val(""),$("#address-form input#address").val(""),$("#address-form input#address2").val(""),$("#address-form input#city").val(""),$("#myaccmodal_state_selectbox").selectBox("value",""),$("#myaccmodal_state_selectbox").change(),$("#address-form input#zipcode").val(""),$("#address-form input#phone").val(""),$("#address-form input#firstname").blur(),$("#address-form input#lastname").blur(),$("#address-form input#address").blur(),$("#address-form input#address2").blur(),$("#address-form input#city").blur(),$("#address-form input#state").blur(),$("#address-form input#zipcode").blur(),$("#address-form input#phone").blur()}),$("body").on("click","#address-save-button",function(){if($("#address-form").valid()){var e=$(this).text();$(this).html('<i class="fa fa-spinner fa-spin"></i> '+e),$(this).disabled=!0,firstname=document.getElementById("firstname").value,lastname=document.getElementById("lastname").value,address=document.getElementById("address").value,city=document.getElementById("city").value,state=document.getElementById("state").value,zipcode=document.getElementById("zipcode").value,phone=document.getElementById("phone").value,1==$("#addressDefault").prop("checked")?$("#setPrimary").val("1"):$("#setPrimary").val("0"),$("#address-form").submit(function(t){t.preventDefault();var a=getAbsoluteURL()+"gl-us?myAccount=true",n=$(this).attr("action"),o=$(this).attr("method");if(""!=$("#address-id").val())var i={storeId:$("#store-id").val(),langId:$("#lang-id").val(),catalogId:$("#catalog-id").val(),forUser:$("#for-user").val(),forUserId:$("#for-user-id").val(),addressId:$("#address-id").val(),primary:$("#setPrimary").val(),URL:a,firstName:$("#firstname").val(),lastName:$("#lastname").val(),address1:$("#address").val(),city:$("#city").val(),zipCode:$("#zipcode").val(),state:$("#state").val(),phone1:$("#phone").val()};else i={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId,forUserId:constants.ajaxParams.userId,nickName:parseInt(1e12*Math.random()),primary:$("#setPrimary").val(),URL:a,firstName:$("#firstname").val(),lastName:$("#lastname").val(),address1:$("#address").val(),city:$("#city").val(),zipCode:$("#zipcode").val(),state:$("#state").val(),phone1:$("#phone").val()};$.ajax({url:n,type:o,data:i}).done(function(e){window.location.href=a}).fail(function(){$("#change-password-error-message").html("Update failed - please try again later."),$(this).html(e),$(this).disabled=!1})})}else $("#address-form").validate()}),$("body").on("click",".modal-address-container .dropdown-menu li",function(){if($(this).parents(".dropdown").find(".dropdown-toggle").html($(this).text()+' <span class="fa fa-arrow-down"></span>'),""==$(this).data("value"))$(".dropdown-toggle").attr("data-value",""),$("#address-form input#firstname").val(""),$("#address-form input#lastname").val(""),$("#address-form input#address").val(""),$("#address-form input#address2").val(""),$("#address-form input#city").val(""),$("#myaccmodal_state_selectbox").selectBox("value",""),$("#myaccmodal_state_selectbox").change(),$("#address-form input#zipcode").val(""),$("#address-form input#phone").val(""),document.getElementById("address-id").value="",$("#remove-address").hide();else{$(".dropdown-toggle").attr("data-value",$(this).data("value"));var e=$(this).data("address-firstname"),t=$(this).data("address-lastname"),a=$(this).data("address"),n=$(this).data("address-city"),o=$(this).data("address-zipcode"),i=$(this).data("address-state"),r=$(this).data("address-phone"),s=$(this).data("value");document.getElementById("firstname").value=e,document.getElementById("lastname").value=t,document.getElementById("address").value=a,document.getElementById("city").value=n,$("#myaccmodal_state_selectbox").selectBox("value",i),$("#myaccmodal_state_selectbox").change(),document.getElementById("zipcode").value=o,document.getElementById("phone").value=r,document.getElementById("address-id").value=s,$("#remove-address").show(),document.getElementById("lastname").focus(),document.getElementById("address").focus(),document.getElementById("city").focus(),document.getElementById("state").focus(),document.getElementById("zipcode").focus(),document.getElementById("phone").focus(),document.getElementById("firstname").focus(),document.getElementById("address-id").focus()}$(".address-dropdown-select").dropdown("toggle")}),$(document).on("click",".checkout-step-2 #select-address .dropdown-menu li",function(){if($(this).parents(".dropdown").find(".dropdown-toggle").html($(this).text()+' <span class="fa fa-arrow-down"></span>'),$(".checkout-step-2 #editDefaultAddress .dropdown-menu li").removeClass("selected-address"),""==$(this).data("value"))$(".dropdown-toggle").attr("data-value",""),$("#ShippingAnotherAddress").find('input[name*="firstName"]').val(""),$("#ShippingAnotherAddress").find('input[name*="lastName"]').val(""),$("#ShippingAnotherAddress").find('input[name*="BirthDate"]').val(""),$("#ShippingAnotherAddress").find('input[name*="address1"]').val(""),$("#ShippingAnotherAddress").find('input[name*="city"]').val(""),$("#ShippingAnotherAddress").find("#select-state .dropdown-toggle").html('State <span class="fa fa-arrow-down"></span>'),$("#ShippingAnotherAddress").find("select.select-state-checkout").selectBox("value",""),$("#ShippingAnotherAddress").find("select.select-state-checkout").change(),$("#ShippingAnotherAddress").find('input[name*="zipCode"]').val(""),$("#ShippingAnotherAddress").find('input[name*="phone1"]').val(""),$("#ShippingAnotherAddress").find('input[name*="email1"]').val(""),$("#ShippingAnotherAddress").find('input[name*="addressId"]').val("");else{$(".dropdown-toggle").attr("data-value",$(this).data("value")),$(this).addClass("selected-address");var e=$(this).data("address-firstname"),t=$(this).data("address-lastname"),a=$(this).data("address"),n=$(this).data("address-city"),o=$(this).data("address-zipcode"),i=$(this).data("address-state"),r=$(this).data("address-phone"),s=$(this).data("address-email"),l=$(this).data("value");$("#ShippingAnotherAddress").find('input[name*="firstName"]').val(e),$("#ShippingAnotherAddress").find('input[name*="lastName"]').val(t),$("#ShippingAnotherAddress").find('input[name*="address1"]').val(a),$("#ShippingAnotherAddress").find('input[name*="city"]').val(n),$("#ShippingAnotherAddress").find("select.select-state-checkout").selectBox("value",i),$("#ShippingAnotherAddress").find("select.select-state-checkout").change(),$("#ShippingAnotherAddress").find('input[name*="zipCode"]').val(o),$("#ShippingAnotherAddress").find('input[name*="phone1"]').val(r),$("#ShippingAnotherAddress").find('input[name*="email1"]').val(s),$("#ShippingAnotherAddress").find('input[name*="addressId"]').val(l),$("#ShippingAnotherAddress").find('input[name*="lastName"]').focus(),$("#ShippingAnotherAddress").find('input[name*="address1"]').focus(),$("#ShippingAnotherAddress").find('input[name*="city"]').focus(),$("#ShippingAnotherAddress").find('input[name*="state"]').focus(),$("#ShippingAnotherAddress").find('input[name*="zipCode"]').focus(),$("#ShippingAnotherAddress").find('input[name*="phone1"]').focus(),$("#ShippingAnotherAddress").find('input[name*="email1"]').focus(),$("#ShippingAnotherAddress").find('input[name*="addressId"]').focus(),$("#ShippingAnotherAddress").find('input[name*="firstName"]').focus()}$(".address-dropdown-select").dropdown("toggle")}),$(document).on("click","#ShippingAnotherAddress .select_container",function(){$("#ShippingAnotherAddress .selectBox-label").removeAttr("style")}),$(document).on("click","#billingCreateEditArea1 .select_container",function(){$("#billingCreateEditArea1 .selectBox-label").removeAttr("style")}),"showMyAccount"===location.hash.substr(1)&&openMyAccountDirectly(),$("body").on("click",".modal-address-container #remove-address",function(){if(""!=$(".dropdown-toggle").data("value")){var e=window.location.href,t="myAccount=true";t=-1!=e.indexOf("?")?"&"+t:"?"+t;var a=e.split("#")[0]+t,n=getAbsoluteURL()+"AddressDelete";if(""!=$("#address-id").val()){var o={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId,addressId:$("#address-id").val(),URL:a};$.ajax({url:n,type:"post",data:o}).done(function(e){var t=getAbsoluteURL()+"gl-us?myAccount=true";window.location.href=t})}else event.preventDefault()}})});var placeSearch,autocompleteShipping,autocompleteBilling,service,$container=$(".spinner");function sitepageshow(e){var t=e.attr("href"),a=e.attr("title"),n=e.data("container"),o=$(n);console.log("url ",t),console.log("title ",a),console.log("page ",o);var i=animateSettings(e);o.animate(i,1e3,function(){pageGoToLink(t)})}function pageGoToLink(e){window.location.href=e}function sitepageload(e){var t=e.attr("href"),a=(e.attr("title"),e.data("container"));console.log(a),console.log("sitepageload -------------------------",$(a)),$("body").load(t,function(e,t,a){console.log(e),console.log(t),console.log(a)})}function animateSettings(e){return"left"==e.data("direction")?{left:"0"}:{right:"0"}}function openModalFavorites(){if($elemfav=$(".modal-favorites-container"),0!=$elemfav.length){$elemfav.show().focus().animate({left:"0"},600,function(){$(".modal-favorites-box-grid-container .ps__rail-x .ps__thumb-x").css("width","760px")});try{var e={id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"Common",Page_Section2:"Favorites"};tealium_data2track.push(e)}catch(t){e={id:"FavoritesPage-Tentative",Error_Source:"FavoritesPage",Error_Code:"FavoritesPage"};tealium_data2track.push(e)}registerLazyLoadByClass("div.modal-favorites-container img.lazy",50),setTimeout(function(){$(window).scroll()},1e3)}else window.setTimeout(openModalFavorites,100)}function loadFile(e){var t=e.target.files[0],a=(t.name,t.type);if(t.size<10485760&&-1!=$.inArray(a,["image/png","application/pdf","image/jpg","image/jpeg","PNG","PDF","JPG","JPEG"])){$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached .img-prescription").hide();var n=$(e.target).closest(".box-prescription-show").find(".img-prescription").get(0);n.src=URL.createObjectURL(e.target.files[0]),n.onload=function(){URL.revokeObjectURL(n.src)},$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached .img-prescription").show(),$(e.target).closest(".box-prescription-show").find(".after-upload-prescription").show(),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-left").hide(),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-accepted").hide(),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-right").html("")}else $(e.target).closest(".box-prescription-show").find(".label-button-prescription").text("Upload file"),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached .img-prescription").hide(),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached .after-upload-prescription").hide(),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-error").show(),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-error").show(),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-left").show(),$(e.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-accepted").show()}function removeImgPrescription(){$(event.target).closest(".box-prescription-show").find(".label-button-prescription").text("Upload file"),$(event.target).closest(".box-prescription-show").find(".img-prescription").val(""),$(event.target).closest(".box-prescription-show").find(".prescription-add-file").val(""),$(event.target).closest(".box-prescription-show").find(".thank-you-prescription-attached .img-prescription").hide(),$(event.target).closest(".box-prescription-show").find(".thank-you-prescription-attached .after-upload-prescription").hide(),$(event.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-error").html(""),$(event.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-error").show(),$(event.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-left").show(),$(event.target).closest(".box-prescription-show").find(".thank-you-prescription-attached-accepted").show()}function uploadAgain(){$(event.target).closest(".box-prescription-show").find(".prescription-add-file").click()}function sendPrescription(e,t){var a=$(".thank-you-prescription-no-uploaded.lens-id-"+t).find(".thank-you-prescription-attached-left").find(".prescription-add-file").get(0).value;if(""!=a)uploadPrescription(e,t,a);else{var n=$(".thank-you-prescription-no-uploaded.lens-id-"+t);n.find(".thank-you-prescription-attached-error").html("Please upload your prescription."),n.find(".thank-you-prescription-attached-right-change-file").hide(),n.find(".thank-you-prescription-attached-right-name").html("")}}function uploadPrescription(e,t,a){var n=".thank-you-prescription-no-uploaded.lens-id-"+t;showLoaderForButton(n+" .thank-you-prescription-button","Send Prescription");var o={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId,orderId:e,lensId:t};window.emailAddressForPrescriptionMissing&&window.emailAddressForPrescriptionMissing.length>0&&(o.emailAddress=window.emailAddressForPrescriptionMissing);var i=$(n).find(".thank-you-prescription-attached-left").find(".prescription-add-file");f=i[0].files[0],void 0==f?o.FILE_NAME="":o.FILE_NAME=f.name,o.RX="doctor",o.PRESCRIPTION_MODE="uploadPrescription";var r=new FileReader;r.onload=function(e){o.FILE=e.target.result.split("base64,")[1],$.ajax({type:"POST",url:getAbsoluteURL()+"GLDoctorInformationUpdateCmd",data:o,success:function(e){e=e.replace("/*","").replace("*/","");var t=JSON.parse(e),a=t.lensId[0];if(null!=t.OK_MSG){$(".box-prescription-show.lens-id-"+a).find(".thank-you-prescription-attached-error").hide(),$(".box-prescription-show.lens-id-"+a).find(".thank-you-prescription-no-uploaded").hide(),$(".box-prescription-show.lens-id-"+a).removeClass("open"),$(".c-prescription-subtitle-cta").hide(),$(".box-prescription-show.lens-id-"+a).find(".add-or-change-click.add-prescription-click").hide(),$(".box-prescription-show.lens-id-"+a).find(".add-or-change-click.change-prescription-click").show(),$(".prescription-missing-msg-"+a).hide(),$(".add-or-change-click.change-prescription-click-"+a).show();try{tealium_data2track.push({id:"Checkout-Order-PrescriptionOk",Order_PrescriptionMethod:"upload"})}catch(e){console.log(e)}}else{$(".box-prescription-show.lens-id-"+a).find(".thank-you-prescription-attached-error").html(t.ERR_MSG),$(".box-prescription-show.lens-id-"+a).find(".thank-you-prescription-attached-error").show(),$(".box-prescription-show.lens-id-"+a).find(".thank-you-prescription-attached-right-name").html(""),removeLoaderForButton(".thank-you-prescription-button","Send Prescription");try{var n={id:"Error",Error_Source:"Server",Error_Code:"RX panel",Error_Details:"Unable to upload the RX image",Error_Message:t.ERR_MSG};tealium_data2track.push(n)}catch(e){console.error(e)}}},error:function(e,t,a){$(".thank-you-prescription-attached-error").html("Error to save prescription file. Please try again"),$(".thank-you-prescription-attached-error").show(),$(".thank-you-prescription-attached-right-name").html(""),removeLoaderForButton(".thank-you-prescription-button","Send Prescription");try{var n={id:"Error",Error_Source:"Server",Error_Code:"RX panel",Error_Details:"Unable to upload the RX image "+a,Error_Message:"Error to save prescription file. Please try again"};tealium_data2track.push(n)}catch(e){console.error(e)}}})},r.readAsDataURL(f)}function insertPromoCode(){$(document).ready(function(){$(".icon-close-promocode-order").click(function(){$(".block-insert-promocode-order").hide(),$(".icon-open-promocode-order").css("display","block"),$(".icon-close-promocode-order").css("display","none"),$(".error-promocode-order").css("display","none")}),$(".icon-open-promocode-order").click(function(){$(".block-insert-promocode-order").show(),$(".icon-open-promocode-order").css("display","none"),$(".icon-close-promocode-order").css("display","block"),$(".error-promocode-order").css("display","none")})})}function cancelText(e){$("#"+e).val("")}function checkPromoCode(){""==document.getElementById("promocode").value?($(".error-promocode-order").css("display","block"),$(".insert-promo-code-order").css("border-bottom","solid 1px #d0021b"),$(".clear-promocode-order").css("display","inline")):($(".error-promocode-order").css("display","none"),$(".insert-promo-code-order").css("border-bottom","solid 1px #dadada"),$(".clear-promocode-order").css("display","none"))}function businessDayOrder(){$(".cost-business-order").css("display","block"),$(".free-business-order").css("display","none"),$(".remove-express-delivery-order").css("display","block"),$(".add-express-delivery-order").css("display","none")}function removeBusinessDayOrder(){$(".cost-business-order").css("display","none"),$(".free-business-order").css("display","block"),$(".remove-express-delivery-order").css("display","none"),$(".add-express-delivery-order").css("display","block")}function validateFormOrder(){n=0,""==document.form.FirstName1.value?($(".block-first-name-order").css("border-bottom","solid 1px #d0021b"),$(".clear-form-fname-order").css("display","block")):($(".block-first-name-order").css("border-bottom","solid 1px #dadada"),$(".clear-form-fname-order").css("display","none"),n+=1),""==document.form.LastName1.value?($(".block-last-name-order").css("border-bottom","solid 1px #d0021b"),$(".clear-form-lname-order").css("display","block")):($(".block-last-name-order").css("border-bottom","solid 1px #dadada"),$(".clear-form-lname-order").css("display","none"),n+=1),""==document.form.Address1.value?($(".block-address-order").css("border-bottom","solid 1px #d0021b"),$(".clear-form-address-order").css("display","block")):($(".block-address-order").css("border-bottom","solid 1px #dadada"),$(".clear-form-address-order").css("display","none"),n+=1),""==document.form.City1.value?($(".block-city-order").css("border-bottom","solid 1px #d0021b"),$(".clear-form-city-order").css("display","block")):($(".block-city-order").css("border-bottom","solid 1px #dadada"),$(".clear-form-city-order").css("display","none"),n+=1),""==document.form.ZipCode1.value?($(".block-zip-code-order").css("border-bottom","solid 1px #d0021b"),$(".clear-form-zipcode-order").css("display","block")):($(".block-zip-code-order").css("border-bottom","solid 1px #dadada"),$(".clear-form-country-order").css("display","none"),n+=1),""==document.form.Country1.value?($(".block-country-order").css("border-bottom","solid 1px #d0021b"),$(".clear-form-country-order").css("display","block")):($(".block-country-order").css("border-bottom","solid 1px #dadada"),$("clear-form-country-order").css("display","none"),n+=1),6==n&&$(".right-form").css("display","block")}$(function(){$(".eyeglasses-site-link").click(function(e){e.preventDefault(),sitepageshow($(this))}),$(".sunglasses-site-link").click(function(e){e.preventDefault(),sitepageshow($(this))})}),$(document).ready(function(){$(".spinner").on("click",function(e){var t=$(this).width();e.pageX<=t/2?$(".sunglasses-site-link").trigger("click"):$(".eyeglasses-site-link").trigger("click")})}),$().ready(function(){$(".prescription-add-file").length&&($("#cart-wrapper").on("click",".prescription-add-file",function(){tealium_data2track.push({id:"Click",data_element_id:"X_CheckoutPrescription_Verification_Upload"})}),$("#cart-wrapper").on("change",".prescription-add-file",function(){var e=this.value.substr(this.value.lastIndexOf("\\")+1),t=e.replace(/^.*\./,""),a=$(this).data("lens"),n=this.files[0].size,o=n,i=["kb","MB","GB","TB","PB","EB","ZB","YB"],r=-1;do{o/=1e3,++r}while(Math.abs(o)>=1e3&&r<=i.length-1);fileSize=o.toFixed(1)+" "+i[r];var s=$(".thank-you-prescription-no-uploaded.lens-id-"+a);""==this||n>10485760?(s.find(".thank-you-prescription-attached-right-change-file").show(),s.find(".thank-you-prescription-attached-error").html("This file is too big. <br>Please select a different file."),s.find(".thank-you-prescription-attached-error").show(),s.find(".thank-you-prescription-attached-error").show(),$(this).val(""),tealium_data2track.push({id:"Error",Error:"the selected file size is bigger"})):-1==$.inArray(t,["png","pdf","jpg","jpeg","PNG","PDF","JPG","JPEG"])?(s.find(".thank-you-prescription-attached-right-change-file").show(),s.find(".thank-you-prescription-attached-error").html("The file format is not supported. <br>Please select a different format."),s.find(".thank-you-prescription-attached-error").show(),$(this).val(""),tealium_data2track.push({id:"Error",Error:"the selected file type is not permitted"})):(s.find(".thank-you-prescription-attached-right-name").html(e+" | "+fileSize),s.find(".label-button-prescription").text("Change file"),s.find(".thank-you-prescription-attached-right-change-file").show(),s.find(".thank-you-prescription-attached-error").hide())})),document.getElementById("thank-you-chance-file")&&(document.getElementById("thank-you-chance-file").onchange=function(){var e,t=(e=this.value).substr(e.lastIndexOf("\\")+1),a=t.replace(/^.*\./,""),n=(e=document.getElementById("thank-you-chance-file")).files[0].size,o=["kb","MB","GB","TB","PB","EB","ZB","YB"],i=-1;do{n/=1e3,++i}while(Math.abs(n)>=1e3&&i<=o.length-1);if(fileSize=n.toFixed(1)+" "+o[i],""==e||n>10485760||-1==$.inArray(a,["png","pdf","jpg","jpeg","PNG","PDF","JPG","JPEG"]))$(".thank-you-prescription-attached-right-change-file").show(),$(".thank-you-prescription-attached-error").html("The selected file's type is not permitted. Please select a different file."),$(".thank-you-prescription-attached-error").show(),document.getElementById("thank-you-chance-file").value="",document.getElementById("thank-you-add-file").value="";else{$(".thank-you-prescription-attached-right-name").html(t+" | "+fileSize),$(".label-button-prescription").text("Change file"),$(".thank-you-prescription-attached-right-change-file").show(),$(".thank-you-prescription-attached-error").hide();var r=document.querySelector("#thank-you-chance-file");document.querySelector("#thank-you-add-file").files=r.files}})});var componentForm={locality:"long_name",administrative_area_level_1:"short_name",postal_code:"short_name"},addrIDs={shipping_address_id:"WC__ShoppingCartAddressEntryForm_shippingAddressCreateEditFormDiv_1_address1_1",billing_address_id:"WC__ShoppingCartAddressEntryForm_step2_address1_1"},manualSIDs={locality:"WC__ShoppingCartAddressEntryForm_shippingAddressCreateEditFormDiv_1_city_1",administrative_area_level_1:"WC__ShoppingCartAddressEntryForm_shippingAddressCreateEditFormDiv_1_state_1",postal_code:"WC__ShoppingCartAddressEntryForm_shippingAddressCreateEditFormDiv_1_zipCode_1"},manualBIDs={locality:"WC__ShoppingCartAddressEntryForm_step2_city_1",administrative_area_level_1:"WC__ShoppingCartAddressEntryForm_step2_state_1",postal_code:"WC__ShoppingCartAddressEntryForm_step2_zipCode_1"},countryRestrction={country:["us","pr","vi","gu","mp"]};function initAutocomplete(){console.log("initAutocomplete"),(autocompleteShipping=new google.maps.places.Autocomplete(document.getElementById(addrIDs.shipping_address_id),{types:["address"]})).setComponentRestrictions(countryRestrction),autocompleteShipping.addListener("place_changed",function(){fillInAddress(autocompleteShipping,manualSIDs,addrIDs.shipping_address_id)}),(autocompleteBilling=new google.maps.places.Autocomplete(document.getElementById(addrIDs.billing_address_id),{types:["address"]})).setComponentRestrictions(countryRestrction),autocompleteBilling.addListener("place_changed",function(){fillInAddress(autocompleteBilling,manualBIDs,addrIDs.billing_address_id)}),service=new google.maps.places.AutocompleteService,$("body").on("keyup","#"+addrIDs.shipping_address_id+", #"+addrIDs.billing_address_id,function(){console.log("keyup");var e=$(this);e.val().length>0&&service.getQueryPredictions({input:e.val()},function(t,a){"OK"!=a&&(e.closest(".col").find(".address_summary").removeClass("show"),e.closest(".col").find(".insert-manually").slideDown(200))})})}function fillInAddress(e,t,a){var n=e.getPlace();for(var o in componentForm)document.getElementById(t[o]).value="",document.getElementById(t[o]).disabled=!1;for(var i,r={},s=0;s<n.address_components.length;s++)switch(n.address_components[s].types[0]){case"street_number":r.street_number=n.address_components[s].long_name;break;case"route":r.route=n.address_components[s].long_name;break;case"postal_code":r.postal_code=n.address_components[s].long_name;break;case"locality":r.locality=n.address_components[s].long_name;break;case"neighborhood":r.neighborhood=n.address_components[s].long_name;break;case"administrative_area_level_1":r.state_long=n.address_components[s].long_name,r.administrative_area_level_1=n.address_components[s].short_name}for(var l in"locality"in r&&"neighborhood"in r?delete r.neighborhood:!("locality"in r)&&"neighborhood"in r&&(r.locality=r.neighborhood,delete r.neighborhood),console.log(r),r)if(componentForm[l]){var d=r[l];document.getElementById(t[l]).value=d,"administrative_area_level_1"==l&&($("#"+t[l]).selectBox("value",d),"WC__ShoppingCartAddressEntryForm_shippingAddressCreateEditFormDiv_1_state_1"===t[l]?($("#ShippingAnotherAddress").find(".state-label").show(),$("#ShippingAnotherAddress").find(".no_padding_select_container_gl").css("height","51px"),$("#shipping_user-address-state").val(d),$('input[name="SameShippingAndBillingAddressCustom"]#useAsBilling').is(":checked")&&$("#billing_user-address-state").val(d)):"WC__ShoppingCartAddressEntryForm_step2_state_1"===t[l]&&($("#billingCreateEditArea1").find(".state-label").show(),$("#billingCreateEditArea1").find(".no_padding_select_container_gl").css("height","51px"),$("#billing_user-address-state").val(d)))}if(document.getElementById(a).value=$.trim((r.street_number||"")+" "+r.route),a==addrIDs.shipping_address_id){var c=$(document.getElementById(addrIDs.shipping_address_id)),p=$(document.getElementById(addrIDs.shipping_address_id)).parent().parent().parent().find("input[name=shipping_city]"),u=$(document.getElementById(addrIDs.shipping_address_id)).parent().parent().parent().find("input[name=shipping_zipCode]");p.focus(),u.focus(),seeWarningCalifornia(c),i=$(".shipping_address .address_summary")}else{var h=$(document.getElementById(addrIDs.billing_address_id)),m=$(document.getElementById(addrIDs.billing_address_id)).parent().parent().parent().find("input[name=billing_city]"),g=$(document.getElementById(addrIDs.billing_address_id)).parent().parent().parent().find("input[name=billing_zipCode]");m.focus(),g.focus(),seeWarningCalifornia(h),i=$(".billing_address .address_summary")}i.find(".street_address").text($.trim((r.street_number||"")+" "+r.route)),i.find(".locality").text(r.locality),i.find(".state").text(r.state_long),i.find(".postal_code").text($.trim(r.postal_code||"")),void 0===r.route||void 0===r.locality||void 0===r.state_long||void 0===r.postal_code?(i.removeClass("show"),i.closest(".col").find(".insert-manually").slideDown(200),$('form[name="step2"]').valid()):(i.closest(".col").find(".insert-manually").slideUp(200),i.addClass("show"))}function geolocate(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude},a=new google.maps.Circle({center:t,radius:e.coords.accuracy});autocompleteShipping.setBounds(a.getBounds()),autocompleteBilling.setBounds(a.getBounds())})}function openModalAddress(e){if($(".modal-address-container").show().animate({left:"0"},600,function(){$(".modal-my-account-container").hide()}),$("#myaccmodal_state_selectbox").on("change",function(){if(""==$("#state").val())return $("#address-state .input-x-container.label-height").removeClass("label-height"),void $("#address-state .input-x-container .selectBox .selectBox-label").text("State");$("#address-state .input-x-container:not(.label-height)").addClass("label-height")}),"addNew"==e&&($("#addNewAddress").show(),$("#editDefaultAddress").hide(),$("#remove-address").hide(),$("#firstname").val(""),$("#lastname").val(""),$("#address").val(""),$("#city").val(""),$("#zipcode").val(""),$("#myaccmodal_state_selectbox").selectBox("value",""),$("#myaccmodal_state_selectbox").change(),$("#phone").val(""),document.getElementById("lastname").focus(),document.getElementById("address").focus(),document.getElementById("city").focus(),document.getElementById("state").focus(),document.getElementById("zipcode").focus(),document.getElementById("phone").focus(),document.getElementById("firstname").focus()),"manage"==e){$("#editDefaultAddress").show(),$("#addNewAddress").hide(),$("#remove-address").show();var t=$("#editDefaultAddress").data("value");""!=t?$(".modal-address-container .dropdown-menu li").each(function(e){if($(this).data("value")==t){var a=$(this).data("address-firstname"),n=$(this).data("address-lastname"),o=$(this).data("address"),i=$(this).data("address-city"),r=$(this).data("address-zipcode"),s=$(this).data("address-state"),l=$(this).data("address-phone"),d=$(this).data("value");document.getElementById("firstname").value=a,document.getElementById("lastname").value=n,document.getElementById("address").value=o,document.getElementById("city").value=i,$("#myaccmodal_state_selectbox").selectBox("value",s),$("#myaccmodal_state_selectbox").change(),document.getElementById("zipcode").value=r,document.getElementById("phone").value=l,document.getElementById("address-id").value=d,document.getElementById("lastname").focus(),document.getElementById("address").focus(),document.getElementById("city").focus(),document.getElementById("state").focus(),document.getElementById("zipcode").focus(),document.getElementById("phone").focus(),document.getElementById("firstname").focus()}}):($("#address-form input#firstname").val(""),$("#address-form input#lastname").val(""),$("#address-form input#address").val(""),$("#address-form input#address2").val(""),$("#address-form input#city").val(""),$("#myaccmodal_state_selectbox").selectBox("value",""),$("#myaccmodal_state_selectbox").change(),$("#address-form input#zipcode").val(""),$("#address-form input#phone").val(""),document.getElementById("address-id").value="",document.getElementById("lastname").blur(),document.getElementById("address").blur(),document.getElementById("city").blur(),document.getElementById("state").blur(),document.getElementById("zipcode").blur(),document.getElementById("phone").blur(),document.getElementById("firstname").blur()),$(".modal-address-container").focus()}}function checkboxAddressDefault(){$("#addressDefault").change(function(){0==$("#addressDefault").prop("checked")?switchIconCheckbox("addressDefault-custom-label",!1):switchIconCheckbox("addressDefault-custom-label",!0)})}function switchIconCheckbox(e,t){t?($("."+e).addClass("iconglasses-icon-checked"),$("."+e).removeClass("iconglasses-icon-unchecked")):($("."+e).addClass("iconglasses-icon-unchecked"),$("."+e).removeClass("iconglasses-icon-checked"))}function closeModalAddress(){$(".modal-my-account-container").show(),$(".arrow-left-container").show(),$("#address-form input#firstname").val(""),$("#address-form input#lastname").val(""),$("#address-form input#address").val(""),$("#address-form input#address2").val(""),$("#address-form input#city").val(""),$("#address-form input#state").val(""),$("#address-form input#zipcode").val(""),$("#address-form input#phone").val(""),document.getElementById("address-id").value="",$(".modal-address-container").animate({left:"100%"},600),$(".modal-my-account-container").focus()}function initOpenAutomaticModal(){var e=getUrlParam("myAccount",!1),t=getUrlParam("signIn",!1),a=(getUrlParam("newAccount",!1),getUrlParam("cart",!1)),n=getUrlParam("reset",!1),o=getUrlParam("loginModal",!1),i=getUrlParam("trackOrder",!1),r=getUrlParam("checkout",!1);a?openCartDirectly():constants.ajaxParams.loggedIn?(hideCreateAccountHandler(),e?openMyAccountDirectly():r&&openPaymentDirectly()):n?showResetUpdatePasswordModal():o?(window.history.pushState(null,null,window.location.href.split("?")[0]),openLoginCreate(),showLogonMenuModal()):i?(window.history.pushState(null,null,window.location.href.split("?")[0]),$("#modal-track-order").show(),showLogonMenuModal(),$("#modal-track-order").addClass("openedDirectly")):r?openPaymentDirectly():t&&openSignInDirectly()}function openPaymentDirectly(){openCartDirectly(function(){CheckoutHelperJS.canCheckoutContinue("R")&&CheckoutHelperJS.updateShoppingCart(document.ShopCartForm,!0)&&guestShopperContinue()})}function openMyAccount(){$elemmyacc=$(".modal-my-account-container"),0!=$elemmyacc.length?$(".modal-my-account-container").show().animate({left:"0"},600,function(){$(".header-sign-in-menu-newsletter-container").hide(),$(".modal-my-account-container").focus(),window.location.href.indexOf("&newAccount=true")>0&&window.history.pushState("","",window.location.href.replace("&newAccount=true",""))}):window.setTimeout(openMyAccount,100)}function goBackOnMenuFromMyAccount(){$(".header-sign-in-menu-newsletter-container").show(),$(".header-sign-in-menu-newsletter-container").focus(),$(".modal-my-account-container").show().animate({left:"100%"},600)}function checkboxSendEmail(){$("#sendEmail").change(function(){if(0==$("#sendEmail").prop("checked")){switchIconCheckbox("sendEmail-custom-label",!1);var e=getAbsoluteURL()+"EmailSubscription",t={email:$("#email").val(),optinStatus:!1};$.ajax({url:e,type:"post",data:t}).done(function(e){})}else{switchIconCheckbox("sendEmail-custom-label",!0);e=getAbsoluteURL()+"EmailSubscription",t={email:$("#email").val(),optinStatus:!0};$.ajax({url:e,type:"post",data:t}).done(function(e){})}})}function switchIconCheckbox(e,t){t?($("."+e).addClass("iconglasses-icon-checked"),$("."+e).removeClass("iconglasses-icon-unchecked")):($("."+e).addClass("iconglasses-icon-unchecked"),$("."+e).removeClass("iconglasses-icon-checked"))}function editPassword(e,t){if(t.preventDefault(),"my-account-password"==e&&($(".my-account-password").hide(),$(".my-account-change-password").show()),"my-account-password-close"==e&&($(".my-account-change-password").hide(),$(".my-account-password").show()),"my-account-password-save"==e&&($("#change-password-error-message").html(""),$("#my-account-form").validate(),$("#my-account-form").valid())){$("#change-password-error-message").html("");var a=$("#"+e).text();$("#"+e).html('<i class="fa fa-spinner fa-spin"></i> '+a),$("#"+e).disabled=!0,$("#logon-password-verify").val(document.getElementById("newPassword").value),t.preventDefault();for(var n=$("#my-account-form").serializeArray(),o=[],i=0;i<n.length;i++){var r=n[i];"birthday"==r.name||"dateOfBirth"==r.name||"sendEmail"==r.name||o.push(r)}$.ajax({url:getAbsoluteURL()+"ResetPassword",type:"post",data:o}).done(function(t){""==t?($("#logon-password-verify").val(newPassword),$("#my-account-password").val(newPassword),$(".my-account-change-password").hide(),$(".my-account-password").show(),$("#oldPassword").val(""),$("#newPassword").val("")):$("#change-password-error-message").html("Update failed - please try again later."),$("#"+e).html(a),$("#"+e).disabled=!1}).fail(function(){$("#change-password-error-message").html("Update failed - please try again later."),$("#"+e).html(a),$("#"+e).disabled=!1})}}function changeBirthday(e,t){if("my-account-birthday"==e&&($(".my-account-change-birthday").show(),$(".my-account-birthday").hide(),$("#birthday").mask("99/99/9999"),$("#birthday").focus()),"my-account-birthday-close"==e&&($(".my-account-change-birthday").hide(),$(".my-account-birthday").show(),$("#birthday").next("span").hide(),$("#birthday").parent().next(".line").removeClass("error-red"),t.preventDefault()),"my-account-birthday-save"==e){var a=$("#birthday").val(),n=a.substring(0,2),o=a.substring(3,5),i=a.substring(6,10);$("#my-account-form").valid()?$("#my-account-form").submit(function(t){t.preventDefault(),$("#change-birthday-error-message").html("");var a=$("#"+e).text();$("#"+e).html('<i class="fa fa-spinner fa-spin"></i> '+a),$("#"+e).disabled=!0;for(var r=$(this).attr("action"),s=$(this).attr("method"),l=$(this).serializeArray(),d=[],c=0;c<l.length;c++){var p=l[c];"oldPassword"==p.name||"logonPassword"==p.name||"logonPasswordVerify"==p.name||("dateOfBirth"==p.name?(p.value=i+"-"+n+"-"+o,d.push(p)):d.push(p))}$.ajax({url:r,type:s,data:d}).done(function(t){document.getElementById("birthday").value="",$("#my-account-birthday").show(),$("#my-account-birthday").val(n+"/"+o+"/"+i),$(".my-account-birthday").show(),$(".my-account-change-birthday").hide(),$("#"+e).html(a),$("#"+e).disabled=!1}).fail(function(){$("#change-birthday-error-message").html("Update failed - please try again later."),$("#"+e).html(a),$("#"+e).disabled=!1})}):$("#my-account-form").validate()}}function address2(){"block"==$(".address-add-address2").css("display")?($(".address-remove-address2").show(),$(".address-address2-container").show(),$(".address-add-address2").hide()):($(".address-remove-address2").hide(),$(".address-address2-container").hide(),$(".address-add-address2").show())}function openModalSeeDetail(e,t,a){$(".modal-see-detail-container").show().animate({left:"0"},600,function(){$(".modal-my-account-container").hide(),$(".modal-see-detail-container").focus()});var n={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId,orderId:e,orderStatusCode:t,isMigrated:a};$.ajax({url:getAbsoluteURL()+"AjaxOrderDetail",type:"post",data:n}).done(function(e){$(".modal-see-detail-container").html(e+'<div class="jump-to-parent" tabindex="0" aria-label="Continue the navigation to go at the top of page"></div>')}).fail(function(){$(".modal-see-detail-container").html(getAjaxErrorMessage())})}function closeModalSeeDetail(){$(".modal-my-account-container").show(),$(".modal-my-account-container").focus(),$(".arrow-left-container").show(),$(".modal-see-detail-container").animate({left:"100%"},600)}function dateOrder(){var e=(new Date).getDate(),t=(new Date).getMonth(),a=(new Date).getFullYear();document.getElementById("current-day").innerHTML=["January","February","March","April","May","June","July","August","September","October","November","December"][t]+" "+e+", "+a}function sendFile(){""==document.getElementById("thank-you-add-file").value&&""==document.getElementById("thank-you-change-file").value?($(".thank-you-error-prescription").html("Please upload your prescription"),$(".thank-you-attached-name").html(""),$(".thank-you-change-file-container").hide()):($(".thank-you-prescription-uploaded").show(),$(".thank-you-prescription-no-uploaded").hide(),$(".thank-you-error-prescription").hide())}function initFormattedDates(){for(var e=$(".js-formatDate-mmddyyyy"),t=0,a=e.length;t<a;t++){var n=e[t];$(n).mask("99/99/9999")}for(t=0,a=(e=$(".js-formatDate-mmyyyy")).length;t<a;t++){n=e[t];$(n).mask("99/9999")}}function activeFocus(){if(window.event&&(window.event.target==document&&"load"==window.event.type||9==window.event.keyCode)){let e=["a:not(.focus-child)","button",".modal-favorites-box-grid-container .ps__thumb-x",".l-pdp-det__container .ps__thumb-y",".pdp-det__carousel .pdp-det__carousel__item",".products_holder .item_container",".brands-grid-container .brand-collaboration-grid",".shopping-bag-vision-insurance"].join();$(e).on("focus",function(){$(e).addClass("focus-actived")}),$("input").on("focus",function(){$("input").addClass("focus-input-actived")}),$("input[type=radio], input[type=checkbox]").on("focus",function(){$(this).closest(".focus-input-container").addClass("make-focus")}),$("input[type=radio], input[type=checkbox]").on("focusout",function(){$(this).closest(".focus-input-container").removeClass("make-focus")}),$(".sunglasses-site-link").on("focus",function(){$(".spritespin-container .frame.is-active").removeClass("is-active"),$('.spritespin-container .frame[data-slice="10"]').addClass("is-active")}),$(".eyeglasses-site-link").on("focus",function(){$(".spritespin-container .frame.is-active").removeClass("is-active"),$('.spritespin-container .frame[data-slice="30"]').addClass("is-active")}),$(".sunglasses-site-link, .eyeglasses-site-link").on("focusout",function(){$(".spritespin-container .frame.is-active").removeClass("is-active"),$('.spritespin-container .frame[data-slice="20"]').addClass("is-active")}),$("a.focus-child").on("focus",function(){$("a.focus-child").children().addClass("focus-actived")}),$(".selectBox").on("focus",function(){$(this).addClass("focus-input-actived")})}}function process(e){let t=e.value.replace(/[^0-9]/g,"");e.value=t}function showCartCheckoutModal(e){if(window.scrollTo(0,0),$("html").css("overflow-y","hidden"),$("body").addClass("checkout-opened"),$("#cart-checkout-modal").length)$("#cart-checkout-modal").animate({top:"0"},600,function(){var e=$("#cart-url").val();if(e)window.location.href=e;else{tealium_data2track.push({id:"Error",Error_Source:"Server",Error_Code:"Cart",Error_Details:"Cart Loading Error"})}});else{tealium_data2track.push({id:"Error",Error_Source:"Server",Error_Code:"Cart",Error_Details:"Cart Loading Error"})}}function hideCartCheckoutModal(){window.scrollTo(0,0),$("html").css("overflow-y","auto"),$("body").removeClass("checkout-opened"),$("#cart-checkout-modal").animate({top:"100%"},600,function(){if($("#OrderShippingBillingDisplay").empty(),$("#OrderPaymentDisplay").empty(),$(".right-container-order").hide(),$("#cart-wrapper").show(),document.referrer&&document.referrer.indexOf(document.location.host)>=0&&-1==document.referrer.indexOf("AjaxOrderItemDisplayView")&&-1==document.referrer.indexOf("SingleShipmentOrderSummaryView")){var e=document.referrer.replace("cart=true","");window.location=e}else window.location=document.location.origin}),$("#header_wrapper .header-logo a").focus(),urlParameter=window.location.href.split("?")[1],"undefined"!=typeof urlParameter&&urlParameter.includes("&cart=true")?window.history.pushState(null,null,window.location.href.substring(0,window.location.href.indexOf("&cart"))):"undefined"!=typeof urlParameter&&urlParameter.includes("cart=true")&&window.history.pushState(null,null,window.location.href.substring(0,window.location.href.indexOf("?cart"))),monetateTrackCatalogItem()}function showLoader(e){$(e).append('<div class="catalog-wrapper-loader" ><i class="fa fa-spinner fa-spin"></i></div>')}function showAddressesPage(){$(".box-prescription-show").find(".add-now-prescription").hide(),$(".box-prescription-show").find(".complete-now-prescription").hide(),$(".box-prescription-show").find(".add-now-prescription-address-shown").show(),$(".box-prescription-show").find(".change-now-prescription").hide(),$(".box-prescription-show").find(".change-or-remove-prescription").hide(),$(".box-prescription-show").find(".remove-prescription-click").hide(),$(".c-prescription-subtitle-cta").hide(),checkoutStep="address",$(".right-container-order").show(),$(".checkout-step-2").show(),$(".total-label-checkout").text("Total (excl. tax)"),$(".paymentDetails").hide(),$("#BirthDate").mask("99/99/9999"),$(".header-checkout-modal-column-left").toggleClass("show-modal-column"),$(".header-checkout-modal-column-right").toggleClass("hide-modal-column"),$(".header-checkout-modal-column-left").css("height","100%"),$("#shipping-form input").focus(),$(".right-container-order .checkout-step-header-title").focus(),showOrderSummary()}function showPaymentPage(){checkoutStep="payment",$(".checkout-step-2").hide(),$(".paymentDetails").show(),$(".header-checkout-modal-column-right").addClass("max-height")}function showOrderSummaryPaymentPage(){$(".box-prescription-show").show(),$("#container-taxes").show(),$("#container-info-shipping").show(),$("#total").show(),$("#total-wo-taxes").hide(),$(".c-prescription-subtitle-cta").hide()}function showLoaderForButton(e,t){$(e).html('<i class="fa fa-spinner fa-spin"></i>'+t),$(e).disabled=!0}function removeLoaderForButton(e,t){$(e).html(t),$(e).disabled=!1}function showOrderSummary(){$("#header_wrapper_checkout").addClass("order-summary-header-column-left"),$(".cart-checkout-x").hide(),$(".shopping-bag-title H1").text("Order summary"),$(".shopping-bag__vision-insurance").show(),$(".middle-container").addClass("order-summary-no-padding"),$("#main_content_checkout").addClass("order-summary-overflow-y"),$(".product-box .remove-product").hide(),$("#id-me-container").prev().addClass("singleChild"),$(".shopping-bag-buttons-container").hide(),$(".shopping-bag-vision-insurance").hide(),$("#total").hide(),$("#total-wo-taxes").show()}function checkRiaLogged(){""!==RiaHelper.getInsuranceCookie()?(RiaHelper.toggleInsurance(!0),$("#insurance-switch-menu").attr("checked",!0),$("#insurance-switch-pdp-step-1").attr("checked",!0),$("#insurance-switch-pdp-step-2").attr("checked",!0),$("#insurance-span-pdp").hide()):showInsuranceModal()}function showInsuranceModal(){$("#rxcApp .main-modal").length>0?$("#use-insurance-modal").addClass("rxc"):$("#use-insurance-modal").removeClass("rxc"),"0"!=RiaHelper.getTentativeUserCookie()?($(".error-container-1").hide(),$(".error-container-2").hide(),$("#firstNameInsurance").blur(),$("#lastNameInsurance").blur(),$("#dateBirth").blur(),$("#zip_input").blur(),$("#personal-info-submit").removeClass("lc-disabled"),$("#personal-info-submit .fa-spinner").hide()):"0"==RiaHelper.getTentativeUserCookie()&&($(".error-container-1").hide(),$(".error-container-2").show(),$(".insurance-modal-container-button-paragraph").hide(),$("#firstNameInsurance").blur(),$("#lastNameInsurance").blur(),$("#dateBirth").blur(),$("#zip_input").blur(),$("#button-cancel-insurance").html("Close"),$("#personal-info-submit").hide()),window.scrollTo(1,1),$("#use-insurance-modal").addClass("open"),setTimeout(function(){$("#use-insurance-modal").addClass("translate")},250);try{tealium_data2track.push({id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"Common",Page_Section2:"Vision Insurance"})}catch(e){console.error(e)}}function reset_submit_form(){$("#personalInfo").trigger("reset"),$("#firstNameInsurance").val(""),$("#lastNameInsurance").val("")}function showInsuranceBenefit(){$("#promo-code-container").css("display","none"),$("#promo-code-container").next().css("display","none"),$("#id-me-container").css("display","none"),$("#id-me-container").next().css("display","none"),$("#delivery-container").css("display","none"),$("#delivery-container").next().css("display","none"),$(".product-list .product-box .product-simple-detail .product-price .frame-price-discount-redesign").css("display","block")}function methodPayment(){1==$("#creditCard").prop("checked")&&($(".creditCard-custom-label").addClass("payment-icon-radio-checked"),$(".creditCard-custom-label").removeClass("payment-icon-radio-unchecked"),$(".paypal-custom-label").addClass("payment-icon-radio-unchecked"),$(".paypal-custom-label").removeClass("payment-icon-radio-checked"),$(".payment-right-container").show()),1==$("#paypal").prop("checked")&&($(".paypal-custom-label").addClass("payment-icon-radio-checked"),$(".paypal-custom-label").removeClass("payment-icon-radio-unchecked"),$(".creditCard-custom-label").addClass("payment-icon-radio-unchecked"),$(".creditCard-custom-label").removeClass("payment-icon-radio-checked"),$(".payment-right-container").hide())}function seeWarningCalifornia(e){var t=$(e).parent().parent().parent().next();"ca"===$(e).val().toLowerCase()||"california"===$(e).val().toLowerCase()?t.show():t.hide()}function openModal_Support(e){console.log("open modal "+e),$("#"+e).show("slide",{direction:"right"},"slow"),$("#"+e).focus();var t="",a="0";"modal-download"==e?t="DowloadFile":"modal-chat-with-us"==e||"modal-contact-us"==e?(t="ContactUs",a="1"):"modal-track-order"==e&&(t="TrackOrder");try{var n={id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"Common",Page_Section2:t,Events_ActionContactUs:a};tealium_data2track.push(n)}catch(e){n={id:t+"-Tentative",Error_Source:t,Error_Code:t};tealium_data2track.push(n)}}function closeModal_Support(e,t){console.log("close modal "+e),$(".modal-support-container").focus(),$("#"+e).hasClass("openedFromFooter")||$("#"+e).hasClass("openedDirectly")?(hideModalDirectlyOpened(),$("#"+e).hide(),$("#"+e).hasClass("openedFromFooter")?$("#"+e).removeClass("openedFromFooter"):$("#"+e).removeClass("openedDirectly"),goBackOnMenu()):($("#"+e).hide("slide",{direction:"right"},"slow"),""!=t&&(console.log("reset form"),$("#"+t).trigger("reset")))}function PromoCodeActived(){$(".promo-code-shopping-bag-before-top").hide(),$("#ShoppingCart_ApplyPromo_Button").hide(),$("#promoCode").hide(),$(".promo-field .line-thin").hide(),$("#promo-code-shopping-bag-after").hide(),$(".promo-code-shopping-bag").show(),$(".content-block-promoCode").show(),$(".promo-code-shopping-bag").addClass("height-unset")}function affirmUpdatePrice(e,t){"undefined"!=typeof affirm&&$(e+" .affirm-price").each(function(){var e=$(this).text().replace(/\D/g,"");$(this).closest(".affirm-price-container").siblings(".affirm-as-low-as").attr("data-amount",e)}).promise().done(function(){try{affirm.ui.ready(function(){affirm.ui.refresh()})}catch(e){console.error("Error refreshing Affirm: "+e)}})}function reloadCart(){checkoutStep="cart",$("#ShopCartDisplay").empty(),$("#OrderShippingBillingDisplay").empty(),$("#OrderPaymentDisplay").empty(),showLoader("#ShopCartDisplay"),$("#cart-wrapper").show();var e=[];if(e.storeId=constants.ajaxParams.storeId,e.catalogId=constants.ajaxParams.catalogId,e.langId=constants.ajaxParams.langId,e.URL="",e.updatePrices="1",e.orderId=".",e.calculationUsageId="-1",RiaHelper.isInsuranceOn()){var t=$("#cartQuantity").text().trim(),a=$("input[name='lens-type']:checked").parent().find(".upcLens").val();e.chooseBenefit=!(t>1)&&("999"!=a&&"99"!=a);var n=RiaHelper.loadJsonInsurance();e.riaInsuranceInformation=n.riaInsuranceInformation}else e.chooseBenefit=!1;wc.service.invoke("AjaxCurrentOrderCalculate",e)}function chooseInsurance(e){var t=0==$("#isOrderInsurable").length||"true"==$("#isOrderInsurable").val();if(getShopCartCounter()>0){var a=RiaHelper.loadJsonInsurance();if(null!=a){var n=[];n.riaInsuranceInformation=a.riaInsuranceInformation,n.chooseBenefit=null==e?t:e&&t,n.storeId=constants.ajaxParams.storeId,n.catalogId=constants.ajaxParams.catalogId,n.langId=constants.ajaxParams.langId,n.URL="",n.updatePrices="1",n.orderId=".",n.calculationUsageId="-1",wc.service.invoke("AjaxOrderCalculate",n)}}else console.log("cart is empty, no re-calculate")}function chooseInsuranceFromDelete(){var e=$("#isRxOrder").val();"true"==e?e=!0:($("#insurance-shopping-bag").attr("checked",!1),e=!1);var t=0==$("#isOrderInsurable").length||"true"==$("#isOrderInsurable").val(),a=RiaHelper.loadJsonInsurance();if(null!=a){var n=[];n.riaInsuranceInformation=a.riaInsuranceInformation,n.chooseBenefit=e&&t,n.storeId=constants.ajaxParams.storeId,n.catalogId=constants.ajaxParams.catalogId,n.langId=constants.ajaxParams.langId,n.URL="",n.updatePrices="1",n.orderId=".",n.calculationUsageId="-1",wc.service.invoke("AjaxOrderCalculate",n)}}function setDisplayFrameInsurance(e){e?($("#promo-code-container").show(),$("#line-thin-promo-code-container").show(),$("#id-me-container").show(),$("#line-thin-id-me-container").show()):($("#promo-code-container").hide(),$("#line-thin-promo-code-container").hide(),$("#id-me-container").hide(),$("#line-thin-id-me-container").hide())}jQuery.validator.addMethod("birth",function(e,t){var a=e.split("/"),n=(new Date).getFullYear();return!!(e.match(/^\d\d?\/\d\d?\/\d\d\d\d$/)&&parseInt(a[2])<=n&&/^(?:(0[1-9]|1[012])[\/.](0[1-9]|[12][0-9]|3[01])[\/.](19|20)[0-9]{2})$/.test(e))}),$.validator.addMethod("lettersonly",function(e,t){return this.optional(t)||/^[a-z]+$/i.test(e)}),$.validator.addMethod("mail",function(e,t){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/i.test(e)}),$(document).ready(function(){function t(){reset_submit_form(),$(".insurance-modal-container .insurance-modal-container-column-left .column-left-image").css("background-color","transparent"),$("#use-insurance-modal").removeClass("translate"),setTimeout(function(){$("#use-insurance-modal").removeClass("open")},250),$(".input-plan-member-container").addClass("hide"),$(".insurance-modal-wrapper").hasClass("open-from-cart")&&$(".insurance-modal-wrapper").removeClass("open-from-cart"),$("#header-sign-in-menu-modal").is(":visible")?$(".header-sign-in-menu-newsletter-container").focus():$(".lens-selection-column-right").is(":visible")&&$(".lens-selection-column-right").focus()}$("body").on("click","#insurance-switch",function(){var e=$("#isRxOrder").val();return $("#insurance-switch-menu").prop("checked")?(RiaHelper.toggleInsurance(!1),$("#insurance-switch-menu").attr("checked",!1),$("#insurance-shopping-bag").attr("checked",!1),$("#insurance-switch-lenses-step-1").attr("checked",!1),$("#insurance-switch-lenses-step-2").attr("checked",!1),chooseInsurance(!1),$("#insurance-span-pdp").show()):(RiaHelper.toggleInsurance(!0),""!==RiaHelper.getInsuranceCookie()?("true"==e?($("#insurance-switch-menu").attr("checked",!0),$("#insurance-shopping-bag").attr("checked",!0),$("#insurance-switch-lenses-step-1").attr("checked",!0),$("#insurance-switch-lenses-step-2").attr("checked",!0),chooseInsurance(!0)):($("#insurance-switch-menu").attr("checked",!0),$("#insurance-shopping-bag").attr("checked",!1),$("#insurance-switch-lenses-step-1").attr("checked",!0),$("#insurance-switch-lenses-step-2").attr("checked",!0),chooseInsurance(!1)),$("#insurance-span-pdp").hide(),window.dispatchEvent(new Event("insuranceEnabled"))):showInsuranceModal()),!1}),$("body").on("click","#insurance-shopping-bag-checkbox",function(){var e=$(".product-simple-detail").length;if("true"!=$("#isRxOrder").val())return $(".not-insurable-no-prescription").removeClass("hide"),!1;if(e>1)return $(".not-insurable").removeClass("hide"),!1;if($("#insurance-shopping-bag").prop("checked")){$(".vision-insurance-text").html('<i class="fa fa-spinner fa-spin" style="margin-right: 2px;"></i>'+$(".vision-insurance-text").text()),RiaHelper.toggleInsurance(!1),$("#insurance-switch-menu").attr("checked",!1),$("#insurance-shopping-bag").attr("checked",!1),$("#insurance-switch-lenses-step-1").attr("checked",!1),$("#insurance-switch-lenses-step-2").attr("checked",!1),chooseInsurance(!1),$("#insurance-span-pdp").show();var t={id:"Click",data_element_id:"X_X_UseInsurance_Toggle",data_description:"Off"};tealium_data2track.push(t)}else{RiaHelper.toggleInsurance(!0),""!==RiaHelper.getInsuranceCookie()?($(".vision-insurance-text").html('<i class="fa fa-spinner fa-spin" style="margin-right: 2px;"></i>'+$(".vision-insurance-text").text()),$("#insurance-switch-menu").attr("checked",!0),$("#insurance-shopping-bag").attr("checked",!0),$("#insurance-switch-lenses-step-1").attr("checked",!0),$("#insurance-switch-lenses-step-2").attr("checked",!0),chooseInsurance(!0),$("#insurance-span-pdp").hide()):showInsuranceModal();t={id:"Click",data_element_id:"X_X_UseInsurance_Toggle",data_description:"On"};tealium_data2track.push(t)}return!1}),$("body").on("click","#insurance-switch-lenses-step-1",function(){if(riaInProgress)return!1;var e="true"==$("input.c-complete-pair").val();return $("#insurance-switch-pdp-step-1").prop("checked")?(RiaHelper.toggleInsurance(!1),$("#insurance-switch-pdp-step-1").attr("checked",!1),$("#insurance-switch-lenses-step-2").attr("checked",!1),$("#insurance-switch-menu").attr("checked",!1),$("#insurance-shopping-bag").attr("checked",!1),chooseInsurance(!1),$("input[name='lens-type']:checked").change(),$("#lens-selection-modal-page0 .o-steps__footer .o-resume__price__insurance").text(""),$("#insurance-span-pdp").show(),e&&$(".c-price-list-price").each(function(e,t){$(t).removeClass("hidden"),$(t).prev(".c-price").text($(t).next(".c-price-current").text())})):(RiaHelper.toggleInsurance(!0),""!==RiaHelper.getInsuranceCookie()?($("#insurance-switch-pdp-step-1").attr("checked",!0),$("#insurance-switch-lenses-step-2").attr("true",!0),$("#insurance-switch-menu").attr("checked",!0),$("#insurance-shopping-bag").attr("checked",!0),chooseInsurance(!0),$("input[name='lens-type']:checked").change(),$("#insurance-span-pdp").hide(),e&&$(".c-price-list-price").each(function(e,t){$(t).prev(".c-price").text($(t).text()),$(t).addClass("hidden")})):showInsuranceModal()),!1}),$("body").on("click","#insurance-switch-lenses-step-2",function(){if(riaInProgress)return!1;var e="true"==$("input.c-complete-pair").val();return $("#insurance-switch-pdp-step-2").prop("checked")?(RiaHelper.toggleInsurance(!1),$("#insurance-switch-pdp-step-2").attr("checked",!1),$("#insurance-switch-pdp-step-1").attr("checked",!1),$("#insurance-switch-menu").attr("checked",!1),$("#insurance-shopping-bag").attr("checked",!1),chooseInsurance(!1),$("input[name='addons-type']:checked").change(),$("#lens-selection-modal-page1 .o-steps__footer .o-resume__price__insurance").text(""),$("#insurance-span-pdp").show(),e&&$(".c-price-list-price").each(function(e,t){$(t).removeClass("hidden"),$(t).prev(".c-price").text($(t).next(".c-price-current").text())})):(RiaHelper.toggleInsurance(!0),""!==RiaHelper.getInsuranceCookie()?($("#insurance-switch-pdp-step-2").attr("checked",!0),$("#insurance-switch-pdp-step-1").attr("checked",!0),$("#insurance-switch-menu").attr("checked",!0),$("#insurance-shopping-bag").attr("checked",!0),chooseInsurance(!0),$("input[name='addons-type']:checked").change(),$("#insurance-span-pdp").hide(),e&&$(".c-price-list-price").each(function(e,t){$(t).prev(".c-price").text($(t).text()),$(t).addClass("hidden")})):showInsuranceModal()),!1}),$(".insurance-x .iconglasses-x").click(function(){return $(".insurance-container-form .error-container-3").addClass("hidden"),t(),!1}),$("#button-cancel-insurance").click(function(){try{var e={id:"Click",data_element_id:"X_"+utag_data.Page_Section1+utag_data.Page_Section1+utag_data.Page_Type+"_buttonCancelInsurance"};tealium_data2track.push(e)}catch(t){e={id:"Insurance-cancel-button",Error_Source:"Insurance",Error_Code:"Insurance"};tealium_data2track.push(e)}$(".insurance-container-form .error-container-3").addClass("hidden"),t()}),$("#personal-info-submit").click(function(){var e="";$(".lens-selection-area-container").is(":visible")?e="PDP":$(".order-summary-container").is(":visible")&&(e="CartPage");try{var t={id:"Click",data_element_id:"X_VisionInsurance"+e+"_Static-InsurancePanel_Submit"};tealium_data2track.push(t)}catch(e){t={id:"Insurance-access-Tentative",Error_Source:"Insurance",Error_Code:"Insurance"};tealium_data2track.push(t)}}),$(".insurance-modal-container-column-input .error").after("line-thin"),$("#dateBirth").length>0&&$("#dateBirth").mask("99/99/9999"),$(document).on("click",".input-x-container .iconglasses-x",function(){var e=$("input[name="+$(this).prev().attr("name")+"]"),t=$(this).parent().next();e.val(""),t.removeClass("error-red"),$(this).hide(),$(this).parent().parent().find("label.required, span.required").remove()}),$("body").on("click",".header-cart-icon",function(){var e=parseInt($("#cartQuantity").text());return e&&!isNaN(e)&&0!=e&&showCartCheckoutModal(),!1}),"showCart"===location.hash.substr(1)&&showCartCheckoutModal(),$("body").on("click",".cart-checkout-x .iconglasses-x",function(){return hideCartCheckoutModal(),!1}),$("#use-cart-checkout-modal").length>0&&$(".cart-checkout-modal-container").css({width:"100%",height:"100%"}),$("body").on("click",".checkout-step-header .shipping-go-back",function(e){e.preventDefault(),backToCart(),$(".box-prescription-show").show(),$(".box-prescription-show").find(".add-now-prescription-address-shown").hide(),$(".box-prescription-show").find(".remove-prescription-click").show(),$(".box-prescription-show").find(".change-now-prescription").show(),$(".box-prescription-show").find(".change-or-remove-prescription").show(),$(".c-prescription-subtitle-cta").show(),RXPanelBackToCart()}),$("body").on("click",".payment-top .back-button-container",function(e){hidePaymentPage(),$("#select-state").find(".dropdown-toggle").removeAttr("style")}),$("body").on("hover","#PaymentForm1",function(){$("#expirationDateCard").mask("99/99")}),$("body").on("click","#promo-code-shopping-bag-after",function(){return $("#promo-code-shopping-bag-after").hide(),$(".promo-code-shopping-bag").slideDown("slow"),$(".promo-code-shopping-bag-before-top").show(),!1}),$("body").on("click",".promo-code-shopping-bag-before-top",function(){return $(".promo-code-shopping-bag-before-top").css("display","none"),$("#promo-code-shopping-bag-after").css("display","block"),$(".promo-code-shopping-bag").slideUp("slow"),document.getElementById("PromotionCodeForm").reset(),!1}),$("body").on("click","#id-me-container .id-me-top-container",function(){$("#id-me-container").hasClass("showDetail")?($("#id-me-container").removeClass("showDetail"),$("#military-responders .iconglasses-icon-close-detail").hide(),$("#military-responders .iconglasses-icon-open-detail").show(),$(".military-box").slideUp("slow")):($("#id-me-container").addClass("showDetail"),$("#military-responders .iconglasses-icon-open-detail").hide(),$("#military-responders .iconglasses-icon-close-detail").show(),$(".military-box").slideDown("slow"))}),$("body").on("click",".promo-field .promo-code-container .iconglasses-x",function(){return document.getElementById("PromotionCodeForm").reset(),$(".promotionCodeFailureResponse").hide(),$(".promo-field .promo-code-container .iconglasses-x").hide(),$(".promo-field .line-thin").css("border","solid 1px #979797"),!1}),$("body").on("click","#ShoppingCart_ApplyPromo_Button",function(){$("#promoEmpty").length>0&&$(".promotionCodeFailureResponse").hide()}),$("body").on("click","#shipping_warning_california, #billing_warning_california",function(){var e=$(this).parent().parent().next();e.hasClass("show-description")?(e.removeClass("show-description"),e.effect("blind",{direction:"vertical",mode:"hide"},500)):(e.addClass("show-description"),e.effect("slide",{direction:"up",mode:"show"},500))}),$("body").on("click","#support-menu",function(){console.log("open support modal"),$(".modal-support-container").show("slide",{direction:"right"},"slow"),$(".modal-support-container").focus();try{var e={id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"Common",Page_Section2:"Support"};tealium_data2track.push(e)}catch(t){e={id:"Support-Tentative",Error_Source:"Support",Error_Code:"Support"};tealium_data2track.push(e)}}),$("body").on("click","#special-offers-menu",function(){try{var e={id:"VirtualPage-View",Page_Type:"Static",Page_Section1:"Common",Page_Section2:"SpecialOffers"};tealium_data2track.push(e)}catch(t){e={id:"SpecialOffers-Tentative",Error_Source:"SpecialOffers",Error_Code:"SpecialOffers"};tealium_data2track.push(e)}}),$("body").on("click",".modal-support-container .arrow-left-container, .modal-special-offers-container .arrow-left-container",function(){console.log("close support modal"),$(this).parent().hide("slide",{direction:"right"},"slow"),$(".header-sign-in-menu-newsletter-container").focus()}),$("body").on("click",".modal-support-faq-category-head",function(){$(".modal-support-faq-category-body").each(function(e,t){$(t).slideUp("slow"),$(t).prev(".modal-support-faq-category-head").find(".modal-support-faq-icon-detail").hasClass("iconglasses-icon-close-detail")&&$(t).prev(".modal-support-faq-category-head").find(".modal-support-faq-icon-detail").removeClass("less-size").removeClass("iconglasses-icon-close-detail").addClass("iconglasses-icon-open-detail")});var e=$(this).data("faq-box");$(e).is(":visible")?$(this).find(".modal-support-faq-icon-detail").removeClass("iconglasses-icon-close-detail").addClass("iconglasses-icon-open-detail"):($(e).slideDown("slow"),$(this).find(".modal-support-faq-icon-detail").removeClass("iconglasses-icon-open-detail").addClass("iconglasses-icon-close-detail"));var t=$(this).attr("aria-expanded");$(".modal-support-faq-category-head").attr("aria-expanded","false"),"true"!==t&&$(this).attr("aria-expanded","true")}),jQuery.validator.addMethod("lettersonly",function(e,t){return/^[a-z\s]+$/i.test(e)}),jQuery.validator.addMethod("mail",function(e,t){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/i.test(e)}),$("#chat-with-us-contact-us-form").validate({rules:{chatUsername:{required:!0,lettersonly:!0},chatEmail:{required:!0,mail:!0},chatSubject:{required:!0}},errorPlacement:function(e,t){var a=t.attr("name");if("chatSubject"==a)$("textarea[name="+a+"]").addClass("error-red");else{var n=$("input[name="+a+"]").next(),o=$("input[name="+a+"]").parent().next();n.show(),o.addClass("error-red")}},unhighlight:function(e,t){var a=$(e).attr("name");if("chatSubject"==a)$("textarea[name="+a+"]").removeClass("error-red");else{var n=$("input[name="+a+"]").next(),o=$("input[name="+a+"]").parent().next();n.hide(),o.removeClass("error-red")}},success:function(e){var t=$(e).attr("name");if("chatSubject"==t)$("textarea[name="+t+"]").removeClass("error-red");else{var a=$("input[name="+t+"]").next(),n=$("input[name="+t+"]").parent().next();a.hide(),n.removeClass("error-red")}}}),$(".modal-chat-with-us-contact-us-button").submit(function(){if(e.preventDefault(),$("#chat-with-us-contact-us-form").valid()){window.open("","popup_chat","width=400,height=400,resizeable,scrollbars"),this.target="popup_chat";try{var t={id:"ContactUs"};tealium_data2track.push(t)}catch(e){t={id:"ContactUs-Tentative",Error_Source:"ContactUs",Error_Code:"ContactUs"};tealium_data2track.push(t)}}else $("#chat-with-us-contact-us-form").validate()}),$("#chat-with-us-form").validate({rules:{chatUsername:{required:!0,lettersonly:!0},chatEmail:{required:!0,mail:!0},chatSubject:{required:!0}},messages:{chatUsername:{required:"The username field cannot be empty.",lettersonly:"The provided username is invalid."},chatEmail:{required:"The email field cannot be empty.",mail:"The provided email is invalid."},chatSubject:{required:"The subject field cannot be empty."}},errorPlacement:function(e,t){var a=t.attr("name");if("chatSubject"==a)$("textarea[name="+a+"]").addClass("error-red");else{var n=$("input[name="+a+"]").next(),o=$("input[name="+a+"]").parent().next();n.show(),o.addClass("error-red"),$(o).after(e)}},unhighlight:function(e,t){var a=$(e).attr("name");if("chatSubject"==a)$("textarea[name="+a+"]").removeClass("error-red");else{var n=$("input[name="+a+"]").next(),o=$("input[name="+a+"]").parent().next();n.hide(),o.removeClass("error-red")}},success:function(e){if("chatSubject"==t)$("textarea[name="+t+"]").removeClass("error-red");else{var t=$(e).attr("name"),a=$("input[name="+t+"]").next(),n=$("input[name="+t+"]").parent().next();a.hide(),n.removeClass("error-red")}}}),$(".modal-chat-with-us-button").submit(function(e){if(e.preventDefault(),$("#chat-with-us-form").valid()){window.open("","popup_chat","width=400,height=400,resizeable,scrollbars"),this.target="popup_chat";try{var t={id:"ContactUs"};tealium_data2track.push(t)}catch(e){t={id:"ContactUs-Tentative",Error_Source:"ContactUs",Error_Code:"ContactUs"};tealium_data2track.push(t)}}else $("#chat-with-us-form").validate()}),$("#track-order-form").validate({rules:{order:{required:!0},mail:{required:!0,mail:!0}},errorPlacement:function(e,t){var a=t.attr("name"),n=$("input[name="+a+"]").next(),o=$("input[name="+a+"]").parent().next();n.show(),o.addClass("error-red")},unhighlight:function(e,t){var a=$(e).attr("name"),n=$("input[name="+a+"]").next(),o=$("input[name="+a+"]").parent().next();n.hide(),o.removeClass("error-red")},success:function(e){var t=$(e).attr("name"),a=$("input[name="+t+"]").next(),n=$("input[name="+t+"]").parent().next();a.hide(),n.removeClass("error-red")}}),$(".modal-track-order-button").click(function(){$("#track-order-form").valid()||$("#track-order-form").validate()}),$("body").on("click",".special-offers-element-body a",function(){var e=$(this).parent().next();$(".special-offers-element-body").hasClass("read-more-opened")?($(".special-offers-element-body").removeClass("read-more-opened"),e.effect("blind",{direction:"vertical",mode:"hide"},500)):($(".special-offers-element-body").addClass("read-more-opened"),e.effect("slide",{direction:"up",mode:"show"},500))}),$(document).on("click",".column-left-image",function(){t()})}),$(document).ready(function(){$(document).on("click","#gender_filter_men .nav-link",{},function(){var e="",t=$("#selectedFacetsToURL").val();$(this).hasClass("selected")?($("#gender_filter_women").animate({width:"toggle"},400),$("#gender_filter_men .nav-link").css({"background-color":"white",color:"black","border-top-right-radius":"0px","border-bottom-right-radius":"0px"}),removeFilterCalculationResults($("#gender-filter-value"),!0),categoryDisplayJS.applyFilter($("#gender-filter-value"))):($("#gender_filter_men .nav-link").addClass("selected"),$(".clear-all-button").removeClass("hidden"),$("#gender_filter_women .nav-link").animate({width:"toggle","padding-left":0,"padding-right":0},400,function(){calculateSearchResults("#gender-filter-value",!0,!0),e=null!=t&&""!=t?t+"&facet="+$("#gender-filter-value").val():"facet="+$("#gender-filter-value").val(),$("#selectedFacetsToURL").val(e),categoryDisplayJS.applyFilter("#gender-filter-value")}))}),$(document).on("click","#gender_filter_women .nav-link",{},function(){var e="",t=$("#selectedFacetsToURL").val();$(this).hasClass("selected")?($("#gender_filter_women").css("margin-left","0px"),$("#gender_filter_men .nav-link").show(),$("#gender_filter_men").animate({width:"toggle"},400),removeFilterCalculationResults($("#women-filter-value"),!0),categoryDisplayJS.applyFilter($("#women-filter-value"))):($("#gender_filter_women .nav-link").addClass("selected"),$(".clear-all-button").removeClass("hidden"),$("#gender_filter_men .nav-link").animate({width:"toggle","padding-left":0,"padding-right":0},400,function(){calculateSearchResults("#women-filter-value",!0,!0),e=null!=t&&""!=t?t+"&facet="+$("#women-filter-value").val():"facet="+$("#women-filter-value").val(),$("#selectedFacetsToURL").val(e),categoryDisplayJS.applyFilter("#women-filter-value")}))})});var applyEyeglassesFilter=function(){var e=$("#selectedFacetsToURL").val();$(this).hasClass("selected")?($("#category-pipe").show(),$("#sunglasses_filter .nav-link").removeClass("hidden"),$("#sunglasses_filter .nav-link").show(),$("#sunglasses_filter").animate({width:"toggle"},400),$("#eyeglasses_filter .nav-link").css({"background-color":"white",color:"black","border-top-right-radius":"0px","border-bottom-right-radius":"0px"}),removeFilterCalculationResults($("#eyeglasses-filter-value"),!0),categoryDisplayJS.applyFilter($("#eyeglasses-filter-value"))):($("#category-pipe").hide(),$("#eyeglasses_filter .nav-link").addClass("selected"),$(".clear-all-button").removeClass("hidden"),$("#sunglasses_filter .nav-link").animate({width:"toggle","padding-left":0,"padding-right":0},400,function(){calculateSearchResults("#eyeglasses-filter-value",!0,!0);var t="facet="+$("#eyeglasses-filter-value").val();$("#selectedFacetsToURL").val(e+"&"+t),categoryDisplayJS.applyFilter(this)}))},applySunglassesFilter=function(){var e=$("#selectedFacetsToURL").val();$(this).hasClass("selected")?($("#category-pipe").show(),$("#sunglasses_filter").css("margin-left","0px"),$("#eyeglasses_filter .nav-link").show(),$("#eyeglasses_filter").animate({width:"toggle"},400),$("#sunglasses_filter .nav-link").css({"background-color":"white",color:"black","border-top-left-radius":"0px","border-bottom-left-radius":"0px"}),removeFilterCalculationResults($("#sunglasses-filter-value"),!0),categoryDisplayJS.applyFilter($("#sunglasses-filter-value"))):($("#category-pipe").hide(),$("#sunglasses_filter .nav-link").addClass("selected"),$(".clear-all-button").removeClass("hidden"),$("#eyeglasses_filter .nav-link").animate({width:"toggle","padding-left":0,"padding-right":0},400,function(){calculateSearchResults("#sunglasses-filter-value",!0,!0);var t="facet="+$("#sunglasses-filter-value").val();$("#selectedFacetsToURL").val(e+"&"+t),categoryDisplayJS.applyFilter(this)}))},recalculateResults=function(e){if($(e.target).hasClass("x-remove-filter"))removeFilterCalculationResults(e.target),isFilterValueChecked=!0,modalFilterValuesApplied();else if($(this).hasClass("icon")||$(this).hasClass("face-shape-icon")){var t=$(this).nextAll("input");$(t).prop("checked")?$(t).prop("checked",!1):$(t).prop("checked",!0),$(t).prop("checked")?($(".dropdown-menu #apply-color-filter span").append('<i class="fa fa-spinner fa-spin" style="font-size:16px; margin-left:5px;"></i>'),calculateSearchResults($(t)),isFilterValueChecked=!0):(removeFilterCalculationResults($(t)),isFilterValueChecked=!0,modalFilterValuesApplied())}else"polarized-switch"==$(e.target).attr("id")?$(e.target).prop("checked")?($(".dropdown-menu #apply-color-filter span").append('<i class="fa fa-spinner fa-spin" style="font-size:16px; margin-left:5px;"></i>'),calculateSearchResults($(this)),isFilterValueChecked=!0):(removeFilterCalculationResults($(this)),isFilterValueChecked=!0):$(this).prop("checked")?($(".dropdown-menu #apply-color-filter span").append('<i class="fa fa-spinner fa-spin" style="font-size:16px; margin-left:5px;"></i>'),calculateSearchResults($(this)),isFilterValueChecked=!0):(removeFilterCalculationResults($(this)),isFilterValueChecked=!0,modalFilterValuesApplied())},modalFilterValuesApplied=function(){var e=0;$(".dropdown-menu:visible").find("li input").each(function(){$(this).prop("checked")&&e++}),0==e&&$(".dropdown-menu:visible").find(".filter-clear").addClass("hidden")},calculateSearchResults=function(e,t,a,n){var o="";if(1==$(e).parents("#lens_color_filter").length)var i=$("#reloadLensColorsURL").val(),r=!0;else i=$("#calculateSearchResultsURL").val();var s=$("#selectedFacetsToURL").val(),l={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId};$(".filter-options input").prop("disabled",!0),$(".filter-options label").prop("disabled",!0),$(".dropdown-menu:visible").find(".filter-clear").removeClass("hidden");var d=$(e).data("value");if("polarized"==$(e).data("filter")&&"checked"==$(e).attr("checked")&&(null==d||void 0==d))for(var c=$("#polarized-filter-value").val().split(","),p=0;p<c.length;p++)c[p].includes("true")&&(d=c[p],$("#selectedFacetsToURL").val(s+"&facet="+d));""!=d&&void 0!=d?null!=s&&""!=s?(o=i+"&"+(s=s+"&facet="+d),$("#selectedFacetsToURL").val(s)):(s="?"+d,o=i+"&facet="+d,$("#selectedFacetsToURL").val("facet="+d)):o=void 0!=s&&null!=s?i+"&"+s:i,void 0!=r&&r?$("#LensColorsDisplay_Widget").fadeOut(500,function(){wc.render.updateContext("LensColorsDisplay_Context",{url:o}),$("#LensColorsDisplay_Widget").fadeIn(500)}):$.ajax({url:o,type:"POST",data:l}).done(function(e){var o="",i="";let r=$("<p></p>").html(e);var s=r.find("#count-results").val();globalItemsCountSearch=s,r.remove(),"0"==s?(o="No results found",filterPrescriptionControlHandler(!1,!0)):"1"==s?(o=s+" result for your search",i="View "+s+" frame",filterPrescriptionControlHandler(!1,!1)):(o=s+" results for your search",i="View "+s+" frames",filterPrescriptionControlHandler(!1,!1)),$(".filter-control-wrapper span.filter-apply").text(o),$(".filter-control-wrapper span#apply-combined-button").text(i),$(".filter-options input").prop("disabled",!1),$(".filter-options label").prop("disabled",!1),1!=t&&window.history.pushState(null,null,""),a&&filtersTrackingAnalytics(),"function"==typeof n&&n()})},removeFilterCalculationResults=function(e,t){var a="";if(1==$(e).parents("#lens_color_filter").length)var n=$("#reloadLensColorsURL").val(),o=!0;else n=$("#calculateSearchResultsURL").val();var i=$("#selectedFacetsToURL").val().split("&"),r="",s="",l={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId};$(".filter-options input").prop("disabled",!0),$(".filter-options label").prop("disabled",!0),$(e).hasClass("x-remove-filter")&&$(e).prevAll("input:first").prop("checked",!1);var d="facet="+$(e).data("value");if($(".dropdown-menu #apply-color-filter span").append('<i class="fa fa-spinner fa-spin" style="font-size:16px; margin-left:5px;"></i>'),"polarized"==$(e).data("filter")&&"checked"!=$(e).attr("checked"))for(var c=$("#polarized-filter-value").val().split(","),p=0;p<c.length;p++)c[p].includes("true")&&(d="facet="+c[p]);if(""!=d&&void 0!=d)if(null!=i&&""!=i){for(p=0;p<i.length;p++)i[p]!=d&&(r=r+"&"+i[p]);a=n+r,s=r.substring(r.indexOf("&")+1,r.length)}else a=n+"&"+s;$("#selectedFacetsToURL").val(s),void 0!=o&&o?$("#LensColorsDisplay_Widget").fadeOut(500,function(){wc.render.updateContext("LensColorsDisplay_Context",{url:a}),$("#LensColorsDisplay_Widget").fadeIn(500)}):$.ajax({url:a,type:"POST",data:l}).done(function(e){var a,n="";let o=$("<p></p>").html(e);var i=o.find("#count-results").val();globalItemsCountSearch=i,o.remove(),"0"==i?a="No results found":n=a="1"==i?"view "+i+" result":"view "+i+" results",$(".filter-control-wrapper span.filter-apply").text(a),$(".filter-control-wrapper span#apply-combined-button").text(n),$(".filter-options input").prop("disabled",!1),$(".filter-options label").prop("disabled",!1),window.history.pushState(null,null,""),t&&filtersTrackingAnalytics()})},applyFilterClickOutsideModal=function(){var e=$("#selectedFacetsToURL").val();isFilterValueChecked&&(1==$(".dropdown-menu.show").length&&($("#selectedFacetsToURL").val(e),categoryDisplayJS.applyFilter("#apply-color-filter span")),isFilterValueChecked=!1)},resetFiltersBar=function(){$("#gender_filter_women").visible()||($("#gender_filter_women, #gender_filter_women .nav-link").removeClass("hidden"),$("#gender_filter_women .nav-link").css("width",""),$("#gender_filter_women").animate({width:"toggle"},400)),$("#gender_filter_men .nav-link").visible()||($("#gender_filter_men").css("display","none"),$("#gender_filter_women").css("margin-left","0px"),$("#gender_filter_men .nav-link").show(),$("#gender_filter_men").animate({width:"toggle"},400)),1==$("#eyeglasses_filter").length&&1==$("#sunglasses_filter").length&&($("#eyeglasses_filter .nav-link").visible()||($("#category-pipe").show(),$("#eyeglasses_filter .nav-link").show(),$("#sunglasses_filter").css("margin-left","0px"),$("#eyeglasses_filter").animate({width:"toggle"},400)),$("#sunglasses_filter").visible()||($("#category-pipe").show(),$("#sunglasses_filter .nav-link").removeClass("hidden"),$("#sunglasses_filter .nav-link").show(),$("#sunglasses_filter").animate({width:"toggle"},400))),$("#filterBar").find("li.nav-item").each(function(){$("#"+this.id+" .nav-link").find("span").text($("#"+this.id+" .nav-link").data("text"))})};function setNextGenImgAkamaiIMUrlByClass(e,t){$("img ."+e).each(function(){var e=$(this).attr("data-nextgen");if(e.indexOf("assets")>0&&1==window.glassesFunctions.getNextGenEnabled()){e=cleanImgUrlFmt(e);var a=1==(!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime)),n=1==!!document.documentMode,o=1==(!n&&!!window.StyleMedia),i=1==(/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString()),r=1==(!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0);a||r?t?$(this).attr("src",e+"&fmt=webp-alpha"):$(this).attr("src",e+"&fmt=webp"):n||o?t?$(this).attr("src",e+"&fmt=jpegxr-alpha"):$(this).attr("src",e+"&fmt=jpegxr"):i?t?$(this).attr("src",e+"&fmt=jpeg2000-alpha"):$(this).attr("src",e+"&fmt=jpeg2000"):(console.log("no nextgen format"),$(this).attr("src",e))}else console.log("nextgen format not enabled or not akamai IM"),$(this).attr("src",e)})}function setNextGenImgAkamaiIMUrl(e,t){if(e.indexOf("assets")>0&&1==window.glassesFunctions.getNextGenEnabled()){e=cleanImgUrlFmt(e);var a=1==(!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime)),n=1==(!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0);return a||n?t?e+"&fmt=webp-alpha":e+"&fmt=webp":(console.log("no nextgen format"),e)}return console.log("nextgen format not enabled or not Akamai IM"),e}function priceFormatter(e,t){var a=e;return countDecimal(a)<2&&(a+="0"),a=t+" "+a.replace(".",",")}function countDecimal(e){return Math.floor(e.valueOf())===e.valueOf()?0:e.toString().split(".")[1].length||0}function cleanImgUrlFmt(e){if(e.indexOf("?")<0)e+="?";else for(var t=e.substring(e.indexOf("?")+1).split("&"),a=0;a<t.length;a++){if(t[a].startsWith("fmt="))if(a==t.length-1)e=e.substring(0,e.lastIndexOf("&fmt="));else e=e.substring(0,e.indexOf(t[a]))+e.substring(e.indexOf(t[a+1]))}return e}function loadBrand(){return $(".brand-landing-content").empty(),window.scrollTo(0,0),$("#brandsLoader").css("display","block"),!0}function loadHP(e){return event.preventDefault(),$("#catalogWrapperBoxDisplay_Widget").length>=1?($("#catalogWrapperBoxDisplay_Widget").empty(),$("#catalogWrapperBoxDisplay_Widget").append('<div class="catalog-wrapper-loader" style="padding: 23% 50%"></div>'),$(".catalog-wrapper-loader").append('<i class="fa fa-spinner fa-spin" style="font-size:48px;"></i>'),window.location.href=e):($(".brand-landing-content").empty(),$("#brandsLoader").css("display","block"),window.location.href=e),!1}var MOBILEDEVICE_COOKIE="WC_MOBILEDEVICEID",TABLET_DEVICEID="-31";function checkOrientationAndForce(){var e=$("meta[name=deviceFormatId]").attr("content");if(navigator.userAgent.toLowerCase().match(/(.*macintosh.*13.*)/)&&(e="-31"),null==$.cookie(MOBILEDEVICE_COOKIE+"_REAL")?e==TABLET_DEVICEID&&$.cookie(MOBILEDEVICE_COOKIE+"_REAL",e,{path:"/"}):e=$.cookie(MOBILEDEVICE_COOKIE+"_REAL"),e==TABLET_DEVICEID){if(isPortrait()&&"desktop"==site_layout||isLandscape()&&"mobile"==site_layout)return console.info("isLandscape: "+isLandscape()),console.info("isPortrait: "+isPortrait()),console.info("site_layout: "+site_layout),forceTabletLayout(),!1;$(window).off("orientationchange",forceTabletLayout).on("orientationchange",forceTabletLayout)}}function forceTabletLayout(e){console.info("Before the orientation change: WC_MOBILEDEVICEID = "+$.cookie("WC_MOBILEDEVICEID")),console.info("Before the orientation change: WC_MOBILEDEVICEID_REAL = "+$.cookie("WC_MOBILEDEVICEID_REAL")),isPortrait()?($.cookie(MOBILEDEVICE_COOKIE,"1",{path:"/"}),console.info("After the orientation change: WC_MOBILEDEVICEID = 1 - Force Mobile")):isLandscape()&&($.cookie(MOBILEDEVICE_COOKIE,"0",{path:"/"}),console.info("After the orientation change: WC_MOBILEDEVICEID = 0 - Force Desktop")),$("#spinnerLoader").show(),setTimeout(function(){window.location.reload(!0)},200)}function isLandscape(){return void 0!=window.orientation?90==window.orientation||-90==window.orientation:window.innerWidth>=window.innerHeight}function isPortrait(){return void 0!=window.orientation?0==window.orientation||180==window.orientation:window.innerHeight>window.innerWidth}function initMenuScripts(){initOpenAutomaticModal(),initPerfectScroll(),registerLazyLoadByClass("div.img.dots-loader"),void 0!=window.EmailSignupForm&&(EmailSignupForm.setupValidation(),EmailSignupForm.setupClickEvents()),RiaHelper.isInsuranceOn()&&($("#insurance-switch-menu").attr("checked",!0),$("#insurance-switch-lenses-step-1").attr("checked",!0),$("#insurance-switch-lenses-step-2").attr("checked",!0)),constants.ajaxParams.loggedIn&&($(".account-icon-circle").addClass("account-logged"),isMobile()?$(".header-menu-container .header-main-nav .mobile-nav-login-register-container").html("<svg class='account-icon' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M12 13C15.584 13 18.5 10.084 18.5 6.5C18.5 2.916 15.584 0 12 0C8.416 0 5.5 2.916 5.5 6.5C5.5 10.084 8.416 13 12 13ZM12 1C15.0325 1 17.5 3.4675 17.5 6.5C17.5 9.5325 15.0325 12 12 12C8.9675 12 6.5 9.5325 6.5 6.5C6.5 3.4675 8.9675 1 12 1Z'/><path d='M17.2175 15H6.7825C3.0365 15 0 18.492 0 22.8V23C0 23.5525 0.4475 24 1 24H23C23.5525 24 24 23.5525 24 23V22.8C24 18.492 20.9635 15 17.2175 15ZM23 23H1V22.8C1 19.0505 3.594 16 6.7825 16H17.2175C20.406 16 23 19.0505 23 22.8V23Z'/></svg><a class='hmc-mob-my-account' href='javascript:void(0)' rel='nofollow' onclick='openMyAccountModal();' aria-label='Login modal'>My Account</a>"):$(".header-menu-container .header-main-buttons .header-account-container a").attr("onclick","openMyAccountDirectly();")),0!=parseInt($("#cartQuantity").text())&&$(".header-cart-container .cart-icon-circle").addClass("cart-not-empty")}function loadFilterPrescriptionModal(){if($("#filter_by_prescription .dropdown-menu").length){var e={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId};$.ajax({url:getAbsoluteURL()+"AjaxFilterPrescriptionView",type:"GET",data:e}).done(function(e){$("#filter_by_prescription .dropdown-menu").html(e)}).fail(function(e){console.log(e),$("#filter_by_prescription .dropdown-menu").html(getAjaxErrorMessage())})}}function initGLTypeaheads(){var e=$(".gl-typeahead").not(":has(.gl-typeahead-box)");e.length&&e.each(function(e,t){$(t).glTypeaheadInit()})}function createMap(e){var t={};for(k=0;k<e.length;k++){t[e[k].identifier]=e[k]}return t}function divideUnisexFromGender(e,t){for(i=0;i<t.length;i++)t[i].attributes=createMap(t[i].attributes),t[i].currency=e,t[i].price[0].value!==t[i].price[1].value&&parseFloat(t[i].price[0].value)>parseFloat(t[i].price[1].value)&&(t[i].offerPrice=t[i].price[1].value),t[i].attributes.GENDER.values.length>1?(t[i].unisex=!0,arrUnisex.push(t[i]),arrToPrint.push(t[i])):1===t[i].attributes.GENDER.values.length&&(t[i].gender=!0,arrGender.push(t[i]),arrToPrint.push(t[i]))}function filtersTrackingAnalytics(){var e=$("#selectedFacetsToURL").val(),t=$("#selectedOrderByToURL").val();"&"==e.charAt(0)&&(e=e.substring(1));let a="",n=e.split("&");for(let e=0;e<n.length;e++){let t=n[e].replace(/facet=/g,"").split("%3A");if(void 0!=t[0]&&void 0!=t[1]){(t[1].includes("Men")||t[1].includes("Women"))&&(""!=a?a+="|Gender="+$("li#gender_filter_"+t[1].replace(/%22/g,"").toLowerCase()+" h3.nav-link").data("text"):a="Gender="+$("li#gender_filter_"+t[1].replace(/%22/g,"").toLowerCase()+" h3.nav-link").data("text"));var o=("li#brands_filter .filter-card-wrapper input[id='SBN_facet_"+t[1].replace(/%22/g,"")+"']").replace(/\+/g," ").replace(/%26/g,"&");$(o).length&&(""!=a?a+="|Brand="+t[1].replace(/%22/g,""):a="Brand="+t[1].replace(/%22/g,"")),(t[1].includes("true")||t[1].includes("false"))&&(""!=a?a+="|Polarized="+t[1].replace(/%22/g,""):a="Polarized="+t[1].replace(/%22/g,"")),$("span[data-value^='"+t[0]+"']").closest("li.nav-item").find("h3").length>0&&(a+=(""!=a?"|":"")+$("span[data-value^='"+t[0]+"']").closest("li.nav-item").find("h3").data("text").replace(/ /g,"").replace(/FrameColors/g,"FrameColor")+"="+t[1].replace(/%22/g,""))}}if(PrescriptionFilter.loadPrescription()){var i=PrescriptionFilter.loadPrescription(),r="";void 0!==i.CYL&&null!=i.CYL&&void 0!==i.CYL.OD&&null!=i.CYL.OD&&(r=i.CYL.OD);var s="";void 0!==i.CYL&&null!=i.CYL&&void 0!==i.CYL.OS&&null!=i.CYL.OS&&(s=i.CYL.OS);var l="";void 0!==i.SPH&&null!=i.SPH&&void 0!==i.SPH.OD&&null!=i.SPH.OD&&(l=i.SPH.OD);var d="";void 0!==i.SPH&&null!=i.SPH&&void 0!==i.SPH.OS&&null!=i.SPH.OS&&(d=i.SPH.OS);var c="Prescription=SPHOD:"+l+",SPHOS:"+d+",CYLOD:"+r+",CYLOS:"+s;a+=""!=a?"|"+c:c}var p="";if(t){var u=t.split("=")[1];2==u?p="Newest":3==u?p="Price+Low+To+High":4==u&&(p="Price+High+To+Low")}else p="Best+sellers";""!=a?a+="|OrderBy="+p:a="OrderBy="+p,e=a;try{var h={id:"SearchFilterUpdated",Search_ResultItemsQnt:globalItemsCountSearch,Search_FacetValues_String:e};tealium_data2track.push(h)}catch(e){h={id:"SearchPageReady-Tentative",Error_Source:"Search",Error_Code:"Filter Applied"};tealium_data2track.push(h)}}function getLocalClientDate(e){var t=e.replace(" ","T")+"Z",a=new Date(t),n=new Intl.DateTimeFormat("en",{year:"numeric"}).format(a);return new Intl.DateTimeFormat("en",{month:"long"}).format(a)+" "+new Intl.DateTimeFormat("en",{day:"numeric"}).format(a)+", "+n}function getAjaxErrorMessage(){return'<div style="width: 990px; margin: 0 auto; padding: 80px 0;"><h1>Oops... Something went wrong!</h1><p style="margin: 0 0 20px; font-size: 11px;">Please try to reload the page or check back later.</p></div>'}function openPaymentModalAffirmError(e,t,a){var n=[];n.storeId=e,n.catalogId=t,n.langId=a,n.URL="",n.orderId=".",n.calculationUsageId="-1,-5,-6,-7",n.remerge="***",n.check="*",n.allocate="***",n.backorder="***",n.orderItemId_0=$("#orderitem_0").val(),n.guestChkout="1",wc.service.invoke("AjaxOrderChangeServiceItemUpdate",n),showAddressesPage();var o=setInterval(function(){if($("#processToPayment").length>0){$("#news").prop("checked",!1),$(".check.newsletter .order-shipping-checkbox.iconglasses-icon-checked").removeClass("iconglasses-icon-checked").addClass("iconglasses-icon-unchecked"),showLoader("#OrderPaymentDisplay"),showPaymentPage(),$("#genericMsgErrorAddress").hide();$("#shippingCreateEditArea1");$("span.warning").remove(),$(".recheck").removeClass("recheck");var e="AddShippingAddressInCheckOut",t="shippingCreateEditArea1";"sameAsBilling"==$("[name='SameShippingAndBillingAddressCustom']:checked").val()&&(e="AddBillingShippingAddressInCheckOut",t="shippingCreateEditArea1");var a="";if($("#AddressValidationCreateEditArea1").is(":visible")){var n=$('input[name="AddressValidationName_1"]:checked').val();"AddressValidation_1"!=n&&(a=n)}$("#WC_UnregisteredCheckout_div_14");$("#AddressValidationCreateEditArea1").fadeOut(300),AddressHelper.saveAddressCheckout(e,t,a),clearInterval(o)}},100),i=setInterval(function(){$(".inventory-block-message-container.hide:has(> #affirmMsgErrorPayment), #affirmMsgErrorPayment.error.hide").length>0&&($(".inventory-block-message-container.hide:has(> #affirmMsgErrorPayment), #affirmMsgErrorPayment.error.hide").removeClass("hide"),clearInterval(i))},500)}function toCamelCase(e){return(" "+e).toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,function(e,t){return t.toUpperCase()})}function initPrescriptionFilter(){if($("#filter_by_prescription").length){var e=PrescriptionFilter.loadPrescription();if(null!=e?($("#sphereOD").val(e.SPH.OD),$("#sphereOS").val(e.SPH.OS),$("#sphereOD").data("selected",e.SPH.OD),$("#sphereOS").data("selected",e.SPH.OS),null!=e.CYL&&($("#cylinderOD").val(e.CYL.OD),$("#cylinderOS").val(e.CYL.OS),$("#cylinderOD").data("selected",e.CYL.OD),$("#cylinderOS").data("selected",e.CYL.OS)),$("#filter_by_prescription h3").addClass("active"),$(".clear-all-right-button").removeClass("hidden")):$("#filter_by_prescription input.gl-symmetric-select").val("- -"),initGLSymmetricSelects(),$("#sphereOD, #sphereOS, #cylinderOD, #cylinderOS").on("change",function(e){isValidFilterPrescription()&&calculateSearchResultsWithPrescription(e.target)}),!isValidFilterPrescription())return;calculateSearchResultsWithPrescription($("#sphereOD")),filterPrescriptionControlHandler(!1,!1)}}function isValidFilterPrescription(e){var t=!0;return t=$("#sphereOS").glSymmetricSelectValidate(e)&&t,t=$("#sphereOD").glSymmetricSelectValidate(e)&&t}function filterPrescriptionControlHandler(e,t){if($("#filter_by_prescription .sph-cyl-error").hide(),t){try{var a={id:"Error",Error_Source:"User",Error_Code:"Prescription filter",Error_Details:"SPHOD:"+$("#sphereOD").val()+",SPHOS:"+$("#sphereOS").val()+",CYLOD:"+$("#cylinderOD").val()+",CYLOS:"+$("#cylinderOS").val(),Error_Message:"Sorry! None of our frames support your prescription values."};tealium_data2track.push(a)}catch(e){a={id:"Prescription filter-Tentative",Error_Source:"User",Error_Code:"Prescription filter Tentative"};tealium_data2track.push(a)}$("#filter_by_prescription .sph-cyl-no-results").show(),$("#filter_by_prescription .filter-control-wrapper span#apply-combined-button").hide()}else e?($("#filter_by_prescription .sph-cyl-not-valid").show(),$("#filter_by_prescription .filter-control-wrapper span#apply-combined-button").show()):$("#filter_by_prescription .filter-control-wrapper span#apply-combined-button").show()}function calculateSearchResultsWithPrescription(e){PrescriptionFilter.savePrescriptionPreview(),calculateSearchResults(e,!1,!1,calculateSearchResultsWithPrescriptionPost)}function calculateSearchResultsWithPrescriptionPost(){PrescriptionFilter.restorePrescription()}function applyPrescriptionFilter(e,t){if(!isValidFilterPrescription("error"))return event.stopPropagation(),void filterPrescriptionControlHandler(!0,!1);$(".clear-all-right-button").removeClass("hidden"),PrescriptionFilter.savePrescription(),categoryDisplayJS.applyFilter(e)}function clearPrescriptionFilter(e,t){$("#clear-combined-button").addClass("hidden"),$(".clear-all-right-button").addClass("hidden"),PrescriptionFilter.clearPrescription(),categoryDisplayJS.applyFilter(e)}window.TealiumConsentPrivacyLink=function(){window.location.assign("/gl-us/privacy-policy")},$(window).load(function(){if($.ajaxSetup({cache:!0}),$(".header-sign-in-menu-modal-container").length){var e={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId};$.ajax({url:getAbsoluteURL()+"AjaxMenuView",type:"GET",data:e}).done(function(e){$(".header-sign-in-menu-modal-container").html(e),initMenuScripts()}).fail(function(e){console.log(e),$(".header-sign-in-menu-modal-container").html(getAjaxErrorMessage())})}if($(".modal-search-container").length){e={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId};$.ajax({url:getAbsoluteURL()+"AjaxSearchView",type:"GET",data:e}).done(function(e){$(".modal-search-container").html(e)}).fail(function(e){console.log(e),$(".modal-search-container").html(getAjaxErrorMessage())})}loadFilterPrescriptionModal()}),$(document).ready(function(){$("#use-insurance-modal").on("change","#insuranceProvider",function(e){"VERSANT"==$(this).val()||"NVA"==$(this).val()?$(".input-plan-container").hide():$(".input-plan-container").show()})}),$(document).ready(function(){initGLTypeaheads(),$(document).on("click",".gl-typeahead span.gl-typeahead-arrow",function(e){$(this).closest(".gl-typeahead").find("input.gl-typeahead-select").focus()}),$(document).on("click",".gl-typeahead span.gl-typeahead-clean",function(e){$(this).closest(".gl-typeahead").find("input.gl-typeahead-select").val("").focus(),$(this).closest(".gl-typeahead").glTypeaheadFilterOptions(""),$(this).closest(".gl-typeahead").glTypeaheadShowButton(".gl-typeahead-arrow")}),$(document).on("keypress",".gl-typeahead span.gl-typeahead-clean",function(e){13==e.which&&$(this).click()}),$(document).on("click",".gl-typeahead span.gl-typeahead-check",function(e){$(this).closest(".gl-typeahead").find("input.gl-typeahead-select").focus()});var e="click";(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&(e="mousedown"),$(document).on(e,".gl-typeahead .gl-typeahead-box span",function(e){var t=$(this).text();$(this).closest(".gl-typeahead").find("input.gl-typeahead-select").val(t),$(this).closest(".gl-typeahead").find("input.gl-typeahead-select").glTypeaheadApplyValue(),$(this).closest(".gl-typeahead-box").find("span.active").removeClass("active"),$(this).addClass("active"),$(this).closest(".gl-typeahead").glTypeaheadFilterOptions(""),$(document.activeElement).blur()}),$(document).on("keydown",".gl-typeahead input.gl-typeahead-select",function(t){var a=$(this).siblings(".gl-typeahead-box");if(13==t.keyCode)return t.preventDefault(),$(this).siblings(".gl-typeahead-box").find("span.active").length?"mousedown"==e?$(this).siblings(".gl-typeahead-box").find("span.active").eq(0).mousedown():$(this).siblings(".gl-typeahead-box").find("span.active").eq(0).click():$(this).glTypeaheadApplyValue(),void $(this).siblings(".gl-typeahead-check").focus();if(38==t.keyCode){t.preventDefault();var n=0;return a.find("span.active").length&&(n=a.find("span").index(a.find("span.active").get(0))-1),a.find("span.active").removeClass("active"),a.find("span").eq(n).addClass("active"),void a.scrollTop(a.find("span.active").outerHeight()*n-150)}if(40==t.keyCode){t.preventDefault();n=0;return a.find("span.active").length&&(n=a.find("span").index(a.find("span.active").get(0))+1),a.find("span.active").removeClass("active"),a.find("span").eq(n).addClass("active"),void a.scrollTop(a.find("span.active").outerHeight()*n-150)}}),$(document).on("keyup",".gl-typeahead input.gl-typeahead-select",function(e){38!=e.keyCode&&40!=e.keyCode&&($(this).closest(".gl-typeahead").glTypeaheadFilterOptions($(this).val()),$(this).val()?$(this).closest(".gl-typeahead").glTypeaheadShowButton(".gl-typeahead-clean"):$(this).closest(".gl-typeahead").glTypeaheadShowButton(".gl-typeahead-arrow"))}),$(document).on("focusout",".gl-typeahead input.gl-typeahead-select",function(e){$(this).glTypeaheadApplyValue()})}),$.validator.addMethod("glTypeaheadValidation",function(e,t){var a=$(t).closest(".gl-typeahead").data("source");if(window[a]){var n=window[a];if((n=n.filter(function(t){return t.name.toLowerCase()==e.toLowerCase().trim()})).length)return!0}return!1}),$.fn.glTypeaheadShowButton=function(e){$(this).find(".gl-typeahead-clean").hide(),$(this).find(".gl-typeahead-arrow").hide(),$(this).find(".gl-typeahead-check").hide(),$(this).find(e).show()},$.fn.glTypeaheadFilterOptions=function(e){var t=$(this).data("source");if(window[t]){var a=window[t];a=a.filter(function(t){return-1!==t.name.toLowerCase().indexOf(e.toLowerCase().trim())}),$(this).glTypeaheadRender(a)}},$.fn.glTypeaheadRender=function(e){$(this).find(".gl-typeahead-box").html("");var t=null;if(e.length)for(var a=0;a<e.length;a++)null!=t&&e[a].priority>t&&$(this).find(".gl-typeahead-box").append("<hr/>"),$(this).find(".gl-typeahead-box").append("<span>"+e[a].name+"</span>"),t=e[a].priority;else $(this).find(".gl-typeahead-box").append("<p>No match found</p>"),$(this).find(".gl-typeahead-box").append("<hr/>"),$(this).find(".gl-typeahead-box").append("<p>Your insurance might be out of network, check information below.</p>")},$.fn.glTypeaheadApplyValue=function(){var e=$(this).closest(".gl-typeahead").data("source");if(window[e]){var t=window[e],a=$(this).val().trim();a.length?1==(t=t.filter(function(e){return e.name.toLowerCase()==a.toLowerCase()})).length?($(this).siblings(".gl-typeahead-value").val(t[0].provider).change(),$(this).closest(".gl-typeahead").glTypeaheadShowButton(".gl-typeahead-check")):($(this).siblings(".gl-typeahead-value").val("").change(),$(this).closest(".gl-typeahead").glTypeaheadShowButton(".gl-typeahead-clean")):$(this).closest(".gl-typeahead").glTypeaheadShowButton(".gl-typeahead-arrow")}},$.fn.glTypeaheadAddError=function(e){$(this).hasClass("gl-typeahead-select")&&($(this).addClass("border-red"),$(this).after(e))},$.fn.glTypeaheadRemoveError=function(){$(this).hasClass("gl-typeahead-select")&&$(this).removeClass("border-red")},$.fn.glTypeaheadInit=function(){$(this).append('<span class="gl-typeahead-arrow"><i class="fa fa-chevron-down"></i></span>'),$(this).append('<span class="gl-typeahead-clean" style="display: none;"><i class="fa fa-times"></i></span>'),$(this).append('<span class="gl-typeahead-check" style="display: none;" tabindex="0"><i class="fa fa-check"></i></span>'),$(this).append('<div class="gl-typeahead-box"></div>');var e=$(this).data("source");if(window[e]){var t=window[e];$(this).glTypeaheadRender(t)}},function(e){e.URLSearchParams=e.URLSearchParams||function(e){var t=this;t.searchString=e,t.get=function(e){var a=new RegExp("[?&]"+e+"=([^&#]*)").exec(t.searchString);return null==a?null:decodeURI(a[1])||0}}}(window);var PrescriptionFilter={map:[],loadPrescription:function(){var e=null;if(null!=$.cookie("prescriptionObject"))try{e=JSON.parse($.cookie("prescriptionObject"))}catch(e){console.log(e)}return e},loadFramePrescription:function(e){return this.map[e]},savePrescription:function(e){try{var t,a,n,o;null!=e?(null!=e.CYL&&(t=parseFloat(e.CYL.OS),a=parseFloat(e.CYL.OD)),n=parseFloat(e.SPH.OS),o=parseFloat(e.SPH.OD)):(t=parseFloat($("#cylinderOS").val()),a=parseFloat($("#cylinderOD").val()),n=parseFloat($("#sphereOS").val()),o=parseFloat($("#sphereOD").val()));var i={OD:o,OS:n},r=null;isNaN(t)||isNaN(a)||(r={OD:a,OS:t});var s={SPH:i,CYL:r};$.cookie.raw=!0,$.cookie("prescriptionObject",JSON.stringify(s),{expires:7,path:"/"})}catch(e){return console.log(e),!1}return!0},saveFramePrescription:function(e,t){return this.map[t]=e,this.savePrescription(e)},loadPrescriptionPreview:function(){var e=null;if(null!=$.cookie("_prescriptionObject"))try{e=JSON.parse($.cookie("_prescriptionObject"))}catch(e){console.log(e)}return e},savePrescriptionPreview:function(e){var t=this.loadPrescription();$.cookie.raw=!0,$.cookie("_prescriptionObject",JSON.stringify(t),{expires:7,path:"/"}),this.savePrescription(e)},restorePrescription:function(e){null==e&&(e=this.loadPrescriptionPreview()),this.clearPrescription(),null!=e&&this.savePrescription(e)},checkAvailableFrames:function(e,t){return null},clearPrescription:function(){return $.cookie("prescriptionObject",null,{path:"/"}),$.cookie("_prescriptionObject",null,{path:"/"}),!0}};function initGLSymmetricSelects(e){var t=null!=e?e:"gl-symmetric-select";$("."+t).filter(function(){return!$(this).siblings(".gl-symmetric-select-box").length}).each(function(e,a){initGLSymmetricSelect(a,t)})}function initGLSymmetricSelect(e,t){$(e).after('<div class="gl-symmetric-select-box"></div>');for(var a=$(e).siblings(".gl-symmetric-select-box"),n=$(e).data("min"),o=$(e).data("max"),i=$(e).data("step"),r=$(e).data("selected"),s=n;s<=o;s+=i){if(0==s)var l=s.toFixed(2),d=s.toFixed(2);else l="+"+s.toFixed(2),d=(-s).toFixed(2);var c=-s==r?"active":"",p=s==r?"active":"";a.append('<span class="gl-symmetric-select-option '+c+'" data-value="'+-s+'">'+d+"</span>"),a.append('<span class="gl-symmetric-select-option '+p+'" data-value="'+s+'">'+l+"</span>")}$(e).after('<img class="gl-symmetric-select-arrow" src="https://assets.glasses.com/extra/image/Glasses/GENERAL/arrow-down.png" />'),initGLSymmetricSelectEvents(e,t),null!=r?a.find(".gl-symmetric-select-option.active")[0].click():$(e).val("- -")}function initGLSymmetricSelectEvents(e,t){var a="click";(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&(a="mousedown"),$(e).siblings(".gl-symmetric-select-box").off(a).on(a,".gl-symmetric-select-option",function(e){var a=$(this).text();console.log(a),$(this).closest(".gl-symmetric-select-box").siblings("input."+t).val(a),$(this).closest(".gl-symmetric-select-box").siblings("input."+t).trigger("change"),$(this).closest(".gl-symmetric-select-box").siblings("input."+t).removeClass("error"),$(this).closest(".gl-symmetric-select-box").find("span.active").removeClass("active"),$(this).addClass("active"),$(document.activeElement).blur()}),$(e).siblings(".gl-symmetric-select-arrow").off(a).on(a,function(e){$(this).siblings("input."+t).focus()}),$(e).off("keydown").on("keydown",function(e){var t=$(this).siblings(".gl-symmetric-select-box");if(13==e.keyCode)return e.preventDefault(),void(t.find("span.active").length&&("mousedown"==a?t.find("span.active").eq(0).mousedown():t.find("span.active").eq(0).click()));if(38==e.keyCode){e.preventDefault();var n=0;return t.find("span.active").length&&(n=t.find("span").index(t.find("span.active").get(0))-2),t.find("span.active").removeClass("active"),t.find("span").eq(n).addClass("active"),void t.scrollTop(t.find("span.active").outerHeight()*(n/2)-150)}if(40==e.keyCode){e.preventDefault();n=0;return t.find("span.active").length&&(n=t.find("span").index(t.find("span.active").get(0))+2),t.find("span.active").removeClass("active"),t.find("span").eq(n).addClass("active"),void t.scrollTop(t.find("span.active").outerHeight()*(n/2)-150)}if(37==e.keyCode){e.preventDefault();n=0;return t.find("span.active").length&&(n=t.find("span").index(t.find("span.active").get(0))-1),t.find("span.active").removeClass("active"),t.find("span").eq(n).addClass("active"),void t.scrollTop(t.find("span.active").outerHeight()*(n/2)-150)}if(39==e.keyCode){e.preventDefault();n=0;return t.find("span.active").length&&(n=t.find("span").index(t.find("span.active").get(0))+1),t.find("span.active").removeClass("active"),t.find("span").eq(n).addClass("active"),void t.scrollTop(t.find("span.active").outerHeight()*(n/2)-150)}e.preventDefault()})}function openDetailsHiddenPanel(e){$(e.target).toggleClass("open"),$(e.target).next(".details-hidden-panel").toggleClass("open")}function glVideoClick(e){var t=$(e.target).closest(".gl-video").find("video"),a=$(e.target).closest(".gl-video").find(".gl-video-play");0!=t.length&&(t[0].paused?(t[0].play(),a.hide()):(t[0].pause(),a.show()))}function loadLensFromCart(e,t){window.riaInProgress=!1,window.productDetails.setCurrentProductId(e),window.productDetails.setCurrentSubProductId(t),initFrameLenses(e,t)}function editFrameLensFromCart(e,t,a,n,o){frameCatentryId=t,window.cartModeOrderItemEdited={orderItemId:n,orderIndex:o},window.currentOrderId=a;var i=initRXC(e,t);rxcWidget=RXC.rxcWidget.new(i),$("#rxcApp").removeClass("rxc-closed").addClass("rxc-opened"),rxcWidget.render()}$(document).ready(function(){initGLSymmetricSelects()}),$.fn.glSymmetricSelectValidate=function(e){return!isNaN(parseFloat($(this).val()))||($(this).addClass(e),!1)};
//# sourceMappingURL=global_redesign_unified.js.map