var m1;dojo.require("dojo.dnd.move"),dojo.require("dijit.Dialog"),dojo.require("dojo._base.event");var replaceOrderItemId,responseJSON,nodeId="",origProductID="",initPopup=function(){},changeAttrId="",changeContractId="",selectedSwatchCatEntryID="",oldSelectedSwatchCatEntryID="",selectedDivId="",oldDivId="";function setUpdateOrderItemIdsForItem(e,t){changeAttrId=e,""!=t&&(changeContractId="B2BContractSelectExt_id_"+t)}function showPopupButton(e){null!=document.getElementById("popupButton_"+e)&&"undefined"!=document.getElementById("popupButton_"+e)&&(document.getElementById("popupButton_"+e).style.visibility="visible")}function hidePopupButton(e){null!=document.getElementById("popupButton_"+e)&&"undefined"!=document.getElementById("popupButton_"+e)&&(document.getElementById("popupButton_"+e).style.visibility="hidden")}function shiftTabHidePopupButton(e,t){t.shiftKey&&dojo.keys.TAB&&hidePopupButton(e)}function showPopup(e,t,n,o,a,d){if(null==t||null!=t&&"keypress"!=t.type||null!=t&&"keypress"==t.type&&13==t.keyCode){resetPopUp(),"undefined"!=typeof isBrazilStore&&isBrazilStore&&(this.nodeId=o),null==a&&(a=new popupActionProperties),a.showAddToCart?document.getElementById("addToCartAjaxButton")?document.getElementById("addToCartAjaxButton").style.display="block":document.getElementById("addToCartButton")&&(document.getElementById("addToCartButton").style.display="block"):document.getElementById("addToCartAjaxButton")?document.getElementById("addToCartAjaxButton").style.display="none":document.getElementById("addToCartButton")&&(document.getElementById("addToCartButton").style.display="none"),a.showWishList?document.getElementById("addToWishListLinkAjax")?document.getElementById("addToWishListLinkAjax").style.display="block":document.getElementById("addToWishListLink")&&(document.getElementById("addToWishListLink").style.display="block"):document.getElementById("addToWishListLinkAjax")?dojo.style("addToWishListLinkAjaxDivContainer","display","none"):document.getElementById("addToWishListLink")&&dojo.style("addToWishListLinkContainer","display","none"),a.showProductCompare&&document.getElementById("compare")?document.getElementById("addToCompareLink")&&(document.getElementById("addToCompareLink").style.display="block",dojo.style("addToCompareLinkContainer","display","block")):document.getElementById("addToCompareLink")&&dojo.style("addToCompareLinkContainer","display","none"),a.showReplaceCartItem?(document.getElementById("replaceCartItemAjax")?(dojo.style("replaceCartItemAjaxContainer","display","block"),document.getElementById("replaceCartItemAjax").style.display="block"):document.getElementById("replaceCartItemNonAjax")&&(dojo.style("replaceCartItemNonAjaxContainer","display","block"),document.getElementById("replaceCartItemNonAjax").style.display="block"),document.getElementById("addToNewRequisitionList")&&dojo.style("addToNewRequisitionListContainer","display","none"),document.getElementById("addToExistingRequisitionList")&&dojo.style("addToExistingRequisitionListContainer","display","none")):document.getElementById("replaceCartItemAjax")?dojo.style("replaceCartItemAjaxContainer","display","none"):document.getElementById("replaceCartItemNonAjax")&&dojo.style("replaceCartItemNonAjaxContainer","display","none"),a.showAddToCart||a.showWishList?document.getElementById("productPopUpQty")&&(document.getElementById("productPopUpQty").disabled=!1):document.getElementById("productPopUpQty")&&(document.getElementById("productPopUpQty").disabled=!0),document.getElementById("productPopUpQty").value=null==d?1:d,dijit.byId("second_level_category_popup").closeButtonNode.style.display="none",closeAllDialogs(),dijit.byId("second_level_category_popup").show(),dojo.query(".dijitDialogUnderlayWrapper",document).forEach(function(e){e.style.display="none"});var i={};i.storeId=CommonContextsJS.storeId,i.langId=CommonContextsJS.langId,i.catalogId=CommonContextsJS.catalogId,i.productId=e,dojo.publish("ajaxRequestInitiated"),dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByID",handleAs:"json-comment-filtered",content:i,service:this,load:populatePopUp,error:function(e,t){console.debug("CatalogEntryThumbnailDisplay.showPopup: Unexpected error occurred during an xhrPost request."),dojo.publish("ajaxRequestCompleted")}})}}function populatePopUp(e,t){responseJSON=e,categoryDisplayJS.setEntitledItemJsonObject(e.productAttributes);var n=e.catalogEntry.catalogEntryIdentifier.uniqueID,o=!1,a=!1,d="";"ProductBean"==e.catalogEntry.catalogEntryTypeCode&&(o=!0,null!=dojo.byId("catalogEntryTypeCode")&&void 0!=dojo.byId("catalogEntryTypeCode")&&(dojo.byId("catalogEntryTypeCode").value="ProductBean"),e.singleSKUProduct_catEntryId&&""!=e.singleSKUProduct_catEntryId&&(a=!0,d=e.singleSKUProduct_catEntryId));var i=!1;"BundleBean"==e.catalogEntry.catalogEntryTypeCode&&(i=!0);var r=!1;"ItemBean"==e.catalogEntry.catalogEntryTypeCode&&(r=!0,null!=dojo.byId("catalogEntryTypeCode")&&void 0!=dojo.byId("catalogEntryTypeCode")&&(dojo.byId("catalogEntryTypeCode").value="ItemBean"));var l=!1;"PackageBean"==e.catalogEntry.catalogEntryTypeCode&&(l=!0);var c=!1;"DynamicKitBean"==e.catalogEntry.catalogEntryTypeCode&&(c=!0);var s=!1;e.catalogEntry.showDynamicKit&&(s=!0);var u=!1,p=!1,y=!1,m="1"==e.catalogEntry.buyable;c&&s&&(e.catalogEntry.components.length>0&&(y=!0),u=m&&e.catalogEntry.components.length>0&&e.catalogEntry.hasPriceForDK,p=m&&e.catalogEntry.isDKConfigurable),document.getElementById("productIdQuickInfo").innerHTML=n,document.getElementById("productName").innerHTML=e.catalogEntry.description[0].name;var g=dojo.byId("baseUrlImageDir").innerHTML;if(e.catalogEntry.description[0].fullImage!=e.catalogEntry.objectPath?document.getElementById("productFullImage").src=e.catalogEntry.description[0].fullImage:document.getElementById("productFullImage").src=g+"images/NoImageIcon.jpg","undefined"!=typeof isBrazilStore&&isBrazilStore){origProductID=o?e.productAttributes[0].catentry_id:nodeId.match(/\d+/)[0];var I=dojo.byId("WC_RightSidebarESpotDisplay_"+origProductID+"_div_1_BrazilFeaturedNonPaymentPromotion");if(null!=I&&0!=dojo.query(".discount_price",I).length){dojo.style(dojo.byId("productPrice"),"display","none");dojo.byId("WC_PromotionDiscountDisplay_"+origProductID+"_0");dojo.addClass(dojo.byId("WC_PromotionDiscountDisplay_"+origProductID+"_0"),"promo_desc"),dojo.byId("BrazilFeaturedNonPaymentPromotion").innerHTML=I.innerHTML}else if(e.catalogEntry.offerPrice&&(document.getElementById("productPrice").innerHTML=e.catalogEntry.offerPrice,dojo.style(dojo.byId("productPrice"),"display","inline"),!dojo.isIE)){var E=dojo.byId("productQuantity");dojo.style(E,"marginTop","-30px")}}else c&&!y?document.getElementById("productPrice").innerHTML=e.catalogEntry.pricePending:e.catalogEntry.offerPrice&&(document.getElementById("productPrice").innerHTML=e.catalogEntry.offerPrice);if("undefined"!=typeof isBrazilStore&&isBrazilStore){var b=dojo.byId("WC_CatalogEntryFeaturedInstallmentOption_"+origProductID+"_div");if(null!=b)0!=b.innerHTML.replace(/^\s+|\s+$/g,"").length?(dojo.byId("BrazilCatalogEntryFeaturedInstallmentOption").innerHTML=b.innerHTML,dojo.style(dojo.byId("promoDetails"),"display","inline")):dojo.style(dojo.byId("BrazilCatalogEntryFeaturedInstallmentOption"),"display","none")}document.getElementById("productLongDescription").innerHTML=e.catalogEntry.description[0].longDescription+"<br />";var f="";for(var B in e.catalogEntryAttributes.attributes)"Descriptive"==e.catalogEntryAttributes.attributes[B].usage&&(f=f+e.catalogEntryAttributes.attributes[B].name+" : ",null!=e.catalogEntryAttributes.attributes[B].value?f=f+e.catalogEntryAttributes.attributes[B].value.value+"<br />":f+="<br />");if(document.getElementById("productDescriptiveAttributes").innerHTML=f,document.getElementById("productSKUValue").innerHTML=e.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber,document.getElementById("productMoreInfoLink").href=e.catalogEntryURL,"undefined"!=typeof isBrazilStore&&isBrazilStore){var h=dojo.byId("free_shipping_promotion_div"),v=dojo.byId("WC_RightSidebarESpotDisplay_"+origProductID+"_div_1_BrazilFeaturedShippingPromotion");null!=h&&null!=v&&(h.innerHTML=v.parentNode.innerHTML+"<br />")}else for(var B in e.catalogEntryPromotions)document.getElementById("productPromotions").innerHTML=e.catalogEntryPromotions[B]+"<br />";if(null!=document.getElementById("selectedAttr_"+replaceOrderItemId))var A=document.getElementById("selectedAttr_"+replaceOrderItemId).value.replace(/'/g,"&#039;").split("|");categoryDisplayJS.moreInfoUrl="ProductDisplay?storeId="+storeId+"&catalogId="+catalogId+"&langId="+langId+"&productId="+n;var C="",T="",j="",L="",_="",P=new Array,x=0;for(var B in e.catalogEntryAttributes.attributes)"Defining"==e.catalogEntryAttributes.attributes[B].usage&&(null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsFulfillmentFrequencyAttrName?C=e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;"):null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsPaymentFrequencyAttrName?j=e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;"):null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsTimePeriodAttrName&&(_=e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")));if(""!=C&&""!=j)for(var B in e.productAttributes){var S=e.productAttributes[B].Attributes;for(attributeName in S){var D=attributeName.split("_");D[0]==C?T=D[1]:D[0]==j?L=D[1]:D[0]==_&&(P[x]=D[1],x++)}}var k="";for(var B in e.catalogEntryAttributes.attributes)if("Defining"==e.catalogEntryAttributes.attributes[B].usage)if(o)if(null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsFulfillmentFrequencyAttrName)categoryDisplayJS.setSelectedAttribute(C,T),categoryDisplayJS.changePrice("entitledItem_"+n,!0,!1),updateMoreInfoUrl();else if(null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsPaymentFrequencyAttrName)categoryDisplayJS.setSelectedAttribute(j,L),categoryDisplayJS.changePrice("entitledItem_"+n,!0,!1),updateMoreInfoUrl();else{for(var w in k=(k=(k=k+'<label for="attrValue_'+B+'" class="nodisplay">'+e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")+document.getElementById("requiredFieldText").innerHTML+'</label><span class="required-field">* </span><span>'+e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")+" : </span>")+'<select name="attrValue" class="drop_down" id="attrValue_'+B+'" onChange="JavaScript:categoryDisplayJS.setSelectedAttributeJS(\''+e.catalogEntryAttributes.attributes[B].name.replace("'","\\'")+"',this.options[this.selectedIndex].value);categoryDisplayJS.changePrice('entitledItem_"+n+"',true,false);updateMoreInfoUrl();\">")+'<option value="">'+document.getElementById("selectText").innerHTML+"</option>",e.catalogEntryAttributes.attributes[B].allowedValue){var J=e.catalogEntryAttributes.attributes[B].allowedValue[w].value,N="";if(null!=document.getElementById("selectedAttr_"+replaceOrderItemId))for(var U=0;U<A.length;U++)if(e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")==A[U]){N=U+1;break}if(null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsTimePeriodAttrName){for(var M=!1,F=0;F<P.length;F++)if(e.catalogEntryAttributes.attributes[B].allowedValue[w].value==P[F]){M=!0;break}var q="attribute_UOM_";if(e.catalogEntryAttributes.attributes[B].allowedValue[w].extendedValue)for(var U in e.catalogEntryAttributes.attributes[B].allowedValue[w].extendedValue)"UnitOfMeasure"==e.catalogEntryAttributes.attributes[B].allowedValue[w].extendedValue[U].key&&(q+=e.catalogEntryAttributes.attributes[B].allowedValue[w].extendedValue[U].value);if(J=document.getElementById(q).innerHTML.replace("{0}",J),M)if(null!=document.getElementById("selectedAttr_"+replaceOrderItemId)&&e.catalogEntryAttributes.attributes[B].allowedValue[w].value==A[N]){var O="selected";categoryDisplayJS.setSelectedAttribute(e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;"),A[N]),categoryDisplayJS.changePrice("entitledItem_"+n,!0,!1),updateMoreInfoUrl(),k=k+'<option value="'+e.catalogEntryAttributes.attributes[B].allowedValue[w].value.replace('"',"inches")+'"selected='+O+">"+J+"</option>"}else k=k+'<option value="'+e.catalogEntryAttributes.attributes[B].allowedValue[w].value.replace('"',"inches")+'">'+J+"</option>"}else if(null!=document.getElementById("selectedAttr_"+replaceOrderItemId)&&e.catalogEntryAttributes.attributes[B].allowedValue[w].value==A[N]){O="selected";categoryDisplayJS.setSelectedAttribute(e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;"),A[N]),categoryDisplayJS.changePrice("entitledItem_"+n,!0,!1),updateMoreInfoUrl(),k=k+'<option value="'+e.catalogEntryAttributes.attributes[B].allowedValue[w].value.replace('"',"inches")+'"selected='+O+">"+J+"</option>"}else k=k+'<option value="'+e.catalogEntryAttributes.attributes[B].allowedValue[w].value.replace('"',"inches")+'">'+J+"</option>"}k+="</select><br />"}else if(null==e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier||e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier!=subsFulfillmentFrequencyAttrName&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier!=subsPaymentFrequencyAttrName){J=e.catalogEntryAttributes.attributes[B].value.value;k=k+e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")+" : "+J+"<br />"}else;if(""!=k&&(k+="<br />"),o&&!a&&(document.getElementById("productAttributes").innerHTML=k),i)document.getElementById("productPopUpQty")&&(document.getElementById("productPopUpQty").disabled=!0),document.getElementById("productActions").style.display="none",document.getElementById("moreinfo").style.display="block";else{if(document.getElementById("productActions").style.display="block",document.getElementById("moreinfo").style.display="none",categoryDisplayJS.setCurrentCatalogEntryId(n),o&&a&&categoryDisplayJS.setCurrentCatalogEntryId(d),c)if(y){if(document.getElementById("productSpecification")){document.getElementById("productSpecification").style.display="block";var R="";for(var U in e.catalogEntry.components)R=R+"<li>"+e.catalogEntry.components[U];document.getElementById("productSpec").innerHTML=R}}else document.getElementById("productSpecification")&&(document.getElementById("productSpecification").style.display="none");else document.getElementById("productSpecification")&&(document.getElementById("productSpecification").style.display="none");o?document.getElementById("addToNewRequisitionList")&&(a?(categoryDisplayJS.setCurrentPageType("item"),document.getElementById("addToNewRequisitionListContainer").style.display="block",document.getElementById("addToExistingRequisitionListContainer").style.display="block",document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addItemToNewListFromProductDetail('"+d+"', 'productPopUpQty', document.location.href);",document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopup('productPopUpQty');"):(categoryDisplayJS.setCurrentPageType("product"),document.getElementById("addToNewRequisitionListContainer").style.display="block",document.getElementById("addToExistingRequisitionListContainer").style.display="block",document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addToNewListFromProductDetail('entitledItem_"+n+"', 'productPopUpQty', document.location.href);",document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopupForItem('entitledItem_"+n+"', 'productPopUpQty');")):(r||l||c)&&document.getElementById("addToNewRequisitionList")&&(r?categoryDisplayJS.setCurrentPageType("item"):l?categoryDisplayJS.setCurrentPageType("package"):categoryDisplayJS.setCurrentPageType("dynamicKit"),c&&!u?(document.getElementById("addToNewRequisitionListContainer").style.display="none",document.getElementById("addToExistingRequisitionListContainer").style.display="none"):(document.getElementById("addToNewRequisitionListContainer").style.display="block",document.getElementById("addToExistingRequisitionListContainer").style.display="block",document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addItemToNewListFromProductDetail('"+n+"', 'productPopUpQty', document.location.href);",document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopup('productPopUpQty');"))}if(c&&p?(document.getElementById("configureButton").style.display="block",document.getElementById("configure").href="JavaScript:categoryDisplayJS.ConfigureDynamicKit('"+n+"',document.getElementById('productPopUpQty').value);"):document.getElementById("configureButton").style.display="none",i)document.getElementById("addToCartAjaxButton")?document.getElementById("addToCartAjaxButton").style.display="none":document.getElementById("addToCartButton")&&(document.getElementById("addToCartButton").style.display="none");else if(c&&!u)document.getElementById("addToCartAjaxButton")?document.getElementById("addToCartAjaxButton").style.display="none":document.getElementById("addToCartButton")&&(document.getElementById("addToCartButton").style.display="none");else{var H;document.getElementById("addToCartLinkAjax")&&((H=document.getElementById("addToCartLinkAjax")).href=o?a?"JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+d+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');":"JavaScript:categoryDisplayJS.Add2ShopCartAjax('entitledItem_"+n+"',document.getElementById('productPopUpQty').value, true);":c?"JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+n+"',document.getElementById('productPopUpQty').value,{catalogEntryType: 'dynamicKit'}); hidePopup('second_level_category_popup');":"JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+n+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');"),document.getElementById("addToCartLink")&&(o?((H=document.getElementById("addToCartLink")).href="#",H.onclick=a?new Function("categoryDisplayJS.AddItem2ShopCart(document.getElementById('OrderItemAddForm_"+d+"'),document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');return false;"):new Function("categoryDisplayJS.Add2ShopCart('entitledItem_"+n+"',document.getElementById('OrderItemAddForm_"+n+"'),document.getElementById('productPopUpQty').value, true); return false;")):((H=document.getElementById("addToCartLink")).href="#",H.onclick=new Function("categoryDisplayJS.AddItem2ShopCart(document.getElementById('OrderItemAddForm_"+n+"'),document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');return false;")))}document.getElementById("addToWishListLinkAjax")?document.getElementById("addToWishListLinkAjax").href=r||l||c?"JavaScript:categoryDisplayJS.AddItem2WishListAjax("+n+"); hidePopup('second_level_category_popup');":o&&a?"JavaScript:categoryDisplayJS.AddItem2WishListAjax("+d+"); hidePopup('second_level_category_popup');":"JavaScript:categoryDisplayJS.Add2WishListAjax('entitledItem_"+n+"'); hidePopup('second_level_category_popup');":document.getElementById("addToWishListLink")&&(document.getElementById("addToWishListLink").href="#",document.getElementById("addToWishListLink").onclick=r||l||c?new Function("categoryDisplayJS.AddItem2WishList(document.getElementById('OrderItemAddForm_"+n+"'));hidePopup('second_level_category_popup');return false;"):o&&a?new Function("categoryDisplayJS.AddItem2WishList(document.getElementById('OrderItemAddForm_"+d+"'));hidePopup('second_level_category_popup');return false;"):new Function("categoryDisplayJS.Add2WishList('entitledItem_"+n+"',document.getElementById('OrderItemAddForm_"+n+"')); hidePopup('second_level_category_popup');return false;")),document.getElementById("addToCompareLink")&&(document.getElementById("addToCompareLink").href="JavaScript:compareProductJS.Add2CompareAjax('"+n+"', '"+e.productCompareImagePath+"', '"+e.catalogEntryURL+"','"+e.compareImageDescription+"'); delayHidePopup();"),document.getElementById("replaceCartItemAjax")&&(document.getElementById("replaceCartItemAjax").href="JavaScript:dojo.byId('"+changeAttrId+"').disabled=1; if (dojo.byId('"+changeContractId+"') != null) {dojo.byId('"+changeContractId+"').disabled=1;} categoryDisplayJS.ReplaceItemAjax('entitledItem_"+n+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup'); "),document.getElementById("replaceCartItemNonAjax")&&(document.getElementById("replaceCartItemNonAjax").href="#",document.getElementById("replaceCartItemNonAjax").onclick=new Function("categoryDisplayJS.ReplaceItemNonAjax('entitledItem_"+n+"',document.getElementById('productPopUpQty').value,document.getElementById('ReplaceItemForm')); hidePopup('second_level_category_popup');return false;")),gobackFocus(),dojo.publish("ajaxRequestCompleted")}function updateMoreInfoUrl(){document.getElementById("productMoreInfoLink").href=categoryDisplayJS.moreInfoUrl}function resetPopUp(){if(document.getElementById("productName").innerHTML="",document.getElementById("productPrice").innerHTML="",document.getElementById("productLongDescription").innerHTML="",document.getElementById("productDescriptiveAttributes").innerHTML="",document.getElementById("productSKUValue").innerHTML="",document.getElementById("productMoreInfoLink").href="",document.getElementById("productPromotions").innerHTML="","undefined"!=typeof isBrazilStore&&isBrazilStore&&(dojo.byId("free_shipping_promotion_div").innerHTML="",dojo.byId("BrazilCatalogEntryFeaturedInstallmentOption").innerHTML="",dojo.style(dojo.byId("BrazilCatalogEntryFeaturedInstallmentOption"),"display","inline"),dojo.byId("BrazilFeaturedNonPaymentPromotion").innerHTML="",dojo.isIE||dojo.style(dojo.byId("productQuantity"),"marginTop","0px")),document.getElementById("productPopUpQty")&&(document.getElementById("productPopUpQty").disabled=!1,document.getElementById("productPopUpQty").value="1"),document.getElementById("productAttributes").innerHTML="",document.getElementById("addToCartLinkAjax")?document.getElementById("addToCartLinkAjax").href="":document.getElementById("addToCartLink")&&(document.getElementById("addToCartLink").href=""),document.getElementById("addToWishListLinkAjax")?document.getElementById("addToWishListLinkAjax").href="":document.getElementById("addToWishListLink")&&(document.getElementById("addToWishListLink").href=""),document.getElementById("addToCompareLink")&&(document.getElementById("addToCompareLink").href=""),document.getElementById("replaceCartItemAjax")?document.getElementById("replaceCartItemAjax").href="":document.getElementById("replaceCartItemNonAjax")&&(document.getElementById("replaceCartItemNonAjax").href=""),dojo.byId("baseUrlImageDir")){var e=dojo.byId("baseUrlImageDir").innerHTML;dojo.byId("productFullImage").src=e+"images/NoImageIcon.jpg"}categoryDisplayJS.selectedAttributes=new Object,categoryDisplayJS.selectedProducts=new Object}function hidePopup(e,t){if(null==t||"keypress"!=t.type||"27"==t.keyCode){var n=dijit.byId(e);null!=n&&n.hide()}}function saveChangeOrderItemId(e){replaceOrderItemId=e}function popupActionProperties(){this.showAddToCart=!0,this.showWishList=!0,this.showProductCompare=!0,this.showReplaceCartItem=!1}function gobackFocus(){document.getElementById("closeLink").focus()}function setbackFocus(e){e.shiftKey&&e.keyCode==dojo.keys.TAB&&(document.getElementById("replaceCartItemNonAjax")&&"none"!=document.getElementById("replaceCartItemNonAjax").style.display?document.getElementById("replaceCartItemNonAjax").focus():document.getElementById("replaceCartItemAjax")&&"none"!=document.getElementById("replaceCartItemAjax").style.display?document.getElementById("replaceCartItemAjax").focus():document.getElementById("addToCompareLink")&&"none"!=document.getElementById("addToCompareLink").style.display?document.getElementById("addToCompareLink").focus():document.getElementById("addToWishListLink")&&"none"!=document.getElementById("addToWishListLink").style.display?document.getElementById("addToWishListLink").focus():document.getElementById("addToWishListLinkAjax")&&"none"!=document.getElementById("addToWishListLinkAjax").style.display?document.getElementById("addToWishListLinkAjax").focus():document.getElementById("productMoreInfoLink").focus(),dojo.stopEvent(e))}function delayHidePopup(){setTimeout(dojo.hitch(this,"hidePopup","second_level_category_popup"),200)}function navigateToPDP(e,t){var n=$(e).closest(".change-colors-views");""!=selectedDivId&&(oldDivId=selectedDivId),selectedDivId=$(n).parent().attr("id"),oldDivId!=selectedDivId&&(selectedSwatchCatEntryID="",oldSelectedSwatchCatEntryID="");var o=$(e).parents(".item");if(null!=o.find(".ajaxAddItemToCart").data("catentryid"))o.find(".ajaxAddItemToCart").data("catentryid",t),o.find(".ajaxAddItemToTryAtHome").data("catentryid",t);else{o.find(".price").data("catentryid");o.find(".price").data("catentryid",t)}document.location=o.find(".productImagePdpLink").attr("href")}function changeSwatchSelectionMobile(e,t){console.log(e,t);var n=$(e).closest(".change-colors-views");""!=selectedDivId&&(oldDivId=selectedDivId),selectedDivId=$(n).parent().attr("id"),oldDivId!=selectedDivId&&(selectedSwatchCatEntryID="",oldSelectedSwatchCatEntryID="");var o=$(e).parents(".item");if(null!=(a=o.find(".ajaxAddItemToCart").data("catentryid")))o.find(".ajaxAddItemToCart").data("catentryid",t),o.find(".ajaxAddItemToTryAtHome").data("catentryid",t);else{var a=o.find(".price").data("catentryid");o.find(".price").data("catentryid",t)}if(a==t);else{var d=document.getElementById(t+"_attributes").value;o.find(".badge-online-only").toggle(d.indexOf("badge-online-only")>=0),o.find(".badge-best-seller").toggle(d.indexOf("badge-best-seller")>=0),o.find(".badge-newest-arr").toggle(d.indexOf("badge-newest")>=0),o.find(".badge-exclusive").toggle(d.indexOf("badge-exclusive")>=0),o.find(".badge-clearance").toggle(d.indexOf("badge-Clearance")>=0),o.find(".badge-markdown").toggle(d.indexOf("badge-Markdown")>=0),o.find(".badge-sustainable").toggle(d.indexOf("badge-sustainable")>=0);var i=document.getElementById(t+"_url").value,r=document.getElementById(t+"_price").value,l=document.getElementById(t+"_listprice"),c=document.getElementById("others");if(null!=l){var s=l.value,u="";if(Number(r.substr(1))<Number(s.substr(1))){var p=Number(r.substr(1))/Number(s.substr(1))*100;p="-"+Math.round(100-p)+"% ",console.log("othersProducts "+c),null!=c?(console.log("othersProducts != null"),u='<span class="price_redesign"><span class="price offerprice bold disBlock">'+r+'</span><span class="price listPrice bold strike disBlock">'+s+"</span></span>"):(console.log("othersProducts == null"),u='<div class="price_redesign"><div class="price offerprice bold second red"><a href="'+i+'">'+r+'</a></div><span class="percent">'+p+'</span><span class="price listPrice bold strike"><a href="'+i+'">'+s+"</a></span></div>")}else console.log("price.substr(1)) < Number(listprice.substr(1) "),u='<div class="price_redesign"><span class="price listPrice bold"><a href="'+i+'">'+s+'</a></span><div class="price offerprice bold second"><a href="'+i+'">'+r+"</a></div></div>";console.log("prezzi nuovi (percentuale) listprice "+s+" price "+r),o.find(".price").html(u)}else{u=null!=c?'<div class="price_redesign"><span class="price">'+r+"</span></div>":'<div class="price_redesign"><div class="price offerprice bold second"><a href="'+i+'">'+r+"</a></div></div>",console.log("prezzi nuovi (eleListPrice == null) listprice "+s+" price "+r),o.find(".price").html(u)}var y=document.getElementById(t+"_name").value;o.find(".style-name").html(y);var m=document.getElementById(t+"_color").value;o.find(".color-name").html(m);var g="RxAble"==document.getElementById(t+"_rxable").value?"choose lenses":"add to cart";o.find(".ajaxAddItemToCart").text(g);var I=document.getElementById(t+"_partnumber").value,E=document.getElementById(a+"_partnumber").value;o.find(".pdp-link").attr("href",i),o.find(".productImagePdpLink").attr("href",i),o.find(".catEntryThumbnail img").attr("src",o.find(".catEntryThumbnail img").attr("src").replace(E,I)),n.find(".icon").each(function(n,o){o==e?($(o).removeClass("unselected"),$(o).addClass("selected"),selectedSwatchCatEntryID=t):($(o).removeClass("selected"),$(o).addClass("unselected"))}),initFaceShapeModal()}}function changeSwatchSelectionForOtherLooksMobile(e,t,n){var o=$(e).closest(".change-colors-views");""!=selectedDivId&&(oldDivId=selectedDivId),selectedDivId=$(o).parent().attr("id"),oldDivId!=selectedDivId&&(selectedSwatchCatEntryID="",oldSelectedSwatchCatEntryID="");var a=$(e).parents("."+n),d=a.find(".price").data("catentryid");if(a.find(".price").data("catentryid",t),d==t);else{var i=a.find(".face-shape-container-"+t);null!=i?a.find(".face-shape-container").html(i.html()):a.find(".face-shape-container").html("");var r=document.getElementById(t+"_attributes").value;a.find(".badge-online-only").toggle(r.indexOf("badge-online-only")>=0),a.find(".badge-best-seller").toggle(r.indexOf("badge-best-seller")>=0),a.find(".badge-newest-arr").toggle(r.indexOf("badge-newest")>=0),a.find(".badge-exclusive").toggle(r.indexOf("badge-exclusive")>=0),a.find(".badge-clearance").toggle(r.indexOf("badge-Clearance")>=0),a.find(".badge-markdown").toggle(r.indexOf("badge-Markdown")>=0),a.find(".badge-sustainable").toggle(r.indexOf("badge-sustainable")>=0);var l=document.getElementById(t+"_url").value,c=document.getElementById(t+"_price").value,s=document.getElementById(t+"_listprice");if(null!=s){var u=s.value,p=Math.floor(100*(1-parseFloat(c.substring(1))/parseFloat(u.substring(1))));a.find(".__prjid5_price").html('<div class="price offerprice bold second thumbnail-product-price "><a href="'+l+'">'+c+'</a></div><span class="price listPrice bold strike"><a href="'+l+'">'+u+'</a></span><span class="percent">-'+p+"%</span>")}else a.find(".__prjid5_price").html('<div class="price offerprice bold second"><a href="'+l+'">'+c+"</a></div>");var y=document.getElementById(t+"_name").value;a.find(".style-name").html(y);var m="RxAble"==document.getElementById(t+"_rxable").value?"choose lenses":"add to cart";a.find(".ajaxAddItemToCart").text(m);var g=document.getElementById(t+"_partnumber").value,I=document.getElementById(d+"_partnumber").value;a.find(".pdp-link").attr("href",l),a.find(".productImagePdpLink").attr("href",l),a.find(".catEntryThumbnail img").attr("src",a.find(".catEntryThumbnail img").attr("src").replace(I,g)),o.find(".icon").each(function(n,o){o==e?($(o).removeClass("unselected"),$(o).addClass("selected"),selectedSwatchCatEntryID=t):($(o).removeClass("selected"),$(o).addClass("unselected"))})}}
//# sourceMappingURL=CatalogEntryThumbnailDisplay.js.map