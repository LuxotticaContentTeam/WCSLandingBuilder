var m1;dojo.require("dojo.dnd.move"),dojo.require("dijit.Dialog"),dojo.require("dojo._base.event");var replaceOrderItemId,responseJSON,nodeId="",origProductID="",initPopup=function(){},changeAttrId="",changeContractId="",selectedSwatchCatEntryID="",oldSelectedSwatchCatEntryID="",selectedDivId="",oldDivId="";function setUpdateOrderItemIdsForItem(e,t){changeAttrId=e,""!=t&&(changeContractId="B2BContractSelectExt_id_"+t)}function showPopupButton(e){null!=document.getElementById("popupButton_"+e)&&"undefined"!=document.getElementById("popupButton_"+e)&&(document.getElementById("popupButton_"+e).style.visibility="visible")}function hidePopupButton(e){null!=document.getElementById("popupButton_"+e)&&"undefined"!=document.getElementById("popupButton_"+e)&&(document.getElementById("popupButton_"+e).style.visibility="hidden")}function shiftTabHidePopupButton(e,t){t.shiftKey&&dojo.keys.TAB&&hidePopupButton(e)}function showPopup(e,t,n,a,d,o){if(null==t||null!=t&&"keypress"!=t.type||null!=t&&"keypress"==t.type&&13==t.keyCode){resetPopUp(),"undefined"!=typeof isBrazilStore&&isBrazilStore&&(this.nodeId=a),null==d&&(d=new popupActionProperties),d.showAddToCart?document.getElementById("addToCartAjaxButton")?document.getElementById("addToCartAjaxButton").style.display="block":document.getElementById("addToCartButton")&&(document.getElementById("addToCartButton").style.display="block"):document.getElementById("addToCartAjaxButton")?document.getElementById("addToCartAjaxButton").style.display="none":document.getElementById("addToCartButton")&&(document.getElementById("addToCartButton").style.display="none"),d.showWishList?document.getElementById("addToWishListLinkAjax")?document.getElementById("addToWishListLinkAjax").style.display="block":document.getElementById("addToWishListLink")&&(document.getElementById("addToWishListLink").style.display="block"):document.getElementById("addToWishListLinkAjax")?dojo.style("addToWishListLinkAjaxDivContainer","display","none"):document.getElementById("addToWishListLink")&&dojo.style("addToWishListLinkContainer","display","none"),d.showProductCompare&&document.getElementById("compare")?document.getElementById("addToCompareLink")&&(document.getElementById("addToCompareLink").style.display="block",dojo.style("addToCompareLinkContainer","display","block")):document.getElementById("addToCompareLink")&&dojo.style("addToCompareLinkContainer","display","none"),d.showReplaceCartItem?(document.getElementById("replaceCartItemAjax")?(dojo.style("replaceCartItemAjaxContainer","display","block"),document.getElementById("replaceCartItemAjax").style.display="block"):document.getElementById("replaceCartItemNonAjax")&&(dojo.style("replaceCartItemNonAjaxContainer","display","block"),document.getElementById("replaceCartItemNonAjax").style.display="block"),document.getElementById("addToNewRequisitionList")&&dojo.style("addToNewRequisitionListContainer","display","none"),document.getElementById("addToExistingRequisitionList")&&dojo.style("addToExistingRequisitionListContainer","display","none")):document.getElementById("replaceCartItemAjax")?dojo.style("replaceCartItemAjaxContainer","display","none"):document.getElementById("replaceCartItemNonAjax")&&dojo.style("replaceCartItemNonAjaxContainer","display","none"),d.showAddToCart||d.showWishList?document.getElementById("productPopUpQty")&&(document.getElementById("productPopUpQty").disabled=!1):document.getElementById("productPopUpQty")&&(document.getElementById("productPopUpQty").disabled=!0),document.getElementById("productPopUpQty").value=null==o?1:o,dijit.byId("second_level_category_popup").closeButtonNode.style.display="none",closeAllDialogs(),dijit.byId("second_level_category_popup").show(),dojo.query(".dijitDialogUnderlayWrapper",document).forEach(function(e){e.style.display="none"});var i={};i.storeId=CommonContextsJS.storeId,i.langId=CommonContextsJS.langId,i.catalogId=CommonContextsJS.catalogId,i.productId=e,dojo.publish("ajaxRequestInitiated"),dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByID",handleAs:"json-comment-filtered",content:i,service:this,load:populatePopUp,error:function(e,t){console.debug("CatalogEntryThumbnailDisplay.showPopup: Unexpected error occurred during an xhrPost request."),dojo.publish("ajaxRequestCompleted")}})}}function populatePopUp(e,t){responseJSON=e,categoryDisplayJS.setEntitledItemJsonObject(e.productAttributes);var n=e.catalogEntry.catalogEntryIdentifier.uniqueID,a=!1,d=!1,o="";"ProductBean"==e.catalogEntry.catalogEntryTypeCode&&(a=!0,null!=dojo.byId("catalogEntryTypeCode")&&void 0!=dojo.byId("catalogEntryTypeCode")&&(dojo.byId("catalogEntryTypeCode").value="ProductBean"),e.singleSKUProduct_catEntryId&&""!=e.singleSKUProduct_catEntryId&&(d=!0,o=e.singleSKUProduct_catEntryId));var i=!1;"BundleBean"==e.catalogEntry.catalogEntryTypeCode&&(i=!0);var r=!1;"ItemBean"==e.catalogEntry.catalogEntryTypeCode&&(r=!0,null!=dojo.byId("catalogEntryTypeCode")&&void 0!=dojo.byId("catalogEntryTypeCode")&&(dojo.byId("catalogEntryTypeCode").value="ItemBean"));var l=!1;"PackageBean"==e.catalogEntry.catalogEntryTypeCode&&(l=!0);var c=!1;"DynamicKitBean"==e.catalogEntry.catalogEntryTypeCode&&(c=!0);var s=!1;e.catalogEntry.showDynamicKit&&(s=!0);var u=!1,y=!1,p=!1,m="1"==e.catalogEntry.buyable;c&&s&&(e.catalogEntry.components.length>0&&(p=!0),u=m&&e.catalogEntry.components.length>0&&e.catalogEntry.hasPriceForDK,y=m&&e.catalogEntry.isDKConfigurable),document.getElementById("productIdQuickInfo").innerHTML=n,document.getElementById("productName").innerHTML=e.catalogEntry.description[0].name;var g=dojo.byId("baseUrlImageDir").innerHTML;if(e.catalogEntry.description[0].fullImage!=e.catalogEntry.objectPath?document.getElementById("productFullImage").src=e.catalogEntry.description[0].fullImage:document.getElementById("productFullImage").src=g+"images/NoImageIcon.jpg","undefined"!=typeof isBrazilStore&&isBrazilStore){origProductID=a?e.productAttributes[0].catentry_id:nodeId.match(/\d+/)[0];var I=dojo.byId("WC_RightSidebarESpotDisplay_"+origProductID+"_div_1_BrazilFeaturedNonPaymentPromotion");if(null!=I&&0!=dojo.query(".discount_price",I).length){dojo.style(dojo.byId("productPrice"),"display","none");dojo.byId("WC_PromotionDiscountDisplay_"+origProductID+"_0");dojo.addClass(dojo.byId("WC_PromotionDiscountDisplay_"+origProductID+"_0"),"promo_desc"),dojo.byId("BrazilFeaturedNonPaymentPromotion").innerHTML=I.innerHTML}else if(e.catalogEntry.offerPrice&&(document.getElementById("productPrice").innerHTML=e.catalogEntry.offerPrice,dojo.style(dojo.byId("productPrice"),"display","inline"),!dojo.isIE)){var E=dojo.byId("productQuantity");dojo.style(E,"marginTop","-30px")}}else c&&!p?document.getElementById("productPrice").innerHTML=e.catalogEntry.pricePending:e.catalogEntry.offerPrice&&(document.getElementById("productPrice").innerHTML=e.catalogEntry.offerPrice);if("undefined"!=typeof isBrazilStore&&isBrazilStore){var f=dojo.byId("WC_CatalogEntryFeaturedInstallmentOption_"+origProductID+"_div");if(null!=f)0!=f.innerHTML.replace(/^\s+|\s+$/g,"").length?(dojo.byId("BrazilCatalogEntryFeaturedInstallmentOption").innerHTML=f.innerHTML,dojo.style(dojo.byId("promoDetails"),"display","inline")):dojo.style(dojo.byId("BrazilCatalogEntryFeaturedInstallmentOption"),"display","none")}document.getElementById("productLongDescription").innerHTML=e.catalogEntry.description[0].longDescription+"<br />";var b="";for(var B in e.catalogEntryAttributes.attributes)"Descriptive"==e.catalogEntryAttributes.attributes[B].usage&&(b=b+e.catalogEntryAttributes.attributes[B].name+" : ",null!=e.catalogEntryAttributes.attributes[B].value?b=b+e.catalogEntryAttributes.attributes[B].value.value+"<br />":b+="<br />");if(document.getElementById("productDescriptiveAttributes").innerHTML=b,document.getElementById("productSKUValue").innerHTML=e.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber,document.getElementById("productMoreInfoLink").href=e.catalogEntryURL,"undefined"!=typeof isBrazilStore&&isBrazilStore){var h=dojo.byId("free_shipping_promotion_div"),v=dojo.byId("WC_RightSidebarESpotDisplay_"+origProductID+"_div_1_BrazilFeaturedShippingPromotion");null!=h&&null!=v&&(h.innerHTML=v.parentNode.innerHTML+"<br />")}else for(var B in e.catalogEntryPromotions)document.getElementById("productPromotions").innerHTML=e.catalogEntryPromotions[B]+"<br />";if(null!=document.getElementById("selectedAttr_"+replaceOrderItemId))var A=document.getElementById("selectedAttr_"+replaceOrderItemId).value.replace(/'/g,"&#039;").split("|");categoryDisplayJS.moreInfoUrl="ProductDisplay?storeId="+storeId+"&catalogId="+catalogId+"&langId="+langId+"&productId="+n;var C="",T="",j="",L="",_="",x=new Array,P=0;for(var B in e.catalogEntryAttributes.attributes)"Defining"==e.catalogEntryAttributes.attributes[B].usage&&(null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsFulfillmentFrequencyAttrName?C=e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;"):null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsPaymentFrequencyAttrName?j=e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;"):null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsTimePeriodAttrName&&(_=e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")));if(""!=C&&""!=j)for(var B in e.productAttributes){var S=e.productAttributes[B].Attributes;for(attributeName in S){var D=attributeName.split("_");D[0]==C?T=D[1]:D[0]==j?L=D[1]:D[0]==_&&(x[P]=D[1],P++)}}var k="";for(var B in e.catalogEntryAttributes.attributes)if("Defining"==e.catalogEntryAttributes.attributes[B].usage)if(a)if(null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsFulfillmentFrequencyAttrName)categoryDisplayJS.setSelectedAttribute(C,T),categoryDisplayJS.changePrice("entitledItem_"+n,!0,!1),updateMoreInfoUrl();else if(null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsPaymentFrequencyAttrName)categoryDisplayJS.setSelectedAttribute(j,L),categoryDisplayJS.changePrice("entitledItem_"+n,!0,!1),updateMoreInfoUrl();else{for(var w in k=(k=(k=k+'<label for="attrValue_'+B+'" class="nodisplay">'+e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")+document.getElementById("requiredFieldText").innerHTML+'</label><span class="required-field">* </span><span>'+e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")+" : </span>")+'<select name="attrValue" class="drop_down" id="attrValue_'+B+'" onChange="JavaScript:categoryDisplayJS.setSelectedAttributeJS(\''+e.catalogEntryAttributes.attributes[B].name.replace("'","\\'")+"',this.options[this.selectedIndex].value);categoryDisplayJS.changePrice('entitledItem_"+n+"',true,false);updateMoreInfoUrl();\">")+'<option value="">'+document.getElementById("selectText").innerHTML+"</option>",e.catalogEntryAttributes.attributes[B].allowedValue){var J=e.catalogEntryAttributes.attributes[B].allowedValue[w].value,U="";if(null!=document.getElementById("selectedAttr_"+replaceOrderItemId))for(var F=0;F<A.length;F++)if(e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")==A[F]){U=F+1;break}if(null!=e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier==subsTimePeriodAttrName){for(var N=!1,M=0;M<x.length;M++)if(e.catalogEntryAttributes.attributes[B].allowedValue[w].value==x[M]){N=!0;break}var q="attribute_UOM_";if(e.catalogEntryAttributes.attributes[B].allowedValue[w].extendedValue)for(var F in e.catalogEntryAttributes.attributes[B].allowedValue[w].extendedValue)"UnitOfMeasure"==e.catalogEntryAttributes.attributes[B].allowedValue[w].extendedValue[F].key&&(q+=e.catalogEntryAttributes.attributes[B].allowedValue[w].extendedValue[F].value);if(J=document.getElementById(q).innerHTML.replace("{0}",J),N)if(null!=document.getElementById("selectedAttr_"+replaceOrderItemId)&&e.catalogEntryAttributes.attributes[B].allowedValue[w].value==A[U]){var O="selected";categoryDisplayJS.setSelectedAttribute(e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;"),A[U]),categoryDisplayJS.changePrice("entitledItem_"+n,!0,!1),updateMoreInfoUrl(),k=k+'<option value="'+e.catalogEntryAttributes.attributes[B].allowedValue[w].value.replace('"',"inches")+'"selected='+O+">"+J+"</option>"}else k=k+'<option value="'+e.catalogEntryAttributes.attributes[B].allowedValue[w].value.replace('"',"inches")+'">'+J+"</option>"}else if(null!=document.getElementById("selectedAttr_"+replaceOrderItemId)&&e.catalogEntryAttributes.attributes[B].allowedValue[w].value==A[U]){O="selected";categoryDisplayJS.setSelectedAttribute(e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;"),A[U]),categoryDisplayJS.changePrice("entitledItem_"+n,!0,!1),updateMoreInfoUrl(),k=k+'<option value="'+e.catalogEntryAttributes.attributes[B].allowedValue[w].value.replace('"',"inches")+'"selected='+O+">"+J+"</option>"}else k=k+'<option value="'+e.catalogEntryAttributes.attributes[B].allowedValue[w].value.replace('"',"inches")+'">'+J+"</option>"}k+="</select><br />"}else if(null==e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier||e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier!=subsFulfillmentFrequencyAttrName&&e.catalogEntryAttributes.attributes[B].attributeIdentifier.externalIdentifier.identifier!=subsPaymentFrequencyAttrName){J=e.catalogEntryAttributes.attributes[B].value.value;k=k+e.catalogEntryAttributes.attributes[B].name.replace(/'/g,"&#039;")+" : "+J+"<br />"}else;if(""!=k&&(k+="<br />"),a&&!d&&(document.getElementById("productAttributes").innerHTML=k),i)document.getElementById("productPopUpQty")&&(document.getElementById("productPopUpQty").disabled=!0),document.getElementById("productActions").style.display="none",document.getElementById("moreinfo").style.display="block";else{if(document.getElementById("productActions").style.display="block",document.getElementById("moreinfo").style.display="none",categoryDisplayJS.setCurrentCatalogEntryId(n),a&&d&&categoryDisplayJS.setCurrentCatalogEntryId(o),c)if(p){if(document.getElementById("productSpecification")){document.getElementById("productSpecification").style.display="block";var R="";for(var F in e.catalogEntry.components)R=R+"<li>"+e.catalogEntry.components[F];document.getElementById("productSpec").innerHTML=R}}else document.getElementById("productSpecification")&&(document.getElementById("productSpecification").style.display="none");else document.getElementById("productSpecification")&&(document.getElementById("productSpecification").style.display="none");a?document.getElementById("addToNewRequisitionList")&&(d?(categoryDisplayJS.setCurrentPageType("item"),document.getElementById("addToNewRequisitionListContainer").style.display="block",document.getElementById("addToExistingRequisitionListContainer").style.display="block",document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addItemToNewListFromProductDetail('"+o+"', 'productPopUpQty', document.location.href);",document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopup('productPopUpQty');"):(categoryDisplayJS.setCurrentPageType("product"),document.getElementById("addToNewRequisitionListContainer").style.display="block",document.getElementById("addToExistingRequisitionListContainer").style.display="block",document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addToNewListFromProductDetail('entitledItem_"+n+"', 'productPopUpQty', document.location.href);",document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopupForItem('entitledItem_"+n+"', 'productPopUpQty');")):(r||l||c)&&document.getElementById("addToNewRequisitionList")&&(r?categoryDisplayJS.setCurrentPageType("item"):l?categoryDisplayJS.setCurrentPageType("package"):categoryDisplayJS.setCurrentPageType("dynamicKit"),c&&!u?(document.getElementById("addToNewRequisitionListContainer").style.display="none",document.getElementById("addToExistingRequisitionListContainer").style.display="none"):(document.getElementById("addToNewRequisitionListContainer").style.display="block",document.getElementById("addToExistingRequisitionListContainer").style.display="block",document.getElementById("addToNewRequisitionList").href="javascript:categoryDisplayJS.addItemToNewListFromProductDetail('"+n+"', 'productPopUpQty', document.location.href);",document.getElementById("addToExistingRequisitionList").href="javascript:RequisitionList.showReqListPopup('productPopUpQty');"))}if(c&&y?(document.getElementById("configureButton").style.display="block",document.getElementById("configure").href="JavaScript:categoryDisplayJS.ConfigureDynamicKit('"+n+"',document.getElementById('productPopUpQty').value);"):document.getElementById("configureButton").style.display="none",i)document.getElementById("addToCartAjaxButton")?document.getElementById("addToCartAjaxButton").style.display="none":document.getElementById("addToCartButton")&&(document.getElementById("addToCartButton").style.display="none");else if(c&&!u)document.getElementById("addToCartAjaxButton")?document.getElementById("addToCartAjaxButton").style.display="none":document.getElementById("addToCartButton")&&(document.getElementById("addToCartButton").style.display="none");else{var H;document.getElementById("addToCartLinkAjax")&&((H=document.getElementById("addToCartLinkAjax")).href=a?d?"JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+o+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');":"JavaScript:categoryDisplayJS.Add2ShopCartAjax('entitledItem_"+n+"',document.getElementById('productPopUpQty').value, true);":c?"JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+n+"',document.getElementById('productPopUpQty').value,{catalogEntryType: 'dynamicKit'}); hidePopup('second_level_category_popup');":"JavaScript:categoryDisplayJS.AddItem2ShopCartAjax('"+n+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');"),document.getElementById("addToCartLink")&&(a?((H=document.getElementById("addToCartLink")).href="#",H.onclick=d?new Function("categoryDisplayJS.AddItem2ShopCart(document.getElementById('OrderItemAddForm_"+o+"'),document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');return false;"):new Function("categoryDisplayJS.Add2ShopCart('entitledItem_"+n+"',document.getElementById('OrderItemAddForm_"+n+"'),document.getElementById('productPopUpQty').value, true); return false;")):((H=document.getElementById("addToCartLink")).href="#",H.onclick=new Function("categoryDisplayJS.AddItem2ShopCart(document.getElementById('OrderItemAddForm_"+n+"'),document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup');return false;")))}document.getElementById("addToWishListLinkAjax")?document.getElementById("addToWishListLinkAjax").href=r||l||c?"JavaScript:categoryDisplayJS.AddItem2WishListAjax("+n+"); hidePopup('second_level_category_popup');":a&&d?"JavaScript:categoryDisplayJS.AddItem2WishListAjax("+o+"); hidePopup('second_level_category_popup');":"JavaScript:categoryDisplayJS.Add2WishListAjax('entitledItem_"+n+"'); hidePopup('second_level_category_popup');":document.getElementById("addToWishListLink")&&(document.getElementById("addToWishListLink").href="#",document.getElementById("addToWishListLink").onclick=r||l||c?new Function("categoryDisplayJS.AddItem2WishList(document.getElementById('OrderItemAddForm_"+n+"'));hidePopup('second_level_category_popup');return false;"):a&&d?new Function("categoryDisplayJS.AddItem2WishList(document.getElementById('OrderItemAddForm_"+o+"'));hidePopup('second_level_category_popup');return false;"):new Function("categoryDisplayJS.Add2WishList('entitledItem_"+n+"',document.getElementById('OrderItemAddForm_"+n+"')); hidePopup('second_level_category_popup');return false;")),document.getElementById("addToCompareLink")&&(document.getElementById("addToCompareLink").href="JavaScript:compareProductJS.Add2CompareAjax('"+n+"', '"+e.productCompareImagePath+"', '"+e.catalogEntryURL+"','"+e.compareImageDescription+"'); delayHidePopup();"),document.getElementById("replaceCartItemAjax")&&(document.getElementById("replaceCartItemAjax").href="JavaScript:dojo.byId('"+changeAttrId+"').disabled=1; if (dojo.byId('"+changeContractId+"') != null) {dojo.byId('"+changeContractId+"').disabled=1;} categoryDisplayJS.ReplaceItemAjax('entitledItem_"+n+"',document.getElementById('productPopUpQty').value); hidePopup('second_level_category_popup'); "),document.getElementById("replaceCartItemNonAjax")&&(document.getElementById("replaceCartItemNonAjax").href="#",document.getElementById("replaceCartItemNonAjax").onclick=new Function("categoryDisplayJS.ReplaceItemNonAjax('entitledItem_"+n+"',document.getElementById('productPopUpQty').value,document.getElementById('ReplaceItemForm')); hidePopup('second_level_category_popup');return false;")),gobackFocus(),dojo.publish("ajaxRequestCompleted")}function updateMoreInfoUrl(){document.getElementById("productMoreInfoLink").href=categoryDisplayJS.moreInfoUrl}function resetPopUp(){if(document.getElementById("productName").innerHTML="",document.getElementById("productPrice").innerHTML="",document.getElementById("productLongDescription").innerHTML="",document.getElementById("productDescriptiveAttributes").innerHTML="",document.getElementById("productSKUValue").innerHTML="",document.getElementById("productMoreInfoLink").href="",document.getElementById("productPromotions").innerHTML="","undefined"!=typeof isBrazilStore&&isBrazilStore&&(dojo.byId("free_shipping_promotion_div").innerHTML="",dojo.byId("BrazilCatalogEntryFeaturedInstallmentOption").innerHTML="",dojo.style(dojo.byId("BrazilCatalogEntryFeaturedInstallmentOption"),"display","inline"),dojo.byId("BrazilFeaturedNonPaymentPromotion").innerHTML="",dojo.isIE||dojo.style(dojo.byId("productQuantity"),"marginTop","0px")),document.getElementById("productPopUpQty")&&(document.getElementById("productPopUpQty").disabled=!1,document.getElementById("productPopUpQty").value="1"),document.getElementById("productAttributes").innerHTML="",document.getElementById("addToCartLinkAjax")?document.getElementById("addToCartLinkAjax").href="":document.getElementById("addToCartLink")&&(document.getElementById("addToCartLink").href=""),document.getElementById("addToWishListLinkAjax")?document.getElementById("addToWishListLinkAjax").href="":document.getElementById("addToWishListLink")&&(document.getElementById("addToWishListLink").href=""),document.getElementById("addToCompareLink")&&(document.getElementById("addToCompareLink").href=""),document.getElementById("replaceCartItemAjax")?document.getElementById("replaceCartItemAjax").href="":document.getElementById("replaceCartItemNonAjax")&&(document.getElementById("replaceCartItemNonAjax").href=""),dojo.byId("baseUrlImageDir")){var e=dojo.byId("baseUrlImageDir").innerHTML;dojo.byId("productFullImage").src=e+"images/NoImageIcon.jpg"}categoryDisplayJS.selectedAttributes=new Object,categoryDisplayJS.selectedProducts=new Object}function hidePopup(e,t){if(null==t||"keypress"!=t.type||"27"==t.keyCode){var n=dijit.byId(e);null!=n&&n.hide()}}function saveChangeOrderItemId(e){replaceOrderItemId=e}function popupActionProperties(){this.showAddToCart=!0,this.showWishList=!0,this.showProductCompare=!0,this.showReplaceCartItem=!1}function gobackFocus(){document.getElementById("closeLink").focus()}function setbackFocus(e){e.shiftKey&&e.keyCode==dojo.keys.TAB&&(document.getElementById("replaceCartItemNonAjax")&&"none"!=document.getElementById("replaceCartItemNonAjax").style.display?document.getElementById("replaceCartItemNonAjax").focus():document.getElementById("replaceCartItemAjax")&&"none"!=document.getElementById("replaceCartItemAjax").style.display?document.getElementById("replaceCartItemAjax").focus():document.getElementById("addToCompareLink")&&"none"!=document.getElementById("addToCompareLink").style.display?document.getElementById("addToCompareLink").focus():document.getElementById("addToWishListLink")&&"none"!=document.getElementById("addToWishListLink").style.display?document.getElementById("addToWishListLink").focus():document.getElementById("addToWishListLinkAjax")&&"none"!=document.getElementById("addToWishListLinkAjax").style.display?document.getElementById("addToWishListLinkAjax").focus():document.getElementById("productMoreInfoLink").focus(),dojo.stopEvent(e))}function delayHidePopup(){setTimeout(dojo.hitch(this,"hidePopup","second_level_category_popup"),200)}function navigateToPDP(e,t){var n=$(e).closest(".change-colors-views");""!=selectedDivId&&(oldDivId=selectedDivId),selectedDivId=$(n).parent().attr("id"),oldDivId!=selectedDivId&&(selectedSwatchCatEntryID="",oldSelectedSwatchCatEntryID="");var a=$(e).parents(".item");if(null!=a.find(".ajaxAddItemToCart").data("catentryid"))a.find(".ajaxAddItemToCart").data("catentryid",t),a.find(".ajaxAddItemToTryAtHome").data("catentryid",t);else{a.find(".price").data("catentryid");a.find(".price").data("catentryid",t)}document.location=a.find(".productImagePdpLink").attr("href")}function changeSwatchSelection(e,t){var n=$(e).closest(".change-colors-views");""!=selectedDivId&&(oldDivId=selectedDivId),selectedDivId=$(n).parent().attr("id"),oldDivId!=selectedDivId&&(selectedSwatchCatEntryID="",oldSelectedSwatchCatEntryID="");var a=$(e).parents(".item");if(null!=(d=a.find(".ajaxAddItemToCart").data("catentryid")))a.find(".ajaxAddItemToCart").data("catentryid",t),a.find(".ajaxAddItemToTryAtHome").data("catentryid",t);else{var d=a.find(".price").data("catentryid");a.find(".price").data("catentryid",t)}if(d==t);else{var o=a.find(".face-shape-container-"+t);null!=o?a.find(".face-shape-container").html(o.html()):a.find(".face-shape-container").html("");var i=document.getElementById(t+"_attributes").value;a.find(".badge-online-only").toggle(i.indexOf("badge-online-only")>=0),a.find(".badge-best-seller").toggle(i.indexOf("badge-best-seller")>=0),a.find(".badge-newest-arr").toggle(i.indexOf("badge-newest")>=0),a.find(".badge-exclusive").toggle(i.indexOf("badge-exclusive")>=0),a.find(".badge-clearance").toggle(i.indexOf("badge-Clearance")>=0),a.find(".badge-markdown").toggle(i.indexOf("badge-Markdown")>=0),a.find(".badge-sustainable").toggle(i.indexOf("badge-sustainable")>=0);var r=document.getElementById(t+"_url").value,l=document.getElementById(t+"_price").value,c=document.getElementById(t+"_listprice");if(null!=c){var s=c.value,u=Math.floor(100*(1-parseFloat(l.substring(1))/parseFloat(s.substring(1))));a.find(".__prjid5_price").html('<div class="price offerprice bold second thumbnail-product-price "><a href="'+r+'">'+l+'</a></div><span class="price listPrice bold strike"><a href="'+r+'">'+s+'</a></span><span class="percent">-'+u+"%</span>")}else a.find(".__prjid5_price").html('<div class="price offerprice bold second"><a href="'+r+'">'+l+"</a></div>");var y=document.getElementById(t+"_name").value;a.find(".style-name").html(y);var p=document.getElementById(t+"_color").value;a.find(".color-name").html(p);var m="RxAble"==document.getElementById(t+"_rxable").value?"choose lenses":"add to cart";a.find(".ajaxAddItemToCart").text(m);var g=document.getElementById(t+"_partnumber").value,I=document.getElementById(d+"_partnumber").value;a.find(".pdp-link").attr("href",r),a.find(".productImagePdpLink").attr("href",r),a.find(".catEntryThumbnail img").attr("src",a.find(".catEntryThumbnail img").attr("src").replace(I,g)),n.find(".icon").each(function(n,a){a==e?($(a).removeClass("unselected"),$(a).addClass("selected"),selectedSwatchCatEntryID=t):($(a).removeClass("selected"),$(a).addClass("unselected"))})}}function changeSwatchSelectionForOtherLooks(e,t,n){var a=$(e).closest(".change-colors-views");""!=selectedDivId&&(oldDivId=selectedDivId),selectedDivId=$(a).parent().attr("id"),oldDivId!=selectedDivId&&(selectedSwatchCatEntryID="",oldSelectedSwatchCatEntryID="");var d=$(e).parents("."+n),o=d.find(".price").data("catentryid");if(d.find(".price").data("catentryid",t),o==t);else{var i=d.find(".face-shape-container-"+t);null!=i?d.find(".face-shape-container").html(i.html()):d.find(".face-shape-container").html("");var r=document.getElementById(t+"_attributes").value;d.find(".badge-online-only").toggle(r.indexOf("badge-online-only")>=0),d.find(".badge-best-seller").toggle(r.indexOf("badge-best-seller")>=0),d.find(".badge-newest-arr").toggle(r.indexOf("badge-newest")>=0),d.find(".badge-exclusive").toggle(r.indexOf("badge-exclusive")>=0),d.find(".badge-clearance").toggle(r.indexOf("badge-Clearance")>=0),d.find(".badge-markdown").toggle(r.indexOf("badge-Markdown")>=0),d.find(".badge-sustainable").toggle(r.indexOf("badge-sustainable")>=0);var l=document.getElementById(t+"_url").value,c=document.getElementById(t+"_price").value,s=document.getElementById(t+"_listprice");if(null!=s){var u=s.value,y=Math.floor(100*(1-parseFloat(c.substring(1))/parseFloat(u.substring(1))));d.find(".__prjid5_price").html('<div class="price offerprice bold second thumbnail-product-price "><a href="'+l+'">'+c+'</a></div><span class="price listPrice bold strike"><a href="'+l+'">'+u+'</a></span><span class="percent">-'+y+"%</span>")}else d.find(".__prjid5_price").html('<div class="price offerprice bold second"><a href="'+l+'">'+c+"</a></div>");var p=document.getElementById(t+"_name").value;d.find(".style-name").html(p);var m="RxAble"==document.getElementById(t+"_rxable").value?"choose lenses":"add to cart";d.find(".ajaxAddItemToCart").text(m);var g=document.getElementById(t+"_partnumber").value,I=document.getElementById(o+"_partnumber").value;d.find(".pdp-link").attr("href",l),d.find(".productImagePdpLink").attr("href",l),d.find(".catEntryThumbnail img").attr("src",d.find(".catEntryThumbnail img").attr("src").replace(I,g)),a.find(".icon").each(function(n,a){a==e?($(a).removeClass("unselected"),$(a).addClass("selected"),selectedSwatchCatEntryID=t):($(a).removeClass("selected"),$(a).addClass("unselected"))})}}
//# sourceMappingURL=CatalogEntryThumbnailDisplay.js.map