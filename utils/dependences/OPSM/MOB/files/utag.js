//tealium universal tag - utag.loader ut4.0.202309250934, Copyright 2023 Tealium.com Inc. All Rights Reserved.
if(typeof utag_err=='undefined')var utag_err=[];window._tealium_old_error=window._tealium_old_error||window.onerror||function(){};window.onerror=function(m,u,l){if(typeof u!=='undefined'&&u.indexOf('/utag.')>0&&utag_err.length<5)utag_err.push({e:m,s:u,l:l,t:'js'});window._tealium_old_error(m,u,l)};var utag_condload=false;try{(function(){function ul(src,a,b){a=document;b=a.createElement('script');b.language='javascript';b.type='text/javascript';b.src=src;a.getElementsByTagName('head')[0].appendChild(b)};var match=(""+document.cookie).match("(^|;\\s)utag_env_luxottica_opsm=(\/\/tags\.tiqcdn\.com\/utag\/luxottica\/[a-z0-9\\.-]{1,30}\\/[^\\s;]*)");if(match){if(match[2].indexOf("/prod/")===-1){var s=match[2];while(s.indexOf("%")!=-1){s=decodeURIComponent(s);}s=s.replace(/\.\./g,"");ul(s);utag_condload=true;__tealium_default_path='//tags.tiqcdn.com/utag/luxottica/opsm/prod/';}}})();}catch(e){};try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_utils")&&!window.tealium_ext000_utils__WeAreInBeta){window.tealium_ext000_utils__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_utils"));}
else{if(console)console.time('UTILS: CREATION');var __Utils__=function UtilsCTRL(){var __cname='__Utils__';try{var MessageLogging=function MessageLoggingCTRL(){var __cname='__Utils__.MessageLogging';try{var __messages=[];var __TYPES=['log','info','warn','error','table'];var __DEBUG=true;var __isValidType=function(type){try{return TC.isString(type)&&REB.isValueOf(__TYPES).test(type)?true:false;}catch(e){if(console)console.error('###',__cname+'.__isValidType --- '+e.stack);return false;}};var __setDebugMode=function(flag){try{if(TC.isBoolean(flag))__DEBUG=flag;}catch(e){if(console)console.error('###',__cname+'.__setDebugMode --- '+e.stack);}};var __showMessage=function(options){try{if(!window.console)return;if(!__DEBUG)return;options=TC.isPureObject(options)?options:{};options.type=__isValidType(options.type)?options.type:'log';if(options.type=='table')console.table(options.content);else{options.cname=TC.isString(options.cname)?options.cname:'';options.fname=TC.isString(options.fname)?options.fname:'';options.msg=TC.isString(options.msg)?options.msg:'';options.prop=TC.isString(options.prop)?options.prop:'';if(options.msg){var msg=(options.fname?((options.cname?(options.cname+'.'):'')+options.fname+' --- '):'')+options.msg;if(options.prop)console[options.type]('###',msg,':',options.prop,'=',options.value);else console[options.type]('###',msg);}}}catch(e){if(console)console.error('###',__cname+'.__showMessage --- '+e.stack);}};var __timeStart=function(name){try{if(console&&__DEBUG&&TC.isString(name)&&name)console.time(name);}catch(e){if(console)console.error('###',__cname+'.__timeStart --- '+e.stack);}};var __timeEnd=function(name){try{if(console&&__DEBUG&&TC.isString(name)&&name)console.timeEnd(name);}catch(e){if(console)console.error('###',__cname+'.__timeEnd --- '+e.stack);}};this.export={setDebugMode:function(flag){__setDebugMode(flag);},showMessage:function(options){return __showMessage(options);},timeStart:function(name){__timeStart(name);},timeEnd:function(name){__timeEnd(name);},};}catch(e){if(console)console.error('###',__cname+' has not been completed successfully! => caused by: '+e.stack);}
return Object.freeze(Object.setPrototypeOf(this.export||{},MessageLoggingCTRL.prototype));};var TypeChecking=function TypeCheckingCTRL(){var __cname='__Utils__.TypeChecking';try{var __NATIVE_TYPES=['string','number','boolean'];var __PRIMITIVE_CLASSES=[String,Number,Boolean];var __IMMUTABLE_CLASSES=[Function,Date,RegExp];var __ERROR_CLASSES=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,];var __isString=function(value){return typeof value==='string'||value instanceof String;};var __isNumber=function(value){return typeof value==='number'&&isFinite(value);};var __isArray=function(value){return Array.isArray(value)||(value!==undefined&&value!==null&&value.constructor===Array);};var __isFunction=function(value){return typeof value==='function';};var __isObject=function(value){return value!==undefined&&(value===null||(typeof value==='object'&&value.constructor===Object));};var __isNull=function(value){return value===null;};var __isUndefined=function(value){return typeof value==='undefined';};var __isBoolean=function(value){return typeof value==='boolean';};var __isRegExp=function(value){return value!==undefined&&value!==null&&typeof value==='object'&&value.constructor===RegExp;};var __isError=function(value){return value instanceof Error&&typeof value.message!=='undefined';};var __isDate=function(value){return value instanceof Date;};var __isSymbol=function(value){return typeof value==='symbol';};var __isPureObject=function(elem){return __isObject(elem)&&(!__isNull(elem));};var __isEmptyObject=function(elem){return __isObject(elem)&&(__isNull(elem)||(Object.getOwnPropertyNames(elem).length<1));};var __isEmptyArray=function(elem){return __isArray(elem)&&(elem.length<1);};var __isEmptyString=function(elem){return __isString(elem)&&(!elem);};var __isDomNode=function(o){return typeof Node==='object'?o instanceof Node:o&&typeof o==='object'&&typeof o.nodeType==='number'&&typeof o.nodeName==='string';};var __isDomElement=function(o){return typeof HTMLElement==='object'?o instanceof HTMLElement:o&&typeof o==='object'&&o!==null&&o.nodeType===1&&typeof o.nodeName==='string';};var __isTypeOf=function(elem,types){types=__isArray(types)?types:[types];for(var i=0;i<types.length;i++)if(typeof elem===types[i])return true;return false;};var __isInstanceOf=function(elem,classes){classes=__isArray(classes)?classes:[classes];for(var i=0;i<classes.length;i++)if(elem instanceof classes[i])return true;return false;};var __getInstanceOf=function(elem,classes){classes=__isArray(classes)?classes:[classes];for(var i=0;i<classes.length;i++)if(elem instanceof classes[i])return classes[i];return null;};var __isNativeType=function(elem){return __isTypeOf(elem,__NATIVE_TYPES);};var __isPrimitiveObject=function(elem){return __isInstanceOf(elem,__PRIMITIVE_CLASSES);};var __isImmutableObject=function(elem){return __isInstanceOf(elem,__IMMUTABLE_CLASSES);};var __isErrorObject=function(elem){return __isInstanceOf(elem,__ERROR_CLASSES);};var __isCustomObject=function(elem){return typeof elem==='object'&&elem!==null&&elem.constructor!==Object&&(!__isInstanceOf(elem,[Array,Error].concat(__PRIMITIVE_CLASSES).concat(__IMMUTABLE_CLASSES)));};var __copyPrimitiveObject=function(elem){var __Primitive=__getInstanceOf(elem,__PRIMITIVE_CLASSES);return __Primitive?new __Primitive(elem.valueOf()):null;};var __copyPrimitiveFunction=function(elem){var head_func=elem.toString().match(/^function[ ]*\w*[ ]*\([^\{\}]*\)[ ]*\{/)[0];var head_func_arr=head_func.split('(');//@NOTE: Function object is not able to assign a name
var params_func=head_func_arr[1].split(')')[0];var body_func=elem.toString().replace(/^function[ ]*\w*[ ]*\([^\{\}]*\)[ ]*\{/,'').replace(/\}$/,'');if(/\[native[ ]*code\]/gi.test(body_func)){return elem;}else{return new Function(params_func,body_func);}};var __copyImmutableObject=function(elem){if(elem instanceof Function)return __copyPrimitiveFunction(elem);if(elem instanceof RegExp){var flags=elem.flags;//@TODO: replace this cleaning with existing function toStringAndClean customizing it!
var regexp=elem.toString().replace(/^[/]?/,'').replace(/[/][gimuy]*$/,'');return new RegExp(regexp,flags);}
if(elem instanceof Date)return new Date(elem.valueOf());return null;};var __copyErrorObject=function(elem){var __Error=__getInstanceOf(elem,__ERROR_CLASSES.concat([Error]));return __Error?new __Error(elem.message):null;};this.export={isString:function(value){return ___.tryCatch(__isString,[value],false,__cname);},isNumber:function(value){return ___.tryCatch(__isNumber,[value],false,__cname);},isArray:function(value){return ___.tryCatch(__isArray,[value],false,__cname);},isFunction:function(value){return ___.tryCatch(__isFunction,[value],false,__cname);},isNull:function(value){return ___.tryCatch(__isNull,[value],false,__cname);},isUndefined:function(value){return ___.tryCatch(__isUndefined,[value],false,__cname);},isBoolean:function(value){return ___.tryCatch(__isBoolean,[value],false,__cname);},isRegExp:function(value){return ___.tryCatch(__isRegExp,[value],false,__cname);},isError:function(value){return ___.tryCatch(__isError,[value],false,__cname);},isDate:function(value){return ___.tryCatch(__isDate,[value],false,__cname);},isSymbol:function(value){return ___.tryCatch(__isSymbol,[value],false,__cname);},isObject:function(elem){return ___.tryCatch(__isObject,[elem],false,__cname);},isPureObject:function(elem){return ___.tryCatch(__isPureObject,[elem],false,__cname);},isEmptyObject:function(elem){return ___.tryCatch(__isEmptyObject,[elem],false,__cname);},isEmptyArray:function(elem){return ___.tryCatch(__isEmptyArray,[elem],false,__cname);},isEmptyString:function(elem){return ___.tryCatch(__isEmptyString,[elem],false,__cname);},isDomNode:function(o){return ___.tryCatch(__isDomNode,[o],false,__cname);},isDomElement:function(o){return ___.tryCatch(__isDomElement,[o],false,__cname);},isTypeOf:function(elem,types){return ___.tryCatch(__isTypeOf,[elem,types],false,__cname);},isInstanceOf:function(elem,classes){return ___.tryCatch(__isInstanceOf,[elem,classes],false,__cname);},getInstanceOf:function(elem,classes){return ___.tryCatch(__getInstanceOf,[elem,classes],null,__cname);},isNativeType:function(elem){return ___.tryCatch(__isNativeType,[elem],false,__cname);},isPrimitiveObject:function(elem){return ___.tryCatch(__isPrimitiveObject,[elem],false,__cname);},isImmutableObject:function(elem){return ___.tryCatch(__isImmutableObject,[elem],false,__cname);},isErrorObject:function(elem){return ___.tryCatch(__isErrorObject,[elem],false,__cname);},isCustomObject:function(elem){return ___.tryCatch(__isCustomObject,[elem],false,__cname);},copyPrimitiveObject:function(elem){return ___.tryCatch(__copyPrimitiveObject,[elem],null,__cname);},copyPrimitiveFunction:function(elem){return ___.tryCatch(__copyPrimitiveFunction,[elem],null,__cname);},copyImmutableObject:function(elem){return ___.tryCatch(__copyImmutableObject,[elem],null,__cname);},copyErrorObject:function(elem){return ___.tryCatch(__copyErrorObject,[elem],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},TypeCheckingCTRL.prototype));};var RegExpBuilder=function RegExpBuilderCTRL(){var __cname='__Utils__.RegExpBuilder';try{var SEPARATORS=[' ',',',';','=','[.]','[|]','[:]','@'];var QUOTES=['\'','\"'];var TEXT_TRANSFORMS=['lowercase','uppercase','capitalize'];var __toStringAndClean=function(regexp){if(!TC.isRegExp(regexp))return'';return ___.toString(regexp).replace(/^[/][^]?/,'').replace(/[$]?[/][dgimsuvy]*$/,'');};var __toRegExp=function(str){if(!TC.isString(str))return __isEmpty();var result=str.match(/^\/(.+)\/([dgimsuvy]*)$/);if(result)return new RegExp(result[1],result[2]);return new RegExp(str);};var __matchEmpty=function(regexp){return(TC.isRegExp(regexp)&&regexp.test(''))?true:false;};var __matchSepOrQt=function(word,isSep,isQt){if(!TC.isString(word))return false;var sep_qt_list=((isSep!='0')?SEPARATORS:[]);if(isQt!='0')sep_qt_list=sep_qt_list.concat(QUOTES);return __isValueOf(sep_qt_list).test(word)?true:false;};var __matchHtmlEntity=function(word){return(TC.isString(word)&&(/&#?\w+;/gi.test(word)))?true:false;};var __checkMultiPattern=function(regexp){if(!TC.isRegExp(regexp))return false;return/([|][\^])|([$][|])/g.test(___.toString(regexp))?true:false;};var __checkSepOrQt=function(sep_qt,regexp){if(!__matchSepOrQt(sep_qt,1,1)||(!TC.isRegExp(regexp)))return false;var rsk=['[\\\\][W]','[\\\\][D]','[\\\\][S]','[.]','\\[\\^\\]'];var str=___.toString(regexp);for(var i=0;i<rsk.length;i++){str=str.replace(new RegExp(rsk[i],'g'),sep_qt);}
str=str.replace(new RegExp('((\\[\\^)[^'+'\\'+sep_qt+']*[\\'+sep_qt+'][^\\'+sep_qt+']*(\\]))+','g'),'\\w');return sep_qt.test(str)?true:false;};var __isAll=function(){return new RegExp('');};var __isEmpty=function(){return new RegExp('^$');};var __isAllExcept=function(line_t,spaces,sep_qt,required){var sep_qts='';if(TC.isArray(sep_qt)){for(var i=0;i<sep_qt.length;i++){if(__isValueOf(SEPARATORS.concat(QUOTES)).test(sep_qt[i])&&(!(new RegExp('\\\\'+sep_qt[i])).test(sep_qts))){sep_qts+='\\'+sep_qt[i];}}}
var sp_lt_sqs='[^'+sep_qts;if(spaces!='0'){sp_lt_sqs+='\\s]';if(line_t=='0')sp_lt_sqs+='|[\\n\\r\\u2028\\u2029]';}else{if(line_t!='0')sp_lt_sqs+='\\n\\r\\u2028\\u2029]';else sp_lt_sqs+=']';}
var req=(required=='0')?'*':'+';return new RegExp('^'+'('+sp_lt_sqs+')'+req+'$');};var __isValueOf=function(list,required){if(!TC.isArray(list)||list.length==0)return __isEmpty();var values=[];for(var i=0;i<list.length;i++)if(list[i])values.push(list[i]);values=values.join('|');if(!values)return __isEmpty();var req=(required=='0'?'?':'');return new RegExp('^'+'('+values+')'+req+'$');};var __isAlpha=function(min,max,transform,required){if(!TC.isNumber(min)||(!TC.isNumber(max))||(min<1)||(max<1)||(min>max))return __isEmpty();if(!TC.isString(transform)||(!__isValueOf(TEXT_TRANSFORMS).test(transform)))return __isEmpty();var _wf=(transform=='lowercase')?'[a-z]':'[A-Z]';var _wi=(transform=='uppercase')?'[A-Z]':'[a-z]';var req=(required=='0')?'?':'';return new RegExp('^'+_wf+_wi+'{'+(min-1)+','+(max-1)+'}'+req+'$');};var __isInteger=function(sign,zero,required){var s=(sign=='0')?'-':'\\+?';var d_z=(zero=='0')?'[1-9]':'\\d';var req=(required=='0')?'?':'';var ns_z=(sign=='0'&&zero!='0')?'0+|':'';return new RegExp('^'+'('+ns_z+s+'\\d*'+d_z+'\\d*'+')'+req+'$');};var __isDecimal=function(sign,zero,required,min,max){var s=(sign=='0')?'-':'\\+?';var d_z=(zero=='0')?'[1-9]':'\\d';var req=(required=='0')?'?':'';var ns_z=(sign=='0'&&zero!='0')?'(0+([.]0+)?)|':'';var ps_z=(sign!='0'&&zero!='0')?'0+|':'';var req_d=(zero!='0')?'?':'';if(!TC.isNumber(min)||(!TC.isNumber(max))||(min<1)||(max<1)||(min>max)){min='1';max='';req_d='?';}
return new RegExp('^'+'('+ns_z+s+'('+ps_z+'\\d*'+d_z+'\\d*'+')'+'([.]\\d{'+min+','+max+'})'+req_d+')'+req+'$');};var __isObj=function(empty){var content;if(empty=='2')content=__toStringAndClean(__isAllExcept(0,0,[],0));else if(empty=='1')content='('+'\\s*'+__toStringAndClean(__isAllExcept(1,1,[],1))+'\\s*'+')+';else content='\\s*';return new RegExp('^'+'{'+content+'}'+'$');};var __isSeparatedBy=function(regexp,sep,sep_end,required){if(__checkMultiPattern(regexp)||(!__matchSepOrQt(sep,1,0))||__checkSepOrQt(('\\'+sep),regexp)||__matchEmpty(regexp))return __isEmpty();var str=__toStringAndClean(regexp);var req_end=(sep_end=='0')?'?':'';var req=(required=='0')?'?':'';return new RegExp('^'+'('+'('+str+'['+sep+']'+')*'+'('+str+')'+req_end+')'+req+'$');};var __isEntry=function(key,sep,value,required,val_opt){if(__checkMultiPattern(key)||__checkMultiPattern(value)||(!__matchSepOrQt(sep,1,0))||__checkSepOrQt(('\\'+sep),key)||__checkSepOrQt(('\\'+sep),value)||__matchEmpty(key)||((val_opt!='0')&&__matchEmpty(value)))return __isEmpty();var k=__toStringAndClean(key);var v=__toStringAndClean(value);var req=(required=='0')?'?':'';return new RegExp('^'+'('+'('+k+')'+'['+sep+']'+'('+v+')'+')'+req+'$');};var __isEncrypted=function(method,required){var m=(method=='sha256')?'64':((method=='md5')?'32':'16');var req=(required=='0')?'?':'';return new RegExp('^'+'([a-f0-9]{'+m+'})'+req+'$','i');};var __isIPv4Address=function(required){var req=(required=='0')?'?':'';return new RegExp('^'+'(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})'+req+'$');};var __isGlobalStoreId=function(required){var req=(required=='0')?'?':'';return new RegExp('^'+'([a-z0-9]+\\-[a-z0-9]+)'+req+'$','i');};var __isDateFormat=function(required){var req=(required=='0')?'?':'';return new RegExp('^'+'([0-9]{4}-[0-9]{2}-[0-9]{2})'+req+'$');};var __isNumeric=function(options){options=TC.isPureObject(options)?options:{};options.sign=options.sign=='negative'?0:1;options.zero=options.zero=='yes'?1:0;options.required=options.required=='yes'?1:0;if(TC.isPureObject(options.decimals)){options.decimals.min=TC.isNumber(options.decimals.min)&&options.decimals.min>0?options.decimals.min:1;options.decimals.max=TC.isNumber(options.decimals.max)&&options.decimals.max>0?options.decimals.max:2;}
else options.decimals='';if(!options.decimals)return __isInteger(options.sign,options.zero,options.required);else return __isDecimal(options.sign,options.zero,options.required,options.decimals.min,options.decimals.max);};var __isAlphaNumeric=function(options){options=TC.isPureObject(options)?options:{};options.nospaces=options.nospaces=='yes'?1:0;options.exceptions=TC.isArray(options.exceptions)?options.exceptions:[];options.required=options.required=='yes'?1:0;if(TC.isPureObject(options.multiples)){options.multiples.type=(options.multiples.type=='item'||options.multiples.type=='entry')?options.multiples.type:'item';options.multiples.sep=TC.isString(options.multiples.sep)&&options.multiples.sep.length==1?options.multiples.sep:(options.multiples.type=='item'?' ':',');options.multiples.item=TC.isPureObject(options.multiples.item)?options.multiples.item:{};options.multiples.item.sep_end=options.multiples.item.sep_end=='yes'?1:0;options.multiples.entry=TC.isPureObject(options.multiples.entry)?options.multiples.entry:{};options.multiples.entry.sep=TC.isString(options.multiples.entry.sep)&&options.multiples.entry.sep.length==1?options.multiples.entry.sep:'=';options.multiples.entry.value_required=options.multiples.entry.value_required=='yes'?1:0;}
else options.multiples='';if(!options.multiples)return __isAllExcept(1,options.nospaces,options.exceptions,options.required);if(options.multiples.type=='item'){return __isSeparatedBy(__isAllExcept(1,options.nospaces,options.exceptions.concat([options.multiples.sep]),1),options.multiples.sep,options.multiples.item.sep_end,options.required);}
else{return __isSeparatedBy(__isEntry(__isAllExcept(1,options.nospaces,options.exceptions.concat([options.multiples.entry.sep,options.multiples.sep]),1),options.multiples.entry.sep,__isAllExcept(1,options.nospaces,options.exceptions.concat([options.multiples.entry.sep,options.multiples.sep]),1),1,options.multiples.entry.value_required),options.multiples.sep,1,options.required);}};this.export={toStringAndClean:function(regexp){return ___.tryCatch(__toStringAndClean,[regexp],'',__cname);},toRegExp:function(str){return ___.tryCatch(__toRegExp,[str],null,__cname);},matchEmpty:function(regexp){return ___.tryCatch(__matchEmpty,[regexp],false,__cname);},matchSepOrQt:function(word,isSep,isQt){return ___.tryCatch(__matchSepOrQt,[word,isSep,isQt],false,__cname);},matchHtmlEntity:function(word){return ___.tryCatch(__matchHtmlEntity,[word],false,__cname);},checkMultiPattern:function(regexp){return ___.tryCatch(__checkMultiPattern,[regexp],false,__cname);},checkSepOrQt:function(sep_qt,regexp){return ___.tryCatch(__checkSepOrQt,[sep_qt,regexp],false,__cname);},isAll:function(){return ___.tryCatch(__isAll,[],null,__cname);},isEmpty:function(){return ___.tryCatch(__isEmpty,[],null,__cname);},isAllExcept:function(line_t,spaces,sep_qt,required){return ___.tryCatch(__isAllExcept,[line_t,spaces,sep_qt,required],null,__cname);},isValueOf:function(list,required){return ___.tryCatch(__isValueOf,[list,required],null,__cname);},isAlpha:function(min,max,transform,required){return ___.tryCatch(__isAlpha,[min,max,transform,required],null,__cname);},isInteger:function(sign,zero,required){return ___.tryCatch(__isInteger,[sign,zero,required],null,__cname);},isDecimal:function(sign,zero,required,min,max){return ___.tryCatch(__isDecimal,[sign,zero,required,min,max],null,__cname);},isObj:function(empty){return ___.tryCatch(__isObj,[empty],null,__cname);},isSeparatedBy:function(regexp,sep,sep_end,required){return ___.tryCatch(__isSeparatedBy,[regexp,sep,sep_end,required],null,__cname);},isEntry:function(key,sep,value,required,val_opt){return ___.tryCatch(__isEntry,[key,sep,value,required,val_opt],null,__cname);},isEncrypted:function(method,required){return ___.tryCatch(__isEncrypted,[method,required],null,__cname);},isIPv4Address:function(required){return ___.tryCatch(__isIPv4Address,[required],null,__cname);},isGlobalStoreId:function(required){return ___.tryCatch(__isGlobalStoreId,[required],null,__cname);},isDateFormat:function(required){return ___.tryCatch(__isDateFormat,[required],null,__cname);},isNumeric:function(options){return ___.tryCatch(__isNumeric,[options],null,__cname);},isAlphaNumeric:function(options){return ___.tryCatch(__isAlphaNumeric,[options],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},RegExpBuilderCTRL.prototype));};var Common=function CommonCTRL(){var __cname='__Utils__.Common';try{var __tryCatch=function(fn,params,ret,cname){try{return fn.apply(this,params);}catch(e){MLOG.showMessage({type:'error',cname:(cname||''),fname:(fn.name||''),msg:e.stack});return ret==='[ERROR]'?e:ret;}};var __toString=function(elem){if(TC.isUndefined(elem))return'';if(TC.isDomNode(elem)||TC.isDomElement(elem))return'[Dom Node or Element]';if(TC.isPrimitiveObject(elem)||TC.isImmutableObject(elem)||TC.isError(elem))return elem.toString();if(TC.isString(elem))return elem;try{return JSON.stringify(elem);}catch(e){return e.message;}};var __isValueOf=function(list,elem){for(var i=0;i<list.length;i++)if(list[i]===elem)return true;return false;};var __merge=function(destination,source,levels,depth,globalCircularRefsList,localCircularRefsList){if(!localCircularRefsList[depth])localCircularRefsList[depth]=[];levels=(TC.isNumber(levels)&&levels>=-1)?levels:-1;if(levels==-1||levels>0){if(TC.isUndefined(source)){}
else if(typeof source=='object'&&source!==null){var __isGlobalRef=__isValueOf(globalCircularRefsList,source);if(__isGlobalRef&&(!__isValueOf(localCircularRefsList[depth],source)))destination='[ CIRCULAR REF ]';else{if(!__isGlobalRef)globalCircularRefsList.push(source);localCircularRefsList[depth].push(source);if(TC.isPrimitiveObject(source))destination=TC.copyPrimitiveObject(source);else if(TC.isImmutableObject(source))destination=TC.copyImmutableObject(source);else if(TC.isError(source))destination=TC.copyErrorObject(source);else if(TC.isArray(source)){destination=TC.isArray(destination)?destination:[];var isEmptyArrayDestination=destination.length<1;for(var index=0;index<source.length;index++){if(typeof source[index]!='object'){if(TC.isNativeType(source[index])&&isEmptyArrayDestination)destination.push(source[index]);else if(!__isValueOf(destination,source[index]))destination.push(source[index]);}
else destination.push(__merge([],source[index],(levels-1),(depth+1),globalCircularRefsList,localCircularRefsList));}}
else if(TC.isPureObject(source)){try{if(!TC.isPureObject(destination))destination={};for(var key in source){if(TC.isFunction(source.hasOwnProperty)&&source.hasOwnProperty(key))destination[key]=__merge(destination[key],source[key],(levels-1),(depth+1),globalCircularRefsList,localCircularRefsList);}}catch(e){destination=/Unexpected identifier/gi.test(e.message)?'[ CIRCULAR REF ]':e.message;}}
else destination='[ '+(source.constructor.name||'CLASS')+' ]';}}
else if(TC.isFunction(source))destination=TC.copyPrimitiveFunction(source);else destination=source;}
else destination='[ LEVEL TRUNC ]';return destination;};var __length=function(elem){return(!TC.isNull(elem)&&typeof elem==='object'?Object.keys(elem):(elem||'')).length||0;};{var getArrayMap=function(obj){var result=[];for(var key in obj){var value=typeof obj[key]==='object'&&typeof obj[key]!==null?getArrayMap(obj[key]):(Array.isArray(obj)?obj[key]:(key+':'+obj[key]));result.push(value);}
return result;};var __getNumber2USFormat=function(value){if(isNaN(parseFloat(value)))return'';var num=value.toString();if(/\.\d{2}$/g.test(num))num=num.replace(/[,]/g,'');else if(/\,\d{2}$/g.test(num))num=num.replace(/[\.]/g,'').replace(',','.');else if(/[,\.]\d{3}$/g.test(num))num=num.replace(/[,\.]/g,'');return parseFloat(num).toFixed(2);};var __toCapitalCase=function(value){return TC.isString(value)?value.replace(/^\w|\W\w/g,function(w){return w.toUpperCase();}):value;};}
this.export={tryCatch:function(fn,params,ret,cname){return __tryCatch(fn,params,ret,cname);},toString:function(elem){return __tryCatch(__toString,[elem],null,__cname);},merge:function(destination,source,levels){return __tryCatch(__merge,[destination,source,levels,0,[],[]],source,__cname);},length:function(elem){return __tryCatch(__length,[elem],0,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},CommonCTRL.prototype));};var Cookie=function CookieCTRL(){var __cname='__Utils__.Cookie';try{var __get=function(name,defau){var parts=('; '+document.cookie).split('; '+name+'=');var res=((parts.length==2)?(parts.pop().split(';').shift()):'');if(res){if(/[\%]/g.test(res))res=decodeURIComponent(res);}
else{if(window.sessionStorage)res=window.sessionStorage.getItem(name);}
return res||defau;};var __set=function(name,value,exdays){var __encode=(/[\=\;\%]/gi.test(''+value))?encodeURIComponent(''+value):value;var __value=(__encode||'')+'; ';var __exdays=exdays||'';if(__exdays!==''){var d=new Date();d.setTime(d.getTime()+(__exdays*24*60*60*1000));__exdays='expires='+d.toUTCString()+'; ';}
var hostname=window.location.hostname.replace(/^[^.]*/g,'');var code=name+'='+__value+__exdays+'path=/; domain='+hostname;document.cookie=code;if(window.sessionStorage){if(exdays==-1)window.sessionStorage.removeItem(name);else if(!exdays){if(window.localStorage)window.localStorage.removeItem(name);window.sessionStorage.setItem(name,value);}}};var __remove=function(name){__set(name,'',-1);};var __removeItems=function(list){list=TC.isArray(list)?list:__getKeys(list);for(var i=0;i<list.length;i++)__remove(list[i]);};var __getKeys=function(filter){var regexp=TC.isString(filter)?new RegExp(filter):'';var keys=[];document.cookie.split(/; */).forEach(function(cookie){var key=cookie.split('=')[0];if(!regexp||regexp.test(key))keys.push(key);});return keys;};this.export={get:function(name,defau){return ___.tryCatch(__get,[name,defau],'',__cname);},set:function(name,value,exdays){return ___.tryCatch(__set,[name,value,exdays],null,__cname);},remove:function(name){return ___.tryCatch(__remove,[name],null,__cname);},removeItems:function(list){return ___.tryCatch(__removeItems,[list],null,__cname);},getKeys:function(filter){return ___.tryCatch(__getKeys,[filter],[],__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},CookieCTRL.prototype));};var Storage=function StorageCTRL(){var __cname='__Utils__.Storage';try{var __getItem=function(name,defau){if(window.localStorage||window.sessionStorage)return window.localStorage.getItem(name)||window.sessionStorage.getItem(name)||defau;else return COOKIE.get(name,defau);};var __setItem=function(name,value,exp){exp=/^(session|forever)$/gi.test(''+exp)?exp:'session';if(window.localStorage||window.sessionStorage){if(exp=='session'){window.localStorage.removeItem(name);window.sessionStorage.setItem(name,value);}
else{window.sessionStorage.removeItem(name);window.localStorage.setItem(name,value);}}
else COOKIE.set(name,value,(exp==='session'?'':365));};var __removeItem=function(name){if((window.localStorage||window.sessionStorage)&&TC.isString(name)){window.localStorage.removeItem(name);window.sessionStorage.removeItem(name);}
else COOKIE.remove(name);};var __removeItems=function(list){list=TC.isArray(list)?list:__getKeys(list);for(var i=0;i<list.length;i++)__removeItem(list[i]);};var __getKeys=function(filter){var regexp=TC.isString(filter)?new RegExp(filter):'';var keys=[];var types=['session','local'];for(var index in types){var storage=window[types[index]+'Storage'];if(storage&&storage.length){for(var key in storage){if(storage.hasOwnProperty(key)){if(!regexp||regexp.test(key))keys.push(key);}}}}
document.cookie.split(/; */).forEach(function(cookie){var key=cookie.split('=')[0];if(!regexp||regexp.test(key))keys.push(key);});return keys;};this.export={getItem:function(name,defau){return ___.tryCatch(__getItem,[name,defau],'',__cname);},setItem:function(name,value,exp){return ___.tryCatch(__setItem,[name,value,exp],null,__cname);},removeItem:function(name){return ___.tryCatch(__removeItem,[name],null,__cname);},removeItems:function(list){return ___.tryCatch(__removeItems,[list],null,__cname);},getKeys:function(filter){return ___.tryCatch(__getKeys,[filter],[],__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},StorageCTRL.prototype));};var DOMHelper=function DOMHelperCTRL(){var __cname='__Utils__.DOMHelper';try{var __remove=function(elem){return(Element.prototype.remove||function(){if(this.parentNode)this.parentNode.removeChild(this);}).call(elem);};var __polyfill_matches=function(){var proto=Element.prototype;return proto.matches||proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector;};var __matches=function(nodelist,selector,elem){nodelist=nodelist instanceof NodeList?nodelist:document.querySelectorAll(selector||null);var length=nodelist.length;for(var i=0;i<length;i++)if(nodelist.item(i)===elem)return true;return false;};var __getClosest=function(elem,selector,context){selector=TC.isString(selector)?selector:'';if(selector){var matches=__polyfill_matches();if(matches){for(;elem&&elem!==document&&(!context||elem!==context);elem=elem.parentNode){if(matches.call(elem,selector))return elem;}}else{var nodelist=document.querySelectorAll(selector);if(nodelist.length>0){for(;elem&&elem!==document&&(!context||elem!==context);elem=elem.parentNode){if(__matches(nodelist,selector,elem))return elem;}}}}
return null;};var __getParents=function(elem,selector,context){selector=TC.isString(selector)?selector:'';var parents=[];var matches=__polyfill_matches();if(matches){for(;elem&&elem!==document&&(!context||elem!==context);elem=elem.parentNode)if(!selector||matches.call(elem,selector))parents.push(elem);}
else{var nodelist=document.querySelectorAll(selector||null);for(;elem&&elem!==document&&(!context||elem!==context);elem=elem.parentNode)if(!selector||__matches(nodelist,selector,elem))parents.push(elem);}
return parents;};var __isValidURL=function(url){if(!TC.isString(url))return false;var element=document.createElement('input');element.setAttribute('type','url');element.value=url;return element.validity.valid;};var __stripHtml=function(html){var div=document.createElement('div');div.innerHTML=html;return div.textContent||div.innerText||'';};var __selectText=function(container){if(container.tagName=='INPUT'||container.nodeName=='INPUT'||container.tagName=='TEXTAREA'||container.nodeName=='TEXTAREA'){container.select();}
else{var sel,range;if(window.getSelection&&document.createRange){sel=window.getSelection();range=document.createRange();range.selectNodeContents(container);sel.removeAllRanges();sel.addRange(range);}
else if(document.selection){range=document.body.createTextRange();range.moveToElementText(container);range.select();}
else return false;}
return true;};this.export={remove:function(elem){return ___.tryCatch(__remove,[elem],false,__cname);},getClosest:function(elem,selector,context){return ___.tryCatch(__getClosest,[elem,selector,context],null,__cname);},getParents:function(elem,selector,context){return ___.tryCatch(__getParents,[elem,selector,context],[],__cname);},isValidURL:function(url){return ___.tryCatch(__isValidURL,[url],false,__cname);},stripHtml:function(html){return ___.tryCatch(__stripHtml,[html],'',__cname);},selectText:function(container){return ___.tryCatch(__selectText,[container],false,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},DOMHelperCTRL.prototype));};var EventsListener=function EventsListenerCTRL(){var __cname='__Utils__.EventsListener';try{var __list=new ArrayList('object',false,false);var __s_item=new CustomDataObject({eventName:'string',eventHandler:'function'});var __set=function(node,tagSelector,eventName,eventHandler,optionsOrUseCapture){if(!TC.isCustomObject(node)||(!__s_item.isValid({eventName:eventName,eventHandler:eventHandler})))return;var __eventHandlerByTagSelector=function(ev){var target=null;if(!tagSelector)target=this;else if(TC.isString(tagSelector)&&ev&&ev.target)target=DOM.getClosest(ev.target,tagSelector,this);if(target)eventHandler.apply(target,Array.prototype.slice.call(arguments,0));};if(node.addEventListener)node.addEventListener(eventName,__eventHandlerByTagSelector,optionsOrUseCapture);else if(node.attachEvent){node['e'+eventName+eventHandler]=__eventHandlerByTagSelector;node[eventName+eventHandler]=function(){node['e'+eventName+eventHandler](window.event);};node.attachEvent('on'+eventName,node[eventName+eventHandler]);}
else node['on'+eventName]=__eventHandlerByTagSelector;__list.add({node:node,eventName:eventName,eventHandler:__eventHandlerByTagSelector,optionsOrUseCapture:optionsOrUseCapture});};var __remove=function(node,eventName,eventHandler,optionsOrUseCapture){if(node.removeEventListener)node.removeEventListener(eventName,eventHandler,optionsOrUseCapture);if(node.detachEvent)node.detachEvent('on'+eventName,eventHandler);node['on'+eventName]=null;};var __reset=function(){if(__list.isEmpty())return;var items=__list.getData();for(var i=items.length-1;i>=0;i=i-1)__remove(items[i].node,items[i].eventName,items[i].eventHandler,items[i].optionsOrUseCapture);__list.reset();};var __load=function(eventHandler){if(document&&document.readyState=='complete')eventHandler();else __set(window,null,'load',eventHandler);};this.export={set:function(node,tagSelector,eventName,eventHandler,optionsOrUseCapture){return ___.tryCatch(__set,[node,tagSelector,eventName,eventHandler,optionsOrUseCapture],null,__cname);},reset:function(){return ___.tryCatch(__reset,[],null,__cname);},load:function(eventHandler){return ___.tryCatch(__load,[eventHandler],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},EventsListenerCTRL.prototype));};var UtagHelper=function UtagHelperCTRL(){var __cname='__Utils__.UtagHelper';try{var __utagConfiguration={basePathUrls:['https://tags.tiqcdn.com/utag/',/(.)+\/thirdparty\//,],resource:'utag.js',pathUrl:'',account:'',profile:'',environment:'',};var __initUtagConfiguration=function(){var scriptUtagJS=document.querySelector('script[src*="/'+__utagConfiguration.resource+'"]');if(scriptUtagJS){__utagConfiguration.pathUrl=scriptUtagJS.src;var utagInfo=scriptUtagJS.src;__utagConfiguration.basePathUrls.forEach(function(basePathUrl){utagInfo=utagInfo.replace(basePathUrl,'');});utagInfo=utagInfo.split('/');if(utagInfo){if(__utagConfiguration.basePathUrls[1].test(__utagConfiguration.pathUrl)){__utagConfiguration.account='luxottica';__utagConfiguration.profile='ray-ban';__utagConfiguration.environment=utagInfo[0]==__utagConfiguration.account?utagInfo[2]:utagInfo[0];}
else{__utagConfiguration.account=utagInfo[0];__utagConfiguration.profile=utagInfo[1];__utagConfiguration.environment=utagInfo[2];}}}};var __getUtagPathUrl=function(){return __utagConfiguration.pathUrl||'';};var __getUtagAccount=function(){return __utagConfiguration.account||'';};var __getUtagProfile=function(){return __utagConfiguration.profile||'';};var __getUtagEnvironment=function(){return __utagConfiguration.environment||'';};var __getProductsArrayMap=function(obj,name){var result=[];if(!TC.isPureObject(obj))return result;var ids=Object.keys(obj);if(ids.length<1)return result;name=name||'Products';result.push((name||'')+'_Id:'+ids);var props=Object.keys(obj[ids[0]]||{});if(props.length<1)return result;props.forEach(function(prop){var values=ids.map(function(id){return ___.toString(obj[id][prop]).replace(/,/g,'<COMMA>').replace(/:/g,'<COLON>');});result.push((name||'')+'_'+prop+':'+values);});return result;};var __getArrayMap=function(obj){var result=[];if(TC.isPureObject(obj)){for(var key in obj){if(typeof obj[key]!='object'||TC.isArray(obj[key]))result.push(key+':'+___.toString(obj[key]).replace(/:/g,'<COLON>'));else result=result.concat(__getProductsArrayMap(obj[key],key));}}
return result;};var __getPriceISOFormat=function(price,__default__){var __price=___.toString(price);return(!TC.isEmptyString(__price))&&(!isNaN(__price))?parseFloat(__price):(TC.isNumber(__default__)?__default__:0);};var __getUnitsISOFormat=function(units,__default__){var __units=___.toString(units);return(!TC.isEmptyString(__units))&&(!isNaN(__units))?parseInt(__units,10):(TC.isNumber(__default__)?__default__:0);};var __addBug=function(datalayer,bugCode,destination){if(typeof datalayer!=='object'||typeof bugCode!=='string')return;destination=/^(Error_Datalayer|Error_QA)$/g.test(''+destination)?destination:'Error_Datalayer';var sep=',';var suf_crt=['CR'];var suf_ncrt=['WRN','WR','MS','RM','FMT','RN'];var suffixes=suf_crt.concat(suf_ncrt);var regexp=new RegExp(' ('+(suffixes+'').replace(new RegExp(sep,'g'),'|')+')','g');var bugCodeItemList=(datalayer[destination]||'').replace(regexp,'');var bugCodeItem=bugCode.replace(regexp,'');var bugList=new ArrayList('string',true,true,sep);bugList.setData(datalayer[destination]||'');var bugItemList=new ArrayList('string',true,true,sep);bugItemList.setData(bugCodeItemList);if(bugItemList.count(bugCodeItem)<1){bugList.add(bugCode);datalayer[destination]=bugList.getData(true);}
else{if(bugList.count(bugCode)==1)return;regexp=new RegExp(' ('+(suf_crt+'').replace(new RegExp(sep,'g'),'|')+')','g');if(regexp.test(bugCode))return;if(bugCodeItem==bugCode)return;regexp=new RegExp(bugCodeItem+' ('+(suf_crt+'').replace(new RegExp(sep,'g'),'|')+')');datalayer[destination]=datalayer[destination].replace(regexp,bugCode);}};var __sendBugOldProp=function(o,old_p,new_p,ticket){if(!old_p)return;var status,SEP=' ';var label=ticket?ticket:old_p;if(o[old_p]){if(!new_p){status=ticket?'WR':'RM';}
else if(!o[new_p]){status=ticket?'WR':'RN';o[new_p]=o[old_p];}
else{status=ticket?'CR':'RM';}
__Utils__.UtagHelper.addBug(o,label+SEP+status);delete o[old_p];}
};var __sendBug=function(o,prop,ticket,status,branch){if((!prop)&&(!ticket)&&(!status))return;var label,SEP=' ';if(prop)label=prop;if(ticket)label=ticket+branch?'X':'';__addBug(o,label+SEP+status);};var __sendQAErrors=function(datalayer,errorObject){for(var priority in errorObject){if(errorObject.hasOwnProperty(priority)){for(var index in errorObject[priority]){if(errorObject[priority].hasOwnProperty(index))__addBug(datalayer,errorObject[priority][index],'Error_QA');}}}};__initUtagConfiguration();this.export={getUtagPathUrl:function(){return ___.tryCatch(__getUtagPathUrl,[],'',__cname);},getUtagAccount:function(){return ___.tryCatch(__getUtagAccount,[],'',__cname);},getUtagProfile:function(){return ___.tryCatch(__getUtagProfile,[],'',__cname);},getUtagEnvironment:function(){return ___.tryCatch(__getUtagEnvironment,[],'',__cname);},getArrayMap:function(obj){return ___.tryCatch(__getArrayMap,[obj],[],__cname);},getPriceISOFormat:function(price,__default__){return ___.tryCatch(__getPriceISOFormat,[price,__default__],0,__cname);},getUnitsISOFormat:function(units,__default__){return ___.tryCatch(__getUnitsISOFormat,[units,__default__],0,__cname);},addBug:function(datalayer,bugCode,destination){return ___.tryCatch(__addBug,[datalayer,bugCode,destination],null,__cname);},sendBugOldProp:function(o,old_p,new_p,ticket){return ___.tryCatch(__sendBugOldProp,[o,old_p,new_p,ticket],null,__cname);},sendBug:function(o,prop,ticket,status,branch){return ___.tryCatch(__sendBug,[o,prop,ticket,status,branch],null,__cname);},sendQAErrors:function(datalayer,errorObject){return ___.tryCatch(__sendQAErrors,[datalayer,errorObject],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},UtagHelperCTRL.prototype));};var CustomDataObject=function CustomDataObject(DATA){var __cname='__Utils__.CustomDataObject';try{var __data={};var __FORMATS={'string':TC.isString,'number':TC.isNumber,'array':TC.isArray,'object':TC.isPureObject,'boolean':TC.isBoolean,'regexp':TC.isRegExp,'function':TC.isFunction,'error':TC.isError,'date':TC.isDate,'any':function(){return true;},};var __getData=function(){return ___.merge({},__data);};var __setData=function(d){if(__isValidData(d))__data=d;};var __isValidData=function(data){if(!TC.isPureObject(data)){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidData',msg:'Invalid Input > data is not an object',prop:'data',value:data});return false;}
for(var prop in data){if(data.hasOwnProperty(prop))
if(!__isValidEntry(prop,data[prop]))return false;}
return true;};var __isValidEntry=function(prop,format){var __fname='__isValidEntry';if(!__isValidProp(prop)){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > prop is not a string',prop:'prop',value:prop});return false;}
if(!__isValidFormatKey(format)){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > format key is not valid',prop:'format key',value:format});return false;}
return true;};var __getFormat=function(key){return __isValidFormatKey(key)?__FORMATS[key]:null;};var __isValidFormatKey=function(value){return TC.isString(value)&&__FORMATS.hasOwnProperty(value)?true:false;};var __isValidProp=function(value){return TC.isString(value)?true:false;};var __isValidKey=function(prop){var __fname='__isValidKey';if(!__isValidProp(prop)){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > prop is not a string',prop:'prop',value:prop});return false;}
if(!__data.hasOwnProperty(prop)){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > prop is not exist',prop:'data > prop',value:prop});return false;}
return true;};var __getValue=function(prop){if(__isValidKey(prop))return __data[prop];};var __setEntry=function(prop,format){if(__isValidEntry(prop,format))__data[prop]=format;};var __isValidInfo=function(prop,value){var __fname='__isValidInfo';if(!__isValidKey(prop))return false;if(!__getFormat(__data[prop])(value)){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > format is not valid',prop:('data[prop] = '+prop+' != format'),value:value});return false;}
return true;};var __isValid=function(obj){var __fname='__isValid';if(!TC.isPureObject(obj)){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > it is not an object',prop:'info',value:obj});return false;}
for(var prop in obj){if(obj.hasOwnProperty(prop))
if(!__isValidInfo(prop,obj[prop]))return false;}
return true;};var __getKeys=function(){return Object.keys(__data);};__setData(DATA||{});this.export={getData:function(){return ___.tryCatch(__getData,[],null,__cname);},setData:function(d){return ___.tryCatch(__setData,[d],null,__cname);},getValue:function(prop){return ___.tryCatch(__getValue,[prop],null,__cname);},setEntry:function(prop,format){return ___.tryCatch(__setEntry,[prop,format],null,__cname);},isValidKey:function(prop){return ___.tryCatch(__isValidKey,[prop],false,__cname);},isValid:function(obj){return ___.tryCatch(__isValid,[obj],false,__cname);},isValidInfo:function(prop,value){return ___.tryCatch(__isValidInfo,[prop,value],false,__cname);},getKeys:function(){return ___.tryCatch(__getKeys,[],[],__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},CustomDataObject.prototype));};var DatalayerTableObject=function DatalayerTableObject(STRUCT_INFO,DEPTH_SEP,DYNAMIC_PROP){var __cname='__Utils__.DatalayerTableObject';try{var __data={};var __STRUCT_INFO__=new CustomDataObject();var __STRUCT_INFO_VALIDATION__='isValid';var __DEPTH_SEPARATOR='$$';var __DYNAMIC_PROPERTY='__INDEX__';var __getData=function(){return ___.merge({},__data);};var __setData=function(d,isValidCustomInfo,isCopied){if(isCopied===true||__isValidData(d,isValidCustomInfo))__data=d;};var __isValidData=function(d,isValidCustomInfo){if(!TC.isPureObject(d))return false;if(TC.isEmptyObject(d))return true;var __isValid;for(var p in d){__isValid=__isValidPropStruct(p,d)&&(!TC.isFunction(isValidCustomInfo)||isValidCustomInfo(d[p].info))&&__isValidData(d[p].children);}
return __isValid;};var __isValidPropStruct=function(p,d){var __fname='__isValidPropStruct';if(!d.hasOwnProperty(p)||(p.split(__DEPTH_SEPARATOR).join()!=p)){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the property is not own or it is including the depth separator '+__DEPTH_SEPARATOR,prop:'prop',value:p});return false;}
if(!TC.isPureObject(d[p])){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the structure of the value assigned to the property is not an object',prop:'d['+p+']',value:d[p]});return false;}
if(!d[p].hasOwnProperty('info')){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the property info is missing',prop:'d['+p+']',value:d[p]});return false;}
if(!__isValidEntry(p,d[p].info))return false;if(!d[p].hasOwnProperty('children')){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the property children is missing',prop:'d['+p+']',value:d[p]});return false;}
return true;};var __getFullProp=function(pathArray){var list=new ArrayList('string',false,true,__DEPTH_SEPARATOR);list.setData(TC.isArray(pathArray)?pathArray:[]);return list.isEmpty()?null:list.getData(true);};var __getPathArray=function(prop){var list=new ArrayList('string',false,true,__DEPTH_SEPARATOR);list.setData(TC.isString(prop)?prop:'');return list.getData();};var __getPaths=function(data,pathList,allPathList,type,option){if(!TC.isArray(pathList))pathList=[];if(!TC.isArray(allPathList))allPathList=[];if(TC.isEmptyObject(data)){if(type=='full')allPathList.push(option==='array'?pathList:(pathList.join(__DEPTH_SEPARATOR)));}
else for(var prop in data){if(data.hasOwnProperty(prop)){var copy_pathList=___.merge([],pathList);copy_pathList.push(prop);if(type=='all'||type=='partial'){if(type=='partial'&&TC.isEmptyObject(data[prop].children)){}
else allPathList.push(option=='array'?copy_pathList:(copy_pathList.join(__DEPTH_SEPARATOR)));}
allPathList=__getPaths(data[prop].children,copy_pathList,allPathList,type,option);}}
return allPathList;};var __isValidPathArray=function(value){if(!TC.isArray(value)||TC.isEmptyArray(value)){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidPathArray',msg:'Invalid Input > path is not valid',prop:'path',value:value});return false;}
return true;};var __lookUp=function(data,propList){propList=TC.isArray(propList)?propList:[];if(!data.hasOwnProperty(propList[0]))return null;if(propList.length==1)return{parent:data,prop:propList[0],info:data[propList[0]].info,children:data[propList[0]].children};else return __lookUp(data[propList[0]].children,propList.slice(1));};var __isValidProp=function(value){if(__getPathArray(value).length<1){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidProp',msg:'Invalid Input > prop is not valid',prop:'prop',value:value});return false;}
return true;};var __isValidInfo=function(value){if(!__STRUCT_INFO__[__STRUCT_INFO_VALIDATION__](value)){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidInfo',msg:'Invalid Input > info structure is not valid',prop:'struct info',value:value});return false;}
return true;};var __isValidEntry=function(prop,info){return __isValidProp(prop)&&__isValidInfo(info);};var __getNode=function(prop){return __isValidProp(prop)?__lookUp(__data,__getPathArray(prop)):null;};var __setNode=function(data,prop,info){if(!data.hasOwnProperty(prop))data[prop]={info:info,children:{}};else data[prop].info=___.merge(data[prop].info,info);};var __setInfo=function(data,propList,info){if(!__isValidPathArray(propList))return null;if(propList.length==1)__setNode(data,propList[0],info);else if(propList.length>1&&data.hasOwnProperty(propList[0])){__setInfo(data[propList[0]].children,propList.slice(1),info);}
return null;};var __setEntry=function(prop,info){if(__isValidEntry(prop,info))__setInfo(__data,__getPathArray(prop),info);};var __removeEntry=function(prop){var node=__getNode(prop);if(node){delete node.parent[node.prop];return node.info;}
return null;};var __getInfo=function(prop){var node=__getNode(prop);return node?node.info:null;};var __getKeys=function(prop){var data;if(prop){var node=__getNode(prop);data=node?node.children:{};}
else data=__data;return Object.keys(data);};var __getAllProps=function(option){option=option=='array'?'array':'list';return TC.isEmptyObject(__data)?[]:__getPaths(__data,[],[],'all',option);};var __getInternalProps=function(option){option=option=='array'?'array':'list';return TC.isEmptyObject(__data)?[]:__getPaths(__data,[],[],'partial',option);};var __getExternalProps=function(option){option=option=='array'?'array':'list';return TC.isEmptyObject(__data)?[]:__getPaths(__data,[],[],'full',option);};var __getFullDynamicPropList=function(prop,callback,propIn,propOut){propIn=TC.isArray(propIn)&&(!TC.isEmptyArray(propIn))?propIn:(__getPathArray(prop)||[]);propOut=TC.isArray(propOut)?propOut:[];var values=propIn[0]==__DYNAMIC_PROPERTY?(TC.isFunction(callback)?(callback(__getFullProp(propOut))||[]):[]):[propIn[0]];if(propIn.length==1)return values;var copyPropIn=___.merge([],propIn);var copyPropOut=___.merge([],propOut);var fullPropList=[];values.forEach(function(value){copyPropOut.push(value);var result=__getFullDynamicPropList(prop,callback,copyPropIn.slice(1),copyPropOut);result.forEach(function(res){fullPropList.push(__getFullProp([value].concat(res)));});});return fullPropList;};var __resolveDynamicProp=function(dProp,sProp){dProp=TC.isString(dProp)?(__getPathArray(dProp)||[]):[];sProp=TC.isString(sProp)?(__getPathArray(sProp)||[]):[];dProp.forEach(function(prop,index){if(prop==__DYNAMIC_PROPERTY&&sProp.hasOwnProperty(index))dProp[index]=sProp[index];});return __getFullProp(dProp);};var __reset=function(){__data={};};var __isEmpty=function(){return TC.isEmptyObject(__data);};var __isParentOf=function(key,dkey){key=TC.isString(key)?__getPathArray(key):TC.isArray(key)?key:[key];dkey=TC.isString(dkey)?__getPathArray(dkey):TC.isArray(dkey)?dkey:[dkey];if(key.length>1&&dkey.length>0&&(dkey.length<=key.length)){var length=(dkey.length==key.length)?(dkey.length-1):dkey.length;for(var i=0;i<length;i++)if(key[i]!=dkey[i])return false;return true;}
return false;};var __getDepthSeparator=function(){return __DEPTH_SEPARATOR;};var __setDepthSeparator=function(sep){if(TC.isString(sep)&&(!TC.isEmptyString(sep)))__DEPTH_SEPARATOR=sep;};var __getDynamicProperty=function(){return __DYNAMIC_PROPERTY;};var __setDynamicProperty=function(prop){if(TC.isString(prop)&&(!TC.isEmptyString(prop)))__DYNAMIC_PROPERTY=prop;};__STRUCT_INFO__=(STRUCT_INFO instanceof CustomDataObject||STRUCT_INFO instanceof MapObject)?STRUCT_INFO:__STRUCT_INFO__.setData({value:'string'});__STRUCT_INFO_VALIDATION__=__STRUCT_INFO__ instanceof CustomDataObject?'isValid':'isValidData';__setDepthSeparator(DEPTH_SEP);__setDynamicProperty(DYNAMIC_PROP);this.export={getData:function(){return ___.tryCatch(__getData,[],null,__cname);},setData:function(d,isValidCustomInfo,isCopied){return ___.tryCatch(__setData,[d,isValidCustomInfo,isCopied],null,__cname);},isValidData:function(d,isValidCustomInfo){return ___.tryCatch(__isValidData,[d,isValidCustomInfo],false,__cname);},getFullProp:function(pathArray){return ___.tryCatch(__getFullProp,[pathArray],null,__cname);},getPathArray:function(prop){return ___.tryCatch(__getPathArray,[prop],[],__cname);},getInfo:function(prop){return ___.tryCatch(__getInfo,[prop],null,__cname);},getKeys:function(prop){return ___.tryCatch(__getKeys,[prop],[],__cname);},getAllProps:function(option){return ___.tryCatch(__getAllProps,[option],[],__cname);},getInternalProps:function(option){return ___.tryCatch(__getInternalProps,[option],[],__cname);},getExternalProps:function(option){return ___.tryCatch(__getExternalProps,[option],[],__cname);},getFullDynamicPropList:function(prop,callback){return ___.tryCatch(__getFullDynamicPropList,[prop,callback,[],[]],[],__cname);},resolveDynamicProp:function(dProp,sProp){return ___.tryCatch(__resolveDynamicProp,[dProp,sProp],null,__cname);},setEntry:function(prop,info){return ___.tryCatch(__setEntry,[prop,info],null,__cname);},removeEntry:function(prop){return ___.tryCatch(__removeEntry,[prop],null,__cname);},reset:function(){return ___.tryCatch(__reset,[],null,__cname);},isEmpty:function(){return ___.tryCatch(__isEmpty,[],false,__cname);},isParentOf:function(key,dkey){return ___.tryCatch(__isParentOf,[key,dkey],false,__cname);},getDepthSeparator:function(){return ___.tryCatch(__getDepthSeparator,[],null,__cname);},setDepthSeparator:function(sep){return ___.tryCatch(__setDepthSeparator,[sep],null,__cname);},getDynamicProperty:function(){return ___.tryCatch(__getDynamicProperty,[],null,__cname);},setDynamicProperty:function(prop){return ___.tryCatch(__setDynamicProperty,[prop],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},DatalayerTableObject.prototype));};var MapObject=function MapObject(FORMAT){var __cname='__Utils__.MapObject';try{var __data={};var __s_value=new CustomDataObject({value:'string'});var __getData=function(){return ___.merge({},__data);};var __setData=function(d){if(__isValidData(d))__data=d;};var __isValidData=function(d){if(!TC.isPureObject(d))return false;for(var key in d){if(d.hasOwnProperty(key)&&(!__isValidEntry(key,d[key])))return false;}
return true;};var __hasKey=function(key){return __data.hasOwnProperty(key);};var __getKeys=function(){return Object.keys(__data);};var __getValues=function(){return Object.values(__data);};var __getValue=function(key){return __isValidKey(key)&&__data.hasOwnProperty(key)?___.merge(null,__data[key]):null;};var __setEntry=function(key,value){if(__isValidEntry(key,value))__data[key]=___.merge(__data[key],value);};var __isValidEntry=function(key,value){if(!__isValidKey(key))return false;if(!__s_value.isValidInfo('value',value)){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidEntry',msg:'Invalid Input > value is not valid',prop:'value',value:value});return false;}
return true;};var __isValidKey=function(key){if(!TC.isString(key)){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidKey',msg:'Invalid Input > key is not a string',prop:'key',value:key});return false;}
return true;};var __reset=function(){__data={};};var __isEmpty=function(){return TC.isEmptyObject(__data);};__s_value.setData({value:FORMAT});this.export={getData:function(){return ___.tryCatch(__getData,[],null,__cname);},setData:function(d){return ___.tryCatch(__setData,[d],null,__cname);},isValidData:function(d){return ___.tryCatch(__isValidData,[d],false,__cname);},hasKey:function(key){return ___.tryCatch(__hasKey,[key],false,__cname);},getKeys:function(){return ___.tryCatch(__getKeys,[],[],__cname);},getValues:function(){return ___.tryCatch(__getValues,[],[],__cname);},getValue:function(key){return ___.tryCatch(__getValue,[key],null,__cname);},setEntry:function(key,value){return ___.tryCatch(__setEntry,[key,value],null,__cname);},isValidEntry:function(key,value){return ___.tryCatch(__isValidEntry,[key,value],false,__cname);},reset:function(){return ___.tryCatch(__reset,[],null,__cname);},isEmpty:function(){return ___.tryCatch(__isEmpty,[],false,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},MapObject.prototype));};var ArrayList=function ArrayList(FORMAT,UNIQUE,CLEAN,SEP){var __cname='__Utils__.ArrayList';try{var __data=[];var __s_item=new CustomDataObject({item:'string'});var __UNIQUE=true;var __SEP=',';var __CLEAN=false;var __getData=function(outputStr){return outputStr===true?__data.join(__SEP):___.merge([],__data);};var __setData=function(d,isValidCustomInfo){d=__normalize(d);if(__isValidData(d,isValidCustomInfo))__data=d;if(__CLEAN)__clean();if(__UNIQUE)__deduplicate();};var __normalize=function(d){if(TC.isString(d)&&__s_item.getValue('item')==='string')return d.split(__SEP);return d;};var __isValidData=function(d,isValidCustomInfo){if(!TC.isArray(d))return false;for(var i=0;i<d.length;i++){if(!__s_item.isValidInfo('item',d[i])||(TC.isFunction(isValidCustomInfo)&&(!isValidCustomInfo(d[i]))))return false;}
return true;};var __filter=function(data,callback){var results=[];if(TC.isFunction(callback)){var length=data.length;for(var index=0;index<length;index++){var item=data[index];if(callback(item,index)===true)results.push(item);}}
return results;};var __clean=function(){if(__s_item.getValue('item')==='string')__data=__filter(__data,function(item){if(item)return true;});};var __deduplicate=function(){__data=__filter(__data,function(item,position){return __data.indexOf(item)==position;});};var __add=function(items){items=__normalize(items);items=TC.isArray(items)?items:[items];if(__isValidData(items)&&(!TC.isEmptyArray(items))){__data=__data.concat(items);if(__CLEAN)__clean();if(__UNIQUE)__deduplicate();}};var __remove=function(items){items=__normalize(items);items=TC.isArray(items)?items:[items];if(__isValidData(items))items.forEach(function(item){__data=__filter(__data,function(elem){return elem===item?false:true;});});};var __reset=function(){__data=[];};var __isEmpty=function(){return TC.isEmptyArray(__data);};var __size=function(){return __data.length;};var __hasValue=function(item,key){if(!__s_item.isValidInfo('item',item))return false;var i;if(item.hasOwnProperty(key)){for(i=0;i<__data.length;i++)if(__data[i][key]===item[key])return true;}
else for(i=0;i<__data.length;i++)if(__data[i]===item)return true;return false;};var __count=function(item,key){var results;if(!__s_item.isValidInfo('item',item))return 0;if(item.hasOwnProperty(key))results=__filter(__data,function(elem){if(elem[key]===item[key])return true;});else results=__filter(__data,function(elem){if(elem===item)return true;});return results.length;};var __iterator=function IteratorCTRL(){var __icname=__cname+'.__iterator';try{var __index=0;var __reset=function(){__index=0;};var __hasNext=function(){return __index<__data.length;};var __next=function(){return __index<__data.length?__data[__index++]:null;};this.export={reset:function(){return ___.tryCatch(__reset,[],null,__icname);},hasNext:function(){return ___.tryCatch(__hasNext,[],false,__icname);},next:function(){return ___.tryCatch(__next,[],null,__icname);},};}catch(e){MLOG.showMessage({type:'error',cname:__icname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},IteratorCTRL.prototype));};var __addPrefix=function(prefix){if(TC.isString(prefix)&&(!TC.isEmptyString(prefix)))__data=__data.map(function(item){return prefix+item;});};var __addSuffix=function(suffix){if(TC.isString(suffix)&&(!TC.isEmptyString(suffix)))__data=__data.map(function(item){return item+suffix;});};var __search=function(regexp){return TC.isRegExp(regexp)?__filter(__data,function(elem){if(regexp.test(elem))return true;}):[];};var __getMinOrMaxValue=function(func,options){if(!(func=='max'||func=='min'))return null;options=TC.isPureObject(options)?options:{};var isZeroIncluded=options.zero=='yes'?true:false;var isPositiveOnly=options.sign=='positive'?true:false;var isNegativeOnly=options.sign=='negative'?true:false;var filterSignAndZero=null;if(isZeroIncluded&&isPositiveOnly)filterSignAndZero=function(elem){return elem>-1;};if(!isZeroIncluded&&isPositiveOnly)filterSignAndZero=function(elem){return elem>0;};if(isZeroIncluded&&isNegativeOnly)filterSignAndZero=function(elem){return elem<1;};if(!isZeroIncluded&&isNegativeOnly)filterSignAndZero=function(elem){return elem<0;};var compare;if(func=='min')compare=function(elem1,elem2){return elem1<elem2;};if(func=='max')compare=function(elem1,elem2){return elem1>elem2;};var blacklist=new ArrayList(__s_item.getValue('item'),__UNIQUE,__CLEAN);blacklist.setData(options.exclude);var value=NaN;for(var i=0;i<__data.length;i++){if(!blacklist.isEmpty()&&blacklist.hasValue(__data[i]))continue;if((!filterSignAndZero||filterSignAndZero(__data[i]))&&(isNaN(value)||compare(__data[i],value)))value=__data[i];}
return value;};if(!TC.isUndefined(FORMAT))__s_item.setData({item:FORMAT});if(TC.isBoolean(UNIQUE))__UNIQUE=UNIQUE;if(TC.isString(SEP))__SEP=SEP;if(TC.isBoolean(CLEAN)&&__s_item.getValue('item')==='string')__CLEAN=CLEAN;this.export={getData:function(outputStr){return ___.tryCatch(__getData,[outputStr],null,__cname);},setData:function(d,isValidCustomInfo){return ___.tryCatch(__setData,[d,isValidCustomInfo],null,__cname);},isValidData:function(d,isValidCustomInfo){return ___.tryCatch(__isValidData,[d,isValidCustomInfo],false,__cname);},add:function(items){return ___.tryCatch(__add,[items],null,__cname);},remove:function(items){return ___.tryCatch(__remove,[items],null,__cname);},reset:function(){return ___.tryCatch(__reset,[],null,__cname);},isEmpty:function(){return ___.tryCatch(__isEmpty,[],false,__cname);},size:function(){return ___.tryCatch(__size,[],0,__cname);},hasValue:function(item,key){return ___.tryCatch(__hasValue,[item,key],false,__cname);},count:function(item,key){return ___.tryCatch(__count,[item,key],0,__cname);},clean:function(){return ___.tryCatch(__clean,[],[],__cname);},deduplicate:function(){return ___.tryCatch(__deduplicate,[],[],__cname);},iterator:function(){return ___.tryCatch(__iterator,[],null,__cname);},};if(this.export&&__s_item.getValue('item')==='string'){this.export.addPrefix=function(prefix){return ___.tryCatch(__addPrefix,[prefix],null,__cname);};this.export.addSuffix=function(suffix){return ___.tryCatch(__addSuffix,[suffix],null,__cname);};this.export.search=function(regexp){return ___.tryCatch(__search,[regexp],[],__cname);};}
if(this.export&&__s_item.getValue('item')==='number'){this.export.getMinValue=function(options){return ___.tryCatch(__getMinOrMaxValue,['min',options],null,__cname);};this.export.getMinPositiveValue=function(blacklist){return ___.tryCatch(__getMinOrMaxValue,['min',{sign:'positive',exclude:blacklist}],null,__cname);};this.export.getMinPositiveAndZeroValue=function(blacklist){return ___.tryCatch(__getMinOrMaxValue,['min',{sign:'positive',zero:'yes',exclude:blacklist}],null,__cname);};this.export.getMinNegativeValue=function(blacklist){return ___.tryCatch(__getMinOrMaxValue,['min',{sign:'negative',exclude:blacklist}],null,__cname);};this.export.getMinNegativeAndZeroValue=function(blacklist){return ___.tryCatch(__getMinOrMaxValue,['min',{sign:'negative',zero:'yes',exclude:blacklist}],null,__cname);};this.export.getMaxValue=function(options){return ___.tryCatch(__getMinOrMaxValue,['max',options],null,__cname);};this.export.getMaxPositiveValue=function(blacklist){return ___.tryCatch(__getMinOrMaxValue,['max',{sign:'positive',exclude:blacklist}],null,__cname);};this.export.getMaxPositiveAndZeroValue=function(blacklist){return ___.tryCatch(__getMinOrMaxValue,['max',{sign:'positive',zero:'yes',exclude:blacklist}],null,__cname);};this.export.getMaxNegativeValue=function(blacklist){return ___.tryCatch(__getMinOrMaxValue,['max',{sign:'negative',exclude:blacklist}],null,__cname);};this.export.getMaxNegativeAndZeroValue=function(blacklist){return ___.tryCatch(__getMinOrMaxValue,['max',{sign:'negative',zero:'yes',exclude:blacklist}],null,__cname);};}}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ArrayList.prototype));};var MLOG=new MessageLogging();var TC=new TypeChecking();var REB=new RegExpBuilder();var ___=new Common();var COOKIE=new Cookie();var STORAGE=new Storage();var DOM=new DOMHelper();var UTAG=new UtagHelper();this.export={MessageLogging:MLOG,TypeChecking:TC,RegExpBuilder:REB,Common:___,Cookie:COOKIE,Storage:STORAGE,DOMHelper:DOM,UtagHelper:UTAG,EventsListener:EventsListener,CustomDataObject:CustomDataObject,DatalayerTableObject:DatalayerTableObject,MapObject:MapObject,ArrayList:ArrayList,};}catch(e){if(console)console.error('###',__cname+' has not been completed successfully! => caused by: '+e.stack);}
return Object.freeze(Object.setPrototypeOf(this.export||{},UtilsCTRL.prototype));}();if(console)console.timeEnd('UTILS: CREATION');var tealium_textClean=function(t,opts){if(typeof t!=='string')return t;opts=typeof opts==='string'?opts:'';t=t.trim();if(opts.indexOf('[nobreaks]')>-1){t=t.replace(/\r\n|\n|\r/gm,' ');}
if(opts.indexOf('[nomultiplespaces]')>-1){t=t.replace(/\s{2,}|\t+/g,' ');}
if(opts.indexOf('[nospaces]')>-1){t=t.replace(/\s|\t/g,'');}
if(opts.indexOf('[spaces2minus]')>-1){t=t.replace(/ /g,'-');}
return t;};var tealium_stringReplaceHtmlEntities=function(str,repl){return typeof str==='string'?str.replace(/&#?\w+;/gi,(typeof repl==='string'?repl:'')):str;};var tealium_stringReplaceCsvSeparator=function(str,repl){return typeof str==='string'?str.replace(/[;,]/g,(typeof repl==='string'?repl:'')):str;};var tealium_stringReplaceCustom=function(str,find,repl){return(typeof str==='string'&&typeof find==='string')?str.replace(new RegExp(find,'g'),(typeof repl==='string'?repl:'')):str;};var tealium_stringTrim=function(str){return typeof str==='string'?str.trim():str;};var tealium_objReplace=function(elem,method,replace,list,elist){var result={isReplaced:false,elem:elem};if(typeof elem==='object'){for(var k in elem){if(elem.hasOwnProperty(k)){try{JSON.stringify(elem[k]);//@TODO: compare with __findRef used to find circular ref in the 'merge' function!
if(0||((typeof elem[k]!=='string')&&method!=='stringify')||(!list&&!elist)||(list&&Array.isArray(list)&&new RegExp('^('+list.join('|')+')$','g').test(''+k))||(elist&&Array.isArray(elist)&&(!(new RegExp('^('+elist.join('|')+')$','g').test(''+k))))){var child_result=tealium_objReplace(elem[k],method,replace,list,elist);result.isReplaced=result.isReplaced||child_result.isReplaced||(child_result.elem!=elem[k]);elem[k]=child_result.elem;}}catch(e){}}}}
else{if(typeof elem==='string'){if(typeof method==='string'&&/trim|htmlEntities|csvSeparator/gi.test(method)){var check;switch(method.toLowerCase()){case'htmlentities':{check=tealium_stringReplaceHtmlEntities;break;}
case'csvseparator':{check=tealium_stringReplaceCsvSeparator;break;}
case'trim':{check=tealium_stringTrim;break;}}
result.elem=check(elem,replace);}else if(Array.isArray(method)){result.elem=tealium_stringReplaceCustom(elem,method.join('|'),replace);}}
else{if(typeof method==='string'&&/stringify/gi.test(method)){result.elem=__Utils__.Common.toString(elem);}}}
return result;};}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.utils="23-09-03";}catch(e){console.log(e)}}catch(e){console.log(e);}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_ui_components")&&!window.tealium_ext000_ui_components__WeAreInBeta){window.tealium_ext000_ui_components__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_ui_components"));}
else{var tealium_viewComponents=(function(){var ___=__Utils__.Common;var DOM=__Utils__.DOMHelper;var SEP_FIELD="&nbsp;&nbsp;&nbsp;";var CStyle=function(id,css){{var __ref=null;var __id=typeof id==="string"?id:"";var __css=typeof css==="string"?css:"";var __screens={TABLET:1023,MOBILE:767,MOBILE_MINI:479,};var __rules={"all":{"media":"","css":"",},"desktop":{"media":"screen and (min-width: "+(__screens.TABLET+1)+"px)","css":"",},"tablet_mobile":{"media":"screen and (max-width: "+__screens.TABLET+"px)","css":"",},"tablet":{"media":"screen and (min-width: "+(__screens.MOBILE+1)+"px) and (max-width: "+__screens.TABLET+"px)","css":"",},"mobile":{"media":"screen and (max-width: "+__screens.MOBILE+"px)","css":"",},"mini_mobile":{"media":"screen and (max-width: "+__screens.MOBILE_MINI+"px)","css":"",},};var __getRef=function(){return __ref||document.getElementById(__id);};var __render=function(){if(!__css)return;__ref=__getRef();if(!__ref){var __head=document&&(document.head||document.getElementsByTagName('head')[0]);if(!__head)return;__ref=document.createElement('style');__ref.id=__id||"";__ref.type='text/css';__head.appendChild(__ref);}
if(__ref.innerHTML){__ref.innerHTML=__css;}else{__ref.childNodes.forEach(function(node){__ref.removeChild(node);});__ref.appendChild(document.createTextNode(__css));}};var __addRules=function(mode,css){mode=(""+mode).toLowerCase();if(mode.match(new RegExp("^("+Object.keys(__rules).join("|")+")$","i"))){if(typeof css==="string"&&css!=""){__rules[mode].css+="\n"+css;__updateCss();}}};var __updateCss=function(){__css="";for(var mode in __rules){if(__rules.hasOwnProperty(mode)){if(__rules[mode].css){__css+=(__rules[mode].media?("@media "+__rules[mode].media+" {\n"+(""+__rules[mode].css)+" }"):__rules[mode].css)+"\n";}}}};}
return{ref:function(){return __getRef();},render:function(){return __render();},addRules:function(mode,css){return __addRules(mode,css);},};};var CTag=function CTag(tag,id,cls,styles,html,eventHandlers){{var __ref=null;var __tag=tag||"div";//@NOTE: migliorare il check controllando i comuni tag altrimenti utilizzare div as default
var __id=typeof id==="string"?id:"";var __class=typeof cls==="string"?cls:"";var __style=typeof styles==="string"?styles:"";var __html=typeof html==="string"?html:"";var __eventHandlers=typeof eventHandlers==="object"?eventHandlers:{};var __getRef=function(){return __ref||document.getElementById(__id);};var __attachEventHandlers=function(){__ref=__getRef();if(__ref){var events=Object.keys(__eventHandlers);events.forEach(function(e){if(typeof e==="string"&&typeof __eventHandlers[e]==="function"){__ref[e]=__eventHandlers[e];}});}};var __render=function(html,cls,styles){__ref=__getRef();if(!__ref){__ref=document.createElement(__tag);__ref.id=__id;__attachEventHandlers();}
__ref.setAttribute("class",cls||__class);__ref.style=styles||__style;__ref.innerHTML=html||__html;return __ref;};}
return{ref:function(){return __getRef();},render:function(cls,styles,html){return __render(cls,styles,html);},};};var CTable=function CTable(id,cls,styles,eventHandlers){var container=new CTag("div",id,cls,styles,"",eventHandlers);var containerCss=new CStyle("CTableCSS"+(id?":"+id:""));var containerFilters;var containerResults;var __render=function(){__renderCss();container.render("");__renderFilters();container.ref().appendChild(containerFilters.ref());__renderResults();container.ref().appendChild(containerResults.ref());containerResults.linkCTableFilters(containerFilters);containerFilters.linkCTableResults(containerResults);return container.ref();};var __renderCss=function(){if(containerCss.ref())return;var textCss;{textCss=""
+"#"+id+" { color:#000; background-color:aliceblue; font-family:monospace; font-size:12px; margin: 10px; height: auto; line-height: 1.625; box-sizing: border-box; text-align: left; } \n";containerCss.addRules("ALL",textCss);}
containerCss.render();};var __renderFilters=function(){if(!containerFilters)containerFilters=new CTableFilters(id+"__filters","","");containerFilters.render();};var __renderResults=function(){if(!containerResults){containerResults=new CTableResults(id+"__results","","",{oncopy:function(e){var regexp=new RegExp(DOM.stripHtml(SEP_FIELD),"g");var text=window.getSelection().toString().replace(regexp,'|');var __clipboardData=e.clipboardData||window.clipboardData||e.originalEvent.clipboardData;__clipboardData.setData('text/plain',text);e.preventDefault();}});}
containerResults.render();};var __update=function(data){if(typeof data=="object"){if(containerFilters){if(data.hasOwnProperty("filters")||data.hasOwnProperty("sorting")){containerFilters.update(data.filters,data.sorting);}
if(data.hasOwnProperty("counters")){containerFilters.updateCounters(data.counters);}
if(data.hasOwnProperty("currentSet")){containerFilters.updateCurrentSet(data.currentSet);}}
if(containerResults){if(data.hasOwnProperty("results")){containerResults.update(data.results);}
if(data.hasOwnProperty("progressBar")){containerResults.updateProgressBar(data.progressBar);}}}
else tealium_log.old("###Component:CTable.update => error: data format is not correct","warn");};return{ref:function(){return container.ref();},render:function(){return __render();},update:function(data){__update(data);},};};var CTableFilters=function CTableFilters(id,cls,styles,eventHandlers){var container=new CTag("div",id,cls,styles,"",eventHandlers);var containerCss=new CStyle("CTableFiltersCSS"+(id?":"+id:""));var containerTableResults;var containerCounters;var containerCurrentSet;var containerSaveButton;var containerEmptyRow=new CTag("div","","__row");var data={counters:"",filters:"",sorting:"",currentSet:""};var dataSaveButton={SYMBOL:"&#x1f4be",LABEL:"SAVE TO CLIPBOARD",LABEL_MOBILE:"SAVE"};var __render=function(){__renderCss();if(data.filters||data.sorting){if(containerEmptyRow.ref())container.ref().removeChild(containerEmptyRow.ref());__renderFilters();__renderSortOptions();__renderOperations();container.ref().appendChild(containerEmptyRow.render());}
else container.render("");return container.ref();};var __renderCss=function(){if(containerCss.ref())return;var textCss;{textCss=""
+"#"+id+" { margin: 0; background: #899; border: 5px solid aliceblue; } \n"
+"#"+id+" input[type=checkbox], "
+"#"+id+" input[type=checkbox i] { position: relative; width: 12px; height: 12px; margin: 0; padding: 0; clip: unset; left: 0; z-index: auto; vertical-align: unset; display: inline-block; background: white; border: 1px solid gray; border-radius: 3px; box-sizing: border-box; box-shadow: white 1px 1px 3px; cursor: pointer; -webkit-appearance: none; -moz-appearance: none; appearance: none; } \n"
+"#"+id+" input[type=checkbox]:checked, "
+"#"+id+" input[type=checkbox i]:checked {background: green!important; border: 1px solid #00000099!important; -webkit-appearance: none; -moz-appearance: none; appearance: none; } \n"
+"#"+id+" input[type='text'] { min-width: calc(50% - 20px); width: calc(50% - 20px); height: 20px; outline: none; font: inherit!important; margin: 0; padding: 2px 5px; box-sizing: border-box; border: 0px!important; border-radius: 5px!important; color: darkgreen; background-color: white; display: inline; -webkit-box-shadow: inset 0 0.25em 0.375em 0 rgba(0,0,0,.3); box-shadow: inset 0 0.25em 0.375em 0 rgba(0,0,0,.3); } \n"
+"#"+id+" select { min-width: calc(50% - 75px); width: calc(50% - 75px); height: auto; padding: 2px 5px; margin: 0; text-transform: uppercase; font-family: inherit!important; color: darkgreen; border: 0px!important; border-radius: 5px!important; background: white; line-height: inherit; font: inherit!important; -webkit-box-shadow: inset 0 0.25em 0.375em 0 rgba(0,0,0,.3); box-shadow: inset 0 0.25em 0.375em 0 rgba(0,0,0,.3); -webkit-appearance: menulist; -moz-appearance: menulist; appearance: menulist; } \n"
+"#"+id+" .__success { color: darkgreen; } \n"
+"#"+id+" .__warning { color: darkgoldenrod; } \n"
+"#"+id+" .__error { color: darkred; } \n"
+"#"+id+" .__info { color: darkcyan; } \n"
+"#"+id+" .__row { font-size:14px; font-weight:bold; width: 100%; text-transform: uppercase; text-shadow: white 1px 1px 3px; border-bottom: 1px solid aliceblue; clear: both } \n"
+"#"+id+" .__row div { padding: 4px 10px; height: auto; width: 25%; float:left; box-sizing: border-box; white-space: nowrap;} \n"
+"#"+id+" .__row .__wp100 { width: 100%; } \n"
+"#"+id+" .__row .__btn { cursor: pointer; font-weight: bold; font-size: 12px; border-radius: 7px; text-align: center; text-shadow: white 1px 1px 1px; background-color: lightgreen; float: right; margin-right: 10px; margin-top: 3px; width: 180px; } \n"
+"#"+id+" .__row .__btn:hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+id+" .__row .__btn span { font-size: 11px; float: left; } \n"
+"#"+id+" .__row .__btn span::after { content: \""+dataSaveButton.LABEL+"\"; padding-left: 15px; } \n";containerCss.addRules("ALL",textCss);textCss=""
+"#"+id+" input[type='text'] { min-width: calc(100% - 20px); min-width: calc(100% - 20px); } \n"
+"#"+id+" select { min-width: calc(100% - 65px); width: calc(100% - 65px); } \n"
+"#"+id+" .__row { font-size:12px; white-space: nowrap; } \n"
+"#"+id+" .__row .__btn { width: 60px; } \n"
+"#"+id+" .__row .__btn span { font-size: 9px; } \n"
+"#"+id+" .__row .__btn span::after { content: \""+dataSaveButton.LABEL_MOBILE+"\"; padding-left: 5px; } \n";containerCss.addRules("MOBILE",textCss);textCss=""
+"#"+id+" .__row div { width: auto; } \n";containerCss.addRules("MINI_MOBILE",textCss);}
containerCss.render();};var __renderFilter=function(id,filter){return''
+'<div id="__#'+id+'__"'+(filter.status?(' class="__'+filter.status+'"'):'')+(filter.input_text?' class="__wp100"':'')+'>'
+'<input type="checkbox" '+(typeof filter.onclick==="string"&&filter.onclick!=""?('onclick="'+filter.onclick+'(\''+id+'\')" '+(filter.active?"checked":"")):'')+' />'
+(filter.label?' '+filter.label:'')
+(typeof filter.count!=="undefined"?'('+filter.count+')':'')
+(filter.input_text?' <input type="text" placeholder="'+filter.input_text.label+'" onkeyup="this.onchange();" '+(typeof filter.input_text.onchange==="string"&&filter.input_text.onchange!=""?('onchange="'+filter.input_text.onchange+'(\''+id+'\', this.value)" />'):''):'')
+'</div>';};var __renderFilters=function(){if(data.filters){var row,html;for(var prop in data.filters){if(data.filters.hasOwnProperty(prop)){if(data.filters[prop].start){html="";row=new CTag("div","","__row","","");}
html+=__renderFilter(prop,data.filters[prop]);if(data.filters[prop].end){container.ref().appendChild(row.render(html));}}}}};var __renderSortOptions=function(){if(data.sorting){var options="";if(data.sorting.labels)data.sorting.labels.forEach(function(label,index1){if(data.sorting.ordering)data.sorting.ordering.forEach(function(method,index2){var selected=(data.sorting.field_selected==index1&&data.sorting.ordering_selected==index2)?'selected="selected"':'';options+='<option value="'+index1+'_'+index2+'" '+selected+'>'+label+' -> '+method+'</option>';});});if(options){var html='<div class="__wp100">'+(data.sorting.label?(data.sorting.label+" "):"")+'<select '+(typeof data.sorting.onchange==="string"&&data.sorting.onchange!=""?('onchange="'+data.sorting.onchange+'(this.value)"'):"")+'>'+options+'</select></div>';var row=new CTag("div","","__row","",html);container.ref().appendChild(row.render());}}};var __renderOperations=function(){var row=new CTag("div","","__row","","");container.ref().appendChild(row.render());__renderCurrentSet();row.ref().appendChild(containerCurrentSet.ref());__renderSaveButton();row.ref().appendChild(containerSaveButton.ref());};var __renderCurrentSet=function(){if(!containerCurrentSet)containerCurrentSet=new CTag("div","","__currentSet");var html=data.currentSet&&data.currentSet.value?((data.currentSet.label?data.currentSet.label+': ':'')+'<span class="__success">'+data.currentSet.value+'</span>'):"";containerCurrentSet.render(html);};var __renderSaveButton=function(){if(!containerSaveButton){containerSaveButton=new CTag("div","","__btn","",'<span>'+dataSaveButton.SYMBOL+'</span>',{onclick:function(){if(containerTableResults.ref()){var isSelected=DOM.selectText(containerTableResults.ref());if(isSelected){if(document.queryCommandSupported('copy'))document.execCommand("copy");else tealium_log.old("Copy command is not supported!","warn");}else tealium_log.old("No text selected!","warn");}}});}
containerSaveButton.render();};var __renderCounters=function(){if(!containerCounters){containerCounters=new CTag("div","","__row");container.ref().appendChild(containerCounters.render());container.ref().appendChild(containerEmptyRow.render());}
var html="";if(data.counters)data.counters.forEach(function(obj){html+=(obj&&obj.value)?("<div>"+(obj.label?(obj.label+':'):'')+'<span class="__success"> '+obj.value+"</span></div>"):"";});containerCounters.render(html);};var __updateCounters=function(counters){try{if(typeof counters==="object"&&JSON.stringify(data.counters)!=JSON.stringify(counters)){data.counters=___.merge([],counters);__renderCounters();}}catch(e){tealium_log.old("###Component:CTableFilters.updateCounters => error: "+e,"warn");}};var __update=function(filters,sorting){try{if(0||(typeof filters==="object"&&JSON.stringify(data.filters)!=JSON.stringify(filters))||(typeof sorting==="object"&&JSON.stringify(data.sorting)!=JSON.stringify(sorting))){if(typeof filters==="object")data.filters=___.merge(data.filters||{},filters);if(typeof sorting==="object")data.sorting=___.merge(data.sorting||{},sorting);__render();}}catch(e){tealium_log.old("###Component:CTableFilters.update => error: "+e,"warn");}};var __updateCurrentSet=function(currentSet){try{if(typeof currentSet==="object"&&JSON.stringify(data.currentSet)!=JSON.stringify(currentSet)){data.currentSet=___.merge(data.currentSet||{},currentSet);__renderCurrentSet();}}catch(e){tealium_log.old("###Component:CTableFilters.updateCurrentSet => error: "+e,"warn");}};return{ref:function(){return container.ref();},render:function(){return __render();},renderCounters:function(){return __renderCounters();},renderCurrentSet:function(){return __renderCurrentSet();},update:function(f,s){__update(f,s);},updateCounters:function(c){__updateCounters(c);},updateCurrentSet:function(c){__updateCurrentSet(c);},linkCTableResults:function(ref){containerTableResults=ref;}};};var CTableResults=function CTableResults(id,cls,styles,eventHandlers){var container=new CTag("div",id,cls,styles,"",eventHandlers);var containerCss=new CStyle("CTableResultsCSS"+(id?":"+id:""));var containerTableFilters;var containerProgressBar;var containerEmptyRow=new CTag("div","","__row __content");var data={results:"",progressBar:""};var __render=function(){__renderCss();container.render("");if(data.results){__renderHeadRow();__renderContentRows();container.ref().appendChild(containerEmptyRow.render());if(containerTableFilters)containerTableFilters.updateCurrentSet({value:(data.results.rows&&data.results.rows.length?data.results.rows.length:0)});}
return container.ref();};var __renderCss=function(){if(containerCss.ref())return;var textCss;{textCss=""
+"#"+id+" .__row { border-bottom:1px solid #888; clear: both} \n"
+"#"+id+" .__row.__head { font-size:14px; font-weight:bold; height: 36px; width: 100%; border-top: 2px solid gray; } \n"
+"#"+id+" .__row.__head .__processing { width: 100%; padding: 3px 5px; } \n"
+"#"+id+" .__row.__head .__processing .__progress { width: 0%; background-color: darkseagreen; padding: 2px 0px; text-transform: uppercase; text-shadow: white 1px 1px 3px; } \n"
+"#"+id+" .__row.__head .__processing .__progress .__label { padding: 0px 10px; } \n"
+"#"+id+" .__row.__head .__processing .__progress .__value { color: darkgreen; } \n"
+"#"+id+" .__row.__content .__notfound { width: 100%; text-align: center; font-size: 14px; font-weight: 900; color: darkred; } \n"
+"#"+id+" .__row div { padding: 4px 10px; height: auto; width: auto; float:left; box-sizing: border-box; } \n"
+"#"+id+" .__row .__badge { width: 110px; height: auto; padding: 1px; color: white; font-weight: bold; border: 1px solid #888; border-radius: 8px; text-align: center; text-shadow: black 1px 1px 3px; display: inline-block; } \n"
+"#"+id+" .__row .__badge.__success { background-color: #456f45; } \n"
+"#"+id+" .__row .__badge.__warning { background-color: #e69604; } \n"
+"#"+id+" .__row .__badge.__info { background-color: #76d7ed; } \n"
+"#"+id+" .__row .__badge.__error { background-color: #dc1111; } \n";containerCss.addRules("ALL",textCss);textCss=""
+"#"+id+" .__row { font-size:10px; } \n"
+"#"+id+" .__row.__head { font-size:12px; border-bottom: 0px; height: 32px; } \n"
+"#"+id+" .__row.__content .__notfound { font-size: 12px; } \n"
+"#"+id+" .__row .__badge { width: 90px; margin-left: 5px; } \n";containerCss.addRules("MOBILE",textCss);textCss=""
+"#"+id+" .__row .__badge { width: 65px; } \n";containerCss.addRules("MINI_MOBILE",textCss);}
containerCss.render();};var __renderHeadRow=function(){if(data.results.selected&&data.results.selected.length>0&&data.results.cols){var row=new CTag("div","","__row __head");var html='';data.results.selected.map(function(key,i){if(data.results.cols.hasOwnProperty(key)){var obj=data.results.cols[key];var __width=obj.width?obj.width:((100/data.results.selected.length).toFixed(2)+"%");var __styles="width: "+__width+"; ";var __content=obj.value+(data.results.selected.length==(i+1)?'':SEP_FIELD);html+='<div id="__#'+key+'__" style="'+__styles+'">'+__content+'</div>';}});container.ref().appendChild(row.render(html));}};var __renderContentRows=function(){if(1&&data.results.selected&&data.results.selected.length>0&&data.results.rows&&data.results.rows.length>0){var cols=data.results.cols?data.results.cols:{};data.results.rows.map(function(line){var row=new CTag("div","","__row __content");var html='';data.results.selected.map(function(key,i){if(line.hasOwnProperty(key)){var obj=line[key];var __width=cols[key].width?cols[key].width:((100/data.results.selected.length).toFixed(2)+"%");var __extraStyle=cols[key].extraStyle?cols[key].extraStyle:'';var __styles="width: "+__width+"; "+__extraStyle;var __classes=obj.badge?("__badge"+(obj.status?" __"+obj.status:"")):"";var __content=obj.value+(data.results.selected.length==(i+1)?'':SEP_FIELD);html+='<div id="__#'+key+'__" style="'+__styles+'"><span class="'+__classes+'">'+__content+'</span></div>';}});container.ref().appendChild(row.render(html));});}
else{var row=new CTag("div","","__row __content");var html='<div class="__notfound">'+(data.results.empty&&data.results.empty.label?(''+data.results.empty.label):'NOT FOUND')+'</div>';container.ref().appendChild(row.render(html));}};var __renderProgressBar=function(){if(!containerProgressBar){containerProgressBar=new CTag("div","","__row __head");container.ref().appendChild(containerProgressBar.render());}
var html=data.progressBar?('<div class="__processing"><div class="__progress" style="width:'+data.progressBar.value+'%;"><span class="__label">'+data.progressBar.label+':</span><span class="__value">'+data.progressBar.value+'%</span></div></div>'):'';containerProgressBar.render(html);};var __update=function(results){try{if(typeof results==="object"&&JSON.stringify(data.results)!=JSON.stringify(results)){data.results=___.merge({},results);__render();}}catch(e){tealium_log.old("###Component:CTableResults.update => error: "+e,"warn");}};var __updateProgressBar=function(progressBar){try{if(typeof progressBar==="object"&&JSON.stringify(data.progressBar)!=JSON.stringify(progressBar)){progressBar.value=(progressBar.value>-1&&progressBar.value<=100)?progressBar.value:0;data.progressBar=___.merge(data.progressBar||{},progressBar);__renderProgressBar();}}catch(e){tealium_log.old("###Component:CTableResults.updateProgressBar => error: "+e,"warn");}};return{ref:function(){return container.ref();},render:function(){return __render();},renderProgressBar:function(){__renderProgressBar();},update:function(r){__update(r);},updateProgressBar:function(p){__updateProgressBar(p);},linkCTableFilters:function(ref){containerTableFilters=ref;}};};var CPopup=function CPopup(id,cls,styles,eventHandlers,title,subtitle,__refcontainerContent){var CLS_BTNS=id+"_buttons";var Z_INDEX=100000001;var X_SYMBOL="&#10005;";var HEADER_TITLE=title||"Popup Title";var HEADER_SUBTITLE=subtitle||"Popup Subtitle";var container=new CTag("div",id,cls,styles,"",eventHandlers);var containerCloseBtn;var containerTitle;var containerSubtitle;var containerContent=__refcontainerContent||undefined;var containerCss=new CStyle("CPopupCSS"+(id?":"+id:""));var __render=function(){__renderCss();container.render("");__renderCloseBtn();container.ref().appendChild(containerCloseBtn.ref());__renderTitle();container.ref().appendChild(containerTitle.ref());__renderSubtitle();container.ref().appendChild(containerSubtitle.ref());__renderContent();container.ref().appendChild(containerContent.ref());return container.ref();};var __renderCss=function(){if(containerCss.ref())return;var textCss;{textCss=""
+"#"+id+" { position:fixed; z-index:"+Z_INDEX+"; left:0; top:0; background-color: #000; width:100%; height:100%; overflow-y: auto; font-family: monospace; font-size:18px; } \n"
+"#"+id+" input[type=text]:focus, "
+"#"+id+" select:focus { outline: auto!important; } \n"
+"#"+id+" input[type=checkbox]:focus, "
+"#"+id+" input[type=radio]:focus { outline: dashed 2px #006400a6!important; outline-offset: 1px!important; } \n"
+"#"+id+" input[type=text]::-webkit-input-placeholder { /* Edge */ color: gray; } \n"
+"#"+id+" input[type=text]:-ms-input-placeholder { /* Internet Explorer 10-11 */ color: gray; } \n"
+"#"+id+" input[type=text]::placeholder { color: gray; } \n"
+"."+CLS_BTNS+" { cursor:pointer; font-weight: bold; border-radius: 10px; margin-left: 5px; padding: 10px 12px; text-align:center; text-shadow: white 1px 1px 1px; background-color:lightgreen; line-height: 1; float:right; } \n"
+"."+CLS_BTNS+":hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+id+" h1 { width: calc(100% - 20px); margin:10px; padding: 0; color:lightgreen; line-height:normal; font-family:monospace; font-size:30px; font-weight: normal; font-style: normal; text-transform: capitalize; text-shadow: white 1px 1px 3px; text-align: center; } \n"
+"#"+id+" h2 { width: calc(100% - 20px); margin:10px; padding: 0; color:orange; line-height:normal; font-family:monospace; font-size:20px; font-weight: normal; font-style: normal; text-transform: none; text-shadow: white 1px 1px 3px; text-align: justify; } \n";containerCss.addRules("ALL",textCss);textCss=""
+"#"+id+" h1 { font-size:24px; margin: 10px 10px 0px 10px; } \n"
+"#"+id+" h2 { font-size:14px; margin: 10px 10px 0px 10px; } \n"
+"."+CLS_BTNS+" { float:none; margin: 10px 10px 0px; } \n";containerCss.addRules("MOBILE",textCss);}
containerCss.render();};var __renderCloseBtn=function(){if(!containerCloseBtn){containerCloseBtn=new CTag("div","",CLS_BTNS,"",X_SYMBOL,{onclick:function(){__display(false);}});}
containerCloseBtn.render();};var __renderTitle=function(){if(!containerTitle)containerTitle=new CTag("h1","","","",HEADER_TITLE);containerTitle.render();};var __renderSubtitle=function(){if(!containerSubtitle)containerSubtitle=new CTag("h2","","","",HEADER_SUBTITLE);containerSubtitle.render();};var __renderContent=function(){if(!containerContent)containerContent=new CTag("div","","","","");containerContent.render();};var __display=function(state){container.ref().style.display=state?"block":"none";};return{ref:function(){return container.ref();},render:function(){return __render();},open:function(){__display(true);},close:function(){__display(false);},};};var self={CTag:CTag,CTable:CTable,CTableFilters:CTableFilters,CTableResults:CTableResults,CPopup:CPopup,};return self;})();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.ui_components="23-05-01";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_global_settings")&&!window.tealium_ext000_global_settings__WeAreInBeta){window.tealium_ext000_global_settings__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_global_settings"));}
else{if(console)console.time('GLOBAL SETTINGS: CREATION');var GlobalSettings=function GlobalSettingsCTRL(){var __cname='GlobalSettings';try{var MLOG=__Utils__.MessageLogging;var TC=__Utils__.TypeChecking;var ___=__Utils__.Common;var MapObject=__Utils__.MapObject;this.export={ConfigOrderCurrencyByPageCountryTable:new MapObject('string'),};}catch(e){if(console)console.error('###',__cname+' has not been completed successfully! => caused by: '+e.stack);}
return Object.freeze(Object.setPrototypeOf(this.export||{},GlobalSettingsCTRL.prototype));}();if(console)console.timeEnd('GlobalSettings: CREATION');var GlobalSettingsConfiguration=function(){try{var CFG_OCPC=GlobalSettings.ConfigOrderCurrencyByPageCountryTable;{['AT','BE','CY','DE','EE','ES','FI','FR','GR','IE','IT','LT','LU','LV','MT','NL','PT','SK','SI'].forEach(function(country){CFG_OCPC.setEntry(country,'EUR');});CFG_OCPC.setEntry('AE','AED');CFG_OCPC.setEntry('AU','AUD');CFG_OCPC.setEntry('BR','BRL');CFG_OCPC.setEntry('CA','CAD');CFG_OCPC.setEntry('CH','CHF');CFG_OCPC.setEntry('CN','CNY');CFG_OCPC.setEntry('CZ','CZK');CFG_OCPC.setEntry('DK','DKK');CFG_OCPC.setEntry('GB','GBP');CFG_OCPC.setEntry('UK','GBP');CFG_OCPC.setEntry('HK','HKD');CFG_OCPC.setEntry('IN','INR');CFG_OCPC.setEntry('JP','JPY');CFG_OCPC.setEntry('KR','KRW');CFG_OCPC.setEntry('MX','MXN');CFG_OCPC.setEntry('NO','NOK');CFG_OCPC.setEntry('NZ','NZD');CFG_OCPC.setEntry('PL','PLN');CFG_OCPC.setEntry('TR','TRY');CFG_OCPC.setEntry('US','USD');CFG_OCPC.setEntry('SE','SEK');CFG_OCPC.setEntry('MY','MYR');CFG_OCPC.setEntry('SG','SGD');CFG_OCPC.setEntry('TH','THB');}}catch(e){if(console)console.error('### GlobalSettingsConfiguration has not been completed successfully! => caused by: '+e.stack);}}();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.global_settings="23-08-01";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_automatic_qa")&&!window.tealium_ext000_automatic_qa__WeAreInBeta){window.tealium_ext000_automatic_qa__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_automatic_qa"));}
else{__Utils__.MessageLogging.timeStart('AUTO QA: CREATION');var AutoQAService=function AutoQAServiceCTRL(){var __cname='AutoQAService';try{var MLOG=__Utils__.MessageLogging;var TC=__Utils__.TypeChecking;var REB=__Utils__.RegExpBuilder;var ___=__Utils__.Common;var CustomDataObject=__Utils__.CustomDataObject;var DatalayerTableObject=__Utils__.DatalayerTableObject;var MapObject=__Utils__.MapObject;var ArrayList=__Utils__.ArrayList;var ConfigDefaultTable=function ConfigDefaultTableCTRL(){var __cname='AutoQAService.ConfigDefaultTable';try{var __table=new MapObject('any');__table.setData({'DatalayerDepthSeparator':'$$','DatalayerDependencySeparator':'___','DatalayerDynamicProp':'__INDEX__',});this.export={getTable:function(){return __table.getData();},};{var keys=__table.getKeys();for(var i=0;i<keys.length;i++){this.export['get'+keys[i]]=function(key){return __table.getValue(key);}.bind(null,keys[i]);this.export['set'+keys[i]]=function(key,value){__table.setEntry(key,value);}.bind(null,keys[i]);}}}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigDefaultTableCTRL.prototype));};var ConfigGlobalStaticTable=function ConfigGlobalStaticTableCTRL(TABLE){var __cname='AutoQAService.ConfigGlobalStaticTable';try{var __table=new MapObject('array');var __getTable=function(){return __table.getData();};var __setTable=function(t){if(t)__table.setData(t);};var __getInfo=function(key){return __table.getValue(key);};var __setInfo=function(key,values){return __table.setEntry(key,values);};__setTable(TABLE);this.export={getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},getInfo:function(key){return ___.tryCatch(__getInfo,[key],null,__cname);},setInfo:function(key,values){return ___.tryCatch(__setInfo,[key,values],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigGlobalStaticTableCTRL.prototype));};var ConfigPropertyStaticTable=function ConfigPropertyStaticTableCTRL(TABLE){var __cname='AutoQAService.ConfigPropertyStaticTable';try{var __s_info=new CustomDataObject({values:'array'});var __table=new DatalayerTableObject(__s_info,CFGD.getDatalayerDepthSeparator(),CFGD.getDatalayerDynamicProp());var __getTable=function(){return __table.getData();};var __setTable=function(t){__table.setData(t);};var __getInfo=function(prop){var info=__table.getInfo(prop);return!TC.isNull(info)?info.values:null;};var __setInfo=function(prop,values){var info=TC.isNull(values)?{}:{values:values};return __table.setEntry(prop,info);};var __init=function(){__table.setDepthSeparator(CFGD.getDatalayerDepthSeparator());__table.setDynamicProperty(CFGD.getDatalayerDynamicProp());};var __isValueOf=function(prop,value){return TC.isString(value)&&REB.isValueOf(__getInfo(prop)).test(value)?true:false;};__setTable(TABLE);this.export={init:function(){return ___.tryCatch(__init,[],null,__cname);},getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},getInfo:function(prop){return ___.tryCatch(__getInfo,[prop],null,__cname);},setInfo:function(prop,values){return ___.tryCatch(__setInfo,[prop,values],null,__cname);},isValueOf:function(prop,value){return ___.tryCatch(__isValueOf,[prop,value],false,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigPropertyStaticTableCTRL.prototype));};var ConfigSuggTable=function ConfigSuggTableCTRL(TABLE){var __cname='AutoQAService.ConfigSuggTable';try{var __s_info=new CustomDataObject({suggestions:'string'});var __table=new DatalayerTableObject(__s_info,CFGD.getDatalayerDepthSeparator(),CFGD.getDatalayerDynamicProp());var __globalSuggestions=new MapObject('string');var __getTable=function(){return __table.getData();};var __setTable=function(t){__table.setData(t);};var __getInfo=function(prop){var info=__table.getInfo(prop);return!TC.isNull(info)?info.suggestions:null;};var __setInfo=function(prop,suggestions){var info=TC.isNull(suggestions)?{}:{suggestions:suggestions};return __table.setEntry(prop,info);};var __init=function(){__table.setDepthSeparator(CFGD.getDatalayerDepthSeparator());__table.setDynamicProperty(CFGD.getDatalayerDynamicProp());};var __getGlobalSuggestions=function(key){return __globalSuggestions.hasKey(key)?__globalSuggestions.getValue(key):__globalSuggestions.getData();};var __setGlobalSuggestions=function(map){for(var key in map)__globalSuggestions.setEntry(key,map[key]);};__setTable(TABLE);__globalSuggestions.setData({SINGLE_VALUE:'It must be',MULTIPLE_VALUE:'It must be one of',EMPTY_STRING:'empty string'});this.export={init:function(){return ___.tryCatch(__init,[],null,__cname);},getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},getInfo:function(prop){return ___.tryCatch(__getInfo,[prop],null,__cname);},setInfo:function(prop,suggestions){return ___.tryCatch(__setInfo,[prop,suggestions],null,__cname);},getGlobalSuggestions:function(key){return ___.tryCatch(__getGlobalSuggestions,[key],{},__cname);},setGlobalSuggestions:function(map){return ___.tryCatch(__setGlobalSuggestions,[map],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigSuggTableCTRL.prototype));};var ConfigDatalayerPropertyListTable=function ConfigDatalayerPropertyListTableCTRL(TABLE,FORMATS){var __cname='AutoQAService.ConfigDatalayerPropertyListTable';try{var __s_info=new CustomDataObject({format:'string',acceptedProps:'number'});var __table=new DatalayerTableObject(__s_info,CFGD.getDatalayerDepthSeparator(),CFGD.getDatalayerDynamicProp());var __formats_available=new MapObject('function');var __formats_requested=new ArrayList('string',true,true);var __getTable=function(){return __table.getData();};var __setTable=function(t){__table.setData(t,function(info){return __isValidInfo(info.format,info.acceptedProps);});};var __isValidInfo=function(format,acceptedProps){return __isValidFormatRequested(format)&&__isValidAcceptedProps(acceptedProps,format);};var __isValidFormatRequested=function(value){return __formats_requested.hasValue(value);};var __isValidAcceptedProps=function(acceptedProps,format){var __fname='__isValidAcceptedProps';if(!TC.isUndefined(acceptedProps)){if(acceptedProps>-1&&format!=='object'){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > acceptedProps can be set with positive number (zero included) only for objects and arrays',prop:'acceptedProps',value:acceptedProps});return false;}
if(acceptedProps<0&&(format=='object')){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > acceptedProps can be set with negative number only for formats different than objects or arrays',prop:'acceptedProps',value:acceptedProps});return false;}}
return true;};var __getInfo=function(prop,key){var info=__table.getInfo(prop);return!TC.isNull(info)?(key?info[key]:info):null;};var __setInfo=function(props,value){var info=TC.isString(value)?{format:value}:TC.isPureObject(value)?value:null;if(!TC.isNull(info)&&__isValidInfo(info.format,info.acceptedProps)){props=TC.isArray(props)?props:[props];props.forEach(function(prop){__table.setEntry(prop,___.merge({},info));});}};var __getFormat=function(prop){return __getInfo(prop,'format');};var __getAcceptedProps=function(prop){return __getInfo(prop,'acceptedProps');};var __getAllProps=function(option){return __table.getAllProps(option);};var __getFullProp=function(pathArray){return __table.getFullProp(pathArray);};var __getPathProp=function(pathString){return __table.getPathArray(pathString);};var __isParentOfProp=function(key,dkey){return __table.isParentOf(key,dkey);};var __getFormats=function(){return __formats_requested.getData();};var __setFormats=function(values){__formats_requested.setData(values);};var __checkAvailableFormats=function(values){if(!TC.isArray(values)||TC.isEmptyArray(values))return false;for(var i=0;i<values.length;i++)if(!__formats_available.hasKey(values[i]))return false;return true;};var __getEmptyChecking=function(format){return __isValidFormatRequested(format)?__formats_available.getValue(format):null;};var __init=function(){__table.setDepthSeparator(CFGD.getDatalayerDepthSeparator());__table.setDynamicProperty(CFGD.getDatalayerDynamicProp());};__formats_available.setEntry('string',function(value){return __Utils__.TypeChecking.isEmptyString(value);});__formats_available.setEntry('object',function(value){return __Utils__.TypeChecking.isEmptyObject(value);});__formats_requested.setData(__checkAvailableFormats(FORMATS)?FORMATS:__formats_available.getKeys());__setTable(TABLE);this.export={init:function(){return ___.tryCatch(__init,[],null,__cname);},getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},getInfo:function(prop){return ___.tryCatch(__getInfo,[prop],null,__cname);},setInfo:function(props,info){return ___.tryCatch(__setInfo,[props,info],null,__cname);},getFormat:function(prop){return ___.tryCatch(__getFormat,[prop],null,__cname);},getAcceptedProps:function(prop){return ___.tryCatch(__getAcceptedProps,[prop],null,__cname);},getAllProps:function(option){return ___.tryCatch(__getAllProps,[option],[],__cname);},getFullProp:function(pathArray){return ___.tryCatch(__getFullProp,[pathArray],null,__cname);},getPathProp:function(pathString){return ___.tryCatch(__getPathProp,[pathString],[],__cname);},isParentOfProp:function(key,dkey){return ___.tryCatch(__isParentOfProp,[key,dkey],false,__cname);},getFormats:function(){return ___.tryCatch(__getFormats,[],[],__cname);},setFormats:function(values){return ___.tryCatch(__setFormats,[values],null,__cname);},isValidFormat:function(value){return ___.tryCatch(__isValidFormatRequested,[value],false,__cname);},getEmptyChecking:function(format){return ___.tryCatch(__getEmptyChecking,[format],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigDatalayerPropertyListTableCTRL.prototype));};var ConfigDatalayerContextTable=function ConfigDatalayerContextTableCTRL(TABLE){var __cname='AutoQAService.ConfigDatalayerContextTable';try{var __s_data=new CustomDataObject({onPage:'string',onEvent:'string',eventListAsPage:'array',eventPageMap:'object',domNodeOrElementList:'array'});var __table={};var __eventPageMap=new MapObject('string');var __getTable=function(){return ___.merge({},__table);};var __setTable=function(t){if(__isValidTable(t)){__eventPageMap.setData(t.eventPageMap);__table=t;}};var __isValidTable=function(t){return t&&__s_data.isValid(t)&&__isValidPropList([t.onPage,t.onEvent])&&__isValidContextValue(t.eventListAsPage,t.onEvent)&&__isValidEventPageMap(t.eventPageMap,t.onPage,t.onEvent)&&__isValidPropList(t.domNodeOrElementList);};var __isValidEventPageMap=function(map,p_context,e_context){return __eventPageMap.isValidData(map)&&__isValidContextValue(Object.keys(map),(e_context||__getContextOnEvent()))&&__isValidContextValue(Object.values(map),(p_context||__getContextOnPage()));};var __isValidEventPageMapEntry=function(key,value){return __eventPageMap.isValidEntry(key,value)&&__isValidContextValue(key,__getContextOnEvent())&&__isValidContextValue(value,__getContextOnPage());};var __isValidPropList=function(values){values=TC.isArray(values)?values:[values];for(var i=0;i<values.length;i++){if(!CDPLT.getInfo(values[i])){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidPropList',msg:'Invalid Input > the datalayer property does not exist!',prop:'prop',value:values[i]});return false;}}
return true;};var __isValidContextValue=function(values,context){values=TC.isArray(values)?values:[values];for(var i=0;i<values.length;i++){if(!CPST.isValueOf(context,values[i])){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidContextValue',msg:'Invalid Input > the value provided is not a context value!',prop:'value',value:values[i]});return false;}}
return true;};var __getInfo=function(key){return __s_data.isValidKey(key)?___.merge(null,__table[key]):null;};var __setInfo=function(key,value){if(__s_data.isValidInfo(key,value)){if(key=='eventPageMap')__eventPageMap.setData(value);__table[key]=value;}};var __getContextOnPage=function(){return __getInfo('onPage')||'';};var __setContextOnPage=function(name){if(__isValidPropList(name))__setInfo('onPage',name);};var __isContextOnPage=function(name){return __getContextOnPage()===name?true:false;};var __getContextOnEvent=function(){return __getInfo('onEvent')||'';};var __setContextOnEvent=function(name){if(__isValidPropList(name))__setInfo('onEvent',name);};var __isContextOnEvent=function(name){return __getContextOnEvent()===name?true:false;};var __isValidContext=function(name){return(__isContextOnPage(name)||__isContextOnEvent(name))?true:false;};var __getEventsToUseAsPageContext=function(){return __getInfo('eventListAsPage')||[];};var __setEventsToUseAsPageContext=function(values){if(__isValidContextValue(values,__getContextOnEvent())){values=TC.isArray(values)?values:[values];var list=__getEventsToUseAsPageContext();list=TC.isEmptyArray(list)?values:___.merge(list,values);__setInfo('eventListAsPage',list);}};var __isEventToUseAsPageContext=function(value){var list=__getEventsToUseAsPageContext();return(!TC.isEmptyArray(list))&&__isValidContextValue(value,__getContextOnEvent())&&REB.isValueOf(list).test(value)?true:false;};var __getEventsMapWithPageContext=function(){return __getInfo('eventPageMap')||{};};var __getEventsListWithPageContext=function(){return __eventPageMap.getKeys().filter(function(key){if(!TC.isEmptyString(__eventPageMap.getValue(key)))return true;});};var __getPageContextOfEvent=function(key){return __eventPageMap.getValue(key)||'';};var __setEventsMapWithPageContext=function(map){if(__isValidEventPageMap(map))__setInfo('eventPageMap',map);};var __setEntryToEventsMapWithPageContext=function(e_value,p_value){if(__isValidEventPageMapEntry(e_value,p_value)){__eventPageMap.setEntry(e_value,p_value);if(!__table.hasOwnProperty('eventPageMap'))__table.eventPageMap={};__table.eventPageMap[e_value]=p_value;}};var __isEventWithPageContext=function(value){var list=__getEventsListWithPageContext();return(!TC.isEmptyArray(list))&&__isValidContextValue(value,__getContextOnEvent())&&REB.isValueOf(list).test(value)?true:false;};var __getDomNodeOrElementList=function(){return __getInfo('domNodeOrElementList')||[];};var __setDomNodeOrElementList=function(values){if(__isValidPropList(values)){values=TC.isArray(values)?values:[values];var list=__getDomNodeOrElementList();list=TC.isEmptyArray(list)?values:___.merge(list,values);__setInfo('domNodeOrElementList',list);}};var __isDomNodeOrElementList=function(value){var list=__getDomNodeOrElementList();return(!TC.isEmptyArray(list))&&__isValidPropList(value)&&REB.isValueOf(list).test(value)?true:false;};__setTable(TABLE);this.export={getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},getContextOnPage:function(){return ___.tryCatch(__getContextOnPage,[],null,__cname);},setContextOnPage:function(name){return ___.tryCatch(__setContextOnPage,[name],null,__cname);},isContextOnPage:function(name){return ___.tryCatch(__isContextOnPage,[name],false,__cname);},getContextOnEvent:function(){return ___.tryCatch(__getContextOnEvent,[],'',__cname);},setContextOnEvent:function(name){return ___.tryCatch(__setContextOnEvent,[name],null,__cname);},isContextOnEvent:function(name){return ___.tryCatch(__isContextOnEvent,[name],'',__cname);},isValidContext:function(name){return ___.tryCatch(__isValidContext,[name],false,__cname);},getEventsToUseAsPageContext:function(){return ___.tryCatch(__getEventsToUseAsPageContext,[],[],__cname);},setEventsToUseAsPageContext:function(list){return ___.tryCatch(__setEventsToUseAsPageContext,[list],null,__cname);},isEventToUseAsPageContext:function(value){return ___.tryCatch(__isEventToUseAsPageContext,[value],false,__cname);},getEventsMapWithPageContext:function(){return ___.tryCatch(__getEventsMapWithPageContext,[],{},__cname);},getEventsListWithPageContext:function(){return ___.tryCatch(__getEventsListWithPageContext,[],[],__cname);},getPageContextOfEvent:function(value){return ___.tryCatch(__getPageContextOfEvent,[value],'',__cname);},setEventsMapWithPageContext:function(map){return ___.tryCatch(__setEventsMapWithPageContext,[map],null,__cname);},setEntryToEventsMapWithPageContext:function(e_value,p_value){return ___.tryCatch(__setEntryToEventsMapWithPageContext,[e_value,p_value],null,__cname);},isEventWithPageContext:function(value){return ___.tryCatch(__isEventWithPageContext,[value],false,__cname);},getDomNodeOrElementList:function(){return ___.tryCatch(__getDomNodeOrElementList,[],[],__cname);},setDomNodeOrElementList:function(list){return ___.tryCatch(__setDomNodeOrElementList,[list],null,__cname);},isDomNodeOrElementList:function(value){return ___.tryCatch(__isDomNodeOrElementList,[value],false,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigDatalayerContextTableCTRL.prototype));};var ConfigDatalayerPriorityMap=function ConfigDatalayerPriorityMapCTRL(TABLE,PRIORITIES,NO_PRIORITY){var __cname='AutoQAService.ConfigDatalayerPriorityMap';try{var __s_data=new CustomDataObject();var __table={};var __pageContextMap=new MapObject('number');var __eventContextMap=new MapObject('number');var __priorities=new ArrayList('number',true,true);var __no_priority;var __getTable=function(){return ___.merge({},__table);};var __setTable=function(t){if(__isValidTable(t)){__pageContextMap.setData(t[CDCT.getContextOnPage()]);__eventContextMap.setData(t[CDCT.getContextOnEvent()]);__table=t;}};var __isValidTable=function(t){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();return t&&__s_data.isValid(t)&&t.hasOwnProperty(pageContext)&&t.hasOwnProperty(eventContext)&&__isValidContextMap(t[pageContext],pageContext)&&__isValidContextMap(t[eventContext],eventContext);};var __getMapBy=function(context){return CDCT.isContextOnPage(context)?__pageContextMap:CDCT.isContextOnEvent(context)?__eventContextMap:null;};var __isValidContextMap=function(map,context){return __isValidContext(context)&&__getMapBy(context).isValidData(map)&&__isValidContextValue(Object.keys(map),context)&&__isValidPriority(Object.values(map));};var __isValidContext=function(context){if(!CDCT.isValidContext(context)){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidContext',msg:'Invalid Input > the context provided is not valid!',prop:'context',value:context});return false;}
return true;};var __isValidContextValue=function(values,context){values=TC.isArray(values)?values:[values];for(var i=0;i<values.length;i++){if(!CPST.isValueOf(context,values[i])){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidContextValue',msg:'Invalid Input > the value provided is not a context value!',prop:'value',value:values[i]});return false;}}
return true;};var __getContextMap=function(context){return __isValidContext(context)?__table[context]:null;};var __getContextMapKeys=function(context){return __isValidContext(context)?__getMapBy(context).getKeys():null;};var __getContextMapValues=function(context){return __isValidContext(context)?__getMapBy(context).getValues():null;};var __getContextMapValue=function(context,key){return __isValidContext(context)&&__isValidContextValue(key,context)?__getMapBy(context).getValue(key):null;};var __isValidContextMapEntry=function(context,key,value){return __isValidContext(context)&&__getMapBy(context).isValidEntry(key,value)&&__isValidContextValue(key,context)&&__isValidPriority(value);};var __setContextMapEntry=function(context,key,value){if(__isValidContextMapEntry(context,key,value)){__getMapBy(context).setEntry(key,value);if(!__table.hasOwnProperty(context))__table[context]={};__table[context][key]=value;}};var __getPriorities=function(){return __priorities.getData();};var __setPriorities=function(values){__priorities.setData(values);};var __isValidPriority=function(values){values=TC.isArray(values)?values:[values];for(var i=0;i<values.length;i++){if(!__priorities.hasValue(values[i])){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidPriority',msg:'Invalid Input > the value provided is not a valid priority!',prop:'value',value:values[i]});return false;}}
return true;};var __getNoPriority=function(){return __no_priority;};var __setNoPriority=function(value){if(__priorities.hasValue(value))__no_priority=value;};var __getMinPriority=function(){return __priorities.getMinValue({exclude:[__no_priority]});};var __getMaxPriority=function(){return __priorities.getMaxValue({exclude:[__no_priority]});};__priorities.setData(PRIORITIES);if(!TC.isUndefined(NO_PRIORITY))__setNoPriority(NO_PRIORITY);if(__priorities.isEmpty()){__priorities.setData([0,1,2]);__no_priority=0;}
{var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();var __STRUCT__={};if(pageContext)__STRUCT__[pageContext]='object';if(eventContext)__STRUCT__[eventContext]='object';__s_data.setData(__STRUCT__);}
__setTable(TABLE);this.export={getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},isValidTable:function(t){return ___.tryCatch(__isValidTable,[t],false,__cname);},getContextMap:function(context){return ___.tryCatch(__getContextMap,[context],null,__cname);},getContextMapKeys:function(context){return ___.tryCatch(__getContextMapKeys,[context],null,__cname);},getContextMapValues:function(context){return ___.tryCatch(__getContextMapValues,[context],null,__cname);},getContextMapValue:function(context,key){return ___.tryCatch(__getContextMapValue,[context,key],null,__cname);},setContextMapEntry:function(context,key,value){return ___.tryCatch(__setContextMapEntry,[context,key,value],null,__cname);},getPriorities:function(){return ___.tryCatch(__getPriorities,[],[],__cname);},setPriorities:function(values){return ___.tryCatch(__setPriorities,[values],null,__cname);},isValidPriority:function(values){return ___.tryCatch(__isValidPriority,[values],false,__cname);},getNoPriority:function(){return ___.tryCatch(__getNoPriority,[],null,__cname);},setNoPriority:function(value){return ___.tryCatch(__setNoPriority,[value],null,__cname);},getMinPriority:function(){return ___.tryCatch(__getMinPriority,[],NaN,__cname);},getMaxPriority:function(){return ___.tryCatch(__getMaxPriority,[],NaN,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigDatalayerPriorityMapCTRL.prototype));};var ConfigRestrictTable=function ConfigRestrictTableCTRL(TABLE){var __cname='AutoQAService.ConfigRestrictTable';try{var __table=new MapObject('array');var __propList=new ArrayList('string',true,true);var __getTable=function(){return __table.getData();};var __setTable=function(t){if(__isValidTable(t))__table.setData(t);};var __isValidTable=function(t){if(!t||(!__table.isValidData(t)))return false;for(var key in t)if(!__isValidPropList(key,t[key]))return false;return true;};var __isValidPropList=function(key,value){var __fname='__isValidPropList';__propList.setData(value);var contexts=[CDCT.getContextOnPage(),CDCT.getContextOnEvent()];for(var i=0;i<contexts.length;i++){if(__propList.hasValue(contexts[i])){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the set of variables contains a context variable!',prop:contexts[i]+'found in',value:__propList.getData()});return false;}}
var props=__propList.getData();for(i=0;i<props.length;i++){if(!CDPLT.getInfo(props[i])){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the set of variables contains a variable not declared in datalayer table!',prop:'prop',value:props[i]});return false;}}
return true;};var __getInfo=function(key){return __table.getValue(key);};var __setInfo=function(key,value){if(__isValidPropList(key,value))__table.setEntry(key,value);};var __isRestricted=function(key,prop){__propList.setData(__getInfo(key)||[]);return __propList.isEmpty()?false:__propList.hasValue(prop);};__setTable(TABLE);this.export={getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},getInfo:function(key){return ___.tryCatch(__getInfo,[key],null,__cname);},setInfo:function(key,value){return ___.tryCatch(__setInfo,[key,value],null,__cname);},isRestricted:function(key,prop){return ___.tryCatch(__isRestricted,[key,prop],false,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigRestrictTableCTRL.prototype));};var ConfigDatalayerTable=function ConfigDatalayerTableCTRL(TABLE,PRIORITIES,NO_PRIORITY,COPIED){var __cname='AutoQAService.ConfigDatalayerTable';try{var __s_info=new CustomDataObject({priorityMap:'object',format:'string',acceptedValues:'regexp',suggestions:'string',acceptedProps:'number'});var __table=new DatalayerTableObject(__s_info,CFGD.getDatalayerDepthSeparator(),CFGD.getDatalayerDynamicProp());var __priorityMap=new ConfigDatalayerPriorityMap();var __globalAccValues=new MapObject('string');var __getTable=function(){return __table.getData();};var __setTable=function(t,isCopied){__table.setData(t,function(info){if(info.hasOwnProperty('priorityMap')&&(!__priorityMap.isValidTable(info.priorityMap)))return false;if(info.hasOwnProperty('format')&&(!__isValidFormat(info.format)))return false;return true;},isCopied);};var __getInfo=function(prop,key){var info=__table.getInfo(prop);return!TC.isNull(info)?(key?info[key]:info):null;};var __setInfo=function(prop,key,value){var info={};if(!TC.isNull(value)){if(key)info[key]=value;else info=value;}
__table.setEntry(prop,info);};var __removeInfo=function(prop){return __table.removeEntry(prop);};var __getPriorityMap=function(prop){return __getInfo(prop,'priorityMap')||{};};var __setPriorityMap=function(prop,value){if(__priorityMap.isValidTable(value))__setInfo(prop,'priorityMap',value);};var __getContextPriorityMap=function(prop,context){__priorityMap.setTable(__getPriorityMap(prop));return __priorityMap.getContextMap(context)||{};};var __setContextPriorityMap=function(props,context,priority,values){props=TC.isArray(props)?props:[props];props.forEach(function(prop){__setInfo(prop,'priorityMap',__getDefaultContextPriorityMap(__getPriorityMap(prop),context,priority,values));});};var __getDefaultContextPriorityMap=function(map,context,priority,values){__priorityMap.setTable(map);values=TC.isArray(values)?values:(values==='ALL'&&CDCT.isValidContext(context)?(CPST.getInfo(context)||[]):[values]);values.forEach(function(value){__priorityMap.setContextMapEntry(context,value,priority);});return __priorityMap.getTable();};var __getFormat=function(prop){return __getInfo(prop,'format');};var __getAcceptedValues=function(prop){return __getInfo(prop,'acceptedValues');};var __setAcceptedValues=function(props,value){props=TC.isArray(props)?props:[props];for(var i=0;i<props.length;i++){__setInfo(props[i],'acceptedValues',__lookUpAcceptedValues(props[i],value));}};var __findAcceptedValues=function(prop,value){var values;var globalAccValues=__globalAccValues.getData();if(value===globalAccValues.OWN||value===globalAccValues.OWN_OPTIONAL)values=CPST.getInfo(prop);else if(TC.isString(value))values=CGST.getInfo(value);else if(TC.isArray(value))values=value;if(values){var list=new ArrayList();list.setData(values);if(list.size()===0||(list.size()===1&&list.hasValue('')))return null;return list.getData();}
return null;};var __lookUpAcceptedValues=function(prop,value){if(TC.isRegExp(value))return value;var values=__findAcceptedValues(prop,value);if(values){var list=new ArrayList();list.setData(values);return REB.isValueOf(values,(value===__globalAccValues.getData().OWN_OPTIONAL||list.hasValue(''))?0:1);}
return null;};var __lookUpSuggestions=function(prop,acc_values){var values=__findAcceptedValues(prop,acc_values);if(values){var global_suggestions=CHT.getGlobalSuggestions();var list=new ArrayList('string',true,false,'", "');list.setData(values);var optional=list.size()>1&&(acc_values===__globalAccValues.getData().OWN_OPTIONAL||list.hasValue(''))?' or '+global_suggestions.EMPTY_STRING:'';list.clean();if(list.size()>0)return(list.size()===1?global_suggestions.SINGLE_VALUE:global_suggestions.MULTIPLE_VALUE)+' "'+list.getData(true)+'"'+optional;return null;}
return null;};var __getSuggestions=function(prop){return __getInfo(prop,'suggestions');};var __setSuggestions=function(prop,value){__setInfo(prop,'suggestions',value);};var __getAcceptedProps=function(prop){return __getInfo(prop,'acceptedProps');};var __initDefaultTable=function(){__priorityMap=new ConfigDatalayerPriorityMap({},__priorityMap.getPriorities(),__priorityMap.getNoPriority());var props=CDPLT.getAllProps('list');if(props.length>0){var noPriority=__getNoPriority();var acceptedSuggestions=CET.getCauses('ACCEPTED_VALUES');props.forEach(function(prop){var priorityMap=__getDefaultContextPriorityMap(__getPriorityMap(prop),CDCT.getContextOnPage(),noPriority,'ALL');priorityMap=__getDefaultContextPriorityMap(__getPriorityMap(prop),CDCT.getContextOnEvent(),noPriority,'ALL');var availableValues=CPST.getInfo(prop);var acceptedValues=!availableValues||availableValues.length===0?REB.isAll():__lookUpAcceptedValues(prop,availableValues);var suggestions=CHT.getInfo(prop)||__lookUpSuggestions(prop,availableValues)||acceptedSuggestions;var acceptedProps=CDPLT.getAcceptedProps(prop);__setInfo(prop,'',{priorityMap:priorityMap,format:CDPLT.getFormat(prop),acceptedValues:acceptedValues,suggestions:suggestions,acceptedProps:!TC.isUndefined(acceptedProps)?acceptedProps:-1,});});}};var __isValidContextPriorityMap=function(prop,context){return(!TC.isEmptyObject(__getContextPriorityMap(prop,context)));};var __isValidFormat=function(format){if(!CDPLT.isValidFormat(format)){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidFormat',msg:'Invalid Input > format is not valid',prop:'format',value:format});return false;}
return true;};var __isValidAcceptedValues=function(values){return __s_info.isValidInfo('acceptedValues',values);};var __isValidSuggestions=function(suggestions){return __s_info.isValidInfo('suggestions',suggestions);};var __getPriorities=function(){return __priorityMap.getPriorities()||[];};var __setPriorities=function(values){__priorityMap.setPriorities(values);};var __isValidPriority=function(priority){return __priorityMap.isValidPriority(priority);};var __getNoPriority=function(value){return __priorityMap.getNoPriority();};var __setNoPriority=function(value){__priorityMap.setNoPriority(value);};var __getMinPriority=function(value){return __priorityMap.getMinPriority();};var __getMaxPriority=function(value){return __priorityMap.getMaxPriority();};var __getKeys=function(prop){return __table.getKeys(prop);};var __hasDynamicProp=function(prop){var acceptedProps=__getAcceptedProps(prop);return(TC.isNull(acceptedProps)||acceptedProps<0)?false:true;};var __getAcceptedKeys=function(prop,datalayer){var acceptedProps=__getAcceptedProps(prop);var keys=Object.keys(datalayer||{});if(TC.isNull(acceptedProps)||acceptedProps<0||keys.length==0)return[];if(acceptedProps==0||acceptedProps>keys.length)return keys;return keys.filter(function(key,index){if(index<acceptedProps)return true;});};var __getFullProp=function(pathArray){return __table.getFullProp(pathArray);};var __getGlobalAcceptedValues=function(key){return __globalAccValues.hasKey(key)?__globalAccValues.getValue(key):__globalAccValues.getData();};var __setGlobalAcceptedValues=function(map){for(var key in map)__globalAccValues.setEntry(key,map[key]);};var __init=function(){__table.setDepthSeparator(CFGD.getDatalayerDepthSeparator());__table.setDynamicProperty(CFGD.getDatalayerDynamicProp());};__setPriorities(PRIORITIES);if(!TC.isUndefined(NO_PRIORITY))__setNoPriority(NO_PRIORITY);__globalAccValues.setData({OWN:'__OWN__',OWN_OPTIONAL:'__OWN-OPT__'});__setTable(TABLE,COPIED);this.export={init:function(){return ___.tryCatch(__init,[],null,__cname);},getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},initDefaultTable:function(){return ___.tryCatch(__initDefaultTable,[],null,__cname);},getInfo:function(prop){return ___.tryCatch(__getInfo,[prop],null,__cname);},setInfo:function(prop,obj){return ___.tryCatch(__setInfo,[prop,'',obj],null,__cname);},removeInfo:function(prop){return ___.tryCatch(__removeInfo,[prop],null,__cname);},getPriorityMap:function(prop){return ___.tryCatch(__getPriorityMap,[prop],{},__cname);},setPriorityMap:function(prop,value){return ___.tryCatch(__setPriorityMap,[prop,value],null,__cname);},getContextPriorityMap:function(prop,context){return ___.tryCatch(__getContextPriorityMap,[prop,context],{},__cname);},setContextPriorityMap:function(props,context,priority,values){return ___.tryCatch(__setContextPriorityMap,[props,context,priority,values],null,__cname);},getFormat:function(prop){return ___.tryCatch(__getFormat,[prop],null,__cname);},getAcceptedValues:function(prop){return ___.tryCatch(__getAcceptedValues,[prop],null,__cname);},setAcceptedValues:function(prop,value){return ___.tryCatch(__setAcceptedValues,[prop,value],null,__cname);},getSuggestions:function(prop){return ___.tryCatch(__getSuggestions,[prop],null,__cname);},setSuggestions:function(prop,value){return ___.tryCatch(__setSuggestions,[prop,value],null,__cname);},getAcceptedProps:function(prop){return ___.tryCatch(__getAcceptedProps,[prop],null,__cname);},isValidContextPriorityMap:function(prop,context){return ___.tryCatch(__isValidContextPriorityMap,[prop,context],false,__cname);},isValidFormat:function(format){return ___.tryCatch(__isValidFormat,[format],false,__cname);},isValidAcceptedValues:function(values){return ___.tryCatch(__isValidAcceptedValues,[values],false,__cname);},isValidSuggestions:function(suggestions){return ___.tryCatch(__isValidSuggestions,[suggestions],false,__cname);},getPriorities:function(){return ___.tryCatch(__getPriorities,[],[],__cname);},setPriorities:function(values){return ___.tryCatch(__setPriorities,[values],null,__cname);},isValidPriority:function(priority){return ___.tryCatch(__isValidPriority,[priority],false,__cname);},getNoPriority:function(){return ___.tryCatch(__getNoPriority,[],NaN,__cname);},setNoPriority:function(value){return ___.tryCatch(__setNoPriority,[value],null,__cname);},getMinPriority:function(){return ___.tryCatch(__getMinPriority,[],NaN,__cname);},getMaxPriority:function(){return ___.tryCatch(__getMaxPriority,[],NaN,__cname);},lookUpAcceptedValues:function(prop,value){return ___.tryCatch(__lookUpAcceptedValues,[prop,value],null,__cname);},lookUpSuggestions:function(prop,acc_values){return ___.tryCatch(__lookUpSuggestions,[prop,acc_values],null,__cname);},getKeys:function(prop){return ___.tryCatch(__getKeys,[prop],[],__cname);},hasDynamicProp:function(prop){return ___.tryCatch(__hasDynamicProp,[prop],false,__cname);},getAcceptedKeys:function(prop,datalayer){return ___.tryCatch(__getAcceptedKeys,[prop,datalayer],[],__cname);},getFullProp:function(pathArray){return ___.tryCatch(__getFullProp,[pathArray],null,__cname);},getGlobalAcceptedValues:function(key){return ___.tryCatch(__getGlobalAcceptedValues,[key],{},__cname);},setGlobalAcceptedValues:function(map){return ___.tryCatch(__setGlobalAcceptedValues,[map],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigDatalayerTableCTRL.prototype));};var ConfigDependencyValueMap=function ConfigDependencyValueMapCTRL(TABLE){var __cname='AutoQAService.ConfigDependencyValueMap';try{var __s_data=new CustomDataObject({priority:'number',acceptedValues:'regexp',suggestions:'string',contextName:'string'});var __table=new MapObject('object');var __getTable=function(){return __table.getData();};var __setTable=function(t){if(__isValidTable(t))__table.setData(t);};var __isValidTable=function(t){if(!t||(!__table.isValidData(t)))return false;for(var key in t)if(!__isValidEntry(key,t[key]))return false;return true;};var __isValidEntry=function(key,value){if(!__table.isValidEntry(key,value)||(!__s_data.isValid(value)))return false;if(value.hasOwnProperty('priority')&&(!CDT.isValidPriority(value.priority)))return false;if(value.hasOwnProperty('contextName')&&(!CDCT.isValidContext(value.contextName)))return false;return true;};var __getInfo=function(key,info){var value=__table.getValue(key);return value?(info?value[info]:value):null;};var __setInfo=function(key,info,value){var obj={};if(info)obj[info]=value;else obj=value;if(__isValidEntry(key,obj))__table.setEntry(key,obj);};var __getPriority=function(key){return __getInfo(key,'priority');};var __setPriority=function(key,value){if(CDT.isValidPriority(value))__setInfo(key,'priority',value);};var __getAcceptedValues=function(key){return __getInfo(key,'acceptedValues');};var __setAcceptedValues=function(key,value){__setInfo(key,'acceptedValues',value);};var __getSuggestions=function(key){return __getInfo(key,'suggestions');};var __setSuggestions=function(key,value){__setInfo(key,'suggestions',value);};var __getContextName=function(key){return __getInfo(key,'contextName');};var __setContextName=function(key,value){if(CDCT.isValidContext(value))__setInfo(key,'contextName',value);};var __getKeys=function(){return __table.getKeys();};var __isEmpty=function(){return __table.isEmpty();};var __reset=function(){__table.reset();};__setTable(TABLE);this.export={getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},isValidTable:function(t){return ___.tryCatch(__isValidTable,[t],false,__cname);},getKeys:function(){return ___.tryCatch(__getKeys,[],[],__cname);},getValue:function(key){return ___.tryCatch(__getInfo,[key],null,__cname);},setEntry:function(key,value){return ___.tryCatch(__setInfo,[key,'',value],null,__cname);},getPriority:function(key){return ___.tryCatch(__getPriority,[key],null,__cname);},setPriority:function(key,value){return ___.tryCatch(__setPriority,[key,value],null,__cname);},getAcceptedValues:function(key){return ___.tryCatch(__getAcceptedValues,[key],null,__cname);},setAcceptedValues:function(key,value){return ___.tryCatch(__setAcceptedValues,[key,value],null,__cname);},getSuggestions:function(key){return ___.tryCatch(__getSuggestions,[key],null,__cname);},setSuggestions:function(key,value){return ___.tryCatch(__setSuggestions,[key,value],null,__cname);},getContextName:function(key){return ___.tryCatch(__getContextName,[key],null,__cname);},setContextName:function(key,value){return ___.tryCatch(__setContextName,[key,value],null,__cname);},reset:function(){return ___.tryCatch(__reset,[],null,__cname);},isEmpty:function(){return ___.tryCatch(__isEmpty,[],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigDependencyValueMapCTRL.prototype));};var ConfigDependencyNameMap=function ConfigDependencyNameMapCTRL(TABLE,DEP_SEP){var __cname='AutoQAService.ConfigDependencyNameMap';try{var __DEPENDENCY_SEPARATOR='___';var __table=new MapObject('object');var __depValueMap=new ConfigDependencyValueMap();var __getTable=function(){return __table.getData();};var __setTable=function(t){if(__isValidTable(t))__table.setData(t);};var __isValidTable=function(t){if(!t||(!__table.isValidData(t)))return false;for(var key in t)if(!__isValidEntry(key,t[key]))return false;return true;};var __isValidEntry=function(key,value){if(!__table.isValidEntry(key,value)||(!__depValueMap.isValidTable(value)))return false;if(!__isValidDependency(key,Object.keys(value)[0]))return false;return true;};var __isValidDependency=function(key,value){var __fname='__isValidDependency';var keys=__getMultiDependency(key);var values=__getMultiDependency(value);if(keys.length<1||values.length<1||keys.length!=values.length){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > dependencies provided are not valid!',prop:'dep<key, value>',value:key+' - '+value});return false;}
for(var i=0;i<keys.length;i++){if(!CDPLT.getInfo(keys[i])){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > dependency name is not a valid datalayer variable!',prop:'dep<key>',value:keys[i]});return false;}}
return true;};var __getMultiDependency=function(key){try{var list=new ArrayList(TC.isString(key)?'string':'any',false,true,__DEPENDENCY_SEPARATOR);list.setData(TC.isString(key)?key:TC.isArray(key)?key:[]);if(TC.isString(key))return list.getData();else return list.isEmpty()?null:list.getData(true);}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'__getMultiDependency',msg:e.stack});return TC.isString(key)?[]:null;}};var __getKeys=function(){return __table.getKeys();};var __getValue=function(key){return __table.getValue(key);};var __setEntry=function(key,value){__table.setEntry(key,value);};var __getInfo=function(dep_name,dep_value,method){var info=__table.getValue(dep_name);if(info){__depValueMap.reset();__depValueMap.setEntry(dep_value,info[dep_value]);return __depValueMap[method](dep_value);}
return null;};var __setInfo=function(dep_name,dep_value,info,method){if(__isValidDependency(dep_name,dep_value)){__depValueMap.reset();__depValueMap[method](dep_value,info);if(!__depValueMap.isEmpty())__table.setEntry(dep_name,__depValueMap.getTable());}};var __getPriority=function(dep_name,dep_value){return __getInfo(dep_name,dep_value,'getPriority');};var __setPriority=function(dep_name,dep_value,info){__setInfo(dep_name,dep_value,info,'setPriority');};var __getAcceptedValues=function(dep_name,dep_value){return __getInfo(dep_name,dep_value,'getAcceptedValues');};var __setAcceptedValues=function(dep_name,dep_value,info){__setInfo(dep_name,dep_value,info,'setAcceptedValues');};var __getSuggestions=function(dep_name,dep_value){return __getInfo(dep_name,dep_value,'getSuggestions');};var __setSuggestions=function(dep_name,dep_value,info){__setInfo(dep_name,dep_value,info,'setSuggestions');};var __getContextName=function(dep_name,dep_value){return __getInfo(dep_name,dep_value,'getContextName');};var __setContextName=function(dep_name,dep_value,info){__setInfo(dep_name,dep_value,info,'setContextName');};var __isEmpty=function(){return __table.isEmpty();};var __reset=function(){__table.reset();};var __getDependencySeparator=function(){return __DEPENDENCY_SEPARATOR;};var __setDependencySeparator=function(sep){if(TC.isString(sep)&&(!TC.isEmptyString(sep)))__DEPENDENCY_SEPARATOR=sep;};__setTable(TABLE);__setDependencySeparator(DEP_SEP);this.export={getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},isValidTable:function(t){return ___.tryCatch(__isValidTable,[t],false,__cname);},getKeys:function(){return ___.tryCatch(__getKeys,[],[],__cname);},getValue:function(key){return ___.tryCatch(__getValue,[key],[],__cname);},setEntry:function(key,value){return ___.tryCatch(__setEntry,[key,value],null,__cname);},getInfo:function(dep_name,dep_value){return ___.tryCatch(__getInfo,[dep_name,dep_value,'getValue'],null,__cname);},setInfo:function(dep_name,dep_value,info){return ___.tryCatch(__setInfo,[dep_name,dep_value,info,'setEntry'],null,__cname);},getPriority:function(dep_name,dep_value){return ___.tryCatch(__getPriority,[dep_name,dep_value],null,__cname);},setPriority:function(dep_name,dep_value,info){return ___.tryCatch(__setPriority,[dep_name,dep_value,info],null,__cname);},getAcceptedValues:function(dep_name,dep_value){return ___.tryCatch(__getAcceptedValues,[dep_name,dep_value],null,__cname);},setAcceptedValues:function(dep_name,dep_value,info){return ___.tryCatch(__setAcceptedValues,[dep_name,dep_value,info],null,__cname);},getSuggestions:function(dep_name,dep_value){return ___.tryCatch(__getSuggestions,[dep_name,dep_value],null,__cname);},setSuggestions:function(dep_name,dep_value,info){return ___.tryCatch(__setSuggestions,[dep_name,dep_value,info],null,__cname);},getContextName:function(dep_name,dep_value){return ___.tryCatch(__getContextName,[dep_name,dep_value],null,__cname);},setContextName:function(dep_name,dep_value,info){return ___.tryCatch(__setContextName,[dep_name,dep_value,info],null,__cname);},getMultiDependency:function(key){return ___.tryCatch(__getMultiDependency,[key],null,__cname);},reset:function(){return ___.tryCatch(__reset,[],null,__cname);},isEmpty:function(){return ___.tryCatch(__isEmpty,[],null,__cname);},getDependencySeparator:function(){return ___.tryCatch(__getDependencySeparator,[],null,__cname);},setDependencySeparator:function(sep){return ___.tryCatch(__setDependencySeparator,[sep],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigDependencyNameMapCTRL.prototype));};var ConfigOverrideTable=function ConfigOverrideTableCTRL(TABLE){var __cname='AutoQAService.ConfigOverrideTable';try{var __depNameMap=new ConfigDependencyNameMap(null,CFGD.getDatalayerDependencySeparator());var __DEP_SEP=__depNameMap.getDependencySeparator();var __table=new DatalayerTableObject(new MapObject('object'),CFGD.getDatalayerDepthSeparator(),CFGD.getDatalayerDynamicProp());var __getTable=function(){return __table.getData();};var __setTable=function(t){__table.setData(t,function(info){return __depNameMap.isValidTable(info);});};var __getInfo=function(prop,dep_name,dep_value,method){var info=__table.getInfo(prop);if(info){if(!dep_name||(!dep_value))return null;if(!info[dep_name][dep_value]){var found=false;var dep_values=__getMultiDependency(dep_value);for(var d_value in info[dep_name]){var d_values=__getMultiDependency(d_value);if(dep_values.length==d_values.length){var matches=0;for(var i=0;i<dep_values.length;i++)if(REB.toRegExp(d_values[i]).test(dep_values[i]))matches++;if(matches==dep_values.length){dep_value=d_value;found=true;break;}}}
if(!found)return null;}
__depNameMap.reset();__depNameMap.setInfo(dep_name,dep_value,info[dep_name][dep_value]);var __getters=new ArrayList();__getters.setData(['getPriority','getAcceptedValues','getSuggestions','getContextName','getInfo']);method=__getters.hasValue(method||'')?method:'getInfo';return __depNameMap[method](dep_name,dep_value);}
return null;};var __setInfo=function(props,dep_names,dep_values,dep_info,method){var __setters=new ArrayList();__setters.setData(['setPriority','setAcceptedValues','setSuggestions','setContextName','setInfo']);method=__setters.hasValue(method||'')?method:'setInfo';props=TC.isArray(props)?props:[props];props.forEach(function(prop){dep_names=TC.isArray(dep_names)?dep_names:[dep_names];dep_names.forEach(function(dep_name){var all_dep_values=__getMultiDepValues(dep_name,dep_values);all_dep_values=TC.isArray(all_dep_values)?all_dep_values:[all_dep_values];all_dep_values.forEach(function(dep_value){var d_info=dep_info;dep_value=___.toString(dep_value);if(method==='setInfo'){if(TC.isPureObject(d_info)){d_info=___.merge({},dep_info);if(d_info.hasOwnProperty('acceptedValues')){var acc_values=__checkAndSetOwnAccValues(dep_value,d_info.acceptedValues);d_info.acceptedValues=CDT.lookUpAcceptedValues(dep_name,acc_values);d_info.suggestions=__findAndGetSuggestions(d_info.suggestions,dep_name,acc_values);}else delete d_info.suggestions;if(!d_info.hasOwnProperty('priority')||TC.isUndefined(d_info.contextName))delete d_info.contextName;}}
__depNameMap.reset();__depNameMap[method](dep_name,dep_value,d_info);d_info=__depNameMap.getInfo(dep_name,dep_value);if(d_info){var info_dv={};info_dv[dep_value]=d_info;var info_dn={};info_dn[dep_name]=info_dv;__table.setEntry(prop,info_dn);}});});});};var __checkAndSetOwnAccValues=function(dep_value,acc_values){if(acc_values===CDT.getGlobalAcceptedValues('OWN')||acc_values===CDT.getGlobalAcceptedValues('OWN_OPTIONAL')){if(__depNameMap.getMultiDependency(dep_value).length>1)return[];var values=TC.isArray(dep_value)?dep_value:[dep_value];return values.length>0&&acc_values===CDT.getGlobalAcceptedValues('OWN_OPTIONAL')?values.concat(['']):values;}
return acc_values;};var __checkAndGetOwnDepValues=function(dep_name,dep_value){return(dep_value===CDT.getGlobalAcceptedValues('OWN')||dep_value===CDT.getGlobalAcceptedValues('OWN_OPTIONAL'))?(CPST.getInfo(dep_name)||[]):dep_value;};var __getCombDepValues=function(arr1,arr2){var result=[];for(var i=0;i<arr1.length;i++)
for(var j=0;j<arr2.length;j++)result.push(arr1[i]+__DEP_SEP+arr2[j]);return result;};var __getMultiDepValues=function(dep_name,dep_values){var dname=__depNameMap.getMultiDependency(dep_name);var dvalues=TC.isArray(dep_values)?dep_values:[dep_values];if(dname.length===dvalues.length){if(dname.length==1)return __checkAndGetOwnDepValues(dname[0],dvalues[0]);for(var i=0;i<dvalues.length;i++){dvalues[i]=__checkAndGetOwnDepValues(dname[i],dvalues[i]);if(!TC.isArray(dvalues[i]))return dvalues;}
var result=dvalues[0];for(i=1;i<dvalues.length;i++)result=__getCombDepValues(result,dvalues[i]);return result;}
return dvalues;};var __getPriority=function(prop,dep_name,dep_value){return __getInfo(prop,dep_name,dep_value,'getPriority');};var __setPriority=function(props,dep_names,dep_values,priority,context_name){__setInfo(props,dep_names,dep_values,{priority:priority,contextName:context_name},'setInfo');};var __getAcceptedValues=function(prop,dep_name,dep_value){return __getInfo(prop,dep_name,dep_value,'getAcceptedValues');};var __setAcceptedValues=function(props,dep_names,dep_values,acc_values,suggestions){__setInfo(props,dep_names,dep_values,{acceptedValues:acc_values,suggestions:suggestions},'setInfo');};var __getSuggestions=function(prop,dep_name,dep_value){return __getInfo(prop,dep_name,dep_value,'getSuggestions');};var __setSuggestions=function(props,dep_names,dep_values,suggestions){__setInfo(props,dep_names,dep_values,suggestions,'setSuggestions');};var __findAndGetSuggestions=function(suggestions,prop,acc_values){return(TC.isString(suggestions)&&(!TC.isEmptyString(suggestions))?suggestions:CDT.lookUpSuggestions(prop,acc_values))||'';};var __getContextName=function(prop,dep_name,dep_value){return __getInfo(prop,dep_name,dep_value,'getContextName');};var __getAllProps=function(option){return __table.getAllProps(option);};var __getDependencyKeys=function(prop,multi_dep){multi_dep=TC.isBoolean(multi_dep)?multi_dep:true;var list=new ArrayList('string',true,true);var info=prop?__table.getInfo(prop):null;var props=info?[prop]:__getAllProps('list');props.forEach(function(prop){__depNameMap.reset();__depNameMap.setTable(__table.getInfo(prop));__depNameMap.getKeys().forEach(function(k){list.add(!multi_dep?__depNameMap.getMultiDependency(k):k);});});return list.getData();};var __getMultiDependency=function(key){return __depNameMap.getMultiDependency(key);};var __init=function(){__table.setDepthSeparator(CFGD.getDatalayerDepthSeparator());__depNameMap.setDependencySeparator(CFGD.getDatalayerDependencySeparator());__DEP_SEP=__depNameMap.getDependencySeparator();__table.setDynamicProperty(CFGD.getDatalayerDynamicProp());};__setTable(TABLE);this.export={init:function(){return ___.tryCatch(__init,[],null,__cname);},getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},getInfo:function(prop,dep_name,dep_value){return ___.tryCatch(__getInfo,[prop,dep_name,dep_value],null,__cname);},setInfo:function(props,dep_names,dep_values,info){return ___.tryCatch(__setInfo,[props,dep_names,dep_values,info],null,__cname);},getPriority:function(prop,dep_name,dep_value){return ___.tryCatch(__getPriority,[prop,dep_name,dep_value],null,__cname);},setPriority:function(props,dep_names,dep_values,priority,context_name){return ___.tryCatch(__setPriority,[props,dep_names,dep_values,priority,context_name],null,__cname);},getAcceptedValues:function(prop,dep_name,dep_value){return ___.tryCatch(__getAcceptedValues,[prop,dep_name,dep_value],null,__cname);},setAcceptedValues:function(props,dep_names,dep_values,acc_values,suggestions){return ___.tryCatch(__setAcceptedValues,[props,dep_names,dep_values,acc_values,suggestions],null,__cname);},getSuggestions:function(prop,dep_name,dep_value){return ___.tryCatch(__getSuggestions,[prop,dep_name,dep_value],null,__cname);},setSuggestions:function(props,dep_names,dep_values,suggestions){return ___.tryCatch(__setSuggestions,[props,dep_names,dep_values,suggestions],null,__cname);},getContextName:function(prop,dep_name,dep_value){return ___.tryCatch(__getContextName,[prop,dep_name,dep_value],null,__cname);},getAllProps:function(option){return ___.tryCatch(__getAllProps,[option],[],__cname);},getDependencyKeys:function(prop,multi_dep){return ___.tryCatch(__getDependencyKeys,[prop,multi_dep],[],__cname);},getMultiDependency:function(key){return ___.tryCatch(__getMultiDependency,[key],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigOverrideTableCTRL.prototype));};var ConfigPreProcessRulesTable=function ConfigPreProcessRulesTableCTRL(TABLE,MODE){var __cname='AutoQAService.ConfigPreProcessRulesTable';try{var __s_data=new CustomDataObject({name:'string',rule:'function',skip:'boolean',suggestions:'string'});var __table=new ArrayList('object',false,false);var __mode=false;var __isLastWin=function(){return __mode;};var __isFirstWin=function(){return!__mode;};var __setMode=function(flag){if(TC.isBoolean(flag))__mode=flag;};var __getTable=function(){return __table.getData();};var __setTable=function(t){__table.setData(t,__isValidInfo);};var __isValidInfo=function(item){var __fname='__isValidInfo';if(!__s_data.isValid(item))return false;if(!item.hasOwnProperty('name')||TC.isEmptyString(item.name)||(!__table.isEmpty()&&__table.hasValue(item,'name'))){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the mandatory field \'name\' is missing or duplicated!',prop:'name',value:item.name});return false;}
if(!item.hasOwnProperty('rule')){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the mandatory field \'rule\' is missing!',prop:'rule',value:item.rule});return false;}
return true;};var __setInfo=function(item){if(__isValidInfo(item))__table.add(item);};var __getInfo=function(item){//@REVIEW: can we import the private functions here???
if(TC.isNull(item))return null;return{name:function(){return __name(item);},skip:function(){return __skip(item);},suggestions:function(){return __suggestions(item);},applyRule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){return __applyRule(item,prop,value,format,priority,context_name,context_value,parents,keyValue);},};};var __applyRule=function(item,prop,value,format,priority,context_name,context_value,parents,keyValue){var result=item.rule(prop,value,format,priority,context_name,context_value,parents,keyValue);if(!TC.isBoolean(result)){MLOG.showMessage({type:'error',cname:__cname,fname:'__applyRule',msg:'Invalid output > the function \'rule\' must return a boolean value!'});return null;}
return result;};var __skip=function(item){return item.skip||false;};var __suggestions=function(item){return item.suggestions||'';};var __name=function(item){return item.name||'';};var __iterator=function IteratorCTRL(){var __icname=__cname+'.__iterator';try{var iterator=__table.iterator();var __reset=function(){iterator.reset();};var __hasNext=function(){return iterator.hasNext();};var __next=function(){return __getInfo(iterator.next());};this.export={reset:function(){return ___.tryCatch(__reset,[],null,__icname);},hasNext:function(){return ___.tryCatch(__hasNext,[],false,__icname);},next:function(){return ___.tryCatch(__next,[],null,__icname);},};}catch(e){MLOG.showMessage({type:'error',cname:__icname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},IteratorCTRL.prototype));};var __applyRules=function(prop,value,format,priority,context_name,context_value,parents,keyValue){var __fname='__applyRules';var types=CET.getTypes();try{var post_result={status:types.SUCCESS,suggestions:''};var rule_name;var iterator=__iterator();while(iterator.hasNext()){var item=iterator.next();var result=item.applyRule(prop,value,format,priority,context_name,context_value,___.merge([],parents),keyValue);if(TC.isNull(result))continue;var status=(result&&item.skip())?types.SKIP:(!result&&(!item.skip()))?types.ERROR:types.SUCCESS;if(status!=types.SUCCESS){post_result={status:status,suggestions:item.suggestions()};rule_name=item.name();if(__isFirstWin())break;}}
if(rule_name)MLOG.showMessage({type:'warn',cname:__cname,fname:__fname,msg:'Pre processing rule applied',prop:'name',value:rule_name});return post_result;}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:e.stack});return{status:types.SUCCESS,suggestions:''};}};__setTable(TABLE);__setMode(MODE);this.export={setToLastWin:function(){return ___.tryCatch(__setMode,[true],null,__cname);},setToFirstWin:function(){return ___.tryCatch(__setMode,[false],null,__cname);},isLastWin:function(){return ___.tryCatch(__isLastWin,[],null,__cname);},isFirstWin:function(){return ___.tryCatch(__isFirstWin,[],null,__cname);},getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},addRule:function(info){return ___.tryCatch(__setInfo,[info],null,__cname);},applyRules:function(prop,value,format,priority,context_name,context_value,parents,keyValue){return ___.tryCatch(__applyRules,[prop,value,format,priority,context_name,context_value,parents,keyValue],null,__cname);},iterator:function(){return ___.tryCatch(__iterator,[],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigPreProcessRulesTableCTRL.prototype));};var ConfigPostProcessRulesTable=function ConfigPostProcessRulesTableCTRL(TABLE,MODE){var __cname='AutoQAService.ConfigPostProcessRulesTable';try{var __s_data=new CustomDataObject({name:'string',key:'string',dkeylist:'array',rule:'function',success:'boolean',suggestions:'string'});var __table=new ArrayList('object',false,false);var __mode=false;var __applyPreconditionsCallback=null;var __isLastWin=function(){return __mode;};var __isFirstWin=function(){return!__mode;};var __setMode=function(flag){if(TC.isBoolean(flag))__mode=flag;};var __getTable=function(){return __table.getData();};var __setTable=function(t){__table.setData(t,__isValidInfo);};var __isValidInfo=function(item){var __fname='__isValidInfo';if(!__s_data.isValid(item))return false;if(!item.hasOwnProperty('name')||TC.isEmptyString(item.name)||(!__table.isEmpty()&&__table.hasValue(item,'name'))){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the mandatory field \'name\' is missing or duplicated!',prop:'name',value:item.name});return false;}
if(!item.hasOwnProperty('rule')){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the mandatory field \'rule\' is missing!',prop:'rule',value:item.rule});return false;}
if(!item.hasOwnProperty('key')||TC.isEmptyString(item.key)||(!CDPLT.getInfo(item.key))){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the mandatory field \'key\' is missing or not a valid datalayer property!',prop:'key',value:item.key});return false;}
if(item.hasOwnProperty('dkeylist')&&(!__isValidKeyList(item.key,item.dkeylist))){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > the optional field \'dkeylist\' is not an array or it contains atleast one datalayer property not valid',prop:'dkeylist',value:item.dkeylist});return false;}
return true;};var __isValidKeyList=function(key,dkeylist){if(!TC.isArray(dkeylist))return false;for(var i=0;i<dkeylist.length;i++)if(!CDPLT.getInfo(dkeylist[i])||(!__isCompatibleKey(key,dkeylist[i])))return false;return true;};var __isCompatibleKey=function(key,dkey){var __fname='__isCompatibleKey';if(key===dkey){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > dependency key is equals to the primary key',prop:'dkey',value:dkey});return false;}
var keyPath=CDPLT.getPathProp(key);var dkeyPath=CDPLT.getPathProp(dkey);if(keyPath.length<1||dkeyPath.length<1){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > primary key or dependency key is not valid - key: '+key+', dkey:'+dkey});return false;}
if(dkeyPath.length>1&&(keyPath.length==1||(keyPath.length>1&&(!CDPLT.isParentOfProp(key,dkey))))){MLOG.showMessage({type:'error',cname:__cname,fname:__fname,msg:'Invalid Input > a dependency key is not compatible with the primary key',prop:'dkey',value:dkey});return false;}
return true;};var __setInfo=function(item){if(__isValidInfo(item))__table.add(item);};var __getInfo=function(item){//@REVIEW: can we import the private functions here???
if(TC.isNull(item))return null;return{name:function(){return __name(item);},key:function(){return __key(item);},dkeylist:function(){return __dkeylist(item);},success:function(){return __success(item);},suggestions:function(){return __suggestions(item);},applyRule:function(keyValue,dkeyListValues){return __applyRule(item,keyValue,dkeyListValues);},};};var __applyRule=function(item,keyValue,dkeyListValues){var result=item.rule(keyValue,dkeyListValues);if(!TC.isBoolean(result)){MLOG.showMessage({type:'error',cname:__cname,fname:'__applyRule',msg:'Invalid output > the function \'rule\' must return a boolean value!'});return null;}
return result;};var __success=function(item){return item.success||false;};var __suggestions=function(item){return item.suggestions||'';};var __name=function(item){return item.name||'';};var __key=function(item){return item.key||'';};var __dkeylist=function(item){return item.dkeylist||[];};var __iterator=function IteratorCTRL(){var __icname=__cname+'.__iterator';try{var iterator=__table.iterator();var __reset=function(){iterator.reset();};var __hasNext=function(){return iterator.hasNext();};var __next=function(){return __getInfo(iterator.next());};this.export={reset:function(){return ___.tryCatch(__reset,[],null,__icname);},hasNext:function(){return ___.tryCatch(__hasNext,[],false,__icname);},next:function(){return ___.tryCatch(__next,[],null,__icname);},};}catch(e){MLOG.showMessage({type:'error',cname:__icname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},IteratorCTRL.prototype));};var __checkPreconditions=function(QAResultInfo){if(TC.isNull(QAResultInfo))return false;return __applyPreconditionsCallback?__applyPreconditionsCallback(QAResultInfo):true;};var __setApplyPreconditionsCallback=function(callback){if(TC.isFunction(callback))__applyPreconditionsCallback=callback;};var __applyRules=function(){var resultMap=new MapObject('any');var iterator=__iterator();while(iterator.hasNext()){var item=iterator.next();var keylist=QAR.getFullDynamicPropList(item.key());for(var j=0;j<keylist.length;j++){var key=keylist[j];var keyResultInfo=QAR.getResultInfo(key);if(!__checkPreconditions(keyResultInfo))continue;var dkeyListValues=new MapObject('any');var dkeylist=item.dkeylist();var skip=false;for(var i=0;i<dkeylist.length;i++){var dkey=QAR.resolveDynamicProp(dkeylist[i],key)||dkeylist[i];var dkeyResultInfo=QAR.getResultInfo(dkey);if(!__checkPreconditions(dkeyResultInfo)){skip=true;break;}
dkeyListValues.setEntry(dkeylist[i],dkeyResultInfo.value);}
if(skip)continue;var result=item.applyRule(keyResultInfo.value,dkeyListValues.getData());if(TC.isNull(result))continue;if(__isFirstWin()&&resultMap.hasKey(key))continue;if(result&&item.success())resultMap.setEntry(key,{status:CET.getTypes('SUCCESS'),suggestions:CET.getCauses('CORRECT')});else if(!result&&(!item.success()))resultMap.setEntry(key,{status:CET.getTypes('ERROR'),suggestions:(item.suggestions()||CET.getCauses('ACCEPTED_VALUES'))});MLOG.showMessage({type:'warn',cname:__cname,fname:'__applyRules',msg:'Post processing rule applied',prop:'name',value:item.name()});}}
return resultMap;};__setTable(TABLE);__setMode(MODE);this.export={setToLastWin:function(){return ___.tryCatch(__setMode,[true],null,__cname);},setToFirstWin:function(){return ___.tryCatch(__setMode,[false],null,__cname);},isLastWin:function(){return ___.tryCatch(__isLastWin,[],null,__cname);},isFirstWin:function(){return ___.tryCatch(__isFirstWin,[],null,__cname);},getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},addRule:function(info){return ___.tryCatch(__setInfo,[info],null,__cname);},applyRules:function(keyValue,dkeyListValues){return ___.tryCatch(__applyRules,[keyValue,dkeyListValues],null,__cname);},iterator:function(){return ___.tryCatch(__iterator,[],null,__cname);},setApplyPreconditionsCallback:function(callback){return ___.tryCatch(__setApplyPreconditionsCallback,[callback],false,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigPostProcessRulesTableCTRL.prototype));};var ConfigErrorTable=function ConfigErrorTableCTRL(TABLE,TYPES,PRIORITIES,CAUSES){var __cname='AutoQAService.ConfigErrorTable';try{var __types=new MapObject('string');var __priorities=new ArrayList('number',true,true);var __causes=new MapObject('string');var __s_info=new CustomDataObject({priority:'number',style:'string',label:'string',message:'string'});var __table=new MapObject('object');var __getTable=function(){return __table.getData();};var __setTable=function(t){if(__isValidTable(t))__table.setData(t);};var __isValidTable=function(t){if(!t||(!__table.isValidData(t)))return false;for(var key in t)if(!__isValidEntry(key,t[key]))return false;return true;};var __isValidEntry=function(key,value){return __isValidKey(key)&&__s_info.isValid(value)&&(!value.hasOwnProperty('priority')||__isValidPriority(value.priority));};var __isValidKey=function(key){var types=new ArrayList('string');types.setData(__types.getValues());if(!types.hasValue(key)){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidKey',msg:'Invalid Input > the key is not a valid error type!',prop:'prop',value:key});return false;}
return true;};var __getKeys=function(){return __s_info.getKeys();};var __getInfo=function(key,info){var value=__table.getValue(key);return value?(info?value[info]:value):null;};var __setInfo=function(key,info,value){var obj={};if(info)obj[info]=value;else obj=value;if(__isValidEntry(key,obj))__table.setEntry(key,obj);};var __getPriority=function(key){return __getInfo(key,'priority');};var __setPriority=function(key,value){__setInfo(key,'priority',value);};var __getLabel=function(key){return __getInfo(key,'label');};var __setLabel=function(key,value){__setInfo(key,'label',value);};var __getMessage=function(key){return __getInfo(key,'message');};var __setMessage=function(key,value){__setInfo(key,'message',value);};var __getStyle=function(key){return __getInfo(key,'style');};var __setStyle=function(key,value){__setInfo(key,'style',value);};var __getTypes=function(key){return __types.hasKey(key)?__types.getValue(key):__types.getData();};var __getTypeBy=function(filterKey,filterValue){var keys=__types.getKeys();for(var i=0;i<keys.length;i++){var type=__types.getValue(keys[i]);if(__getInfo(type,filterKey)===filterValue)return type;}
return null;};var __setTypes=function(map){for(var key in map)__types.setEntry(key,map[key]);};var __getPriorities=function(){return __priorities.getData();};var __setPriorities=function(list){__priorities.setData(list);};var __isValidPriority=function(values){values=TC.isArray(values)?values:[values];for(var i=0;i<values.length;i++){if(!__priorities.hasValue(values[i])){MLOG.showMessage({type:'error',cname:__cname,fname:'__isValidPriority',msg:'Invalid Input > the value provided is not a valid priority!',prop:'value',value:values[i]});return false;}}
return true;};var __getCauses=function(key){return __causes.hasKey(key)?__causes.getValue(key):__causes.getData();};var __setCauses=function(map){for(var key in map)__causes.setEntry(key,map[key]);};var __initDefaultTable=function(){var keys=__types.getKeys();for(var i=0;i<keys.length;i++){var type=__types.getValue(keys[i]);__setInfo(type,'',{priority:i,style:(type+"_row"),label:keys[i],message:type});}};__types.setData(TYPES);if(__types.isEmpty())__types.setData({ERROR:'error',WARNING:'warning',SUCCESS:'success',SKIP:'skip'});__priorities.setData(PRIORITIES);if(__priorities.isEmpty())__priorities.setData([0,1,2,3]);__causes.setData(CAUSES);if(__causes.isEmpty())__causes.setData({CORRECT:'Variable is correct!',EXISTING:'Variable is missing!',FORMAT:'Variable\'s format is not correct!',ACCEPTED_VALUES:'Variable\'s value is correct!'});if(!TC.isUndefined(TABLE))__setTable(TABLE);else __initDefaultTable();this.export={getTable:function(){return ___.tryCatch(__getTable,[],null,__cname);},setTable:function(t){return ___.tryCatch(__setTable,[t],null,__cname);},getKeys:function(){return ___.tryCatch(__getKeys,[],[],__cname);},getValue:function(key){return ___.tryCatch(__getInfo,[key],null,__cname);},setEntry:function(key,value){return ___.tryCatch(__setInfo,[key,'',value],null,__cname);},getPriority:function(key){return ___.tryCatch(__getPriority,[key],null,__cname);},setPriority:function(key,value){return ___.tryCatch(__setPriority,[key,value],null,__cname);},getLabel:function(key){return ___.tryCatch(__getLabel,[key],null,__cname);},setLabel:function(key,value){return ___.tryCatch(__setLabel,[key,value],null,__cname);},getMessage:function(key){return ___.tryCatch(__getMessage,[key],null,__cname);},setMessage:function(key,value){return ___.tryCatch(__setMessage,[key,value],null,__cname);},getStyle:function(key){return ___.tryCatch(__getStyle,[key],null,__cname);},setStyle:function(key,value){return ___.tryCatch(__setStyle,[key,value],null,__cname);},getTypes:function(key){return ___.tryCatch(__getTypes,[key],{},__cname);},getTypeBy:function(filterKey,filterValue){return ___.tryCatch(__getTypeBy,[filterKey,filterValue],null,__cname);},setTypes:function(map){return ___.tryCatch(__setTypes,[map],null,__cname);},getPriorities:function(){return ___.tryCatch(__getPriorities,[],[],__cname);},setPriorities:function(list){return ___.tryCatch(__setPriorities,[list],null,__cname);},getCauses:function(key){return ___.tryCatch(__getCauses,[key],{},__cname);},setCauses:function(map){return ___.tryCatch(__setCauses,[map],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigErrorTableCTRL.prototype));};var ConfigQAProperty=function ConfigQAPropertyCTRL(){var __cname='AutoQAService.ConfigQAProperty';try{var __applyCallback=function(prop,value,priority,format,accValues,suggestions){var types=CET.getTypes();var causes=CET.getCauses();if(__checkExist(value)){if(__checkFormat(value,format)){if(__checkAcceptedValues(value,accValues)){return{type:types.SUCCESS,message:causes.CORRECT};}else{return{type:types.ERROR,message:(suggestions||causes.ACCEPTED_VALUES)};}}else{return{type:types.ERROR,message:causes.FORMAT};}}else{return{type:CET.getTypeBy('priority',priority),message:causes.EXISTING};}};var __setApplyCallback=function(callback){if(TC.isFunction(callback))__applyCallback=callback;};var __apply=function(prop,value,priority,format,accValues,suggestions){try{return __applyCallback(prop,value,priority,format,accValues,suggestions);}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'__apply',msg:e.stack});return{type:CET.getTypes('SKIP'),message:CET.getCauses('SKIP')};}};var __checkExist=function(value){return!TC.isUndefined(value);};var __checkFormat=function(value,format){return typeof value==format;};var __checkEmpty=function(value,format){return CDPLT.getEmptyChecking(format)(value);};var __checkAcceptedValues=function(value,accValues){return accValues.test(___.toString(value));};this.export={apply:function(prop,value,priority,format,accValues,suggestions){return __apply(prop,value,priority,format,accValues,suggestions);},checkExist:function(value){return ___.tryCatch(__checkExist,[value],false,__cname);},checkFormat:function(value,format){return ___.tryCatch(__checkFormat,[value,format],false,__cname);},checkEmpty:function(value,format){return ___.tryCatch(__checkEmpty,[value,format],false,__cname);},checkAcceptedValues:function(value,accValues){return ___.tryCatch(__checkAcceptedValues,[value,accValues],false,__cname);},setApplyCallback:function(callback){return ___.tryCatch(__setApplyCallback,[callback],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},ConfigQAPropertyCTRL.prototype));};var QAResults=function QAResultsCTRL(STATUSES){var __cname='AutoQAService.QAResults';try{var __statuses=new ArrayList('number',true,true);var __s_data=new CustomDataObject({status:'object',result:'object'});var __s_status_info=new CustomDataObject({code:'number',message:'string'});var __s_result_info=new CustomDataObject({priority:'number',value:'any',error:'object'});var __s_result_info_error=new CustomDataObject({type:'string',message:'string'});var __result=new DatalayerTableObject(__s_result_info,CFGD.getDatalayerDepthSeparator(),CFGD.getDatalayerDynamicProp());var __data={};var __getData=function(){return{status:__getStatus(),result:__result.getData()};};var __getStatus=function(){return ___.merge({},__data.status);};var __setStatus=function(code,message){var status={code:code,message:message||''};if(__s_status_info.isValid(status)&&__statuses.hasValue(code))__data.status=status;};var __getResult=function(){return __result.getData();};var __getResultInfo=function(prop,key){var info=__result.getInfo(prop);return!TC.isNull(info)?(key?info[key]:info):null;};var __setResultInfo=function(prop,key,value){var info={};if(!TC.isNull(value)){if(key)info[key]=value;else info=value;}
if(info.hasOwnProperty('error')){if(info.error.hasOwnProperty('type')&&info.error.type&&__s_result_info_error.isValid(info.error)){var error=CET.getValue(info.error.type);if(info.error.message)error.message=info.error.message;info.error=error;}
else delete info.error;}
if(__isValidResultEntry(prop,info))__result.setEntry(prop,info);};var __isValidResultEntry=function(prop,info){if(info.hasOwnProperty('priority')&&(!CDT.isValidPriority(info.priority)))return false;return true;};var __getResultInfoKeys=function(){var resultInfoKeys=new ArrayList('string',true,true);resultInfoKeys.setData(CET.getKeys());resultInfoKeys.addPrefix('error.');resultInfoKeys.add(__s_result_info.getKeys());resultInfoKeys.remove('error');return resultInfoKeys.getData();};var __getResultPriority=function(prop){return __getResultInfo(prop,'priority');};var __setResultPriority=function(prop,value){__setResultInfo(prop,'priority',value);};var __getResultValue=function(prop){return __getResultInfo(prop,'value');};var __setResultValue=function(prop,value){__setResultInfo(prop,'value',value);};var __getResultError=function(prop){return __getResultInfo(prop,'error');};var __setResultError=function(prop,type,message){__setResultInfo(prop,'error',{type:type,message:(message||'')});};var __getAllProps=function(){return __result.getAllProps();};var __getFullProp=function(pathArray){return __result.getFullProp(pathArray);};var __getPathProp=function(pathString){return __result.getPathArray(pathString);};var __getFullDynamicPropList=function(prop){return __result.getFullDynamicPropList(prop,__result.getKeys);};var __resolveDynamicProp=function(dProp,sProp){return __result.resolveDynamicProp(dProp,sProp);};var __reset=function(){__data={};__result.reset();};var __init=function(){__result.setDepthSeparator(CFGD.getDatalayerDepthSeparator());__result.setDynamicProperty(CFGD.getDatalayerDynamicProp());__reset();};__statuses.setData(STATUSES);if(__statuses.isEmpty())__statuses.setData([0,1,2]);this.export={init:function(){return ___.tryCatch(__init,[],null,__cname);},getData:function(){return ___.tryCatch(__getData,[],null,__cname);},getStatus:function(){return ___.tryCatch(__getStatus,[],null,__cname);},setStatus:function(code,message){return ___.tryCatch(__setStatus,[code,message],null,__cname);},getResult:function(){return ___.tryCatch(__getResult,[],null,__cname);},getResultInfo:function(prop){return ___.tryCatch(__getResultInfo,[prop],null,__cname);},getResultInfoKeys:function(){return ___.tryCatch(__getResultInfoKeys,[],[],__cname);},setResultInfo:function(prop,info){return ___.tryCatch(__setResultInfo,[prop,'',info],null,__cname);},getResultPriority:function(prop){return ___.tryCatch(__getResultPriority,[prop],null,__cname);},setResultPriority:function(prop,value){return ___.tryCatch(__setResultPriority,[prop,value],null,__cname);},getResultValue:function(prop){return ___.tryCatch(__getResultValue,[prop],null,__cname);},setResultValue:function(prop,value){return ___.tryCatch(__setResultValue,[prop,value],null,__cname);},getResultError:function(prop){return ___.tryCatch(__getResultError,[prop],null,__cname);},setResultError:function(prop,type,message){return ___.tryCatch(__setResultError,[prop,type,message],null,__cname);},getAllProps:function(){return ___.tryCatch(__getAllProps,[],[],__cname);},getFullProp:function(pathArray){return ___.tryCatch(__getFullProp,[pathArray],null,__cname);},getPathProp:function(pathString){return ___.tryCatch(__getPathProp,[pathString],null,__cname);},getFullDynamicPropList:function(prop){return ___.tryCatch(__getFullDynamicPropList,[prop],[],__cname);},resolveDynamicProp:function(dProp,sProp){return ___.tryCatch(__resolveDynamicProp,[dProp,sProp],null,__cname);},reset:function(){return ___.tryCatch(__reset,[],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},QAResultsCTRL.prototype));};var QAQueryResult=function QAQueryResultCTRL(){var __cname='AutoQAService.QAQueryResult';try{var __fields=new ArrayList('string',true,true,',');var __fields_highLevelKey='prop';var __fields_highLevelKeyName='name';var __query_struct=new CustomDataObject({select:'array',unique:'boolean',groupby:'string',rename:'object',separator:'string',filters:'function'});var __query={};var __query_select=new ArrayList('string',true,true,',');var __query_rename=new MapObject('object');var __query_rename_select_field=new MapObject('string');var __result=new MapObject('array');var __getQuery=function(){return ___.merge({},__query);};var __setQuery=function(query){if(__isValidQuery(query)){__query_select.reset();__query_select.setData(query.select);__query_rename.reset();__query_rename.setData(query.rename);__query=query;}};var __isValidQuery=function(query){return query&&__query_struct.isValid(query)&&__isValidSelect(query.select)&&__isValidField(query.groupby)&&__isValidRename(query.rename,query.select);};var __isValidSelect=function(selectors){if(selectors.length<1)return false;for(var i=0;i<selectors.length;i++)if(!__isValidField(selectors[i]))return false;return true;};var __isValidField=function(selector){return!TC.isEmptyString()&&__fields.hasValue(selector);};var __isValidRename=function(renameMap,querySelectors){if(!__query_rename.isValidData(renameMap))return false;var selectors=new ArrayList('string',true,true,',');selectors.setData(querySelectors);for(var field in renameMap)if(!selectors.hasValue(field)||(!__query_rename_select_field.isValidData(renameMap[field])))return false;return true;};var __resolveQuerySelectors=function(QAResultInfo,field,prop){if(__fields_highLevelKey&&__fields_highLevelKeyName&&(field==__fields_highLevelKey+'.'+__fields_highLevelKeyName))return prop;var resultMatch=field.match(new RegExp('^'+__fields_highLevelKey+'\.(.+)'));if(resultMatch)return QAResultInfo[resultMatch[1]];resultMatch=field.match(/^(.+)\.(.+)/);if(resultMatch)return QAResultInfo[resultMatch[1]][resultMatch[2]];return null;};var __resolveQueryRenameSelectorValue=function(field,item){__query_rename_select_field.reset();__query_rename_select_field.setData(__query.rename[field]||{});if(__query_rename_select_field.isEmpty())return item;var renameMap=__query_rename_select_field.getData();for(var find in renameMap){if(REB.toRegExp(find).test(item))return item.replace(REB.toRegExp(find),renameMap[find]);}
return item;};var __getQueryResultRow=function(QAResultInfo,prop){if(__query.filters){var mapItems={};__fields.getData().forEach(function(field){mapItems[field]=__resolveQuerySelectors(QAResultInfo,field,prop);});if(!__query.filters(mapItems))return null;}
var selectors=__query_select.getData();var resultItems=selectors.map(function(selector){var item=__resolveQuerySelectors(QAResultInfo,selector,prop);return __resolveQueryRenameSelectorValue(selector,item);});var queryResultRow=new ArrayList('string',false,true,__query.separator);queryResultRow.setData(resultItems);return queryResultRow.getData(true);};var __apply=function(query){__setQuery(query);if(!TC.isEmptyObject(__query)){__result.reset();var props=QAR.getAllProps();props.forEach(function(prop,index){var QAResultInfo=QAR.getResultInfo(prop);var groupBy=__resolveQuerySelectors(QAResultInfo,__query.groupby,prop)||index;var queryResultRow=__getQueryResultRow(QAResultInfo,prop);if(!queryResultRow)return;if(__query.unique){var queryResultRows=__result.getValue(___.toString(groupBy));if(queryResultRows){var resultRows=new ArrayList('string',__query.unique,true);resultRows.setData(queryResultRows);if(resultRows.hasValue(queryResultRow))return;}}
__result.setEntry(___.toString(groupBy),[queryResultRow]);});}
return __result.getData();};var __getResult=function(){return __result.getData();};var __initFields=function(){__fields.setData(QAR.getResultInfoKeys());var propKeys=new ArrayList('string',true,true);propKeys.setData(__fields.search(REB.isAllExcept(1,1,['.'],1)));__fields.remove(propKeys.getData());propKeys.add('name');propKeys.addPrefix('prop.');__fields.add(propKeys.getData());};__initFields();this.export={getQuery:function(){return ___.tryCatch(__getQuery,[],{},__cname);},setQuery:function(query){return ___.tryCatch(__setQuery,[query],null,__cname);},apply:function(query){return ___.tryCatch(__apply,[query],{},__cname);},getResult:function(){return ___.tryCatch(__getResult,[],{},__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},QAQueryResultCTRL.prototype));};var QADatalayer=function QADatalayerCTRL(DATALAYER,CONTEXT_NAME,COMMON,RESTRICT_KEY){var __cname='AutoQAService.QADatalayer';try{var CDTO;var __context=new MapObject('any');var __datalayer={};var __common={};var __restrict_key;var __getContext=function(key){return key?__context.getValue(key):__context.getData();};var __setContext=function(key,value){if(key)__context.setEntry(key,value);else __context.setData(value);};var __getContextName=function(){return __getContext('name');};var __setContextName=function(name){__setContext('name',name);};var __getContextValue=function(){return __getContext('value');};var __setContextValue=function(value){__setContext('value',value);};var __findContextName=function(datalayer){datalayer=TC.isPureObject(datalayer)?datalayer:__datalayer;if(datalayer.hasOwnProperty(CDCT.getContextOnEvent()))return CDCT.isEventToUseAsPageContext(datalayer[CDCT.getContextOnEvent()])?CDCT.getContextOnPage():CDCT.getContextOnEvent();return CDCT.getContextOnPage();};var __checkAndSetRestrictKey=function(restrict_key){__restrict_key=TC.isString(restrict_key)?(CDTO.getInfo(restrict_key)?(__datalayer[restrict_key]||__common[restrict_key]):restrict_key):'';};var __checkDatalayerContext=function(){var context_name=__getContextName();var context_value=__datalayer[context_name];var result=__checkDatalayerProp(context_name,context_value);if(result.error.type!=CET.getTypes('SUCCESS')){QAR.setStatus(2,context_name+' is required to check datalayer!');return;}
else __setContextValue(context_value);if(context_name==CDCT.getContextOnEvent()){var pageContext=CDCT.getContextOnPage();result=__checkDatalayerProp(pageContext,__datalayer[pageContext]);if((result.error.type!=CET.getTypes('SUCCESS')&&result.error.message==CET.getCauses('EXISTING')&&result.priority>CDTO.getNoPriority())||(result.priority==CDTO.getNoPriority())){__common[pageContext]=CDCT.getPageContextOfEvent(context_value)||__common[pageContext];}}};var __restrictDatalayer=function(){var props=CRT.getInfo(__restrict_key);if(props)props.forEach(function(prop){CDTO.removeInfo(prop);});else MLOG.showMessage({type:'warn',cname:__cname,fname:'__restrictDatalayer',msg:'Restrict datalayer > restrict key is not found in the restrict table',prop:'restrict key',value:__restrict_key});};var __checkAndGetDatalayerDependencyMap=function(){var types=CET.getTypes();var context_name=__getContextName();var dependencyMap=new MapObject('any');var missing_dep_list=new ArrayList('string',true,true,', ');var dkey_list=COT.getDependencyKeys('',false);if(context_name==CDCT.getContextOnPage()){dkey_list=dkey_list.filter(function(d){return d!=CDCT.getContextOnEvent()?true:false;});}
var successType=CET.getTypes('SUCCESS');var existingCause=CET.getCauses('EXISTING');var noPriority=CDTO.getNoPriority();for(var index in dkey_list){var prop=dkey_list[index];if(CRT.isRestricted(__restrict_key,prop))continue;var result=__checkDatalayerProp(prop,__datalayer[prop]);if(result.error.type!=successType&&result.error.message==existingCause&&result.priority>noPriority){result=__checkDatalayerProp(prop,__common[prop]);if(result.error.type==successType){if(__common[prop])dependencyMap.setEntry(prop,__common[prop]);}
else missing_dep_list.add(prop);}
else if(result.error.type==successType&&result.priority>noPriority){if(__datalayer[prop])dependencyMap.setEntry(prop,__datalayer[prop]);}
else if(result.priority==noPriority){if(__common[prop])dependencyMap.setEntry(prop,__common[prop]);else{result=__checkDatalayerProp(prop,__datalayer[prop],null,null,true);if(result.error.type==successType){if(__datalayer[prop])dependencyMap.setEntry(prop,__datalayer[prop]);}}}
else missing_dep_list.add(prop);}
if(!missing_dep_list.isEmpty())QAR.setStatus(1,'It is not possible to make accurate analysis for all dependencies on '+missing_dep_list.getData(true));return dependencyMap;};var __overrideDatalayer=function(){var depMap=__checkAndGetDatalayerDependencyMap();if(!(depMap instanceof MapObject)||depMap.isEmpty())return;var props=COT.getAllProps('list');props.forEach(function(prop){if(CRT.isRestricted(__restrict_key,prop))return;var depKeys=COT.getDependencyKeys(prop);depKeys.forEach(function(dkey){var dkeylist=COT.getMultiDependency(dkey);var dvaluelist=[];dkeylist.forEach(function(k){var value=depMap.getValue(k);if(value)dvaluelist.push(value);});if(dkeylist.length===dvaluelist.length){var dvalue=COT.getMultiDependency(dvaluelist);var dinfo=COT.getInfo(prop,dkey,dvalue);if(dinfo){if(dinfo.contextName&&dinfo.contextName!=__getContextName())return;if(dinfo.hasOwnProperty('priority'))CDTO.setContextPriorityMap(prop,__getContextName(),dinfo.priority,__getContextValue());if(dinfo.hasOwnProperty('acceptedValues'))CDTO.setAcceptedValues(prop,dinfo.acceptedValues);if(dinfo.suggestions)CDTO.setSuggestions(prop,dinfo.suggestions);}
else MLOG.showMessage({type:'warn',cname:__cname,fname:'__overrideDatalayer',msg:'Ovveride info > Dependency not found => '+'prop: '+prop+', dependency(key, value): ('+dkey+', '+dvalue+')'});}});});};var __checkDatalayer=function(datalayer,parents,parentProp,keyValue){var parentList=new ArrayList('string',false,true);parentList.setData(parents||[]);parentProp=parentProp||'';var props=CDTO.getKeys(parentProp);props.forEach(function(prop){parents=parentList.getData();parents.push((!TC.isUndefined(keyValue))?keyValue:prop);var fullProp=CDTO.getFullProp([parentProp,prop]);var datalayerSub=datalayer[keyValue]||datalayer[prop];var result=__checkDatalayerProp(fullProp,datalayerSub,parents,keyValue);result.value=___.merge(undefined,datalayerSub);QAR.setResultInfo(CDTO.getFullProp(parents),result);if(CDTO.getFormat(fullProp)=='object'){if(CDTO.hasDynamicProp(fullProp)){var keys=CDTO.getAcceptedKeys(fullProp,datalayerSub);keys.forEach(function(kvalue){__checkDatalayer(datalayerSub,parents,fullProp,kvalue);});}
else __checkDatalayer(datalayerSub,parents,fullProp);}});};var __checkDatalayerProp=function(prop,value,parents,keyValue,isPriorityForced){try{parents=TC.isArray(parents)?parents:[];keyValue=TC.isString(keyValue)?keyValue:'';isPriorityForced=TC.isBoolean(isPriorityForced)?isPriorityForced:false;var info=CDTO.getInfo(prop);if(TC.isNull(info))return{priority:CDTO.getNoPriority(),error:{type:CET.getTypes('SKIP'),message:CET.getCauses('SKIP')}};var context_name=__getContextName();var context_value=__getContextValue();var priority=isPriorityForced?CDTO.getMinPriority():info.priorityMap[context_name][context_value];var format=info.format;var accValues=info.acceptedValues;var suggestions=info.suggestions;var error=isPriorityForced?null:__runPreProcessingRules(prop,value,format,priority,context_name,context_value,parents,keyValue,suggestions);if(!error)error=CQAP.apply(prop,value,priority,format,accValues,suggestions);return{priority:priority,error:error};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'__checkDatalayerProp',msg:e.stack});return{priority:CDTO.getNoPriority(),error:{type:CET.getTypes('SKIP'),message:CET.getCauses('SKIP')}};}};var __runPreProcessingRules=function(prop,value,format,priority,context_name,context_value,parents,keyValue,suggestions){var types=CET.getTypes();var result=CPRET.applyRules(prop,value,format,priority,context_name,context_value,parents,keyValue);if(result.status==types.SKIP)return{type:types.SUCCESS,message:CET.getCauses('CORRECT')};else if(result.status==types.ERROR)return{type:types.ERROR,message:(result.suggestions||suggestions||CET.getCauses('ACCEPTED_VALUES'))};return null;};var __runPostProcessingRules=function(){var results=CPOST.applyRules();if(results instanceof MapObject){var keys=results.getKeys();keys.forEach(function(key){var result=results.getValue(key);QAR.setResultError(key,result.status,result.suggestions);if(result.hasOwnProperty('priority'))QAR.setResultPriority(key,result.priority);});}};var __checkDatalayerAndRunPostProcessingRules=function(){__checkDatalayer(__datalayer);__runPostProcessingRules();};var __initialize=function(datalayer,common,restrict_key){CDTO=new ConfigDatalayerTable(CDT.getTable(),CDT.getPriorities(),CDT.getNoPriority(),true);__datalayer=TC.isPureObject(datalayer)?datalayer:{};__common=TC.isPureObject(common)?common:{};__checkAndSetRestrictKey(restrict_key);__setContextName(__findContextName());};__initialize(DATALAYER,CONTEXT_NAME,COMMON,RESTRICT_KEY);this.export={getContext:function(){return ___.tryCatch(__getContext,[],null,__cname);},getContextName:function(){return ___.tryCatch(__getContextName,[],null,__cname);},getContextValue:function(){return ___.tryCatch(__getContextValue,[],null,__cname);},findContextName:function(datalayer){return ___.tryCatch(__findContextName,[datalayer],'',__cname);},initialize:function(datalayer,common,restrict_key){return ___.tryCatch(__initialize,[datalayer,common,restrict_key],null,__cname);},checkDatalayerContext:function(){return ___.tryCatch(__checkDatalayerContext,[],null,__cname);},restrictDatalayer:function(){return ___.tryCatch(__restrictDatalayer,[],null,__cname);},overrideDatalayer:function(){return ___.tryCatch(__overrideDatalayer,[],[],__cname);},checkDatalayer:function(){return ___.tryCatch(__checkDatalayerAndRunPostProcessingRules,[],[],__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},QADatalayerCTRL.prototype));};var __run=function(datalayer,common,restrict_key){QAR.init();QADL.initialize(datalayer,common,restrict_key);QADL.checkDatalayerContext();if(QADL.getContextValue()){QAR.setStatus(0,'Auto QA has been completed successfully');QADL.restrictDatalayer();QADL.overrideDatalayer();QADL.checkDatalayer();}
return QAR.getData();};var CFGD=new ConfigDefaultTable();var CGST=new ConfigGlobalStaticTable();var CPST=new ConfigPropertyStaticTable();var CHT=new ConfigSuggTable();var CDPLT=new ConfigDatalayerPropertyListTable();var CDCT=new ConfigDatalayerContextTable();var CRT=new ConfigRestrictTable();var CDT=new ConfigDatalayerTable();var COT=new ConfigOverrideTable();var CPRET=new ConfigPreProcessRulesTable();var CPOST=new ConfigPostProcessRulesTable();var CET=new ConfigErrorTable();var CQAP=new ConfigQAProperty();var QAR=new QAResults();var QAQR=new QAQueryResult();var QADL=new QADatalayer();this.export={ConfigDefaultTable:CFGD,ConfigGlobalStaticTable:CGST,ConfigPropertyStaticTable:CPST,ConfigSuggTable:CHT,ConfigDatalayerPropertyListTable:CDPLT,ConfigDatalayerContextTable:CDCT,ConfigRestrictTable:CRT,ConfigDatalayerTable:CDT,ConfigOverrideTable:COT,ConfigPreProcessRulesTable:CPRET,ConfigPostProcessRulesTable:CPOST,ConfigErrorTable:CET,ConfigQAProperty:CQAP,QAResults:QAR,QAQueryResult:QAQR,QADatalayer:QADL,run:function(datalayer,common,restrict_key){return ___.tryCatch(__run,[datalayer,common,restrict_key],null,__cname);},};}catch(e){if(console)console.error('###',__cname+' has not been completed successfully! => caused by: '+e.stack);}
return Object.freeze(Object.setPrototypeOf(this.export||{},AutoQAServiceCTRL.prototype));}();__Utils__.MessageLogging.timeEnd('AUTO QA: CREATION');}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.automatic_qa="23-09-03";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_tealium_log")&&!window.tealium_ext000_tealium_log__WeAreInBeta){window.tealium_ext000_tealium_log__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_tealium_log"));}
else{var tealium_logViaPixel=function(type,ogg,err){ogg=ogg||{};if(tealium_log)tealium_log[type].set('error',ogg,err);var datalayer={'pageName':document.location.href,'events':'event69','c30':err.replace(/\s{2,}|\n/g,' '),'Tracking_EventId_Serial':ogg.Tracking_EventId_Serial,'Tracking_EventId':ogg.Tracking_EventId||'DirectTrackingCall-by-tealium_logViaPixel',};var PanicAlert=document.createElement("IMG");PanicAlert.src="https://luxottica.d2.sc.omtrdc.net/b/ss/"
+"luxray-ban-prod-junk"
+"/1/G.4--NS/"+(new Date().getTime())+"?"
+"pageName="+encodeURIComponent(datalayer.pageName)+"&"
+"events="+encodeURIComponent(datalayer.events)+"&"
+"c30="+encodeURIComponent(datalayer.c30)+"&"
+"g="+encodeURIComponent(datalayer.pageName);if(tealium_log)tealium_log.adobe.set('done',datalayer);};var tealium_log=(function(){var TC=__Utils__.TypeChecking;var ___=__Utils__.Common;var COOKIE=__Utils__.Cookie;var STORAGE=__Utils__.Storage;var DOM=__Utils__.DOMHelper;var ArrayList=__Utils__.ArrayList;{var TEALIUM_LOG_PREFIX="tealiumLog_";var LOGGER_CONTAINER=TEALIUM_LOG_PREFIX+"loggerContainer";var LOGGER_TAB=TEALIUM_LOG_PREFIX+"loggerTab";var LOGGER_SECTION=TEALIUM_LOG_PREFIX+"loggerSection";var LOGGER_HEADER=TEALIUM_LOG_PREFIX+"loggerHeader";var LOGGER_CONTENT=TEALIUM_LOG_PREFIX+"loggerContent";var POPUP_DL=TEALIUM_LOG_PREFIX+"popupDatalayer";var POPUP_DL_CLOSE=POPUP_DL+"_close";var POPUP_DL_CONTENT=POPUP_DL+"_content";var POPUP_BETA=TEALIUM_LOG_PREFIX+"popupBeta";var POPUP_BETA_BTNS=POPUP_BETA+"_buttons";var Z_INDEX=100000000;var HEC_GT="&"+"gt"+";";var HEC_LT="&"+"lt"+";";var HEC_AMP="&"+"amp"+";";var HEC_QUOTE="&"+"#34"+";";var HEC_DQUOTE="&"+"quot"+";";var HEC_MDASH="&"+"mdash"+";";var HEC_X="&"+"#10005"+";";var HEC_RIGHT_ARROW="&"+"#x2192"+";";var HEC_RELOAD="&"+"#10226"+";";var containerDiv=null;var tabDiv=null;var headerDiv=null;var logDiv=null;var logContent=null;var popupDiv=null;var opened=false;var logHeight=315;var tabHeight=20;var adobeMap={purchase:"Orders",event1:"Logins",event2:"Users - new accounts",event3:"Users - email subscriptions",event4:"Errors - Blocking",event5:"Internal Search - queries",event6:"Internal Search - visits",event7:"Exam Funnel: Step 2",event8:"Exam Funnel: Completed",event9:"Add product to Favourites list",event10:"Filters - visits",event11:"Find in Store",event12:"Users - phone subscriptions",event13:"Products - views ecom",event14:"Social Shares",event16:"Orders - gift orders qnt",event17:"OC - Case Engraving Changed",event19:"Orders - discount orders qnt",event20:"Orders - Giftcard",event21:"Checkout - Delivery",event22:"Checkout - Payment",event23:"Filters - hits",event24:"Orders - tax",event25:"Orders - Shipping revenue local currency",event26:"Orders - Shipping revenue",event27:"Products - views out of stock",event28:"Users - Order Reminder",event29:"Removed from wishlist",event30:"Orders - cancelled revenue local cur",event31:"Product Downloads",event32:"Products - views",event35:"Store Search - queries",event36:"Store Search - results",event37:"Orders - discount revenue",event38:"Users - email unsubscriptions",event39:"Returns",event40:"Returns Units",event41:"Course video - start",event42:"Course video - continue",event43:"Orders - wrapping",event44:"Orders - discount units",event45:"Action - serial",event46:"Products - oos email me submit",event47:"Products - views - unique visits",event48:"Orders - wrapping revenue",event49:"Performance - Tealium load times",event50:"Errors - Product",event51:"Errors - 404",event52:"Errors - IT",event53:"Errors - UX",event54:"Orders - wrapping revenue local curr",event55:"Errors - Content",event56:"Pages - load time",event57:"Contents - Qubit Impressions",event58:"Errors - Not Blocking",event59:"Store Search - no results",event60:"Orders - revenue - local currency",event61:"Orders - giftcards used",event62:"Orders - discount revenue local curr",event63:"Orders - Shipping tax local currency",event64:"Orders - Shipping tax",event65:"Orders - tax local currency",event66:"Products - oos email me view",event67:"Exam - quantity",event68:"Pages - load times",event69:"Errors - debugger",event70:"Orders - cancelled",event72:"Action - contact us",event73:"Exam Funnel: Started",event74:"Checkout - Order Summary",event75:"Exam Funnel: Deleted",event76:"Exam Funnel: Add Another Exam",event77:"Orders - Prescription Ok",event78:"Units - Engraving",event79:"Orders - Engraving",event80:"Units - Giftwrap",event81:"Orders - Giftwrap",event82:"Errors - Marketing",event83:"Revenue - GiftCard",event84:"Revenue Local Currency - GiftCard",event85:"Units - GiftCard",event87:"Exam Funnel - store search",event88:"Orders - Insurance amount",event89:"Conductor - Content Health Score",event90:"Conductor - Denominator",event91:"Internal Search Img - visits",event92:"Internal Search Text - visits",event93:"Internal Search Suggested - visits",event94:"Orders - Subscription",event95:"Internal Search Barcode - visits",event96:"Products list - views",event97:"OC - Size Changed",event98:"OC - Frame Engraving Changed",event99:"OC - Recipe Saved",event103:"VM - Browser is supported",event104:"VM - Prod is supported",event105:"VM - VM - Ready",event106:"VM - Request WebCam",event107:"VM - WebCam Allowed",event108:"VM - Render",event109:"VM - Close",event110:"VM - Try On",event111:"VM - Fit Glasses",event112:"VM - Adjust Glasses",event113:"Exam Funnel - Booking questions 1",event114:"Exam Funnel - Booking questions 2",event115:"Exam Funnel - Booking questions 3",event116:"Exam Funnel - Booking questions 4",event117:"Exam Funnel - Booking questions 5",event118:"Exam Funnel - Booking date",event119:"Exam Funnel - Review",event120:"CP - Prod is supported",event121:"CP - Loaded",event124:"CP - ConfirmConf",event125:"CP - Closed",event126:"CP - Engagement Index By Visit",event127:"CP - First Interaction By Visit",event128:"CP - First Interaction By Model",event129:"CP - Engagement Index By Model",event130:"Editorial - Add",event131:"Editorial - Remove",event132:"Editorial - Share",event133:"Editorial - Download",event134:"Editorial - Send",event135:"VM - Screenshot",event136:"Checkout - Shipping",event140:"Sessions - Start",event144:"Frame Advisor - Products views",event145:"Frame Advisor - Skin confirmed",event146:"Frame Advisor - Profile changed",event147:"Frame Advisor - Fit glasses",event150:"RX Funnel - Type",event151:"RX Funnel - Brand",event152:"RX Funnel - Material",event153:"RX Funnel - Treatment",event154:"RX Funnel - Review",event155:"RX Funnel - Performance",event170:"Face Scan - Capture visits",event171:"Face Scan - Capture hits",event172:"Frame Advisor - Results visits",event173:"Frame Advisor - Results hits",event174:"Frame Advisor - Start visits",event175:"Product - Price",event176:"Product - PriceFull",event180:"Insurance - Applied",event181:"Insurance - Tentative",event182:"Insurance - Apply",event183:"Insurance - Open",event184:"Checkout - Standard",event185:"Checkout - Express",event186:"Checkout - Login",event187:"Cart - Views hits",event188:"Checkout - Qoto",event189:"Checkout - Reorder",event190:"Prescription - Save CL",event191:"Prescription - Save Eyewear",event192:"Products - Comparator views",eVar1:"Traffic Sources - tracking code first touch",eVar3:"Internal Campaign ID",eVar5:"Orders - cart ID",eVar6:"Pages - country",eVar7:"Sessions - time local",eVar8:"Pages - url",eVar9:"Users - ID",eVar10:"Store - Configuration",eVar11:"Store - Chain",eVar12:"Internal Search - keyword",eVar13:"Internal Search - results count",eVar18:"Cart Additions - Source",eVar19:"Marketing Channels - Multi Touch",eVar20:"Orders - tax rate",eVar21:"Errors - datalayer",eVar22:"Device - agent / browser",eVar23:"Orders - shipping mode",eVar24:"Store Search - Keyword",eVar25:"Errors - code",eVar26:"Pages - section",eVar27:"Orders - discount amount",eVar28:"OC - Recipe Changed",eVar29:"Orders - discount code",eVar30:"Orders - giftcard code",eVar31:"Orders - payment type",eVar32:"Pages - region",eVar33:"Ratings & Reviews",eVar34:"Orders - cancellation id",eVar35:"Orders - Id",eVar36:"Errors - details",eVar37:"Internal Search - Type",eVar38:"Session - Click Tale User ID",eVar39:"Users - login status & source",eVar40:"Orders - currency code + yymm",eVar41:"Orders - installments",eVar42:"Pages - assist to cart",eVar43:"Orders - discount method",eVar44:"Actions",eVar45:"Users - segments",eVar48:"Tags - tealium release code",eVar49:"Pages - platform",eVar50:"Orders - wrapping type",eVar51:"Users - international",eVar52:"Users - country",eVar53:"Users - language",eVar54:"Device - screen",eVar55:"Traffic Sources - code stacking",eVar56:"Orders - gift",eVar58:"Pages - name OLD",eVar59:"Pages - device type OLD",eVar60:"Actions",eVar61:"Actions - previous",eVar62:"Users - ID timestamp",eVar63:"Users - Phone MD5",eVar65:"Orders - Insured",eVar66:"Exam - ID",eVar67:"Exam - Q:patient",eVar68:"Pages - Referrer",eVar69:"Exam - Q:lenses worn before",eVar70:"Orders - Prescription Method",eVar72:"Tags - Google Double Click Id",eVar73:"Tags - Tealium Events",eVar74:"Pages - brand",eVar77:"Tags - Google Click Id",eVar78:"Exam - Q:visits purpose",eVar80:"Actions - previous",eVar82:"Orders - Insurance code",eVar83:"Errors - code",eVar84:"Users - Consent",eVar85:"Smartly",eVar86:"Editorial - Category",eVar87:"Editorial - Label",eVar88:"Editorial - Scope",eVar89:"Event - Source",eVar90:"Products - Custom Preset",eVar91:"Page - Platform Release",eVar92:"Store - Id",eVar93:"Fs - Connected",eVar94:"Product - Badges",eVar95:"Filters - Facet Query",eVar96:"Pages - User Profile",eVar97:"Orders - Insurance benefits",eVar98:"Product - Lens Type",eVar99:"Session - Status",eVar114:"Internal Search - keyword actual",eVar115:"Product - Frame Type",eVar118:"Frame Advisor - Best match",eVar119:"Frame Advisor - Release",eVar120:"Tags - Tealium Triggered",eVar126:"Pages - Full URL",eVar127:"Orders - discount name",eVar129:"Product - Preorder",eVar131:"Product - Status",eVar132:"Product - Shipping to",eVar134:"Exam - Zipcode",eVar135:"Exam - Previous",eVar136:"Exam - App Date",eVar137:"Store Search - Type",eVar139:"OC - Release",eVar142:"Vmmv - Release",eVar143:"Take Mode",eVar145:"Store Search - Results Count",eVar148:"Sadv - Release",eVar149:"OC - UPC Supported",eVar155:"Orders - Shipping type",eVar156:"Store Search - Store ID",eVar157:"Product - Discount Price %",eVar158:"Orders - Shipping same day",eVar159:"User - Prescription saved",eVar160:"Recom - Badge",eVar161:"Exam - Insurance Provider",prop1:"Traffic Sources - tracking code first touch",prop2:"Pages - Country",prop3:"Tracking - event id",prop5:"Orders - Cart ID",prop6:"Orders - Order ID",prop7:"Sessions - Time local",prop8:"Pages - Url",prop9:"Users - ID",prop10:"Orders - payment type",prop11:"Pages - code",prop12:"Store - Chain",prop13:"Internal Search - keyword",prop14:"Internal Search - results count",prop15:"Store - Id",prop16:"Store - Configuration",prop18:"Store - Segment",prop19:"Marketing Channels - Multi Touch",prop20:"Pages - section",prop21:"Errors - datalayer",prop22:"Device - agent / browser",prop23:"Errors - QA",prop25:"Errors - code",prop26:"Product - remix Temple Engraving",prop27:"Product - remix case engraving",prop28:"Pages - Creativity",prop29:"Pages - platform",prop30:"Errors - tealium",prop31:"Checkout path",prop32:"Errors - message",prop33:"Action - last url requested",prop34:"Session - Click Tale User ID",prop35:"Pages - region",prop36:"Errors - details",prop37:"Orders - shipping amount",prop38:"Action - combo",prop39:"Users - login status & source",prop40:"Users - Email MD5",prop42:"Users - nation",prop43:"Product - status",prop45:"Users - segments",prop46:"Returns - reason code",prop48:"Tags - tealium release code",prop50:"Internal Search - keyword actual",prop51:"Users - international",prop54:"Device - screen",prop55:"Traffic Sources - code stacking",prop58:"Pages - name OLD",prop59:"Pages - device type OLD",prop60:"Actions",prop61:"Actions - previous",prop62:"Users - ID timestamp",prop65:"Orders - Insured",prop66:"Pages - language OLD",prop67:"Pages - querystring",prop68:"Pages - referrer",prop69:"Content - campaign",prop70:"Orders - Prescription Method",prop71:"Users - Consent",prop72:"Tracking - event serial id",prop73:"Tags - Tealium Events",prop74:"Pages - brand",prop75:"Pages - load time",list1:"Content - test list",list2:"Filters - facet values",list3:"Actions"};var clickLabelMap={b:"b - Content box (from JS)",d:"d - Content description (from JS), '#' => detection in d0",options:"options - Click limitations data-analytics_available_call, data-analytics-abort",b2:"b2 - Content box (from HTML), e.g.:data-element-id, ...",cn:"cn - Customized Condition",d0:"d0 - Content description (item position)",d2:"d2 - Content description (from HTML) e.g.:data-description",et:"et - Event type",id:"id - Event Id",je:"je - Customized JS Condition",ji:"ji - Customized JS Condition",js:"js - Customized JS Condition",on:"on - Event to fire on",pc:"pc - Customized Condition - Page Coutry",pd:"pd - Customized Condition - Device Type",pn:"pn - Customized Condition - Page Name Full",pp:"pp - Customized Condition - Page Platform",pu:"pu - Customized Condition - Page Url",s:"s - jQuery Selector",tt:"tt - Tracking type: view, link, hiddenaction, simulated, configurator, nextpage, test",sm:"sm - Settings Merge: override global settings",};var currentUserProfile="";var userPermissionMatrix={utag:{biz:0,it:1,user:1,lwa:1},utag_data:{biz:0,it:(window.utag_cfg_ovrd&&window.utag_cfg_ovrd.noview?0:1),user:1,lwa:1},preloader:{biz:0,it:0,user:0,lwa:1},domready:{biz:0,it:0,user:0,lwa:1},listener:{biz:0,it:0,user:1,lwa:1},data2track:{biz:0,it:1,user:1,lwa:1},utag_data2track:{biz:0,it:1,user:1,lwa:1},builder:{biz:0,it:0,user:1,lwa:1},adobe:{biz:1,it:1,user:1,lwa:1},console_log:{biz:0,it:1,user:1,lwa:1},clear_storage:{biz:0,it:0,user:1,lwa:1},beta_extension:{biz:0,it:0,user:0,lwa:1},preserve_log:{biz:0,it:1,user:1,lwa:1},resize_log:{biz:0,it:1,user:1,lwa:1},remove_log:{biz:0,it:1,user:1,lwa:1},};var updateLogEnabled=true;var __getReference=function(ref,id){return ref||document.getElementById(id);};}
var tealium_objQnt=function(list){if(typeof list!="object")return-1;if(list===null)return-2;return(Array.isArray(list))?list.length:Object.getOwnPropertyNames(list).length;};var tealium_comparisonFiltering={startWith:function(prop,sw){return(typeof prop==="string"&&typeof sw==="string"&&(prop.indexOf(sw)===0));},startWithUpperCase:function(prop){return(typeof prop==="string"&&prop.charAt(0)===prop.charAt(0).toUpperCase());},startWithLowerCase:function(prop){return(typeof prop==="string"&&prop.charAt(0)===prop.charAt(0).toLowerCase());},equalTo:function(prop,sw){return(typeof prop==="string"&&typeof sw==="string"&&(prop===sw));},};var tealium_objFilters=function(obj,filters,comparison){comparison=(comparison!==undefined)?comparison:'startWith';var objreturn={error:0,result:{}};var length_obj=tealium_objQnt(obj);if(length_obj<1){objreturn.error=length_obj;return objreturn;}
var length_filters=tealium_objQnt(filters);if(length_filters<1){objreturn.error=(length_filters==0)?(length_filters):(length_filters-2);return objreturn;}else if(!Array.isArray(filters)){objreturn.error=-5;return objreturn;}
if(typeof comparison!=="string"){objreturn.error=-6;return objreturn;}
objreturn.error=-7;for(var func in tealium_comparisonFiltering){if(tealium_comparisonFiltering.hasOwnProperty(func)){if(func===comparison){objreturn.error=0;break;}}}
if(objreturn.error<0){return objreturn;}
objreturn.result={filters:{},nofilters:obj};for(var key in obj){if(obj.hasOwnProperty(key)){for(var index in filters){if(filters.hasOwnProperty(index)){if(tealium_comparisonFiltering[comparison](key,filters[index])){objreturn.result.filters[key]=obj[key];delete objreturn.result.nofilters[key];}}}}}
return objreturn;};var tealium_comparisonSorting={ascending:function(item1,item2){if((typeof item1)==="string"&&(typeof item2)==="string"){return(item1.toString().localeCompare(item2.toString()));}else if((typeof item1)==="number"&&(typeof item2)==="number"){return(item1-item2);}
return null;},descending:function(item1,item2){if((typeof item1)==="string"&&(typeof item2)==="string"){return(item2.toString().localeCompare(item1.toString()));}else if((typeof item1)==="number"&&(typeof item2)==="number"){return(item2-item1);}
return null;}};var tealium_objSort=function(obj,orderBy,orderKey){orderBy=(orderBy!==undefined)?orderBy:'ascending';orderKey=(orderKey!==undefined)?orderKey:'key';var objreturn={error:0,result:{}};var length_obj=tealium_objQnt(obj);if(length_obj<1){objreturn.error=length_obj;return objreturn;}
if(length_obj===1){objreturn.result=obj;return objreturn;}
if(typeof orderBy!=="string"){objreturn.error=-3;return objreturn;}
objreturn.error=-4;for(var func in tealium_comparisonSorting){if(tealium_comparisonSorting.hasOwnProperty(func)){if(func===orderBy){objreturn.error=0;break;}}}
if(objreturn.error<0){return objreturn;}
if(typeof orderKey!=="string"||(!Array.isArray(obj)&&(!(orderKey==='key'||orderKey==='value')))){objreturn.error=-5;return objreturn;}
if(Array.isArray(obj)){objreturn.result=obj.sort(tealium_comparisonSorting[orderBy]);}else{var arr=[];for(var prop in obj){if(obj.hasOwnProperty(prop)){arr.push({'key':prop,'value':obj[prop]});}}
var arr_sorted=arr.sort(function(item1,item2){return tealium_comparisonSorting[orderBy](item1[orderKey],item2[orderKey]);});for(var index in arr_sorted){if(arr_sorted.hasOwnProperty(index)){objreturn.result[arr_sorted[index].key]=arr_sorted[index].value;}}}
return objreturn;};var grant=function(){return STORAGE.getItem('tealium_log','')=='show'?true:false;};var getUserPermission=function(component){return component&&currentUserProfile?userPermissionMatrix[component][currentUserProfile]:0;};var detectUserRole=function(){if(STORAGE.getItem('tealium_log','')=="show"){switch(STORAGE.getItem('tealium_team','')){case"lwa":{currentUserProfile="lwa";break;}
case"user":{currentUserProfile="user";break;}
case"biz":{currentUserProfile="biz";break;}
default:{currentUserProfile="it";}}}else{currentUserProfile="";}};var updateElement=function(path,state,datalayer,notes){var index;var pathArray=path.split('.');var o=tealium_log[pathArray[0]];if(pathArray[1])o=o[pathArray[1]];if(pathArray[2])o=o[pathArray[2]];notes=(notes||'').replace(/\s{2,}|\n/g,' ');o.notes=notes?(o.notes?o.notes+', ':'')+notes:o.notes;o.state=o.state=='error'?o.state:(state||o.state);if(typeof datalayer=='object'){o.datalayer=___.merge({},datalayer);}else{o.datalayer={};}
if(state=='error'&&!datalayer.Error_Tealium){datalayer.Error_Tealium=notes;o.datalayer.Error_Tealium=notes;}
if(pathArray[2]&&(o.datalayer.Tags__Abort=='1'||o.datalayer.Tracking_Type=='hiddenaction'))
tealium_log.events[pathArray[1]].adobe.state='aborted';if(!o.timeStart&&o.state)o.timeStart=Date.now();if(!o.timeEnd&&!o.state.match(/^processing/))o.timeEnd=Date.now();tealium_log.update();return true;};var animateLogger=function(){containerDiv=__getReference(containerDiv,LOGGER_CONTAINER);if(containerDiv){containerDiv.style.bottom=(opened?-logHeight:0)+"px";opened=!opened;}};var buildDelayString=function(timestamp){if(!timestamp||!window.performance||!window.performance.timing||!window.performance.timing.domLoading)return'-';var length=((timestamp-window.performance.timing.domLoading)/1000).toFixed(0)+' sec.';return length;};var buildEventDelayString=function(i){if(self.events[i]){var __getElement=function(component,elem){return self.events[i].hasOwnProperty(component)&&self.events[i][component].datalayer&&self.events[i][component].datalayer.hasOwnProperty(elem)?self.events[i][component].datalayer[elem]:'';};var abort=(!__getElement('adobe','prop3'))?' - aborted call':'';var content_box=__getElement('data2track','data_element_id')||'__notDetected__';var content_description=__getElement('data2track','data_description')||'__notDetected__';var title=self.events[i].id&&(''+self.events[i].id).match(/click/i)?((content_box?"data-element-id: \""+content_box+"\"":"")
+
(content_description?" data-description: \""+content_description+"\"":"")):"";self.print(buildDelayString(self.events[i].timeStart),buildMessageHtml('events.'+i,self.events[i].id+(title?":"+title:"")+abort));{var list=[];if(getUserPermission("listener")&&self.events[i].id&&(''+self.events[i].id).match(/(Click|Error|VirtualPage-View|Loading-Ready|X-X-User-Newsletter-SignUpConfirm)/i))list.push("listener");if(getUserPermission("data2track")&&self.events[i].id&&(!(''+self.events[i].id).match(/pageview:default/i)))list.push("data2track");if(getUserPermission("utag_data2track")&&self.events[i].id&&(''+self.events[i].id).match(/loading-ready/i))list.push("utag_data2track");if(getUserPermission("builder"))list.push("builder");list.push("last_mousedown");if(getUserPermission("adobe"))list.push("adobe");for(var d=0;d<list.length;d++){if(list[d].match(/last_mousedown/i)){var last_event=(self.events[i].builder&&self.events[i].builder.datalayer&&self.events[i].builder.datalayer.Tracking_EventId&&(''+self.events[i].builder.datalayer.Tracking_EventId).match(/pageview:/i))?(self.events[i].builder.datalayer.Action_PreviousEvent||"No Action"):"";if(last_event){self.print(buildDelayString(self.events[i].builder.timeStart),"<div style=\"color:lawngreen;padding-left:1em;\">"+'> Latest Mousedown tracked: '+last_event+"</div>",1);}}
else self.print(buildDelayString(self.events[i][list[d]].timeStart),buildMessageHtml('events.'+i+'.'+list[d],self.events[i].id+(title?":"+title:"")+abort),1);}}}};var buildMessageHtml=function(path,eid){var pathArray=path.split('.');var o=tealium_log[pathArray[0]];if(pathArray[1])o=o[pathArray[1]];if(pathArray[2])o=o[pathArray[2]];path=path.replace(/\.(\d+)[^.]*/,"[$1]");var state=o.state?o.state:pathArray.length==2?'':'missing';var color=pathArray.length==2?"white":state=="processing"?"yellow":state=="done"?"lawngreen":state=="error"?"rgb(255, 100, 100)":"gray";var padding=path.match(/listener|data2track|builder|adobe/i)?1:0;var eventLabel=path.match(/events/i)?(STORAGE.getItem('tealium_preserveLog','')=='on'&&STORAGE.getItem('tealium_logLastEvent','')&&pathArray[1]==0?"Event Previous Page":"Event"):"";var prefix=path.match(/utagjs/i)?'Library utag.js: ':path.match(/^utag_data$/i)?'Data Layer utag_data: ':path.match(/preloader/i)?'Preloader: ':path.match(/domready/i)?'DomReady: ':path.match(/listener/i)?'> Listener: ':path.match(/utag_data2track/i)?'> utag_data2track: ':path.match(/data2track/i)?'> data2track: ':path.match(/datalayer/i)?'> Datalayer: ':path.match(/builder/i)?'> Builder: ':path.match(/adobe/i)?'> Adobe: ':'';var prefix_events='';if(path.match(/events/i)){var __eid=(''+eid)||'no-id';var eventId=__eid.split(":");var eventId0=eventId[0]?eventId[0]:'';var eventId1=eventId[1]?eventId[1]:(__eid||'');if(typeof eid==="string"){eventId0=eid.match(/(pageview:[^:]*(default|loading-(ready|tracklater)|virtualpage-view|abort)([^:]*abort)*)|(loading-(ready|tracklater)|virtualpage-view)/i)?'On Page Load':eid.match(/^click|linktracking:[^:]*(click|abort)/i)?'On Mousedown':'On Push';eventId1=eid.match(/pageview:[^:]*default/i)?eventId1:eid.match(/(pageview:[^:]*(loading-(ready|tracklater)|virtualpage-view))/i)?"\""+eventId1+"\"":eid.match(/(loading-(ready|tracklater)|virtualpage-view)([^:]*abort)*/i)?"\""+eid+"\"":eid.match(/^click|linktracking:[^:]*(click|abort)/i)?eid.replace(/^click(:)*|linktracking:[^:]*(click|abort)(:) */i,""):"id: \""+eventId1+"\"";}
prefix_events=eventLabel+' #'+pathArray[1]+" - "+eventId0+" - "+eventId1;}
if(!prefix&&prefix_events)prefix=prefix_events;var utagVersion='';if(o.version){var isNewUtagVersion=(o.version.indexOf(new Date().toISOString().split('T')[0].replace(/-/g,''))>-1)?true:false;var getUtagVersion=o.version.split(".")[2].substr(6,2)+"/"+o.version.split(".")[2].substr(4,2)+"/"+o.version.split(".")[2].substr(0,4)+" "+o.version.split(".")[3].substr(0,2)+":"+o.version.split(".")[3].substr(2,4)+" CET";utagVersion='- Latest update: '+(isNewUtagVersion?'TODAY ':'')+getUtagVersion;if(o.versionPrev&&o.version!=o.versionPrev)
utagVersion+=" <span style='background-color:yellow;color:black;letter-spacing:0.2em;padding:0 0.5em;'>NEW</span>";}
var suffix=(pathArray[0]=="utagjs")?utagVersion:(state=="done")?(" in "+((o.timeEnd-o.timeStart)/1000).toFixed(2)+" sec."):(state=="processing")?(" in progress for "+((Date.now()-o.timeStart)/1000).toFixed(0)+" sec."):'';var obj_title=prefix.match(/^> /)?prefix_events:'Utag.js';var obj_subtitle=prefix.replace(/(\: |> )/g,'');var title=(obj_title+' - '+obj_subtitle).replace(/'/g,'\\\'').replace(/"/g,HEC_DQUOTE);if(path.match(/utag_data|data2track/i)&&o.datalayer){if(TC.isObject(o.datalayer.Error_DatalayerObject)){var err_obj=o.datalayer.Error_DatalayerObject;var err_count;for(var __pry in err_obj){if(err_obj.hasOwnProperty(__pry)){err_count=___.length(err_obj[__pry]);color=err_count>0?"rgb(255, 100, 100)":color;}}}}
var linkdatalayer=(Object.keys(o.datalayer).length>0&&(!path.match(/listener/i)))?'<span style="cursor:pointer;padding:0 2px;" onclick="tealium_log.popupDatalayer(tealium_log.'+path+'.datalayer, \''+title+'\')"><span>check variables</span></span>':'';var errorDetected=(!o.error)?(''):('<span style="cursor:pointer;color:yellow;padding:0 2px;" onclick="tealium_log.popupDatalayer(tealium_log.'+path+'.error)" title="'+(''+o.error).replace(/&/g,HEC_AMP).replace(/</g,HEC_LT).replace(/>/g,HEC_GT).replace(/'/g,'\\\'').replace(/"/g,HEC_DQUOTE)+'">error detected</span>');if(o.error){document.getElementById(LOGGER_TAB).style.backgroundColor="yellow";document.getElementById(LOGGER_TAB).style.color="black";}
if(color.match(/rgb\(255/)){document.getElementById(LOGGER_TAB).style.backgroundColor="rgba(255,0,0,0.9)";}
return"<div style=\"color:"+color+";padding-left:"+padding+"em;\">"+prefix+' '+state+' '+suffix+' '+(o.notes||'')+' '+linkdatalayer+' '+errorDetected+"</div>";};var addMissingPropsOnDatalayer=function(dl,res_qa){for(var prop in res_qa){if(res_qa.hasOwnProperty(prop)){if(TC.isUndefined(dl[prop])&&TC.isObject(res_qa[prop].info.error)&&res_qa[prop].info.error.label!="SUCCESS"){dl[prop]="UNDEFINED";}
if(typeof res_qa[prop]==="object"&&res_qa[prop].children){addMissingPropsOnDatalayer(dl[prop],res_qa[prop].children);}}}};var getResultQARows=function(obj,e,val){var build_recursive_rows=function(res_qa,e,val,depth){depth=TC.isNumber(depth)&&depth>0?depth:0;var lines="";var priority=res_qa=='$$$UNDEFINED$$$'||res_qa=='$$$EMPTY$$$'?"ND":res_qa.info&&res_qa.info.priority>"-1"?"P"+res_qa.info.priority:"NP";var message=res_qa=='$$$UNDEFINED$$$'?"WARNING > Variable is not mentioned on Analytics Tagging Plan!":res_qa=='$$$EMPTY$$$'?"WARNING: Variable is not analyzed!":res_qa.info&&res_qa.info.error?res_qa.info.error.label+" > "+res_qa.info.error.message:"<<<NO MESSAGE>>>";var style=res_qa&&res_qa.info&&res_qa.info.error?res_qa.info.error.style:"warning_row";var fe=(TC.isObject(val)&&___.length(val)>0)?'{...}':JSON.stringify(val,undefined,2);var indent=function(d){var s="";for(var i=0;i<d;i++){s+="> ";}
return s;}(depth);lines+="<tr><td style=\"font-weight: bold;\">"+priority+"</td><td>"+indent+e+"</td><td>"+fe+"</td><td class=\""+style+"\">"+message+"</td></tr>";if(typeof val==="object"){for(var i in val){if(val.hasOwnProperty(i)){lines+=build_recursive_rows((res_qa&&res_qa.children&&res_qa.children[i]?res_qa.children[i]:'$$$UNDEFINED$$$'),i,val[i],(depth+1));}}}
return lines;};var res_qa='$$$UNDEFINED$$$';if(obj.Result_QA&&obj.Result_QA.result&&___.length(obj.Result_QA.result)<1)res_qa='$$$EMPTY$$$';if(obj.Result_QA&&obj.Result_QA.result&&obj.Result_QA.result[e])res_qa=obj.Result_QA.result[e];return build_recursive_rows(res_qa,e,val);};var getStatusResultQA=function(obj){var line="";if(obj&&obj.Result_QA&&obj.Result_QA.status&&TC.isNumber(obj.Result_QA.status.code)&&TC.isString(obj.Result_QA.status.message)){var style=obj.Result_QA.status.code==1?"warning_row":obj.Result_QA.status.code==2?"error_row":"success_row";var message=obj.Result_QA.status.message||"";line="<tr><td colspan=\"4\" class=\""+style+"\" style=\"font-weight: bold; text-align: center; font-size: 14px; padding: 10px; \">"+message+"</td></tr>";}
return line;};var clearResources=function(t_vis,t_log,t_team,t_pre,t_beta){if(t_vis)STORAGE.removeItem('tealium_visibility');if(t_log)STORAGE.removeItem('tealium_log');if(t_team)STORAGE.removeItem('tealium_team');if(t_pre){STORAGE.removeItem('tealium_preserveLog');STORAGE.removeItem('tealium_logLastEvent');}
if(t_beta){STORAGE.removeItem("tealium_ext000_utils");STORAGE.removeItem("tealium_ext000_ui_components");STORAGE.removeItem("tealium_ext000_global_settings");STORAGE.removeItem("tealium_ext000_automatic_qa");STORAGE.removeItem("tealium_ext000_automatic_qa_conf");STORAGE.removeItem("tealium_ext000_tealium_log");STORAGE.removeItem("tealium_ext000_utag_components");STORAGE.removeItem("tealium_ext000_repairer_patch");STORAGE.removeItem("tealium_ext000_utag_settings");STORAGE.removeItem("tealium_ext000_customize_clicks");STORAGE.removeItem("tealium_ext000_listeners");STORAGE.removeItem("tealium_ext000");STORAGE.removeItem("tealium_ext100_domready_patch");STORAGE.removeItem("tealium_ext100");STORAGE.removeItem("tealium_ext200");STORAGE.removeItem("tealium_ext300");STORAGE.removeItem("tealium_ext400");}
};var getUpdateLog=function(){return updateLogEnabled;};var setUpdateLog=function(b){updateLogEnabled=b?true:false;};var self={switchUserRoleByUrlParam:function(){if(window.location.search.indexOf("analytics_steps=off")>-1){clearResources(1,1,1,0,0);}
if(window.location.search.indexOf("analytics_steps=on")>-1){clearResources(0,0,1,0,0);STORAGE.setItem('tealium_log','show','forever');}
if(window.location.search.indexOf("analytics_team=biz")>-1||window.location.search.indexOf("tealium_team=biz")>-1||window.location.search.indexOf('analytics_filter=off')>-1){STORAGE.setItem('tealium_team','biz','forever');STORAGE.setItem('tealium_log','show','forever');}
if(window.location.search.indexOf("analytics_team=user")>-1||window.location.search.indexOf("tealium_team=user")>-1){STORAGE.setItem('tealium_team','user','forever');STORAGE.setItem('tealium_log','show','forever');}
if(window.location.search.indexOf("analytics_team=lwa")>-1||window.location.search.indexOf("tealium_team=lwa")>-1){STORAGE.setItem('tealium_team','lwa','forever');STORAGE.setItem('tealium_log','show','forever');}
detectUserRole();clearResources(0,0,0,!getUserPermission('preserve_log'),!getUserPermission('beta_extension'));},init:function(){if(!grant()){return false;}
if(containerDiv){return true;}
if(!document||!document.createElement||!document.body||!document.body.appendChild){return false;}
containerDiv=document.getElementById(LOGGER_CONTAINER);if(!containerDiv){var head=document.head||document.getElementsByTagName('head')[0],style=document.createElement('style'),css="#"+LOGGER_CONTAINER+"{ width:100%; margin:0; padding:0; box-sizing:border-box; position:fixed; text-align:left; text-transform:none; font-family:monospace; left:0; z-index:"+Z_INDEX+"; bottom:"+(-logHeight)+"px; } \n"
+"#"+LOGGER_TAB+"{ width:85px; box-sizing:border-box; overflow:hidden; font:bold 10px verdana,helvetica,sans-serif; line-height:"+(tabHeight-1)+"px; color:#fff; position:absolute; left:5px; top:"+-tabHeight+"px; margin:0; padding:0; "
+"text-align:center; background:rgba(0,0,0,0.8); border:1px solid #aaa; border-bottom:none; border-top-right-radius:8px; border-top-left-radius:8px; "
+"-webkit-border-top-right-radius:8px; -webkit-border-top-left-radius:8px; -khtml-border-radius-topright:8px; -khtml-border-radius-topleft:8px; -moz-border-radius-topright:8px; -moz-border-radius-topleft:8px; } \n"
+"#"+LOGGER_TAB+":hover { cursor: pointer; text-shadow: 0 0 1px #fff, 0 0 2px #0f0, 0 0 6px #0f0 } \n"
+"#"+LOGGER_HEADER+" { background:rgb(0, 0, 0); width: 100%; color:rgb(170,170,170); text-align:right; font: 12px monospace; } \n"
+"#"+LOGGER_HEADER+" .nav-button { cursor: pointer; padding: 0px; margin-left: 5px; background-color: lightgreen; text-align: center; color: black; text-shadow: white 1px 1px 1px; border-radius: 2px; width: 20px; height: 20px; display: inline-block; vertical-align: middle; } \n"
+"#"+LOGGER_HEADER+" .nav-button:hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+LOGGER_HEADER+" .nav-button-text { padding: 3px; } \n"
+"#"+LOGGER_HEADER+" .nav-lnk { cursor: pointer; padding-right: 25px; } \n"
+"#"+LOGGER_HEADER+" .nav-lnk:hover { color: white; } \n"
+"#"+LOGGER_HEADER+" .nav-lnk.active { color:yellow; } \n"
+"#"+LOGGER_SECTION+" { font:12px monospace; height: "+logHeight+"px; box-sizing:border-box; color:#fff; padding:5px; border-top:1px solid #aaa; background:rgba(0, 0, 0, 0.9); } \n"
+"#"+LOGGER_CONTENT+" { height: calc(100% - 30px); overflow-x:hidden; overflow-y:auto; } \n"
+"#"+LOGGER_CONTENT+" div span span { cursor: pointer;text-decoration: none;background-color: #8080809c;color: white;font-size: 10px;border-radius: 3px;padding: 0px 6px; display: inline-block; } \n"
+"#"+LOGGER_CONTENT+" div span span:hover { background-color: white;color: black; transition-duration: 0.4s; } \n"
+"#"+POPUP_DL+" { position:fixed; z-index:"+(Z_INDEX+1)+"; left:0; top:0; background-color: #000; width:100%; height:100%; font-family:monospace; font-size:11px; overflow-y:auto; } \n"
+"#"+POPUP_DL_CLOSE+" { cursor:pointer; font-family:monospace; font-weight: bold; font-size:18px; border-radius: 10px; padding: 10px 12px; text-align:center; text-shadow: white 1px 1px 1px; position:fixed; top:10px; right:15px; background-color:lightgreen; line-height: initial; } \n"
+"#"+POPUP_DL_CLOSE+":hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+POPUP_DL_CONTENT+" { padding: 10px; } \n"
+"#"+POPUP_DL_CONTENT+" h1.title { color:lightgreen; line-height:normal; font-size:30px; text-align: center; text-shadow: white 1px 1px 3px; font-family: monospace; font-weight: bold; text-transform: inherit;} \n"
+"#"+POPUP_DL+" table { color:#000; background-color:aliceblue; text-align:left; table-layout:unset; font-family:monospace; font-size:11px; margin-bottom: 10px;} \n"
+"#"+POPUP_DL+" table tbody { text-transform:none; } \n"
+"#"+POPUP_DL+" table th { border:1px solid #888; padding:0 6px; background-color:#899; font-size:12px; font-weight:bold; } \n"
+"#"+POPUP_DL+" table td { border:1px solid #888; padding:0 6px; /* word-break: break-word; */ } \n"
+"#"+POPUP_DL+" .success_row { color: #456f45; font-weight: bold; } \n"
+"#"+POPUP_DL+" .alert_row { color: #ca4200; font-weight: bold; } \n"
+"#"+POPUP_DL+" .error_row { color: #ca4200; font-weight: bold; } \n"
+"#"+POPUP_DL+" .warning_row { color: #e69604; font-weight: bold; } \n"
+"#"+POPUP_DL+" .info_row { color: #5c9ebc; font-weight: bold; } \n"
+"#"+POPUP_DL+" .blase { color: #a8cdec; font-weight: bold; } \n"
+"#"+POPUP_DL+" .skip_row { color: #bfbfbf; font-weight: bold; } \n"
+"#"+POPUP_DL+" .ghost { background-color:#000; } \n"
+"#"+POPUP_DL+" pre { padding:0; margin:0; background-color:unset; font-size:11px; font-family:monospace; border-radius:unset; } \n"
+"#"+POPUP_BETA+" { position:fixed; z-index:"+(Z_INDEX+1)+"; left:0; top:0; background-color: #000; width:100%; height:100%; overflow-y: auto; padding: 5px; font-family: monospace; font-size:18px; } \n"
+"."+POPUP_BETA_BTNS+" { cursor:pointer; font-weight: bold; border-radius: 10px; margin-left: 5px; padding: 10px 12px; text-align:center; text-shadow: white 1px 1px 1px; background-color:lightgreen; line-height: 1; float:right; } \n"
+"."+POPUP_BETA_BTNS+":hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+POPUP_BETA+" h1 { margin:10px 0 0; color:lightgreen; line-height:normal; font-family:monospace; font-size:30px; font-weight: normal; text-transform: capitalize; text-shadow: white 1px 1px 3px; } \n"
+"#"+POPUP_BETA+" textarea { width:100%; overflow:hidden; font-size:11px; font-family:monospace; height:95px; padding:0; } \n"
+"@media screen and (max-width: 1023px) {\n"
+".hidden-tablet-mobile { display: none !important; } \n"
+"}\n"
+"@media screen and (min-width: 768px) and (max-width: 1023px) {\n"
+".hidden-tablet { display: none !important; } \n"
+"}\n"
+"@media screen and (max-width: 767px) {\n"
+".hidden-mobile { display: none !important; } \n"
+"#"+LOGGER_HEADER+" .nav-button { position: absolute; top: 5px; left: calc(100% - 55px); } \n"
+"#"+LOGGER_HEADER+" .nav-button.__resize { left: calc(100% - 55px); } \n"
+"#"+LOGGER_HEADER+" .nav-button.__remove { left: calc(100% - 30px); } \n"
+"#"+LOGGER_HEADER+" .nav-lnk { padding-right: 0px; display: inline-block; width: 50%; text-align: left; } \n"
+"#"+LOGGER_HEADER+" .nav-lnk::before { content: \" "+DOM.stripHtml(HEC_RIGHT_ARROW)+" \"; } \n"
+"}\n"
+"@media screen and (max-width: 479px) {\n"
+"}\n";style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=css;}else{style.appendChild(document.createTextNode(css));}
head.appendChild(style);containerDiv=document.createElement("div");containerDiv.id=LOGGER_CONTAINER;containerDiv.setAttribute("data-analytics_available_call","0");tabDiv=document.createElement("div");tabDiv.id=LOGGER_TAB;tabDiv.innerText="Analytics log";tabDiv.onclick=function(){tealium_log.toggle();};headerDiv=document.createElement("div");headerDiv.id=LOGGER_HEADER;if(getUserPermission('clear_storage')){var clearStorage=document.createElement('span');clearStorage.setAttribute("class","nav-lnk");clearStorage.innerText='clear storage';clearStorage.onclick=function(){clearStorage.onclick=function(){};clearStorage.setAttribute("class","nav-lnk active");STORAGE.removeItems('tealium_(?!(log|team|visibility)$)');window.location.reload();};headerDiv.appendChild(clearStorage);}
if(getUserPermission('beta_extension')){var betaMode=document.createElement('span');betaMode.innerText='beta extensions';betaMode.id="betaModeId";betaMode.onclick=function(){tealium_log.popupBeta();};betaMode.setAttribute("class","nav-lnk "+
((STORAGE.getItem("tealium_ext000_utils","")||STORAGE.getItem("tealium_ext000_ui_components","")||STORAGE.getItem("tealium_ext000_global_settings","")||STORAGE.getItem("tealium_ext000_automatic_qa","")||STORAGE.getItem("tealium_ext000_tealium_log","")||STORAGE.getItem("tealium_ext000_automatic_qa_conf","")||STORAGE.getItem("tealium_ext000_utag_components","")||STORAGE.getItem("tealium_ext000_repairer_patch","")||STORAGE.getItem("tealium_ext000_utag_settings","")||STORAGE.getItem("tealium_ext000_customize_clicks","")||STORAGE.getItem("tealium_ext000_listeners","")||STORAGE.getItem("tealium_ext000","")||STORAGE.getItem("tealium_ext100_domready_patch","")||STORAGE.getItem("tealium_ext100","")||STORAGE.getItem("tealium_ext200","")||STORAGE.getItem("tealium_ext300","")||STORAGE.getItem("tealium_ext400",""))?"active":""));headerDiv.appendChild(betaMode);}
if(getUserPermission('preserve_log')){var preserveLog=document.createElement('span');preserveLog.setAttribute("class","nav-lnk "+(STORAGE.getItem('tealium_preserveLog','')=='on'?"active":""));preserveLog.innerText='preserve log';preserveLog.onclick=function(){var a=STORAGE.getItem('tealium_preserveLog','')=='on';if(a)STORAGE.removeItem('tealium_logLastEvent');STORAGE.setItem('tealium_preserveLog',(a?'off':'on'));preserveLog.setAttribute("class","nav-lnk "+(a?"":"active"));};headerDiv.appendChild(preserveLog);}
if(getUserPermission('resize_log')){var resizeLog=document.createElement('div');resizeLog.setAttribute("class","nav-button __resize");resizeLog.onclick=function(){tealium_log.toggle();};var resizeLogText=document.createElement('div');resizeLogText.setAttribute("class","nav-button-text");resizeLogText.innerHTML=HEC_MDASH;resizeLog.appendChild(resizeLogText);headerDiv.appendChild(resizeLog);}
if(getUserPermission('remove_log')){var removeLog=document.createElement('div');removeLog.setAttribute("class","nav-button __remove");removeLog.onclick=function(){tealium_log.destroy();};var removeLogText=document.createElement('div');removeLogText.setAttribute("class","nav-button-text");removeLogText.innerHTML=HEC_X;removeLog.appendChild(removeLogText);headerDiv.appendChild(removeLog);}
{var newLineDivBefore=document.createElement("div");newLineDivBefore.setAttribute("style","clear:both;height:0.5em;border-bottom:1px solid #333;");headerDiv.appendChild(newLineDivBefore);}
logDiv=document.createElement("div");logDiv.id=LOGGER_SECTION;logContent=document.createElement("div");logContent.id=LOGGER_CONTENT;containerDiv.appendChild(tabDiv);logDiv.appendChild(headerDiv);logDiv.appendChild(logContent);containerDiv.appendChild(logDiv);document.body.appendChild(containerDiv);}
if(STORAGE.getItem('tealium_preserveLog','')=='on'&&STORAGE.getItem('tealium_logLastEvent','')){this.events[0]=JSON.parse(STORAGE.getItem('tealium_logLastEvent',''));}
return true;},destroy:function(){clearResources(1,1,1,1,1);containerDiv=__getReference(containerDiv,LOGGER_CONTAINER);if(containerDiv){containerDiv.innerHTML="";}},toggle:function(){if(opened){this.close();}else{this.open();}},open:function(){if(!this.init())return;if(opened)return;STORAGE.setItem('tealium_visibility','on');animateLogger();},close:function(){if(!this.init())return;if(!opened)return;STORAGE.removeItem('tealium_visibility');animateLogger();},clear:function(){if(!this.init())return;logContent=__getReference(logContent,LOGGER_CONTENT);logContent.innerHTML="";},print:function(textTime,html,enabled){if(TC.isNumber(enabled)&&(!enabled))return;if(!containerDiv){var ready=this.init();if(!ready)return;}
logContent=__getReference(logContent,LOGGER_CONTENT);var newLineDivBefore=document.createElement("div");newLineDivBefore.setAttribute("style","clear:both;height:0.5em;border-bottom:1px solid #333;");if(textTime==="NEW_LINE"){logContent.appendChild(newLineDivBefore);}else{var timeDiv=document.createElement("div");timeDiv.setAttribute("style","color:#999;"+
"float:left;"+
"width:6em;"+
"text-align:right;");var timeNode=document.createTextNode(textTime+"\u00a0");timeDiv.appendChild(timeNode);var msgDiv=document.createElement("div");msgDiv.setAttribute("style","word-wrap:break-word;"+
"margin-left:7.0em;");msgDiv.innerHTML=html;var newLineDiv=document.createElement("div");newLineDiv.setAttribute("style","clear:both;");if(html.match(/>Event/)){logContent.appendChild(newLineDivBefore);}
logContent.appendChild(timeDiv);logContent.appendChild(msgDiv);logContent.appendChild(newLineDiv);}
logContent.scrollTop=logContent.scrollHeight;},update:function(){if(!grant())return false;if(!this.init())return false;if(!getUpdateLog())return false;this.clear();this.print(buildDelayString(this.utagjs.timeStart),buildMessageHtml('utagjs'),getUserPermission('utag'));if(getUserPermission('preserve_log')&&STORAGE.getItem('tealium_preserveLog','')=='on'&&STORAGE.getItem('tealium_logLastEvent','')){buildEventDelayString(0);this.print("NEW_LINE");}
this.print(buildDelayString(this.utag_data.timeStart),buildMessageHtml('utag_data'),getUserPermission('utag_data'));this.print(buildDelayString(this.preloader.timeStart),buildMessageHtml('preloader'),getUserPermission('preloader'));this.print(buildDelayString(this.domready.timeStart),buildMessageHtml('domready'),getUserPermission('domready'));for(var i=0;i<=this.events.qnt;i++){if(this.events.hasOwnProperty(i)){if(STORAGE.getItem('tealium_preserveLog','')=='on'&&STORAGE.getItem('tealium_logLastEvent','')&&i==0){}
else buildEventDelayString(i);}}
if(STORAGE.getItem('tealium_preserveLog','')=='on'&&this.events.qnt>0){STORAGE.setItem('tealium_logLastEvent',JSON.stringify(this.events[this.events.qnt]),'forever');}},old:function(e,lev){if(!grant()||(!getUserPermission('console_log')))return false;if(typeof lev=="string"&&lev.match(/log|info|warn|error/)){}else{lev="info";}
console[lev](e);},oldcall:function(oggetto,stringa,tipo){if(!grant()||(!getUserPermission('console_log')))return false;console.error(stringa);},utagjs:{state:'',version:'',versionPrev:STORAGE.getItem('tealium_version',''),timeStart:'',timeEnd:'',notes:'',datalayer:{},set:function(state,datalayer,notes){updateElement('utagjs',state,datalayer,notes);}},utag_data:{state:'',timeStart:'',timeEnd:'',notes:'',datalayer:{},bugs:'',set:function(state,datalayer,notes){updateElement('utag_data',state,datalayer,notes);},},preloader:{state:'',timeStart:'',timeEnd:'',notes:'',datalayer:{},set:function(state,datalayer,notes){updateElement('preloader',state,datalayer,notes);}},domready:{state:'',timeStart:'',timeEnd:'',notes:'',datalayer:{},set:function(state,datalayer,notes){updateElement('domready',state,datalayer,notes);}},events:{qnt:0,set:function(component,state,datalayer,notes){if(!datalayer){datalayer={};}
else if(typeof datalayer==="string"||typeof datalayer==="number"){datalayer=tealium_log.events[datalayer][component].datalayer;}
var index;if(datalayer.Tracking_EventId_Serial){index=datalayer.Tracking_EventId_Serial;if(!this[index])return index;this[index].id=this[index].builder.datalayer.Tracking_EventId||datalayer.Tracking_EventId||this[index].id||'';}else{index=++this.qnt;datalayer.Tracking_EventId_Serial=index;this[index]={id:datalayer.Tracking_EventId||'',state:'',timeStart:Date.now(),timeEnd:'',datalayer:{},listener:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}},data2track:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}},utag_data2track:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}},builder:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}},adobe:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}}};}
updateElement('events.'+index+'.'+component,state,datalayer,notes);return index;},removeFrom:function(start){start=typeof start=="number"&&start>0&&start<this.qnt?start:1;for(var i=start;i<=this.qnt;i++)delete this[i];this.qnt=start-1;}},listener:{set:function(state,datalayer,notes){tealium_log.events.set('listener',state,datalayer,notes);}},data2track:{set:function(state,datalayer,notes){tealium_log.events.set('data2track',state,datalayer,notes);}},utag_data2track:{set:function(state,datalayer,notes){tealium_log.events.set('utag_data2track',state,datalayer,notes);}},builder:{set:function(state,datalayer,notes){tealium_log.events.set('builder',state,datalayer,notes);}},adobe:{set:function(state,datalayer,notes){tealium_log.events.set('adobe',state,datalayer,notes);}},datalayer:{},popupBeta:function(){if(!grant())return false;popupDiv=document.createElement("div");document.body.appendChild(popupDiv);popupDiv.id=POPUP_BETA;popupDiv.setAttribute("data-analytics_available_call","0");var x=document.createElement("div");popupDiv.appendChild(x);x.setAttribute("class",POPUP_BETA_BTNS);x.innerHTML=HEC_X;x.onclick=function(){var _el=document.getElementById(POPUP_BETA);_el.parentNode.removeChild(_el);};var reload=document.createElement("div");popupDiv.appendChild(reload);reload.setAttribute("class",POPUP_BETA_BTNS);reload.innerHTML=HEC_RELOAD;reload.onclick=function(){window.location.reload(true);};var popupBeta_BuildTextarea=function(e,t){var ext=document.createElement("div");popupDiv.appendChild(ext);ext.innerHTML="<h1>"+(t||e)+"</h1>";var input=document.createElement("textarea");ext.appendChild(input);input.onfocus=function(){this.select();};setTimeout(function(input,t){input.innerText=STORAGE.getItem(('tealium_'+e),'');input.addEventListener('input',function(){if(this.value.match(/[^\s]/)){STORAGE.setItem(('tealium_'+e),this.value);document.getElementById('betaModeId').setAttribute("class","nav-lnk active");}
else{STORAGE.removeItem('tealium_'+e);document.getElementById('betaModeId').setAttribute("class","nav-lnk");}},false);},100,input,t);};//@TODO: se AutomaticQA non  caricato allora non ha senso mettere in beta l'estensione modificata!
popupBeta_BuildTextarea('ext000_utils','000 Utils');popupBeta_BuildTextarea('ext000_ui_components','001 UI Components');popupBeta_BuildTextarea('ext000_global_settings','002 Global Settings');popupBeta_BuildTextarea('ext000_automatic_qa','010 Automatic QA');popupBeta_BuildTextarea('ext000_tealium_log','011 Tealium Log');popupBeta_BuildTextarea('ext000_utag_settings','020 Preloader Custom Utag Settings');popupBeta_BuildTextarea('ext000_repairer_patch','021 Preloader Custom Repairer');popupBeta_BuildTextarea('ext000_customize_clicks','022 Preloader Custom Clicks Customized');popupBeta_BuildTextarea('ext000_listeners','023 Preloader Custom Listeners');popupBeta_BuildTextarea('ext100_domready_patch','024 Dom Ready Custom');popupBeta_BuildTextarea('ext000_automatic_qa_conf','030 Automatic QA Configuration');popupBeta_BuildTextarea('ext000_utag_components','050 Utag Core Components');popupBeta_BuildTextarea('ext000','099 Preloader');popupBeta_BuildTextarea('ext100','100 Dom Ready');popupBeta_BuildTextarea('ext200','200 All Tags Before');popupBeta_BuildTextarea('ext300','300 Site Catalyst');popupBeta_BuildTextarea('ext400','400 All Tags After');},popupDatalayer:function(obj,title){if(!grant())return false;popupDiv=document.createElement("div");popupDiv.id=POPUP_DL;popupDiv.setAttribute("data-analytics_available_call","0");var x=document.createElement("div");x.id=POPUP_DL_CLOSE;x.innerHTML=HEC_X;x.onclick=function(){var _el=document.getElementById(POPUP_DL);_el.parentNode.removeChild(_el);};popupDiv.appendChild(x);var content=document.createElement("div");content.id=POPUP_DL_CONTENT;popupDiv.appendChild(content);var temp,index,entry,event_id_serialized;var code="<h1 class='title'> "+title+"</h1>";obj=___.merge({},obj);if(obj.account||obj.visitorNamespace){code+="<table><tbody><tr><th>Account</th><th>Report Suite</th></tr>";code+="<tr><td>"+obj.visitorNamespace+"</td><td>"+obj.account+"</td></tr>";code+="</tbody></table>";if(obj.events){code+="<table><tbody><tr><th colspan='4'>Events</th></tr><tr><th>Id</th><th>Name</th><th>Value</th><th>Serialization</th></tr>";temp=obj.events.split(',');for(index in temp){if(temp.hasOwnProperty(index)){entry=temp[index].split('=');event_id_serialized=entry[0].split(':');code+="<tr><th>"+event_id_serialized[0]+"</th><td>"+(adobeMap[event_id_serialized[0]]?adobeMap[event_id_serialized[0]]:'-')+"</td><td>"+(entry[1]?entry[1]:'-')+"</td><td>"+(event_id_serialized[1]?event_id_serialized[1]:'-')+"</td></tr>";}}
code+="</tbody></table>";}
temp=Object.keys(obj).toString().match(/list[0-9]{1,3}/g);if(temp){code+="<table><tbody><tr><th colspan=3>List</th></tr>";for(index in temp){if(temp.hasOwnProperty(index)){entry=temp[index];code+="<tr><th>"+entry+"</th><td>"+(adobeMap[entry]?adobeMap[entry]:'-')+"</td><td>"+(obj[entry]?obj[entry]:'-')+"</td></tr>";}}
code+="</tbody></table>";}
if(obj.products){code+="<table><tbody><tr><th>Category</th><th>Product ID</th><th>Units</th><th>Revenue</th><th>Events</th><th>eVars</th></tr>";temp=obj.products.split(',');for(index in temp){if(temp.hasOwnProperty(index)){code+="<tr>";var temp2=temp[index].split(';');for(var index2 in temp2){if(temp2.hasOwnProperty(index2))code+="<td>"+temp2[index2]+"</td>";}
code+="</tr>";}}
code+="</tbody></table>";}}
else if(obj.Page_Brand||obj.Page_Country||obj.Page_Platform||obj.Page_DeviceType||obj.Page_Type||obj.Page_Design||obj.Order_Currency||obj.User_LoginStatus||obj.User_Email_MD5||obj.Products){code+="<table><tbody><tr><th>Page_Brand</th><th>Page_Platform</th><th>Page_DeviceType</th><th>Page_Country</th><th>Page_Language</th></tr>";code+="<tr><td>"+obj.Page_Brand+"</td><td>"+obj.Page_Platform+"</td><td>"+obj.Page_DeviceType+"</td><td>"+obj.Page_Country+"</td><td>"+obj.Page_Language+"</td></tr>";code+="</tbody></table>";code+="<table><tbody><tr><th>Page_Section1</th><th>Page_Section2</th><th>Page_Type</th><th>Page_Design</th><th>Order_Currency</th><th></th><th>User_LoginStatus</th><th>User_Email_MD5</th>";code+="<tr><td>"+obj.Page_Section1+"</td><td>"+obj.Page_Section2+"</td><td>"+obj.Page_Type+"</td><td>"+obj.Page_Design+"</td><td>"+obj.Order_Currency+"</td><td></td><td>"+obj.User_LoginStatus+"</td><td>"+obj.User_Email_MD5+"</td></tr>";code+="</tbody></table>";if(obj.Products){code+="<table><tbody><tr><th colspan='7'>PRODUCTS</th></tr><tr><th>ID</th><th>Category</th><th>Units</th><th>Price</th><th>PriceFull</th><th>Status</th><th>Engraving</th></tr>";for(index in obj.Products){if(obj.Products.hasOwnProperty(index)){temp=obj.Products[index];code+="<tr><td>"+index+"</td><td>"+temp.Category+"</td><td>"+temp.Units+"</td><td>"+temp.Price+"</td><td>"+temp.PriceFull+"</td><td>"+temp.Status+"</td><td>"+temp.Engraving+"</td></tr>";}}
code+="</tbody></table>";}}
var table_filters=[];var filters_map_sw={'cp':'Cookie','_c':'E-comm','js_':'JSPAGE','meta.':'META','dom.':'iQ','tealium_':'iQ','ut.':'iQ','va.':'Other','ip':'Other','adobe_':'Not Used',};var filters_map_eq={};['page_type','Consent_Type','Consent_US_New','Storage_Tealium_Log','Storage_Tealium_Team','Error_Datalayer','Error_DatalayerObject','Error_QA','Error_Tealium','Events_Array','Result_QA','Tracking_EventId','Tracking_EventId_Clean','Tracking_EventIdLog','Tracking_EventSerial_Ids','Tracking_EventId_Serial','Tracking_EventType','Tracking_Pusher'].forEach(function(k){filters_map_eq[k]='T_builtIn';});var filters_map_eq_click={};['b','b2','d','d0','d2','tt'].forEach(function(k){filters_map_eq_click[k]='TEALIUM';});var obj_sorted=tealium_objSort(obj,'ascending','key');if(obj_sorted.error<0){this.old('###TEALIUM LOG### : Try to sorting object on popupDatalayer and it receives an exception with error '+obj_sorted.error);obj_sorted.result=obj;}
var filters=Object.keys(filters_map_sw);var comparison;var obj_filtered=tealium_objFilters(obj_sorted.result,filters);if(obj_filtered.error==0){if(___.length(obj_filtered.result.filters)>0){table_filters.push(obj_filtered.result.filters);}
filters=Object.keys(filters_map_eq);comparison='equalTo';var obj_tmp=obj_filtered.result.nofilters;obj_filtered=tealium_objFilters(obj_filtered.result.nofilters,filters,comparison);if(obj_filtered.error==0){if(___.length(obj_filtered.result.filters)>0){table_filters.unshift(obj_filtered.result.filters);}
filters=Object.keys(filters_map_eq_click);comparison='equalTo';obj_tmp=obj_filtered.result.nofilters;obj_filtered=tealium_objFilters(obj_filtered.result.nofilters,filters,comparison);if(obj_filtered.error==0){if(___.length(obj_filtered.result.filters)>0){table_filters.unshift(obj_filtered.result.filters);}
filters=[''];comparison='startWithUpperCase';obj_tmp=obj_filtered.result.nofilters;obj_filtered=tealium_objFilters(obj_filtered.result.nofilters,filters,comparison);if(obj_filtered.error==0){var __except_vars=["id","data_element_id","data_description","data-analytics_available_call"];for(var __i=0;__i<__except_vars.length;__i++){if(obj.hasOwnProperty(__except_vars[__i])){delete obj_filtered.result.nofilters[__except_vars[__i]];obj_filtered.result.filters[__except_vars[__i]]=obj[__except_vars[__i]];}}
if(___.length(obj_filtered.result.filters)>0){table_filters.unshift(obj_filtered.result.filters);}
if(___.length(obj_filtered.result.nofilters)>0){table_filters.push(obj_filtered.result.nofilters);}}else{this.old('###TEALIUM LOG### : Try to filter object by startWithUppercase on popupDatalayer and it receives an exception with error '+obj_filtered.error);table_filters.push(obj_tmp);}}else{this.old('###TEALIUM LOG### : Try to filter object by equalTo (click fields) on popupDatalayer and it receives an exception with error '+obj_filtered.error);table_filters.push(obj_tmp);}}else{this.old('###TEALIUM LOG### : Try to filter object by equalTo (tealium built-in fields) on popupDatalayer and it receives an exception with error '+obj_filtered.error);table_filters.push(obj_tmp);}}else{this.old('###TEALIUM LOG### : Try to filter object by startWith (tealium internal fields) on popupDatalayer and it receives an exception with error '+obj_filtered.error);table_filters.push(obj);}
if(obj.account||obj.visitorNamespace)table_filters=table_filters.reverse();var e,i,fm,fname,fname_col,fe,fd;for(i=0;i<table_filters.length;i++){if(obj.Result_QA&&i==0){code+="<table><thead><tr><th colspan=\"4\" style=\"text-align: center; font-size: 20px;\">TEALIUM DATA LAYER PROPERTIES QA</th></tr></thead>"
+"<colgroup><col style=\"width: 10%;\"><col style=\"width: 30%;\"><col style=\"width: 30%;\"><col style=\"width: 30%;\"></colgroup>"
+"<tbody>"+getStatusResultQA(obj)+"<tr><th>Priority</th><th>Name</th><th>Value</th><th>QA</th></tr>";addMissingPropsOnDatalayer(table_filters[i],obj.Result_QA.result);}
else{code+="<table><colgroup><col><col style=\"width: 50%;\"><col style=\"width: 50%;\"></colgroup><tbody>";}
for(e in table_filters[i]){if(table_filters[i].hasOwnProperty(e)){if(obj.account||obj.visitorNamespace){fe=JSON.stringify(table_filters[i][e],undefined,2);fname=e.replace(/^adobe_/,"");code+="<tr><th>"+fname+"</th><td>"+(adobeMap[e]?adobeMap[e]:'-')+"</td><td><pre>"+fe+"</pre></td></tr>";}else{if(obj.Result_QA&&i==0){code+=getResultQARows(obj,e,table_filters[i][e]);}
else{fname='';fname_col='';for(fm in filters_map_sw){if(filters_map_sw.hasOwnProperty(fm)&&tealium_comparisonFiltering.startWith(e,fm)){fname=filters_map_sw[fm];break;}}
if(fname==''){fname=filters_map_eq[e]||filters_map_eq_click[e]||'';}
if(fname==''){if(tealium_comparisonFiltering.startWithUpperCase(e)||e.match(/^(id|data_element_id|data_description|data-analytics_available_call)$/)){fname='DATALAYER';}else{fname='TEALIUM_OLD';}}
fname_col="<th>"+fname+"</th>";fd=clickLabelMap[e]?clickLabelMap[e]:e;fe=(e.match(/Result_QA/i))?'{...}':JSON.stringify(table_filters[i][e],undefined,2);code+="<tr>"+fname_col+"<th style=\"background: none\">"+fd+"</th><td><pre>"+fe+"</pre></td></tr>";}}}}
code+="</tbody></table>";}
content.innerHTML=code;document.body.appendChild(popupDiv);},};return self;})();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.tealium_log="23-09-03";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_utag_settings")&&!window.tealium_ext000_utag_settings__WeAreInBeta){window.tealium_ext000_utag_settings__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_utag_settings"));}
else try{window.tealium_utag_settings=(function(){{var settings={Brand:'OPSM',MultiBrand:'Y',ProfileGroup:'ecommerce',Page_CountryThirdPlatforms:'',Page_CountryEcommerce_YN:'Y',Order_ProductsTaxRate:'',Order_TaxIncluded:'',Tags__Abort:0,Tags_AdobeAnalytics_RSID:'',Tags_AdobeAnalytics_RSID_Alternative:'',Tags_AdobeAnalytics_Server:'',Tags_AdobeAnalytics_ServerSecure:'',Tealium_SinglePageApp:'',};}
return{apply:function(prop,o){switch(prop){case'Tags_AdobeAnalytics_RSID_Alternative':{return(!o||!o.Page_CountryEcommerce_YN)?'':(o.Page_CountryEcommerce_YN=='Y'?'luxopsmprodglobal':'');}
case'Tags_AdobeAnalytics_Server':{return(!o||!o.Page_Country||typeof o.Page_Country!=='string')?'':o.Page_Country.match(/^NZ$/)?'smetrics.opsm.co.nz':'smetrics.opsm.com.au';}
case'Tags_AdobeAnalytics_ServerSecure':{return(!o||!o.Page_Country||typeof o.Page_Country!=='string')?'':o.Page_Country.match(/^NZ$/)?'smetrics.opsm.co.nz':'smetrics.opsm.com.au';}
case'Tags__Abort':{return(''+o.Tracking_EventId).match(/^PageView:default$/i)&&(''+o.Page_Type).match(/Pdp/i)?1:0;}
default:{return settings[prop];}}}};})();}
catch(e){console.error("### tealium_utag_settings is not built! => caused by: "+e);}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.utag_settings="23-09-01";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_repairer_patch")&&!window.tealium_ext000_repairer_patch__WeAreInBeta){window.tealium_ext000_repairer_patch__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_repairer_patch"));}
else try{window.tealium_repairer_patches=(function(){{}
return{apply:function(o,sendBug,sendBugOldProp){}};})();}
catch(e){console.error("### tealium_repairer_patches is not built! => caused by: "+e);}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.repairer_patch="21-06-01";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_customize_clicks")&&!window.tealium_ext000_customize_clicks__WeAreInBeta){window.tealium_ext000_customize_clicks__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_customize_clicks"));}
else try{window.tealium_customize_clicks=(function(){{}
return{apply:function(){},};})();}
catch(e){console.error("### tealium_customize_clicks is not built! => caused by: "+e);}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.customize_clicks="21-05-05";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_listeners")&&!window.tealium_ext000_listeners__WeAreInBeta){window.tealium_ext000_listeners__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_listeners"));}
else try{window.tealium_listeners=(function(){{}
return{apply:function(){},};})();}
catch(e){console.error("### tealium_listeners is not built! => caused by: "+e);}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.listeners="21-05-05";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext100_domready_patch")&&!window.tealium_ext100_domready_patch_WeAreInBeta){window.tealium_ext100_domready_patch_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext100_domready_patch"));}
else try{window.tealium_domready_patches=(function(){{}
return{apply:function(){}};})();}
catch(e){console.error("### tealium_domready_patches is not built! => caused by: "+e);}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.domready_patch="21-06-01";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};window.utag_cfg_ovrd.consentPeriod=390;window.utag_data=window.utag_data||{};window.utag_data.Page_Language=window.utag_data.Page_Language||window.location.pathname.split("/")[1].split("-")[0];window.utag_data.language=window.utag_data.Page_Language;window.utag_data.Page_Country=window.utag_data.Page_Country||window.location.pathname.split("/")[1].split("-")[1];if(window.utag_data.Page_Country.match(/US/i)){if(window.utag_data.Page_Language.match(/es/i)){window.utag_data.language="es-us";}else{window.utag_data.language="en-us";}}
else if(window.utag_data.Page_Language.match(/fr/i)){window.utag_data.language="fr-fr";}
else if(window.utag_data.Page_Language.match(/nl/i)){window.utag_data.language="nl-nl";}
else if(window.utag_data.Page_Language.match(/it/i)){window.utag_data.language="it-it";}
else if(window.utag_data.Page_Country.match(/br/i)){window.utag_data.language="pt-br";}
window.utag_data.Consent_Type='';if(window.utag_data.Page_Country.match(/ROE|EU|AT|BE|CZ|DK|EE|FI|FR|DE|GR|HU|IE|IT|LV|LT|LU|MT|NL|NO|PL|PT|RU|SK|ES|SE|CH|TR|GB|UA|BG|CY|LI|MEA/i))window.utag_data.Consent_Type='GDPR';window.utag_cfg_ovrd.gdprDLRef="language";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{function getRootDomain(){var a=""+window.location.hostname;var b=a.split(".");var c=/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\./.test(a)?3:2;var d=b.splice(b.length-c,c).join(".");return d;}
if(utag_data.Page_Country.match(/US/i)){var tealCookieVal=[];var consentVal;if(navigator.globalPrivacyControl===true){consentVal="consent:false";tealCookieVal.push("ts:"+new Date().getTime());tealCookieVal.push(consentVal);var tealiumCookieExpireData=new Date();tealiumCookieExpireData.setDate(tealiumCookieExpireData.getDate()+90);document.cookie="CONSENTMGR="+tealCookieVal.join("|")+";domain="+getRootDomain()+";path=/; expires="+tealiumCookieExpireData.toGMTString()+";";}}}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_automatic_qa_conf")&&!window.tealium_ext000_automatic_qa_conf__WeAreInBeta){window.tealium_ext000_automatic_qa_conf__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_automatic_qa_conf"));}
else{var AutoQAConfiguration=function(){try{var MLOG=__Utils__.MessageLogging;var TC=__Utils__.TypeChecking;var REB=__Utils__.RegExpBuilder;var DOM=__Utils__.DOMHelper;var ___=__Utils__.Common;var ArrayList=__Utils__.ArrayList;var CFGD=AutoQAService.ConfigDefaultTable;var CGST=AutoQAService.ConfigGlobalStaticTable;var CPST=AutoQAService.ConfigPropertyStaticTable;var CHT=AutoQAService.ConfigSuggTable;var CDPLT=AutoQAService.ConfigDatalayerPropertyListTable;var CDCT=AutoQAService.ConfigDatalayerContextTable;var CRT=AutoQAService.ConfigRestrictTable;var CDT=AutoQAService.ConfigDatalayerTable;var COT=AutoQAService.ConfigOverrideTable;var CPRET=AutoQAService.ConfigPreProcessRulesTable;var CPOST=AutoQAService.ConfigPostProcessRulesTable;var CET=AutoQAService.ConfigErrorTable;var CQAP=AutoQAService.ConfigQAProperty;{CFGD.setDatalayerDynamicProp('UPC');}
var DEPTH_SEP=CFGD.getDatalayerDepthSeparator();var DEP_SEP=CFGD.getDatalayerDependencySeparator();var DYNAMIC_PROP=CFGD.getDatalayerDynamicProp();var PROD_INDEX='Products'+DEPTH_SEP+DYNAMIC_PROP;var PROFILE_BRAND=UtagSettings.get('Brand');var PROFILE_GROUP=UtagSettings.get('ProfileGroup');var PROFILE_NAME=UtagSettings.get('ProfileName');var PROFILE_IS_ECOMMERCE_MULTI_BRAND=PROFILE_GROUP=='ecommerce'&&UtagSettings.get('MultiBrand')=='Y'?true:false;var PROFILE_RB='ray-ban';var PROFILE_OO='oakley';var PROFILE_SSR='smartshopper2';var PROFILE_SSW='smartshopperwhs';var PROFILE_MYL='myluxottica2021';var PROFILE_S360='smartly';var CONF_INTERFACE={setDatalayerGlobalStaticValues:function(){},setDatalayerPropertyListTable:function(){},getDatalayerRestriction:function(){},setDatalayerSuggestionTable:function(){},setDatalayerStaticAcceptedValues:function(){},setDatalayerContextTable:function(){},setDatalayerTable:function(){},setOverrideDatalayerTable:function(){},setPreProcessingRules:function(){},setPostProcessingRules:function(){},};var CONF_ENTITIES=[];{CONF_ENTITIES.push(function RequiredTrackingFunctionality(){var __cname='AutoQAConfiguration.RequiredTrackingFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);var __PAGE_VIEW_IDS=['VirtualPage-View','Loading-Ready','X-X-X-Loading-Ready'];try{__datalayer.add(['id','Page_Type'
]);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerGlobalStaticValues=function(){CGST.setInfo('ONES',['1']);CGST.setInfo('BINARY',['0','1']);CGST.setInfo('BINARY_ZERO_OPTIONAL',['','0','1']);CGST.setInfo('BINARY_ANSWER',['Y','N']);CGST.setInfo('BINARY_SWITCH',['On','Off']);};__export.setDatalayerStaticAcceptedValues=function(){CPST.setInfo('id',['Event','Impression'].concat(__PAGE_VIEW_IDS));CPST.setInfo('Page_Type',[]);};__export.setDatalayerContextTable=function(){CDCT.setContextOnPage('Page_Type');CDCT.setContextOnEvent('id');CDCT.setEventsToUseAsPageContext(__PAGE_VIEW_IDS);};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();[pageContext,eventContext].forEach(function(context_name){CDT.setContextPriorityMap(context_name,context_name,1,'ALL');});var propList=CDPLT.getAllProps('list').filter(function(p){if(/^Events_/g.test(p))return true;});if(propList.length>0){CDT.setAcceptedValues(propList,'BINARY');CDT.setContextPriorityMap(propList,pageContext,2,'ALL');CDT.setContextPriorityMap(propList,eventContext,2,'ALL');}};__export.setOverrideDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();COT.setInfo(eventContext,pageContext,CPST.getInfo(pageContext),{priority:1,acceptedValues:CDCT.getEventsToUseAsPageContext(),contextName:pageContext});COT.setAcceptedValues(pageContext,eventContext,(CPST.getInfo(eventContext).filter(function(value){if(!CDCT.isEventWithPageContext(value))return value;})),REB.isAll());};__export.setPreProcessingRules=function(){{CPRET.addRule({name:'DomNodeOrElement_format_skip',skip:true,rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){return format=='object'&&(TC.isDomNode(value)||TC.isDomElement(value))&&CDCT.isDomNodeOrElementList(prop)?true:false;},});CPRET.addRule({name:'DomNodeOrElement_format_error',skip:false,suggestions:'Value matches Dom Node or Element',rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){return format=='object'&&(TC.isDomNode(value)||TC.isDomElement(value))&&(!CDCT.isDomNodeOrElementList(prop))?false:true;},});CPRET.addRule({name:'Object_format_error',skip:false,suggestions:'',rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){if(format=='object'&&(!(TC.isDomNode(value)||TC.isDomElement(value)))&&(!CDCT.isDomNodeOrElementList(prop))){try{JSON.stringify(value);return true;}catch(e){this.suggestions=e.message;return false;}}
return true;},});CPRET.addRule({name:'String_htmlentity_error',skip:false,suggestions:'Value matches with html entities (<&...;> or <&#...;>)',rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){return format=='string'&&REB.matchHtmlEntity(value)?false:true;},});}
CPRET.addRule({name:'id_undefined/empty/pagecontext_skip',skip:true,rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){return prop=='id'&&(TC.isUndefined(value)||TC.isEmptyString(value)||CDCT.isEventToUseAsPageContext(value))&&context_name==CDCT.getContextOnPage()?true:false;},});CPRET.addRule({name:'Events_undefined_notP1_skip',skip:true,rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){return/^Events_/g.test(prop)&&priority!=1&&TC.isUndefined(value)?true:false;},});CPRET.addRule({name:'ComponentIdRelease_undefined_notP1_skip',skip:true,rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){return/^[A-Za-z]{2,2}_Release$/g.test(prop)&&priority!=1&&TC.isUndefined(value)?true:false;},});};__export.setPostProcessingRules=function(){CPOST.addRule({key:'id',dkeylist:(CDPLT.getAllProps('list').filter(function(p){if(/^Events_/g.test(p))return true;})),rule:function(keyValue,dkeyListValues){if(keyValue!=='Event')return true;for(var p in dkeyListValues)if(dkeyListValues.hasOwnProperty(p)&&/^Events_/g.test(p)&&dkeyListValues[p]==='1')return true;return false;},suggestions:'this tracking call with id \'Event\' should have atleast one variable starts with \'Events_\' set to \'1\'',name:'id_Event_error_Events_empty',});};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},RequiredTrackingFunctionality.prototype));}());CONF_ENTITIES.push(function ClickTrackingFunctionality(){var __cname='AutoQAConfiguration.ClickTrackingFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Click_FocusElement','Tracking_Type','data_element_id','data_description','data_analytics_available_call']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');CDPLT.setInfo(['Click_FocusElement'],'object');};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('id',['Click']);}
{CPST.setInfo('Tracking_Type',['','link','hiddenaction','configurator']);}};__export.setDatalayerContextTable=function(){CDCT.setDomNodeOrElementList(['Click_FocusElement']);};__export.setDatalayerTable=function(){var eventContext=CDCT.getContextOnEvent();{CDT.setContextPriorityMap('Click_FocusElement',eventContext,1,['Click']);CDT.setAcceptedValues('Click_FocusElement',REB.isObj(2));}
{CDT.setContextPriorityMap('Tracking_Type',eventContext,1,['Click']);}
{CDT.setContextPriorityMap('data_element_id',eventContext,1,['Click']);CDT.setAcceptedValues('data_element_id',REB.isAlphaNumeric({nospaces:'yes',exceptions:['|']}));}
{CDT.setContextPriorityMap('data_description',eventContext,2,['Click']);CDT.setAcceptedValues('data_description',REB.isAlphaNumeric({nospaces:'yes',exceptions:['|']}));}
{CDT.setContextPriorityMap('data_analytics_available_call',eventContext,2,['Click']);CDT.setAcceptedValues('data_analytics_available_call',REB.isNumeric({zero:'yes'}));}};__export.setPostProcessingRules=function(){CPOST.addRule({key:'Click_FocusElement',dkeylist:['id','data_element_id','data_description','data_analytics_available_call'],rule:function(keyValue,dkeyListValues){if(dkeyListValues.id!='Click')return false;if(TC.isUndefined(keyValue)&&((!TC.isEmptyString(dkeyListValues.data_element_id))||(!TC.isEmptyString(dkeyListValues.data_description))||(!TC.isEmptyString(dkeyListValues.data_analytics_available_call))))return true;return false;},success:true,name:'Click_FocusElement_value_success',});//@TODO: decidere se applicare queste regole perch il framework modifica l'input originale delle variabili, trasformandole nel caso pessimo in una stringa vuota
};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},ClickTrackingFunctionality.prototype));}());CONF_ENTITIES.push(function ErrorTrackingFunctionality(){var __cname='AutoQAConfiguration.ErrorTrackingFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Events_Error','Error_Source','Error_Code','Error_Details','Error_Message']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('id',['Error']);CPST.setInfo('Page_Type',['Error']);}
CPST.setInfo('Error_Source',['User','Server','404','Client','Product','Anomaly']);};__export.setDatalayerTable=function(){var eventContext=CDCT.getContextOnEvent();{CDT.setContextPriorityMap(['Error_Source','Error_Code','Error_Details'],eventContext,1,['Error']);CDT.setContextPriorityMap(['Error_Message'],eventContext,2,['Error']);}
{CDT.setAcceptedValues('Events_Error','ONES');}
{CDT.setAcceptedValues(['Error_Code','Error_Details','Error_Message'],REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}};__export.setOverrideDatalayerTable=function(){COT.setPriority(['Error_Source','Error_Code','Error_Details'],'Events_Error',['1'],1);COT.setPriority(['Error_Message'],'Events_Error',['1'],2);};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},ErrorTrackingFunctionality.prototype));}());CONF_ENTITIES.push(function BasicTrackingFunctionality(){var __cname='AutoQAConfiguration.BasicTrackingFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);var __PAYMENT_TYPES=['Affirm','Visa','Amex','MasterCard','Diners','Elo','AliPay','CC','Cash-On-Delivery','Sofort','Ideal','POS','GiftCard','PayPal','ApplePay','Hypercard','Boleto','Discover','AfterPay','Klarna','PayU','JCB','SGHCard','Venmo','Catch','ClickUp','Bancontact','Mutuelle'];var __PAYMENT_TYPES_STANDARD_CHECKOUT=(function(){var standardCheckoutPayments=new ArrayList('string',true,true);standardCheckoutPayments.setData(__PAYMENT_TYPES);standardCheckoutPayments.remove(['GiftCard']);standardCheckoutPayments.addPrefix('GiftCard,');standardCheckoutPayments.add(__PAYMENT_TYPES);return standardCheckoutPayments.getData();})();var __PAYMENT_TYPES_EXPRESS_CHECKOUT=(function(){var expressCheckoutPayments=new ArrayList('string',true,true);expressCheckoutPayments.setData(__PAYMENT_TYPES);expressCheckoutPayments.remove(['GiftCard']);expressCheckoutPayments.addSuffix('ExpressCheckout');return expressCheckoutPayments.getData();})();var __ALL_PAYMENT_TYPES=__PAYMENT_TYPES_STANDARD_CHECKOUT.concat(__PAYMENT_TYPES_EXPRESS_CHECKOUT);try{__datalayer.add(['Page_Country','Page_Language','Page_Platform','Order_Currency','Page_DeviceType','Page_Type','Page_Section1','Page_Section2','Page_Design','Page_Server','Order_CartId','Order_CartUrl','Page_Creativities','Page_Brand','Store_Segment','Store_Brand','Store_Custom','Store_Chain','Page_PlatformRelease','Session_Status','Session_Id','Store_Id','Events_CartAdd','Events_ProdFavAdd','Events_CartRemove','Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Status',PROD_INDEX+DEPTH_SEP+'OosOptions',PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'FrameType',PROD_INDEX+DEPTH_SEP+'LensType',PROD_INDEX+DEPTH_SEP+'LensUPC',PROD_INDEX+DEPTH_SEP+'Engraving',PROD_INDEX+DEPTH_SEP+'Price',PROD_INDEX+DEPTH_SEP+'PriceFull',PROD_INDEX+DEPTH_SEP+'Units',PROD_INDEX+DEPTH_SEP+'TaxRate',PROD_INDEX+DEPTH_SEP+'Sku',PROD_INDEX+DEPTH_SEP+'ModelName',PROD_INDEX+DEPTH_SEP+'Shape',PROD_INDEX+DEPTH_SEP+'FrameTechnology',PROD_INDEX+DEPTH_SEP+'LensTechnology',PROD_INDEX+DEPTH_SEP+'Brand',PROD_INDEX+DEPTH_SEP+'Warranty',PROD_INDEX+DEPTH_SEP+'ShippingTo',PROD_INDEX+DEPTH_SEP+'Preorder',PROD_INDEX+DEPTH_SEP+'Visibility',PROD_INDEX+DEPTH_SEP+'CancelledUnits',PROD_INDEX+DEPTH_SEP+'CancelledAmount',PROD_INDEX+DEPTH_SEP+'Return_Reason',PROD_INDEX+DEPTH_SEP+'Image',PROD_INDEX+DEPTH_SEP+'Url','Order_QuotId','Order_Id','Order_DiscountCode','Order_DiscountName','Order_DiscountAmount','Order_Subtotal','Order_Total','Order_ProductsAmount','Order_ShippingAmount','Order_ShippingDiscount','Order_ShippingTaxRate','Order_TaxAmount','Order_ShippingType','Order_ShippingMode','Order_ShippingSameDay','Order_ShippingDeliveryDate','Order_State','Order_ZipCode','Order_PaymentType','Order_PaymentInstallments','Order_Type','Events_GiftCardTentative','Events_GiftCardApplied','Order_GiftCardCode','Order_SubscriptionFrequency','Events_OrderCancel','Order_CancellationId','Events_ReturnCreate','Return_Reasons','Return_Cost','Return_Type','Content_Answers','Event_Source',]);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');CDPLT.setInfo(['Products'],{format:'object',acceptedProps:0});CDPLT.setInfo([PROD_INDEX],'object');};__export.getDatalayerRestriction=function(){var datalayerRestriction=new ArrayList('string',true,true);{datalayerRestriction.add(['Page_Country','Page_Language','Page_Platform','Order_Currency','Page_DeviceType','Page_Type','Page_Section1','Page_Section2','Page_Design']);if(PROFILE_GROUP=='ecommerce')datalayerRestriction.add(['Page_Server','Order_CartId','Order_CartUrl']);if(PROFILE_GROUP=='retail'){if(PROFILE_NAME==PROFILE_SSW||PROFILE_NAME==PROFILE_SSR)datalayerRestriction.add(['Store_Brand','Store_Custom','Page_PlatformRelease','Session_Status','Session_Id']);if(PROFILE_NAME==PROFILE_SSW)datalayerRestriction.add(['Store_Chain']);if(PROFILE_NAME==PROFILE_SSR)datalayerRestriction.add(['Page_Brand','Store_Segment']);if(PROFILE_NAME==PROFILE_MYL)datalayerRestriction.add(['Page_Creativities']);}
if(PROFILE_GROUP=='retail'||PROFILE_NAME==PROFILE_S360)datalayerRestriction.add(['Store_Id']);}
{if(PROFILE_GROUP=='ecommerce'||PROFILE_GROUP=='retail'){datalayerRestriction.add(['Events_CartAdd','Events_ProdFavAdd','Events_CartRemove','Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Status',PROD_INDEX+DEPTH_SEP+'OosOptions',PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'FrameType',PROD_INDEX+DEPTH_SEP+'LensType',PROD_INDEX+DEPTH_SEP+'LensUPC',PROD_INDEX+DEPTH_SEP+'Engraving',PROD_INDEX+DEPTH_SEP+'Price',PROD_INDEX+DEPTH_SEP+'PriceFull',PROD_INDEX+DEPTH_SEP+'Units',PROD_INDEX+DEPTH_SEP+'TaxRate']);if(PROFILE_NAME==PROFILE_MYL||PROFILE_NAME==PROFILE_RB)datalayerRestriction.add([PROD_INDEX+DEPTH_SEP+'Preorder']);if(PROFILE_NAME==PROFILE_MYL)datalayerRestriction.add([PROD_INDEX+DEPTH_SEP+'ShippingTo']);if(PROFILE_NAME==PROFILE_RB)datalayerRestriction.add([PROD_INDEX+DEPTH_SEP+'Visibility']);}
if(PROFILE_GROUP=='ecommerce'){datalayerRestriction.add([PROD_INDEX+DEPTH_SEP+'Sku',PROD_INDEX+DEPTH_SEP+'ModelName',PROD_INDEX+DEPTH_SEP+'Shape',PROD_INDEX+DEPTH_SEP+'FrameTechnology',PROD_INDEX+DEPTH_SEP+'LensTechnology',PROD_INDEX+DEPTH_SEP+'Warranty',PROD_INDEX+DEPTH_SEP+'CancelledUnits',PROD_INDEX+DEPTH_SEP+'CancelledAmount',PROD_INDEX+DEPTH_SEP+'Return_Reason',PROD_INDEX+DEPTH_SEP+'Image',PROD_INDEX+DEPTH_SEP+'Url']);if(PROFILE_IS_ECOMMERCE_MULTI_BRAND)datalayerRestriction.add([PROD_INDEX+DEPTH_SEP+'Brand']);}}
{if(PROFILE_GROUP=='ecommerce'||PROFILE_GROUP=='retail')datalayerRestriction.add(['Order_Id','Order_Subtotal','Order_Total','Order_ProductsAmount','Order_ShippingAmount','Order_ShippingDiscount','Order_ShippingTaxRate','Order_TaxAmount','Order_ShippingType','Order_ShippingMode','Order_ShippingSameDay','Order_ShippingDeliveryDate','Order_State','Order_ZipCode','Order_PaymentType']);if(PROFILE_GROUP=='ecommerce')datalayerRestriction.add(['Order_QuotId','Order_DiscountCode','Order_DiscountName','Order_DiscountAmount','Order_PaymentInstallments','Order_Type','Events_GiftCardTentative','Events_GiftCardApplied','Order_GiftCardCode','Order_SubscriptionFrequency','Events_OrderCancel','Order_CancellationId','Events_ReturnCreate','Return_Reasons','Return_Cost','Return_Type']);}
{if(PROFILE_GROUP=='ecommerce')datalayerRestriction.add(['Content_Answers']);}
datalayerRestriction.add(['Event_Source']);return datalayerRestriction.getData();};__export.setDatalayerGlobalStaticValues=function(){CGST.setInfo('COUNTRIES_3L',['INT','LAT','MEA','ROE']);CGST.setInfo('LOGIN_REGISTER_PAGE_SECTIONS',['Checkout']);CGST.setInfo('STATIC_PAGE_SECTIONS',['Other','GetSupport']);CGST.setInfo('DATALAYER_PRODUCTS_NO_CUSTOM',['Sku','ModelName','Shape','FrameTechnology','LensTechnology']);CGST.setInfo('DATALAYER_URL_ONLY',['Order_CartUrl',PROD_INDEX+DEPTH_SEP+'Image',PROD_INDEX+DEPTH_SEP+'Url']);};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('id',['QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','Overlay-View','Prods-Update','AddToCart','ProdFavAdd','Prods-Delete','EmailMeWhenAvailable','Checkout-Step-Login','Checkout-Step-Delivery','Checkout-Step-Payment','OrderDiscountCode-Applied','OrderDiscountCode-Tentative','OrderGiftCard-Applied','OrderGiftCard-Tentative',]);CPST.setInfo('Page_Type',['Home','Clv','Clp','Landing','Static','Quoto','Plp','EPlp','CPlp','Pdp','PClp','QuickView','Comparator','CartPage','Login&Register','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor',//@TODO: 'Doctor' should be moved out
]);{CPST.setInfo('Page_Brand',['RB','OO','SGH','LC','SV','TO','OPSM','PV','DC','OC','AL','SO','FE','LP','GV']);CPST.setInfo('Page_DeviceType',(PROFILE_NAME==PROFILE_SSW||PROFILE_NAME==PROFILE_SSR)?['iPAD','WALL43']:['M','D','T','X']);CPST.setInfo('Page_Platform',['WCS','Hybris','AMP','DMP','Fluid','IC','EC-CUBE','Sales Center','SS20','SSW','HCL','Yext','TAB','DITAC','CMS','Moodle']);}}
CPST.setInfo('Products',null);CPST.setInfo(PROD_INDEX,null);CPST.setInfo(PROD_INDEX+DEPTH_SEP+'Status',['Available','Coming soon','Out-of-stock','SoldOut','Not-for-sale','Available-oneLeft','Available-twoLeft','Available-fewLeft']);CPST.setInfo(PROD_INDEX+DEPTH_SEP+'Category',['ACCESSORIES','OPTICS','SUN','AFA','EYEWEAR','Electronics'].concat((PROFILE_GROUP=='ecommerce')?['GIFTCARD','CONTACT LENSES']:(PROFILE_NAME==PROFILE_MYL)?['SPARE PARTS']:[]));CPST.setInfo(PROD_INDEX+DEPTH_SEP+'FrameType',[]);CPST.setInfo(PROD_INDEX+DEPTH_SEP+'LensType',['PLANO']);CPST.setInfo(PROD_INDEX+DEPTH_SEP+'OosOptions',[]);CPST.setInfo(PROD_INDEX+DEPTH_SEP+'Visibility',['Public','Private','Semiprivate']);CPST.setInfo('Order_ShippingType',['Home','Store']);CPST.setInfo('Order_ShippingMode',(PROFILE_NAME==PROFILE_SSW||PROFILE_NAME==PROFILE_SSR)?['Ship-to-store:Green','Delivery-at-home:Green','Ship-to-store:Express','Delivery-at-home:Express','Ship-to-store:Standard','Delivery-at-home:Standard']:['Standard','Express','Economic','Scheduled','Pick-up-point','Standard - Shoprunner','Express - Shoprunner','Ground','Click&Collect','Second Business Day','USPS Only','Military','Same Day Delivery','Next Business Day','EGift','Green']);CPST.setInfo('Order_ShippingSameDay',['available']);CPST.setInfo('Order_PaymentType',__ALL_PAYMENT_TYPES);CPST.setInfo('Order_Type',['','Standard','Preorder'].concat(PROFILE_NAME==PROFILE_OO?['SI-official','SI-non-official']:[]));CPST.setInfo('Return_Type',['refund','exchange']);};__export.setDatalayerContextTable=function(){CDCT.setEventsToUseAsPageContext('Prods-Update');CDCT.setEntryToEventsMapWithPageContext('Checkout-Step-Login','Login&Register');CDCT.setEntryToEventsMapWithPageContext('Checkout-Step-Delivery','Delivery');CDCT.setEntryToEventsMapWithPageContext('Checkout-Step-Payment','Payment');};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{CDT.setContextPriorityMap('Page_Country',pageContext,1,'ALL');CDT.setAcceptedValues('Page_Country',REB.isValueOf([REB.toStringAndClean(REB.isAlpha(2,2,'uppercase'))].concat(CGST.getInfo('COUNTRIES_3L')),1));}
{CDT.setContextPriorityMap('Page_Language',pageContext,1,'ALL');CDT.setAcceptedValues('Page_Language',REB.isAlpha(2,2,'uppercase'));}
{CDT.setContextPriorityMap('Page_Platform',pageContext,1,'ALL');}
{CDT.setContextPriorityMap('Order_Currency',pageContext,1,'ALL');CDT.setAcceptedValues('Order_Currency',REB.isAlpha(3,3,'uppercase'));}
{CDT.setContextPriorityMap('Page_DeviceType',pageContext,1,'ALL');}
{CDT.setContextPriorityMap('Page_Section1',pageContext,1,'ALL');CDT.setAcceptedValues('Page_Section1',REB.isAlphaNumeric({nospaces:'yes',required:'yes',exceptions:[':'],multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Page_Section2',pageContext,1,['Clv','Clp','Plp','EPlp','CPlp','Pdp','PClp','QuickView','Landing','Comparator','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor','Static','Quoto','Error']);CDT.setContextPriorityMap('Page_Section2',eventContext,1,['Checkout-Step-Login','Checkout-Step-Delivery','Checkout-Step-Payment','Overlay-View','Impression']);CDT.setAcceptedValues('Page_Section2',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Page_Design',pageContext,1,['Shipping']);CDT.setContextPriorityMap('Page_Design',pageContext,2,['Clv','Clp','Plp','EPlp','CPlp','Pdp','PClp','QuickView']);}
{CDT.setContextPriorityMap('Page_Server',pageContext,1,'ALL');CDT.setAcceptedValues('Page_Server',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Order_CartId',pageContext,2,'ALL');CDT.setContextPriorityMap('Order_CartId',pageContext,1,['CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setAcceptedValues('Order_CartId',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Order_CartUrl',pageContext,2,'ALL');CDT.setContextPriorityMap('Order_CartUrl',eventContext,2,['Checkout-Step-Login','Checkout-Step-Delivery','Checkout-Step-Payment']);CDT.setAcceptedValues('Order_CartUrl',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Page_Creativities',pageContext,1,'ALL');CDT.setAcceptedValues('Page_Creativities',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',sep:',',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Page_Brand',pageContext,1,'ALL');}
{CDT.setContextPriorityMap('Store_Segment',pageContext,1,'ALL');CDT.setAcceptedValues('Store_Segment',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep:',',sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Store_Brand',pageContext,1,'ALL');CDT.setAcceptedValues('Store_Brand',REB.isValueOf(['null','ALL',REB.toStringAndClean(REB.isAlpha(2,2,'uppercase'))],1));}
{CDT.setContextPriorityMap('Store_Custom',pageContext,1,'ALL');CDT.setAcceptedValues('Store_Custom',REB.isValueOf(['null',REB.toStringAndClean(REB.isSeparatedBy(REB.isValueOf(CGST.getInfo('CUSTOM_CONFIGURATOR_LIST'),1),',',1,1))],1));}
{CDT.setContextPriorityMap('Store_Chain',pageContext,1,'ALL');CDT.setAcceptedValues('Store_Chain',REB.isAlphaNumeric({nospaces:'yes',required:'yes'}));}
{CDT.setContextPriorityMap('Page_PlatformRelease',pageContext,1,'ALL');CDT.setAcceptedValues('Page_PlatformRelease',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Session_Status',pageContext,1,'ALL');CDT.setAcceptedValues(['Session_Status'],'BINARY_SWITCH');}
{CDT.setContextPriorityMap('Session_Id',pageContext,1,'ALL');CDT.setAcceptedValues('Session_Id',REB.isAlphaNumeric({nospaces:'yes',required:'yes'}));}
{CDT.setContextPriorityMap('Store_Id',pageContext,1,'ALL');{if(PROFILE_NAME==PROFILE_MYL||PROFILE_NAME==PROFILE_SSW){CDT.setAcceptedValues('Store_Id',REB.isNumeric({zero:'yes',required:'yes'}));CDT.setSuggestions('Store_Id','Specify the client code as agree for the store id. It should be a positive integer (Zero included).');}
else if(PROFILE_NAME==PROFILE_SSR){CDT.setAcceptedValues('Store_Id',REB.isGlobalStoreId(1));CDT.setSuggestions('Store_Id','Specify the global id related to the current store of the platform. Format: [sap code]-[store id]');}
else CDT.setAcceptedValues('Store_Id',REB.isAlphaNumeric({nospaces:'yes',required:'yes'}));}}}
{{CDT.setAcceptedValues(['Events_CartAdd','Events_ProdFavAdd','Events_CartRemove'],'ONES');}
['Products',PROD_INDEX].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,1,['Pdp','QuickView','PClp','Plp','EPlp','CPlp','Comparator','CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setContextPriorityMap(p,eventContext,1,['AddToCart','ProdFavAdd','Prods-Delete','EmailMeWhenAvailable','QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open']);CDT.setAcceptedValues(p,REB.isObj(1));});{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Status',pageContext,1,['Pdp','QuickView','PClp','Plp','EPlp','CPlp','CartPage']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Status',eventContext,1,['AddToCart','QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'OosOptions',pageContext,1,['Plp','EPlp','CPlp','Pdp','QuickView','PClp']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'OosOptions',eventContext,1,['QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Category',pageContext,1,['Pdp','QuickView','PClp','Plp','EPlp','CPlp','Comparator','CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Category',eventContext,1,['AddToCart','ProdFavAdd','Prods-Delete','QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','EmailMeWhenAvailable']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'LensType',pageContext,1,['PClp','Plp','EPlp','CPlp','Pdp','QuickView','CartPage','Delivery','Payment','OrderSummary','Thankyou','Doctor','Shipping']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'LensType',eventContext,1,['QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','AddToCart','ProdFavAdd','Prods-Delete','EmailMeWhenAvailable']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'LensUPC',pageContext,1,['CartPage','Delivery','Payment','OrderSummary','Thankyou','Doctor','Shipping']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'LensUPC',eventContext,1,['QuickViewOverlay-LoadingReady','MiniCartOverlay-Open','AddToCart','Prods-Delete']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'LensUPC',REB.isAlphaNumeric({nospaces:'yes',exceptions:[';',',']}));}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Engraving',pageContext,2,['Plp','EPlp','CPlp','Pdp','QuickView','PClp','CartPage','Delivery','Payment','OrderSummary','Thankyou','Doctor','Shipping']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Engraving',eventContext,2,['QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','AddToCart','ProdFavAdd']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'Engraving',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',sep:',',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Price',pageContext,1,['Plp','EPlp','CPlp','Pdp','QuickView','PClp','CartPage','Delivery','Payment','OrderSummary','Thankyou','Doctor','Shipping']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Price',eventContext,1,['QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','AddToCart','ProdFavAdd']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'Price',REB.isNumeric({required:'yes',decimals:{}}));}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'PriceFull',pageContext,1,['Plp','EPlp','CPlp','Pdp','QuickView','PClp','CartPage','Delivery','Payment','OrderSummary','Thankyou','Doctor','Shipping']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'PriceFull',eventContext,1,['QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','AddToCart','ProdFavAdd']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'PriceFull',REB.isNumeric({required:'yes',decimals:{}}));}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Units',pageContext,1,['CartPage','Delivery','Payment','OrderSummary','Thankyou','Doctor','Shipping']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Units',eventContext,1,['AddToCart']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'Units',REB.isNumeric({required:'yes'}));}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'TaxRate',pageContext,1,['Payment','OrderSummary','Thankyou','Doctor']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'TaxRate',REB.isNumeric({zero:'yes',decimals:{}}));}
CGST.getInfo('DATALAYER_PRODUCTS_NO_CUSTOM').forEach(function(p){CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+p,pageContext,2,(p=='Sku'?['Plp','EPlp','CPlp']:[]).concat(['Pdp','QuickView','PClp','CartPage','Delivery','Payment','OrderSummary','Thankyou','Doctor','Shipping']));CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+p,eventContext,2,['QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','AddToCart','ProdFavAdd']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+p,REB.isAlphaNumeric({nospaces:'yes',exceptions:[';',','],multiples:{type:'item',item:{sep_end:'yes'}}}));});{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Brand',pageContext,1,['Thankyou']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Brand',pageContext,2,['Pdp','QuickView','PClp','CartPage','Delivery','Shipping','Payment','OrderSummary','Doctor']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Brand',eventContext,2,['QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','AddToCart','ProdFavAdd']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'Brand',REB.isAlphaNumeric({nospaces:'yes',required:'yes',exceptions:[';',','],multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Warranty',pageContext,2,['CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'Warranty',REB.isNumeric({zero:'yes',required:'yes',decimals:{}}));}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'ShippingTo',pageContext,1,['Payment','OrderSummary','Thankyou']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'ShippingTo',REB.isNumeric({zero:'yes',required:'yes'}));}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Preorder',pageContext,2,['Plp','EPlp','CPlp','Pdp','QuickView','PClp','CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Preorder',eventContext,2,['QuickViewOverlay-LoadingReady']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'Preorder','BINARY');}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Visibility',pageContext,2,['Plp','EPlp','CPlp','Pdp','QuickView','PClp','CartPage']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Visibility',eventContext,2,['QuickViewOverlay-LoadingReady']);}
{CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'CancelledUnits',REB.isNumeric({required:'yes'}));}
{CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'CancelledAmount',REB.isNumeric({zero:'yes',decimals:{}}));}
{CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'Return_Reason',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
['Image','Url'].forEach(function(p){CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+p,pageContext,2,['Pdp','QuickView','PClp','CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+p,eventContext,2,['AddToCart','QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+p,REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));});}
{{CDT.setContextPriorityMap('Order_QuotId',pageContext,1,['Delivery','Shipping','Payment','OrderSummary','Thankyou']);CDT.setAcceptedValues('Order_QuotId',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Order_Id',pageContext,1,['Thankyou']);CDT.setAcceptedValues('Order_Id',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Order_DiscountCode',pageContext,1,['Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setContextPriorityMap('Order_DiscountCode',eventContext,1,['OrderDiscountCode-Applied','OrderDiscountCode-Tentative']);CDT.setAcceptedValues('Order_DiscountCode',REB.isAlphaNumeric({multiples:{type:'item',sep:',',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Order_DiscountName',pageContext,2,['CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setContextPriorityMap('Order_DiscountName',eventContext,2,['OrderDiscountCode-Applied','OrderDiscountCode-Tentative']);CDT.setAcceptedValues('Order_DiscountName',REB.isAlphaNumeric({multiples:{type:'item',sep:',',item:{sep_end:'yes'}}}));}
{CDT.setAcceptedValues('Order_DiscountAmount',REB.isNumeric({sign:'negative',zero:'yes',required:'yes',decimals:{}}));}
['Order_Subtotal','Order_Total','Order_ProductsAmount'].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,1,['CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setContextPriorityMap(p,eventContext,1,['Checkout-Step-Login','Checkout-Step-Delivery','Checkout-Step-Payment']);CDT.setAcceptedValues(p,REB.isNumeric({zero:'yes',required:'yes',decimals:{}}));});['Order_ShippingAmount','Order_ShippingDiscount','Order_ShippingTaxRate'].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,1,['Thankyou']);CDT.setContextPriorityMap(p,pageContext,2,['Payment','OrderSummary','Doctor']);if(p=='Order_ShippingDiscount')CDT.setAcceptedValues('Order_ShippingDiscount',REB.isNumeric({sign:'negative',zero:'yes',required:'yes',decimals:{}}));else CDT.setAcceptedValues(p,REB.isNumeric({zero:'yes',required:'yes',decimals:{}}));});{CDT.setContextPriorityMap('Order_TaxAmount',pageContext,1,['Thankyou']);CDT.setContextPriorityMap('Order_TaxAmount',pageContext,2,['Payment','OrderSummary','Doctor']);CDT.setAcceptedValues('Order_TaxAmount',REB.isNumeric({zero:'yes',required:'yes',decimals:{}}));}
{CDT.setContextPriorityMap('Order_ShippingType',pageContext,1,['Shipping','Payment','OrderSummary','Thankyou','Doctor']);}
{CDT.setContextPriorityMap('Order_ShippingMode',pageContext,1,['Payment','OrderSummary','Thankyou','Doctor']);}
{CDT.setContextPriorityMap('Order_ShippingSameDay',pageContext,2,['Shipping']);}
{CDT.setContextPriorityMap('Order_ShippingDeliveryDate',pageContext,2,['Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setAcceptedValues('Order_ShippingDeliveryDate',REB.isDateFormat(0));}
{CDT.setContextPriorityMap('Order_State',pageContext,2,['Payment','OrderSummary','Thankyou','Doctor']);CDT.setAcceptedValues('Order_State',REB.isAlpha(2,2,'uppercase'));}
{CDT.setContextPriorityMap('Order_ZipCode',pageContext,2,['Payment','OrderSummary','Thankyou','Doctor']);CDT.setAcceptedValues('Order_ZipCode',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Order_PaymentType',pageContext,1,['OrderSummary','Thankyou']);}
{CDT.setContextPriorityMap('Order_PaymentInstallments',pageContext,1,['OrderSummary','Thankyou']);CDT.setAcceptedValues('Order_PaymentInstallments',REB.isNumeric());}
{CDT.setContextPriorityMap('Order_Type',pageContext,1,['Thankyou']);}
{CDT.setAcceptedValues(['Events_GiftCardTentative','Events_GiftCardApplied'],'ONES');}
{CDT.setContextPriorityMap('Order_GiftCardCode',pageContext,2,['Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setContextPriorityMap('Order_GiftCardCode',eventContext,2,['OrderGiftCard-Applied','OrderGiftCard-Tentative']);CDT.setAcceptedValues('Order_GiftCardCode',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',sep:',',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Order_SubscriptionFrequency',pageContext,2,['Thankyou']);CDT.setAcceptedValues('Order_SubscriptionFrequency',REB.isNumeric({zero:'yes'}));}
{CDT.setAcceptedValues('Events_OrderCancel','ONES');}
{CDT.setAcceptedValues('Order_CancellationId',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setAcceptedValues('Events_ReturnCreate','ONES');}
{CDT.setAcceptedValues('Return_Reasons',REB.isAlphaNumeric({multiples:{type:'item',sep:',',item:{sep_end:'yes'}}}));CDT.setAcceptedValues('Return_Cost',REB.isNumeric({zero:'yes',decimals:{}}));}}
{{CDT.setAcceptedValues('Content_Answers',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',sep:'|'}}));}}
{{CDT.setAcceptedValues('Event_Source',REB.isAlphaNumeric({required:'yes',exceptions:['|']}));}}
{CDT.setContextPriorityMap(['Events_Error','Error_Source','Error_Code','Error_Message'],eventContext,1,['OrderDiscountCode-Tentative','OrderGiftCard-Tentative']);}};__export.setOverrideDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{COT.setPriority(['Page_Section2','Order_CartId','Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'LensType',PROD_INDEX+DEPTH_SEP+'LensUPC',PROD_INDEX+DEPTH_SEP+'Engraving',PROD_INDEX+DEPTH_SEP+'Price',PROD_INDEX+DEPTH_SEP+'PriceFull',PROD_INDEX+DEPTH_SEP+'Units',PROD_INDEX+DEPTH_SEP+'Brand',PROD_INDEX+DEPTH_SEP+'Warranty',PROD_INDEX+DEPTH_SEP+'Preorder',PROD_INDEX+DEPTH_SEP+'Image',PROD_INDEX+DEPTH_SEP+'Url','Order_QuotId','Order_DiscountCode','Order_DiscountName','Order_Subtotal','Order_Total','Order_ProductsAmount','Order_ShippingDeliveryDate','Order_GiftCardCode',].concat(CGST.getInfo('DATALAYER_PRODUCTS_NO_CUSTOM').map(function(p){return PROD_INDEX+DEPTH_SEP+p;})),'Page_Type'+DEP_SEP+'Page_Section1',[['Login&Register'],['Checkout']],1);{COT.setPriority(['Page_Section2'],'Page_Type'+DEP_SEP+'Page_Section1',[['Static'],['Other']],1);COT.setPriority(['Page_Section2'],'Page_Type'+DEP_SEP+'Page_Section1',[['Comparator'],['Comparator']],1);COT.setPriority(['Page_Section2'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['CartPage'],['CartPage'],['Quoto']],1);COT.setPriority(['Page_Section2'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Quoto'],['Other'],['Quoto']],1);COT.setPriority(['Page_Design'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Design',[['CartPage'],['CartPage'],['Empty']],1);COT.setPriority(['Order_CartId','Order_CartUrl'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Design',[['CartPage'],['CartPage'],['Empty']],-1);}
{COT.setPriority(['Products',PROD_INDEX],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Design',[['CartPage'],['CartPage'],['Empty']],-1);COT.setPriority([PROD_INDEX+DEPTH_SEP+'Visibility'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['CartPage'],['CartPage'],['Quoto']],-1);COT.setPriority(['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Status',PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'LensType',PROD_INDEX+DEPTH_SEP+'Price',PROD_INDEX+DEPTH_SEP+'PriceFull',PROD_INDEX+DEPTH_SEP+'Units',],'Events_CartAdd',['1'],1);COT.setPriority(CGST.getInfo('DATALAYER_PRODUCTS_NO_CUSTOM').map(function(p){return PROD_INDEX+DEPTH_SEP+p;}).concat([PROD_INDEX+DEPTH_SEP+'Engraving',PROD_INDEX+DEPTH_SEP+'Brand',PROD_INDEX+DEPTH_SEP+'Image',PROD_INDEX+DEPTH_SEP+'Url',]),'Events_CartAdd',['1'],2);COT.setPriority(['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'LensType',PROD_INDEX+DEPTH_SEP+'Price',PROD_INDEX+DEPTH_SEP+'PriceFull'],'Events_ProdFavAdd',['1'],1);COT.setPriority(CGST.getInfo('DATALAYER_PRODUCTS_NO_CUSTOM').map(function(p){return PROD_INDEX+DEPTH_SEP+p;}).concat([PROD_INDEX+DEPTH_SEP+'Engraving',PROD_INDEX+DEPTH_SEP+'Brand',]),'Events_ProdFavAdd',['1'],2);COT.setPriority(['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'LensType',],'Events_CartRemove',['1'],1);COT.setPriority(['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'CancelledUnits',PROD_INDEX+DEPTH_SEP+'CancelledAmount'],'Events_OrderCancel',['1'],1);COT.setPriority(['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'CancelledUnits',PROD_INDEX+DEPTH_SEP+'CancelledAmount',PROD_INDEX+DEPTH_SEP+'Return_Reason'],'Events_ReturnCreate',['1'],1);}
{COT.setPriority(['Order_QuotId'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['CartPage'],['CartPage'],['Quoto']],1);COT.setPriority(['Order_GiftCardCode','Events_Error'],'Events_GiftCardTentative',['1'],1);COT.setPriority(['Order_GiftCardCode'],'Events_GiftCardApplied',['1'],1);COT.setPriority(['Order_DiscountName','Order_DiscountAmount','Order_Subtotal','Order_Total','Order_ProductsAmount'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Design',[['CartPage'],['CartPage'],['Empty']],-1);{COT.setPriority(['Order_DiscountAmount'],'Page_Type'+DEP_SEP+'Order_DiscountCode',[['CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor'],[CDT.getAcceptedValues('Order_DiscountCode')]],1);COT.setPriority(['Order_DiscountAmount'],'Page_Type'+DEP_SEP+'Order_DiscountCode',[['Checkout-Step-Login','Checkout-Step-Delivery','Checkout-Step-Payment'],[CDT.getAcceptedValues('Order_DiscountCode')]],1);}
COT.setPriority(['Order_CancellationId'],'Events_OrderCancel',['1'],1);COT.setPriority(['Return_Reasons','Return_Cost','Return_Type'],'Events_ReturnCreate',['1'],1);}
{COT.setPriority(['Content_Answers'],'id'+DEP_SEP+'Page_Section2',[['Impression'],['WowQuiz:Results']],1);}
{COT.setPriority(['Error_Source','Error_Code'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Error'],['Other'],['ErrorHttp404','ErrorHttp500']],1);COT.setPriority(['Error_Details'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Error'],['Other'],['ErrorHttp404']],1);}}
{{{COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Home','Comparator','CartPage'],CDT.getGlobalAcceptedValues('OWN'));COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Clv','Clp','Plp','EPlp','CPlp','Pdp','QuickView','PClp','Pcp'],REB.isAlphaNumeric({nospaces:'yes',required:'yes',exceptions:[':']}));COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor'],['Checkout']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Login&Register'],CGST.getInfo('LOGIN_REGISTER_PAGE_SECTIONS'));COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Landing'],REB.isAlphaNumeric({nospaces:'yes',required:'yes',exceptions:[':']}));COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Static'],CGST.getInfo('STATIC_PAGE_SECTIONS'));COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Error','Quoto'],['Other']);if(PROFILE_NAME==PROFILE_SSW||PROFILE_NAME==PROFILE_SSR){COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Home','Landing'],['Landings']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Pdp'],['Catalog']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Plp'],['Catalog','FrameAdv']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['CartPage'],['Checkout']);}}
{COT.setAcceptedValues(['Page_Section2'],'id',['Impression'],REB.isAlphaNumeric({nospaces:'yes',required:'yes'}));COT.setAcceptedValues(['Page_Section2'],'Page_Type',['CartPage'],['','Quoto']);COT.setAcceptedValues(['Page_Section2'],'Page_Type',['Delivery','Doctor','Payment','Shipping'],['Standard','Reorder','Quoto']);COT.setAcceptedValues(['Page_Section2'],'Page_Type',['OrderSummary','Thankyou'],['Standard','Reorder','Express','Quoto']);COT.setAcceptedValues(['Page_Section2'],'Page_Type',['Static'],REB.isAlphaNumeric({nospaces:'yes',required:'yes',exceptions:[':']}));COT.setAcceptedValues(['Page_Section2'],'Page_Type',['Quoto'],['Quoto']);COT.setAcceptedValues(['Page_Section2'],'Page_Type',['Error'],['','ErrorHttp404','ErrorHttp500']);}
{COT.setAcceptedValues(['Page_Design'],'Page_Type',['Clp'],['','Collection']);COT.setAcceptedValues(['Page_Design'],'Page_Type',['Plp'],['','Editorial']);COT.setAcceptedValues(['Page_Design'],'Page_Type',['Pdp'],['','Premium']);COT.setAcceptedValues(['Page_Design'],'Page_Type',['CartPage'],['Empty']);}}
{COT.setAcceptedValues([PROD_INDEX+DEPTH_SEP+'Status'],PROD_INDEX+DEPTH_SEP+'Preorder',['1'],['Available','Out-of-stock','SoldOut']);COT.setAcceptedValues([PROD_INDEX+DEPTH_SEP+'OosOptions'],PROD_INDEX+DEPTH_SEP+'Status',['Coming soon','Out-of-stock'],['EmailMeWhenAvailable','CustomizeIt','FindStore','SearchSimilar']);COT.setAcceptedValues([PROD_INDEX+DEPTH_SEP+'OosOptions'],PROD_INDEX+DEPTH_SEP+'Status',['SoldOut','Not-for-sale'],['SearchSimilar']);}
{COT.setAcceptedValues(['Order_PaymentType'],'Page_Section1'+DEP_SEP+'Page_Section2',[['Checkout'],['Standard']],__PAYMENT_TYPES_STANDARD_CHECKOUT);COT.setAcceptedValues(['Order_PaymentType'],'Page_Section1'+DEP_SEP+'Page_Section2',[['Checkout'],['Express']],__PAYMENT_TYPES_EXPRESS_CHECKOUT);}}};__export.setPreProcessingRules=function(){{CPRET.addRule({name:'Products_format_error',skip:false,suggestions:'',rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){if(prop=='Products'&&TC.isPureObject(value)){for(var upc in value){if(value.hasOwnProperty(upc)){if(!TC.isPureObject(value[upc])||TC.isEmptyObject(value[upc]))return false;for(var p in value[upc]){if(value[upc].hasOwnProperty(p)){if((!TC.isUndefined(value[upc][p]))&&(!TC.isString(value[upc][p])))return false;}}}}}
return true;},});CPRET.addRule({name:'Products_UPCs_values_error',skip:false,suggestions:'Object contains at least an UPC set with empty string or with invalid characters!',rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){if(prop=='Products'&&TC.isPureObject(value)){for(var upc in value){if(value.hasOwnProperty(upc)){if(TC.isEmptyString(upc))return false;if(!REB.isAllExcept(1,1,['\'','\"'],1).test(''+upc))return false;}}}
return true;},});CPRET.addRule({name:'UPC_value_error',skip:false,suggestions:'Digits between quotes. UPC: index/property of this object + eventual deduplication suffix #. E.g. "805289126577"',rule:function(prop,value,format,priority,context_name,context_value,parents,keyValue){var parent=parents.pop();if(parent=='Products'&&prop==DYNAMIC_PROP){if(TC.isEmptyString(keyValue))return false;if(!REB.isAllExcept(1,1,['\'','\"'],1).test(''+keyValue))return false;}
return true;},});}};__export.setPostProcessingRules=function(){{CPOST.addRule({key:'Products',dkeylist:['Page_Type'],rule:function(keyValue,dkeyListValues){return/^Plp$/gi.test(''+dkeyListValues.Page_Type)&&TC.isPureObject(keyValue)&&(Object.getOwnPropertyNames(keyValue).length<3)?false:true;},suggestions:'Products quantity error! Please to set at least 3 products in PLP.',name:'Products_quantity_error_PLP',});CGST.getInfo('DATALAYER_PRODUCTS_NO_CUSTOM').forEach(function(p){CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+p,dkeylist:[PROD_INDEX+DEPTH_SEP+'FrameType'],rule:function(keyValue,dkeyListValues){if(!TC.isUndefined(dkeyListValues[PROD_INDEX+DEPTH_SEP+'FrameType'])){if(!(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue)))return false;}
return true;},suggestions:'Variable is requested only for NO Custom Products.',name:'NO_CP_'+PROD_INDEX+DEPTH_SEP+p+'_value_error',});});CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+'LensUPC',dkeylist:[PROD_INDEX+DEPTH_SEP+'LensType'],rule:function(keyValue,dkeyListValues){if(TC.isUndefined(dkeyListValues[PROD_INDEX+DEPTH_SEP+'LensType']))return true;if(dkeyListValues[PROD_INDEX+DEPTH_SEP+'LensType']=='PLANO'){if(!(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue)))return false;}
return true;},suggestions:'Variable is not requested for Products without RX lenses.',name:PROD_INDEX+DEPTH_SEP+'LensUPC'+'_value_error_PLANO_LensType',});CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+'LensUPC',dkeylist:[PROD_INDEX+DEPTH_SEP+'LensType'],rule:function(keyValue,dkeyListValues){return(dkeyListValues[PROD_INDEX+DEPTH_SEP+'LensType']==='PLANO'&&(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue)))?true:false;},success:true,name:PROD_INDEX+DEPTH_SEP+'LensUPC'+'_value_success_PLANO_LensType',});CGST.getInfo('DATALAYER_URL_ONLY').forEach(function(p){CPOST.addRule({key:p,dkeylist:[],rule:function(keyValue,dkeyListValues){return(!TC.isUndefined(keyValue)&&(!TC.isEmptyString(keyValue))&&(!DOM.isValidURL(keyValue))?false:true);},suggestions:'The URL is not valid! Please to provide the correct URI format.',name:'URL_ONLY_'+p+'_value_error',});});CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+'PriceFull',dkeylist:[PROD_INDEX+DEPTH_SEP+'Price'],rule:function(keyValue,dkeyListValues){if(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue))return true;if(TC.isUndefined(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price'])||TC.isEmptyString(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price']))return true;return parseFloat(keyValue)<parseFloat(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price'])?false:true;},suggestions:'PriceFull must be always MAJOR THAN or EQUALS TO Price.',name:'PriceFull_value_error_Price',});CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+'Warranty',dkeylist:[PROD_INDEX+DEPTH_SEP+'Price'],rule:function(keyValue,dkeyListValues){if(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue))return true;if(TC.isUndefined(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price'])||TC.isEmptyString(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price']))return true;return parseFloat(keyValue)>=parseFloat(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price'])?false:true;},suggestions:'Warranty must be always LESS THAN Price.',name:'Warranty_value_error_Price',});CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+'Return_Reason',dkeylist:['Return_Reasons'],rule:function(keyValue,dkeyListValues){if(!(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue)))return true;return TC.isUndefined(dkeyListValues.Return_Reasons)||TC.isEmptyString(dkeyListValues.Return_Reasons)?true:false;},suggestions:'Both Order and Product level variable have been set for the Return reasons. Please to take priority on Product level only... otherwise on Order level only',name:PROD_INDEX+DEPTH_SEP+'ReturnReason_value_error_ReturnReasons_available',});}
{{CPOST.addRule({key:'Order_DiscountAmount',dkeylist:['Order_DiscountCode'],rule:function(keyValue,dkeyListValues){if(TC.isUndefined(dkeyListValues.Order_DiscountCode)||TC.isEmptyString(dkeyListValues.Order_DiscountCode))return true;return(!(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue)))&&(Math.abs(parseFloat(keyValue))==0)?false:true;},suggestions:'if the variable Order_DiscountCode is not empty then the variable Order_DiscountAmount can\'t be 0',name:'OrderDiscountAmount_value_error_OrderDiscountCode',});CPOST.addRule({key:'Order_DiscountAmount',dkeylist:['Order_ProductsAmount'],rule:function(keyValue,dkeyListValues){if(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue))return true;if(TC.isUndefined(dkeyListValues.Order_ProductsAmount)||TC.isEmptyString(dkeyListValues.Order_ProductsAmount))return true;return Math.abs(parseFloat(keyValue))>parseFloat(dkeyListValues.Order_ProductsAmount)?false:true;},suggestions:'|Order_DiscountAmount| must be always LESS THAN or EQUAL TO Order_ProductsAmount. Note: we are considering the module or the positive value of Order_DiscountAmount for the condition provided!',name:'OrderDiscountAmount_value_error_OrderProductsAmount',});}
CPOST.addRule({key:'Order_ShippingDiscount',dkeylist:['Order_ShippingAmount'],rule:function(keyValue,dkeyListValues){if(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue))return true;if(TC.isUndefined(dkeyListValues.Order_ShippingAmount)||TC.isEmptyString(dkeyListValues.Order_ShippingAmount))return true;return Math.abs(parseFloat(keyValue))>parseFloat(dkeyListValues.Order_ShippingAmount)?false:true;},suggestions:'|Order_ShippingDiscount| must be always LESS THAN or EQUALS TO Order_ShippingAmount. Note: we are considering the module or the positive value of Order_ShippingDiscount for the condition provided!',name:'OrderShippingDiscount_value_error_OrderShippingAmount',});}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},BasicTrackingFunctionality.prototype));}());CONF_ENTITIES.push(function UserTrackingFunctionality(){var __cname='AutoQAConfiguration.UserTrackingFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Events_UserLogin','Events_UserAccountNew','Events_UserEmailSub','Events_UserEmailUnsub','Events_UserPhoneSub','Events_ProdViewEcomOosEmailClick','Events_ActionContactUs','Events_OrderReminderSave','Events_SavePrescriptionCL','Events_SavePrescriptionEyewear','User_LoginStatus','User_LoginType','User_Email_MD5','User_Email_SHA256','User_Phone_MD5','User_Phone_SHA256','User_Country','User_Id','User_Segments','User_HasPrescription','User_LoyaltyCard','User_Nation']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.getDatalayerRestriction=function(){var datalayerRestriction=new ArrayList('string',true,true);datalayerRestriction.add(['Events_UserEmailSub','Events_UserEmailUnsub','Events_UserPhoneSub','Events_ActionContactUs']);if(PROFILE_GROUP=='retail')datalayerRestriction.add(['User_Nation']);if(PROFILE_GROUP=='ecommerce')datalayerRestriction.add(['User_LoginStatus','User_LoginType','User_Email_MD5','User_Email_SHA256','User_Phone_MD5','User_Phone_SHA256','User_Country','User_Id','User_Segments','User_HasPrescription','User_LoyaltyCard','Events_UserLogin','Events_UserAccountNew','Events_ProdViewEcomOosEmailClick','Events_OrderReminderSave','Events_SavePrescriptionCL','Events_SavePrescriptionEyewear',]);return datalayerRestriction.getData();};__export.setDatalayerGlobalStaticValues=function(){CGST.setInfo('LOGIN_REGISTER_PAGE_SECTIONS',(CGST.getInfo('LOGIN_REGISTER_PAGE_SECTIONS')||[]).concat(['Account']));CGST.setInfo('STATIC_PAGE_SECTIONS',(CGST.getInfo('STATIC_PAGE_SECTIONS')||[]).concat(['Account']));};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('id',['SignupForm','Unsubscribe','Account-Create','Login','ContactUs','OrderCancSubmitted','OrderReturnSubmitted']);CPST.setInfo('Page_Type',['Login&Register','UserLogin','UserRegister','UserSummary','OrderCanc','CreateReturn','ReasonReturn','SelectCarrier','ReturnSummary','CartReturn','OrderReturn','CreateExchange','ReasonExchange','ItemsExchange','SummaryExchange','OrderChange','Profile','GiftCardBalance','History','Subscriptions','FidelityCard','LoyaltyProgram','Wishlist','NewslForm','UserNewsl',]);}
CPST.setInfo('User_LoginStatus',['Logged','Guest']);CPST.setInfo('User_LoginType',['Standard','Facebook','Google']);};__export.setDatalayerContextTable=function(){CDCT.setEntryToEventsMapWithPageContext('SignupForm','UserNewsl');CDCT.setEntryToEventsMapWithPageContext('Account-Create','UserRegister');CDCT.setEntryToEventsMapWithPageContext('Login','UserLogin');CDCT.setEntryToEventsMapWithPageContext('OrderCancSubmitted','OrderCanc');CDCT.setEntryToEventsMapWithPageContext('OrderReturnSubmitted','OrderReturn');};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{['Products',PROD_INDEX].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,1,['OrderCanc','CartReturn','OrderReturn']);CDT.setContextPriorityMap(p,eventContext,1,['OrderCancSubmitted','OrderReturnSubmitted']);});{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Category',eventContext,1,['OrderCancSubmitted','OrderReturnSubmitted']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Category',pageContext,2,['OrderCanc','CartReturn','OrderReturn']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'CancelledUnits',pageContext,1,['OrderCanc','OrderReturn']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'CancelledUnits',eventContext,1,['OrderCancSubmitted','OrderReturnSubmitted']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'CancelledAmount',pageContext,1,['OrderCanc','OrderReturn']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'CancelledAmount',eventContext,1,['OrderCancSubmitted','OrderReturnSubmitted']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Return_Reason',pageContext,1,['CartReturn','OrderReturn']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Return_Reason',eventContext,1,['OrderReturnSubmitted']);}}
{{CDT.setContextPriorityMap('Events_OrderCancel',pageContext,1,['OrderCanc']);}
{CDT.setContextPriorityMap('Order_CancellationId',pageContext,1,['OrderCanc','OrderReturn']);CDT.setContextPriorityMap('Order_CancellationId',eventContext,1,['OrderCancSubmitted','OrderReturnSubmitted']);}
{CDT.setContextPriorityMap('Events_ReturnCreate',pageContext,1,['OrderReturn']);}
{['Return_Reasons','Return_Cost','Return_Type'].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,1,['CartReturn','OrderReturn']);CDT.setContextPriorityMap(p,eventContext,1,['OrderReturnSubmitted']);});}}
{['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Status',PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'LensType',PROD_INDEX+DEPTH_SEP+'Price',PROD_INDEX+DEPTH_SEP+'PriceFull'].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,1,['Wishlist']);});CGST.getInfo('DATALAYER_PRODUCTS_NO_CUSTOM').map(function(p){return PROD_INDEX+DEPTH_SEP+p;}).concat(['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Engraving',PROD_INDEX+DEPTH_SEP+'Brand',PROD_INDEX+DEPTH_SEP+'Image',PROD_INDEX+DEPTH_SEP+'Url',]).forEach(function(p){CDT.setContextPriorityMap(p,pageContext,2,['Wishlist']);});}}
{CDT.setContextPriorityMap('User_LoginStatus',pageContext,1,'ALL');['User_LoginType','User_Email_MD5','User_Email_SHA256','User_Phone_MD5','User_Phone_SHA256','User_Country','User_Id','User_Segments','User_HasPrescription','User_Nation','User_LoyaltyCard'].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,1,['UserLogin','UserRegister']);CDT.setContextPriorityMap(p,eventContext,1,['Login','Account-Create']);});{CDT.setContextPriorityMap('User_Email_MD5',eventContext,1,['EmailMeWhenAvailable','SignupForm','Unsubscribe']);CDT.setAcceptedValues('User_Email_MD5',REB.isEncrypted('md5',0));}
{CDT.setContextPriorityMap('User_Email_SHA256',eventContext,1,['EmailMeWhenAvailable','SignupForm','Unsubscribe']);CDT.setAcceptedValues('User_Email_SHA256',REB.isEncrypted('sha256',0));}
{CDT.setAcceptedValues('User_Phone_MD5',REB.isEncrypted('md5',0));}
{CDT.setAcceptedValues('User_Phone_SHA256',REB.isEncrypted('sha256',0));}
{CDT.setAcceptedValues('User_Country',REB.isValueOf([REB.toStringAndClean(REB.isAlpha(2,2,'uppercase'))].concat(CGST.getInfo('COUNTRIES_3L')),1));}
{CDT.setAcceptedValues('User_Id',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setAcceptedValues('User_Segments',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',sep:',',item:{sep_end:'yes'}}}));}
{CDT.setAcceptedValues('User_LoyaltyCard',REB.isAlphaNumeric({nospaces:'yes',required:'yes'}));}
{CDT.setAcceptedValues('User_HasPrescription','ONES');}
{CDT.setAcceptedValues('User_Nation',REB.isAlpha(2,2,'uppercase'));}
{CDT.setContextPriorityMap('Events_UserLogin',pageContext,1,['UserLogin']);CDT.setContextPriorityMap('Events_UserLogin',eventContext,1,['Login']);CDT.setContextPriorityMap('Events_UserLogin',pageContext,2,['Delivery']);}
{CDT.setContextPriorityMap('Events_UserAccountNew',pageContext,1,['UserRegister']);CDT.setContextPriorityMap('Events_UserAccountNew',eventContext,1,['Account-Create']);CDT.setContextPriorityMap('Events_UserAccountNew',pageContext,2,['Delivery']);}
{CDT.setContextPriorityMap('Events_UserEmailSub',pageContext,1,['UserRegister','UserNewsl']);CDT.setContextPriorityMap('Events_UserEmailSub',eventContext,1,['EmailMeWhenAvailable','SignupForm']);CDT.setContextPriorityMap('Events_UserEmailSub',pageContext,2,['Payment']);CDT.setContextPriorityMap('Events_UserEmailSub',eventContext,2,['Account-Create']);}
{CDT.setContextPriorityMap('Events_UserEmailUnsub',pageContext,1,['UserNewsl']);}
{CDT.setContextPriorityMap('Events_UserPhoneSub',pageContext,1,['UserRegister']);CDT.setContextPriorityMap('Events_UserPhoneSub',pageContext,2,['Payment']);}
{CDT.setContextPriorityMap('Events_ProdViewEcomOosEmailClick',eventContext,1,['EmailMeWhenAvailable','SignupForm']);}
{CDT.setContextPriorityMap('Events_OrderReminderSave',eventContext,1,['EmailMeWhenAvailable']);CDT.setAcceptedValues(['Events_SavePrescriptionCL','Events_SavePrescriptionEyewear','Events_OrderReminderSave'],'ONES');}}};__export.setOverrideDatalayerTable=function(){{{COT.setPriority(['Page_Design'],'Page_Type'+DEP_SEP+'Page_Section1',[['Login&Register'],['Account']],1);{COT.setPriority(['Page_Design'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Design',[['Wishlist'],['Account'],['Empty']],1);COT.setPriority(['Products',PROD_INDEX],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Design',[['Wishlist'],['Account'],['Empty']],-1);}
{COT.setPriority(['Event_Source'],'Events_SavePrescriptionCL',['1'],1);COT.setPriority(['Event_Source'],'Events_SavePrescriptionEyewear',['1'],1);}}
{COT.setPriority(['User_LoginStatus'],'Events_UserLogin',['1'],1);COT.setPriority(['User_LoginStatus'],'Events_UserAccountNew',['1'],1);COT.setPriority(['User_LoginType','User_Email_MD5','User_Email_SHA256','User_Phone_MD5','User_Phone_SHA256','User_Country','User_Id','User_Segments','User_HasPrescription','User_Nation','User_LoyaltyCard'],'Page_Section1',['Account'],1);COT.setPriority(['User_LoginType','User_Email_MD5','User_Email_SHA256','User_Phone_MD5','User_Phone_SHA256','User_Country','User_Id','User_Segments','User_HasPrescription','User_Nation','User_LoyaltyCard'],'User_LoginStatus',['Logged'],1);COT.setPriority(['User_Email_MD5','User_Email_SHA256'],'Events_UserEmailSub',['1'],1);COT.setPriority(['User_Email_MD5','User_Email_SHA256'],'Events_UserEmailUnsub',['1'],1);COT.setPriority(['User_Email_MD5','User_Email_SHA256','Events_UserEmailSub','Events_OrderReminderSave'],'Events_ProdViewEcomOosEmailClick',['1'],1);COT.setPriority(['User_Phone_MD5','User_Phone_SHA256'],'Events_UserPhoneSub',['1'],1);}}
{{{{COT.setAcceptedValues(['Page_Section1'],'Page_Type',['UserLogin','UserRegister','UserSummary','OrderCanc','CartReturn','OrderReturn'],REB.isAlphaNumeric({nospaces:'yes',required:'yes',exceptions:[':']}));COT.setAcceptedValues(['Page_Section1'],'Page_Type',['UserNewsl','NewslForm'],['Newsletter']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['UserLogin','UserRegister','UserSummary','OrderCanc','CreateReturn','ReasonReturn','SelectCarrier','ReturnSummary','CartReturn','OrderReturn','CreateExchange','ReasonExchange','ItemsExchange','SummaryExchange','OrderChange','Profile','GiftCardBalance','History','Subscriptions','FidelityCard','LoyaltyProgram',],['Account']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Login&Register'],CGST.getInfo('LOGIN_REGISTER_PAGE_SECTIONS'));COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Static'],CGST.getInfo('STATIC_PAGE_SECTIONS'));}
COT.setAcceptedValues(['Page_Design'],'Page_Type'+DEP_SEP+'Page_Section1',[['Login&Register'],['Account']],['Login','Register','Login&Register']);{if(PROFILE_NAME==PROFILE_SSW||PROFILE_NAME==PROFILE_SSR){COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Wishlist'],['FittingRoom']);}
COT.setAcceptedValues(['Page_Design'],'Page_Type',['Wishlist'],['Empty']);}}
{COT.setAcceptedValues(['Event_Source'],'Events_SavePrescriptionCL',['1'],['MyAccount Prescription Save']);COT.setAcceptedValues(['Event_Source'],'Events_SavePrescriptionEyewear',['1'],['MyAccount Prescription Save']);}}
{COT.setAcceptedValues(['User_Email_MD5','User_Phone_MD5'],'User_LoginStatus',['Logged'],REB.isEncrypted('md5',1));COT.setAcceptedValues(['User_Email_SHA256','User_Phone_SHA256'],'User_LoginStatus',['Logged'],REB.isEncrypted('sha256',1));}}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},UserTrackingFunctionality.prototype));}());CONF_ENTITIES.push(function InternalSearchAndProdListingFunctionality(){var __cname='AutoQAConfiguration.InternalSearchAndProdListingFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Events_SearchFiltering','Search_ResultItemsQnt','Search_FacetValues_String','Events_SearchRun','Search_Keyword','Search_KeyActual','Search_Type','Search_View']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('id',['SearchPageReady','SearchFilterUpdated']);CPST.setInfo('Page_Type',['Plp','EPlp','CPlp','Search']);}
CPST.setInfo('Search_Type',['text','suggested','img','barcode']);CPST.setInfo('Search_View',['SERB','SERP','NO-SERP']);};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{{CDT.setContextPriorityMap('Page_Design',pageContext,1,['Search']);CDT.setContextPriorityMap('Page_Design',pageContext,2,['Plp','EPlp','CPlp']);}}}
{{CDT.setContextPriorityMap('Search_ResultItemsQnt',pageContext,1,['Plp','Search']);CDT.setContextPriorityMap('Search_ResultItemsQnt',eventContext,1,['SearchFilterUpdated','SearchPageReady']);CDT.setAcceptedValues('Search_ResultItemsQnt',REB.isNumeric({zero:'yes'}));}
{CDT.setContextPriorityMap('Search_FacetValues_String',eventContext,1,['SearchFilterUpdated']);CDT.setContextPriorityMap('Search_FacetValues_String',pageContext,2,['Plp','Search']);CDT.setAcceptedValues('Search_FacetValues_String',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'entry',sep:'|',entry:{sep:'=',value_required:'yes'}}}));}
{CDT.setContextPriorityMap('Events_SearchFiltering',eventContext,1,['SearchFilterUpdated']);CDT.setContextPriorityMap('Events_SearchFiltering',pageContext,2,['Search']);}
['Search_Keyword','Search_KeyActual','Search_Type','Search_View'].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,1,['Search']);CDT.setContextPriorityMap(p,eventContext,1,['SearchPageReady']);if(p=='Search_Keyword'||p=='Search_KeyActual'){CDT.setAcceptedValues(p,REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}});}};__export.setOverrideDatalayerTable=function(){{{{COT.setPriority(['Search_Keyword','Search_KeyActual','Search_Type','Search_View','Search_ResultItemsQnt'],'Events_SearchRun',['1'],1);COT.setPriority(['Search_FacetValues_String','Search_ResultItemsQnt'],'Events_SearchFiltering',['1'],1);}}}
{{{{if(PROFILE_NAME==PROFILE_SSW||PROFILE_NAME==PROFILE_SSR){COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Search'],['Catalog','FrameAdv']);}else{COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Search'],['Search']);}}
COT.setAcceptedValues(['Page_Design'],'Page_Type',['Search'],['','Pages','Tiles&Pages','Empty']);}}
{COT.setAcceptedValues(['Search_Keyword'],'Search_Type',['img'],REB.isEmpty(),CHT.getGlobalSuggestions('SINGLE_VALUE')+' '+CHT.getGlobalSuggestions('EMPTY_STRING'));}}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},InternalSearchAndProdListingFunctionality.prototype));}());CONF_ENTITIES.push(function StoreSearchTrackingFunctionality(){var __cname='AutoQAConfiguration.StoreSearchTrackingFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Events_FunnelStoreSearch','Store_Search_Keyword','Store_Search_Type','Store_Search_ResultItemsQnt','Store_Search_StoreId']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerGlobalStaticValues=function(){CGST.setInfo('FIND_STORE_PAGE_SECTIONS',['StoreLocator']);};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('Page_Type',['StoreLocator','FindStore']);}
CPST.setInfo('Store_Search_Type',['text','geolocalized']);};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{CDT.setAcceptedValues('Store_Search_Keyword',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setAcceptedValues('Store_Search_ResultItemsQnt',REB.isNumeric({zero:'yes'}));}
{CDT.setContextPriorityMap(['Store_Search_StoreId'],pageContext,1,['Shipping']);CDT.setContextPriorityMap('Store_Search_StoreId',eventContext,2,['AddToCart']);CDT.setAcceptedValues('Store_Search_StoreId',REB.isAlphaNumeric({nospaces:'yes'}));}}};__export.setOverrideDatalayerTable=function(){{{COT.setPriority(['Events_FunnelStoreSearch','Store_Search_Keyword','Store_Search_Type','Store_Search_ResultItemsQnt'],'Page_Type'+DEP_SEP+'Page_Section1',[['FindStore'],['StoreLocator']],1);COT.setPriority(['Store_Search_Keyword','Store_Search_Type','Store_Search_ResultItemsQnt','Store_Search_StoreId'],'Events_FunnelStoreSearch',['1'],1);COT.setPriority(['Store_Search_StoreId'],'Events_CartAdd',['1'],2);}}
{{{{COT.setAcceptedValues(['Page_Section1'],'Page_Type',['StoreLocator'],['StoreLocator']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['FindStore'],CGST.getInfo('FIND_STORE_PAGE_SECTIONS'));}}}}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},StoreSearchTrackingFunctionality.prototype));}());CONF_ENTITIES.push(function ExamFunnelFunctionality(){var __cname='AutoQAConfiguration.ExamFunnelFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Exam_ZipCode','Exam_Fitting','Exam_PreviousExam','Exam_WornBefore','Exam_PatientNum','Exam_ProductSelected','Exam_InsuranceCode','Exam_Id','Exam_AppointmentDate','Events_FunnelCancellation','Events_FunnelAddExam']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerGlobalStaticValues=function(){CGST.setInfo('FIND_STORE_PAGE_SECTIONS',(CGST.getInfo('FIND_STORE_PAGE_SECTIONS')||[]).concat(['Exam']));};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('id',['Exam-Funnel-FindStore','Exam-Funnel-FindStoreResults','Exam-Funnel-Info','Exam-Funnel-Review','Exam-Funnel-Confirmation','Exam-Funnel-Cancellation','Exam-Funnel-AddExam']);CPST.setInfo('Page_Type',['FindStore','FindStoreExam','Info','Review','Confirmation','Cancellation']);}};__export.setDatalayerContextTable=function(){CDCT.setEntryToEventsMapWithPageContext('Exam-Funnel-FindStore','FindStore');CDCT.setEntryToEventsMapWithPageContext('Exam-Funnel-Info','Info');CDCT.setEntryToEventsMapWithPageContext('Exam-Funnel-Review','Review');CDCT.setEntryToEventsMapWithPageContext('Exam-Funnel-Confirmation','Confirmation');CDCT.setEntryToEventsMapWithPageContext('Exam-Funnel-Cancellation','Cancellation');};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{CDT.setContextPriorityMap('Page_Section2',pageContext,1,['Info','Review']);CDT.setContextPriorityMap('Page_Section2',eventContext,1,['Exam-Funnel-Info','Exam-Funnel-Review']);}}
{{CDT.setContextPriorityMap(['Events_UserEmailSub','User_Email_MD5','User_Email_SHA256'],pageContext,2,['Confirmation']);}}
{['Exam_ZipCode','Exam_Fitting','Exam_PreviousExam','Exam_WornBefore'].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,2,['Info','Review','Confirmation']);CDT.setContextPriorityMap(p,eventContext,2,['Exam-Funnel-Info','Exam-Funnel-Review','Exam-Funnel-Confirmation']);if(p=='Exam_ZipCode')CDT.setAcceptedValues(p,REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));else CDT.setAcceptedValues(p,REB.isSeparatedBy(REB.isValueOf(CGST.getInfo('BINARY_ANSWER')),',',1,0));});{CDT.setContextPriorityMap('Exam_PatientNum',pageContext,2,['Review','Confirmation','Cancellation']);CDT.setContextPriorityMap('Exam_PatientNum',eventContext,2,['Exam-Funnel-Review','Exam-Funnel-Confirmation','Exam-Funnel-Confirmation']);CDT.setAcceptedValues('Exam_PatientNum',REB.isNumeric());}
{CDT.setContextPriorityMap('Exam_ProductSelected',pageContext,2,['Confirmation']);CDT.setContextPriorityMap('Exam_ProductSelected',eventContext,2,['Exam-Funnel-Confirmation']);CDT.setAcceptedValues(['Exam_ProductSelected'],'BINARY_ANSWER');}
{CDT.setContextPriorityMap('Exam_Id',pageContext,1,['Confirmation']);CDT.setContextPriorityMap('Exam_Id',eventContext,1,['Exam-Funnel-Confirmation']);CDT.setAcceptedValues('Exam_Id',REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'item',sep:',',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Exam_AppointmentDate',pageContext,1,['Confirmation']);CDT.setContextPriorityMap('Exam_AppointmentDate',eventContext,1,['Exam-Funnel-Confirmation']);CDT.setAcceptedValues('Exam_AppointmentDate',REB.isSeparatedBy(REB.isDateFormat(1),',',1,0));}}};__export.setOverrideDatalayerTable=function(){{{COT.setPriority(['Store_Search_Keyword','Store_Search_Type','Store_Search_ResultItemsQnt','Store_Search_StoreId'],'id',['Exam-Funnel-FindStoreResults'],1);}}
{{{{COT.setAcceptedValues(['Page_Section1'],'Page_Type',['FindStore'],CGST.getInfo('FIND_STORE_PAGE_SECTIONS'));COT.setAcceptedValues(['Page_Section1'],'Page_Type',['FindStoreExam','Info','Review','Confirmation','Cancellation'],['Exam']);}
COT.setAcceptedValues(['Page_Section2'],'Page_Type',['Info'],['PersonalInfo','Question1','Question2','Scheduler','Review']);}}}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},ExamFunnelFunctionality.prototype));}());if(PROFILE_GROUP=='ecommerce')CONF_ENTITIES.push(function InsuranceTrackingFunctionality(){var __cname='AutoQAConfiguration.InsuranceTrackingFunctionality';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add([PROD_INDEX+DEPTH_SEP+'InsuranceAmount',PROD_INDEX+DEPTH_SEP+'InsuranceCode',PROD_INDEX+DEPTH_SEP+'InsuranceBenefits','Order_InsuranceAmount','Order_InsuranceCode','Order_InsuranceBenefits','Order_Insured','Events_InsuranceApplied','Events_InsuranceTentative']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('id',['Insurance-Applied','Insurance-Tentative']);}
CPST.setInfo(PROD_INDEX+DEPTH_SEP+'InsuranceCode',['','Eyemed','Superior']);CPST.setInfo(PROD_INDEX+DEPTH_SEP+'InsuranceBenefits',['frames','lenses','contact','eye exam']);CPST.setInfo('Order_InsuranceCode',CPST.getInfo(PROD_INDEX+DEPTH_SEP+'InsuranceCode'));CPST.setInfo('Order_InsuranceBenefits',CPST.getInfo(PROD_INDEX+DEPTH_SEP+'InsuranceBenefits'));};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'InsuranceBenefits',eventContext,1,['Insurance-Applied']);CDT.setContextPriorityMap([PROD_INDEX+DEPTH_SEP+'InsuranceAmount',PROD_INDEX+DEPTH_SEP+'InsuranceCode',PROD_INDEX+DEPTH_SEP+'InsuranceBenefits'],pageContext,2,['CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'InsuranceAmount',REB.isNumeric({sign:'negative',zero:'yes',decimals:{}}));CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'InsuranceBenefits',REB.isSeparatedBy(REB.isValueOf(CPST.getInfo(PROD_INDEX+DEPTH_SEP+'InsuranceBenefits'),1),',',1,0));}}
{{CDT.setAcceptedValues('Order_InsuranceAmount',REB.isNumeric({sign:'negative',zero:'yes',decimals:{}}));}
{CDT.setContextPriorityMap('Order_InsuranceCode',eventContext,1,['Insurance-Applied','Insurance-Tentative']);CDT.setContextPriorityMap('Order_InsuranceCode',pageContext,2,['Shipping','Payment','OrderSummary','Thankyou','Doctor']);}
{CDT.setContextPriorityMap('Order_InsuranceBenefits',eventContext,1,['Insurance-Applied']);CDT.setAcceptedValues('Order_InsuranceBenefits',REB.isSeparatedBy(REB.isValueOf(CPST.getInfo('Order_InsuranceBenefits'),1),',',1,0));}
{CDT.setAcceptedValues('Order_Insured',REB.isNumeric({zero:'yes'}));}}}
{CDT.setContextPriorityMap(['Events_Error','Error_Source','Error_Code','Error_Message'],eventContext,1,['Insurance-Tentative']);}};__export.setOverrideDatalayerTable=function(){{{{COT.setPriority([PROD_INDEX+DEPTH_SEP+'InsuranceAmount',PROD_INDEX+DEPTH_SEP+'InsuranceCode',PROD_INDEX+DEPTH_SEP+'InsuranceBenefits'],'Page_Type'+DEP_SEP+'Page_Section1',[['Login&Register'],['Checkout']],1);}
{COT.setPriority(['Order_InsuranceAmount','Order_InsuranceBenefits','Order_Insured'],'Order_DiscountCode',[CDT.getAcceptedValues('Order_InsuranceCode')],1);COT.setPriority(['Order_InsuranceCode','Order_InsuranceBenefits'],'Events_InsuranceApplied',['1'],1);COT.setPriority(['Order_InsuranceCode'],'Events_InsuranceTentative',['1'],1);}}
{COT.setPriority(['Events_Error','Error_Source','Error_Code','Error_Message'],'Events_InsuranceTentative',['1'],1);}}};__export.setPostProcessingRules=function(){{CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+'InsuranceCode',dkeylist:['Order_InsuranceCode'],rule:function(keyValue,dkeyListValues){if(!(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue)))return true;return TC.isUndefined(dkeyListValues.Order_InsuranceCode)||TC.isEmptyString(dkeyListValues.Order_InsuranceCode)?true:false;},suggestions:'Both Order and Product level variables have been set for the Insurance. Please to take priority on Product level only... otherwise on Order level only',name:PROD_INDEX+DEPTH_SEP+'InsuranceCode_value_error_OrderInsurance_available',});CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+'InsuranceAmount',dkeylist:[PROD_INDEX+DEPTH_SEP+'Price'],rule:function(keyValue,dkeyListValues){if(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue))return true;if(TC.isUndefined(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price'])||TC.isEmptyString(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price']))return true;return Math.abs(parseFloat(keyValue))>parseFloat(dkeyListValues[PROD_INDEX+DEPTH_SEP+'Price'])?false:true;},suggestions:'|InsuranceAmount| must be always LESS THAN or EQUALS TO Price. Note: we are considering the module or the positive value of InsuranceAmount for the condition provided!',name:'InsuranceAmount_value_error_Price',});}
{}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},InsuranceTrackingFunctionality.prototype));}());CONF_ENTITIES.push(function VirtualMirrorComponent(){var __cname='AutoQAConfiguration.VirtualMirrorComponent';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Vm_Action','Vm_IsBrowserSupported','Vm_IsUpcSupported','Vm_Release','Take_Mode','Events_VMRender','Events_VMFit','Events_VMAdjust','Events_VMScreenshot','Events_SocialShare']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerStaticAcceptedValues=function(){CPST.setInfo('id',['VirtualMirror']);CPST.setInfo('Vm_Action',['InitializeSuccess','RequestWebcam','WebcamAllowed','Render','CloseMirror']);CPST.setInfo('Take_Mode',['vto','video','picture','picture','upload']);};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'LensType'].forEach(function(p){CDT.setContextPriorityMap(p,eventContext,1,['VirtualMirror']);});{CDT.setContextPriorityMap('Vm_Action',eventContext,1,['VirtualMirror']);}}
{{{CDT.setContextPriorityMap('Vm_Release',eventContext,2,['Impression','Event','AddToCart','ProdFavAdd']);CDT.setAcceptedValues('Vm_Release',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
['Vm_IsBrowserSupported','Vm_IsUpcSupported'].forEach(function(p){CDT.setContextPriorityMap(p,pageContext,2,['Pdp','QuickView','PClp']);CDT.setAcceptedValues(p,'BINARY');});{CDT.setAcceptedValues(['Events_VMRender','Events_VMFit','Events_VMAdjust','Events_VMScreenshot'],'ONES');}}
{{CDT.setAcceptedValues('Events_SocialShare','ONES');}}}};__export.setOverrideDatalayerTable=function(){{COT.setPriority(['Events_VMRender'],'id'+DEP_SEP+'Vm_Action',[['VirtualMirror'],['Render']],1);COT.setPriority(['Events_VMFit'],'id'+DEP_SEP+'Vm_Action',[['VirtualMirror'],['FitGlasses']],1);}
{{{{COT.setPriority('Page_Section1','Vm_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Vm_Release')],['Impression']],1);}
{['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Category'].forEach(function(p){COT.setPriority(p,'id'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Impression'],['VirtualMirror'],['Render']],1);COT.setPriority(p,'Vm_Release'+DEP_SEP+'id'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[[CDT.getAcceptedValues('Vm_Release')],['Impression'],['VirtualMirror'],['Render']],1);['Events_VMFit','Events_VMAdjust','Events_VMScreenshot','Events_CartAdd','Events_ProdFavAdd'].forEach(function(d){if(d!='Events_CartAdd'||d!='Events_ProdFavAdd')COT.setPriority(p,d,['1'],1);COT.setPriority(p,'Vm_Release'+DEP_SEP+d,[[CDT.getAcceptedValues('Vm_Release')],['1']],1);});COT.setPriority(p,'Vm_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Vm_Release')],['AddToCart','ProdFavAdd']],1);});}}
{['Events_VMFit','Events_VMAdjust','Events_VMScreenshot','Events_ProdFavAdd'].forEach(function(d){if(d!='Events_ProdFavAdd')COT.setPriority('Take_Mode',d,['1'],1);COT.setPriority('Take_Mode','Vm_Release'+DEP_SEP+d,[[CDT.getAcceptedValues('Vm_Release')],['1']],1);});COT.setPriority('Take_Mode','Vm_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Vm_Release')],['ProdFavAdd']],1);COT.setPriority('Events_VMRender','id'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Impression'],['VirtualMirror'],['Render']],1);COT.setPriority('Events_VMRender','Vm_Release'+DEP_SEP+'id'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[[CDT.getAcceptedValues('Vm_Release')],['Impression'],['VirtualMirror'],['Render']],1);}}
{{{COT.setAcceptedValues('Page_Section1','Vm_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Vm_Release')],['Impression']],['VirtualMirror']);COT.setAcceptedValues('Page_Section2','Vm_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Vm_Release')],['Impression']],['Render']);}}}}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},VirtualMirrorComponent.prototype));}());CONF_ENTITIES.push(function CustomConfiguratorComponent(){var __cname='AutoQAConfiguration.CustomConfiguratorComponent';var __export={};var __datalayer=new ArrayList('string',true,true);var __customDatalayerProducts=['ModelCode','Lens','Frame','Case','Size'];try{__datalayer.add([PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported',PROD_INDEX+DEPTH_SEP+'ModelCode',PROD_INDEX+DEPTH_SEP+'Lens',PROD_INDEX+DEPTH_SEP+'Frame',PROD_INDEX+DEPTH_SEP+'Case',PROD_INDEX+DEPTH_SEP+'Size','Oneconf_Action','Oc_Release','Events_CPLoaded','Events_CPSizeChanged','Events_CPEngravingChanged','Events_CPCaseEngravingChanged','Events_CPRecipeSaved','Events_CPRecipeChanged']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerGlobalStaticValues=function(){CGST.setInfo('CUSTOM_CONFIGURATOR_LIST',['Remix','OCP']);};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('Page_Type',['Pcp']);CPST.setInfo('id',['OneConfigurator']);}
{{CPST.setInfo(PROD_INDEX+DEPTH_SEP+'FrameType',['CP']);}}
CPST.setInfo('Oneconf_Action',['Loaded','Randomized','RecipeChanged','RecipeSaved','ConfirmConf','AddToCart','StartOver','Closed']);};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{{CDT.setContextPriorityMap('Page_Section2',pageContext,1,['Pcp']);}}
{{CDT.setContextPriorityMap(['Products',PROD_INDEX],pageContext,1,['Pcp']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Category',pageContext,1,['Pcp']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'FrameType',pageContext,2,['Pdp','QuickView','PClp','Plp','EPlp','CPlp','CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor','OrderCanc','Wishlist','Pcp']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'FrameType',eventContext,2,['AddToCart','ProdFavAdd','Prods-Delete','EmailMeWhenAvailable','QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','OrderCancSubmitted']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'LensType',pageContext,1,['Pcp']);}
{CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported',pageContext,1,['Pcp']);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported',pageContext,2,['Pdp','QuickView','PClp','Plp','EPlp','CPlp','CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor','OrderCanc','Wishlist',]);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported',eventContext,2,['AddToCart','ProdFavAdd','Prods-Delete','EmailMeWhenAvailable','QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','OrderCancSubmitted']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported','BINARY');}
__customDatalayerProducts.forEach(function(p){CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+p,pageContext,1,['CartPage','Delivery','Shipping','Payment','OrderSummary','Thankyou','Doctor','OrderCanc','Wishlist',]);CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+p,eventContext,1,['AddToCart','ProdFavAdd','Prods-Delete','EmailMeWhenAvailable','QuickViewOverlay-LoadingReady','MiniWishOverlay-Open','MiniCartOverlay-Open','OrderCancSubmitted']);CDT.setAcceptedValues(PROD_INDEX+DEPTH_SEP+p,REB.isAlphaNumeric({nospaces:'yes',exceptions:[';',','],multiples:{type:'item',item:{sep_end:'yes'}}}));});}}
{['Products',PROD_INDEX].forEach(function(p){CDT.setContextPriorityMap(p,eventContext,1,['OneConfigurator']);});['Status','OosOptions','Category','FrameType','LensType','Engraving','Price','PriceFull','Brand','Preorder','Visibility'].forEach(function(p){CDT.setContextPriorityMap(PROD_INDEX+DEPTH_SEP+p,eventContext,1,['OneConfigurator']);});{CDT.setContextPriorityMap('Oneconf_Action',eventContext,1,['OneConfigurator']);}}
{{CDT.setContextPriorityMap('Oc_Release',eventContext,2,['Loading-Ready','X-X-X-Loading-Ready','Event','Impression','AddToCart']);CDT.setAcceptedValues('Oc_Release',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setAcceptedValues(['Events_CPLoaded','Events_CPRecipeChanged','Events_CPSizeChanged','Events_CPEngravingChanged','Events_CPRecipeSaved'],'ONES');}}};__export.setOverrideDatalayerTable=function(){{{{{COT.setPriority(__customDatalayerProducts.map(function(p){return PROD_INDEX+DEPTH_SEP+p;}),'Page_Type'+DEP_SEP+'Page_Section1',[['Login&Register'],['Checkout']],1);COT.setPriority([PROD_INDEX+DEPTH_SEP+'FrameType',PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported'],'Page_Type'+DEP_SEP+'Page_Section1',[['Login&Register'],['Checkout']],2);}
COT.setPriority([PROD_INDEX+DEPTH_SEP+'FrameType',PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported'].concat(__customDatalayerProducts.map(function(p){return PROD_INDEX+DEPTH_SEP+p;})),'Events_CartAdd',['1'],2);COT.setPriority([PROD_INDEX+DEPTH_SEP+'FrameType',PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported'].concat(__customDatalayerProducts.map(function(p){return PROD_INDEX+DEPTH_SEP+p;})),'Events_ProdFavAdd',['1'],2);COT.setPriority([PROD_INDEX+DEPTH_SEP+'FrameType',PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported'].concat(__customDatalayerProducts.map(function(p){return PROD_INDEX+DEPTH_SEP+p;})),'Events_CartRemove',['1'],2);['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Status',PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'FrameType',PROD_INDEX+DEPTH_SEP+'LensType',PROD_INDEX+DEPTH_SEP+'LensUPC',PROD_INDEX+DEPTH_SEP+'Price',PROD_INDEX+DEPTH_SEP+'PriceFull',PROD_INDEX+DEPTH_SEP+'Units',PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported',].concat(__customDatalayerProducts.map(function(p){return PROD_INDEX+DEPTH_SEP+p;})).forEach(function(p){if(p!=(PROD_INDEX+DEPTH_SEP+'LensUPC')){COT.setPriority(p,'id'+DEP_SEP+'Page_Type',[['Loading-Ready','X-X-X-Loading-Ready'],['Pcp']],1);COT.setPriority(p,'Oc_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Oc_Release')],['Loading-Ready','X-X-X-Loading-Ready']],1);}
['Events_CPRecipeChanged','Events_CPSizeChanged','Events_CPEngravingChanged','Events_CPCaseEngravingChanged','Events_CPRecipeSaved','Events_CartAdd'].forEach(function(d){if(d!='Events_CartAdd')COT.setPriority(p,d,['1'],1);COT.setPriority(p,'Oc_Release'+DEP_SEP+d,[[CDT.getAcceptedValues('Oc_Release')],['1']],1);});COT.setPriority(p,'Oc_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Oc_Release')],['AddToCart']],1);});[PROD_INDEX+DEPTH_SEP+'Engraving',PROD_INDEX+DEPTH_SEP+'Brand',PROD_INDEX+DEPTH_SEP+'Image',PROD_INDEX+DEPTH_SEP+'Url'].forEach(function(p){COT.setPriority(p,'id'+DEP_SEP+'Page_Type',[['Loading-Ready','X-X-X-Loading-Ready'],['Pcp']],2);COT.setPriority(p,'Oc_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Oc_Release')],['Loading-Ready','X-X-X-Loading-Ready']],2);['Events_CPRecipeChanged','Events_CPSizeChanged','Events_CPEngravingChanged','Events_CPCaseEngravingChanged','Events_CPRecipeSaved','Events_CartAdd'].forEach(function(d){if(d!='Events_CartAdd')COT.setPriority(p,d,['1'],2);COT.setPriority(p,'Oc_Release'+DEP_SEP+d,[[CDT.getAcceptedValues('Oc_Release')],['1']],2);});COT.setPriority(p,'Oc_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Oc_Release')],['AddToCart']],2);});COT.setPriority(['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported'],'id'+DEP_SEP+'Page_Section2',[['Impression'],['OneConf:Review','OneConf:LensDetails','OneConf:Exit']],1);COT.setPriority(['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported'],'Oc_Release'+DEP_SEP+'id'+DEP_SEP+'Page_Section2',[[CDT.getAcceptedValues('Oc_Release')],['Impression'],['OneConf:Review','OneConf:LensDetails','OneConf:Exit']],1);}}
{{{COT.setPriority('Events_CPLoaded','id'+DEP_SEP+'Page_Type',[['Loading-Ready','X-X-X-Loading-Ready'],['Pcp']],1);COT.setPriority('Events_CPLoaded','Oc_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Oc_Release')],['Loading-Ready','X-X-X-Loading-Ready']],1);}}
{['Events_CPEngravingChanged','Events_CPCaseEngravingChanged'].forEach(function(d){COT.setPriority('Events_CPRecipeChanged',d,['1'],1);COT.setPriority('Events_CPRecipeChanged','Oc_Release'+DEP_SEP+d,[[CDT.getAcceptedValues('Oc_Release')],['1']],1);});}}}
{{{{if(PROFILE_NAME==PROFILE_SSW||PROFILE_NAME==PROFILE_SSR){COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Pcp'],['Custom']);}else{COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Pcp'],REB.isAlphaNumeric({nospaces:'yes',required:'yes',exceptions:[':']}));}}
COT.setAcceptedValues(['Page_Section2'],'id'+DEP_SEP+'Page_Type',[['Impression'],['Pcp']],['OneConf:Review','OneConf:LensDetails','OneConf:Exit']);}}
{{COT.setAcceptedValues([PROD_INDEX+DEPTH_SEP+'Conf_IsUpcSupported'],'Oc_Release',[CDT.getAcceptedValues('Oc_Release')],CGST.getInfo('ONES'));}}}};__export.setPostProcessingRules=function(){{__customDatalayerProducts.forEach(function(p){CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+p,dkeylist:[PROD_INDEX+DEPTH_SEP+'FrameType'],rule:function(keyValue,dkeyListValues){if(dkeyListValues[PROD_INDEX+DEPTH_SEP+'FrameType']==='CP'){if(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue))return false;}
else if(!(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue)))return false;return true;},suggestions:'Variable is requested only for Custom Products.',name:'CP_'+PROD_INDEX+DEPTH_SEP+p+'_value_error',});CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+p,dkeylist:[PROD_INDEX+DEPTH_SEP+'FrameType'],rule:function(keyValue,dkeyListValues){return(dkeyListValues[PROD_INDEX+DEPTH_SEP+'FrameType']!='CP')&&(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue))?true:false;},success:true,name:'CP_'+PROD_INDEX+DEPTH_SEP+p+'_value_success',});});}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},CustomConfiguratorComponent.prototype));}());CONF_ENTITIES.push(function LensConfiguratorComponent(){var __cname='AutoQAConfiguration.LensConfiguratorComponent';var __export={};var __datalayer=new ArrayList('string',true,true);var __LENS_PAGE_SECTIONS=['Mixmatch','LensType','LensPrescription','LensBrand','LensPerformance','LensMaterial','LensLight','LensColour','LensTreatment','LensDesign','LensTreatmentDetail','ProtectionPlan','Addons','LensReview'];try{__datalayer.add(['Rx_Release','Events_PrescriptionOk','Order_PrescriptionMethod',]);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerStaticAcceptedValues=function(){{CPST.setInfo('id',['Checkout-Order-PrescriptionOk']);CPST.setInfo('Page_Type',['Prescription','PrescriptionOk']);}
{{CPST.setInfo(PROD_INDEX+DEPTH_SEP+'LensType',['RX']);}}
CPST.setInfo('Order_PrescriptionMethod',['upload','email','fax','calldoctor','skipped','myaccount']);};__export.setDatalayerContextTable=function(){CDCT.setEntryToEventsMapWithPageContext('Checkout-Order-PrescriptionOk','PrescriptionOk');};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{{CDT.setContextPriorityMap('Page_Section2',pageContext,1,['Prescription','PrescriptionOk']);CDT.setContextPriorityMap('Page_Section2',eventContext,1,['Checkout-Order-PrescriptionOk']);}}}
{{CDT.setContextPriorityMap('Rx_Release',eventContext,2,['Impression','Event','AddToCart']);CDT.setAcceptedValues('Rx_Release',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}
{CDT.setContextPriorityMap('Events_PrescriptionOk',pageContext,1,['PrescriptionOk']);}
{CDT.setContextPriorityMap('Order_PrescriptionMethod',pageContext,1,['PrescriptionOk']);CDT.setContextPriorityMap('Order_PrescriptionMethod',eventContext,1,['Checkout-Order-PrescriptionOk']);CDT.setContextPriorityMap('Order_PrescriptionMethod',pageContext,2,['Thankyou']);}}};__export.setOverrideDatalayerTable=function(){{{{COT.setPriority(['Page_Section1'],'Rx_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Rx_Release')],['Impression']],1);}
['Products',PROD_INDEX,PROD_INDEX+DEPTH_SEP+'Status',PROD_INDEX+DEPTH_SEP+'Category',PROD_INDEX+DEPTH_SEP+'LensType',PROD_INDEX+DEPTH_SEP+'LensUPC',PROD_INDEX+DEPTH_SEP+'Price',PROD_INDEX+DEPTH_SEP+'PriceFull',PROD_INDEX+DEPTH_SEP+'Units',PROD_INDEX+DEPTH_SEP+'Brand',].forEach(function(p){COT.setPriority(p,'Rx_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Rx_Release')],['Impression','AddToCart']],1);COT.setPriority(p,'Rx_Release'+DEP_SEP+'Events_CartAdd',[[CDT.getAcceptedValues('Rx_Release')],['1']],1);});{COT.setPriority(['Event_Source'],'Rx_Release'+DEP_SEP+'Events_SavePrescriptionEyewear',[[CDT.getAcceptedValues('Rx_Release')],['1']],1);}}
{COT.setPriority(['Events_PrescriptionOk'],'Rx_Release'+DEP_SEP+'Page_Section2',[[CDT.getAcceptedValues('Rx_Release')],['LensBrand','LensColour','LensTreatment']],2);COT.setPriority(['Order_PrescriptionMethod'],'Events_PrescriptionOk',['1'],1);}}
{{{{COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Prescription','PrescriptionOk'],['Checkout']);COT.setAcceptedValues(['Page_Section1'],'Rx_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Rx_Release')],['Impression']],['LensPanel','SunLensPanel']);}
{COT.setAcceptedValues(['Page_Section2'],'Page_Type',['Prescription','PrescriptionOk'],['Standard','Reorder','Express','Quoto']);COT.setAcceptedValues(['Page_Section2'],'Rx_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Rx_Release')],['Impression']],__LENS_PAGE_SECTIONS);}}
{COT.setAcceptedValues([PROD_INDEX+DEPTH_SEP+'LensType'],'Rx_Release'+DEP_SEP+'id'+DEP_SEP+'Page_Section2',[[CDT.getAcceptedValues('Rx_Release')],['Impression'],['Mixmatch','LensType']],['PLANO']);}
{COT.setAcceptedValues(['Event_Source'],'Rx_Release'+DEP_SEP+'Events_SavePrescriptionEyewear',[[CDT.getAcceptedValues('Rx_Release')],['1']],['RX Prescription Saved']);}}}};__export.setPostProcessingRules=function(){CPOST.addRule({key:PROD_INDEX+DEPTH_SEP+'LensUPC',dkeylist:[PROD_INDEX+DEPTH_SEP+'LensType'],rule:function(keyValue,dkeyListValues){if(TC.isUndefined(dkeyListValues[PROD_INDEX+DEPTH_SEP+'LensType']))return true;if(dkeyListValues[PROD_INDEX+DEPTH_SEP+'LensType']=='RX'){if(TC.isUndefined(keyValue)||TC.isEmptyString(keyValue))return false;}
return true;},suggestions:'Variable is requested for Products with RX lenses.',name:PROD_INDEX+DEPTH_SEP+'LensUPC'+'_value_error_RX_LensType',});};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},LensConfiguratorComponent.prototype));}());CONF_ENTITIES.push(function FrameAdvisorComponent(){var __cname='AutoQAConfiguration.FrameAdvisorComponent';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Fg_Release','Events_FAProfileChanged','Page_UserFace','Page_UserStyle','Events_FSCapture','Events_SocialShare']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerStaticAcceptedValues=function(){CPST.setInfo('Page_Type',['Connection','Survey','Facescan']);};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{{CDT.setContextPriorityMap('Page_Section2',pageContext,1,['Survey']);}}
{['Page_UserFace','Page_UserStyle'].forEach(function(p){CDT.setAcceptedValues(p,REB.isAlphaNumeric({nospaces:'yes',multiples:{type:'entry',sep:',',entry:{sep:'=',value_required:'yes'}}}));});{CDT.setAcceptedValues('Events_SocialShare','ONES');}}
{{CDT.setContextPriorityMap('Fg_Release',eventContext,2,['Impression','Event','AddToCart','ProdFavAdd']);CDT.setAcceptedValues('Fg_Release',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}}};__export.setOverrideDatalayerTable=function(){{{{COT.setPriority('Page_Section1','Fg_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Fg_Release')],['Impression']],1);}}
{COT.setPriority(['Page_UserFace'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Pdp','Plp'],['FrameGenius'],['Landing','FitGlasses']],1);COT.setPriority(['Page_UserStyle'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Pdp','Plp'],['FrameGenius'],['FitGlasses']],1);COT.setPriority(['Page_UserFace','Page_UserStyle'],'Page_Type'+DEP_SEP+'Page_Section1'+DEP_SEP+'Events_FAProfileChanged',[['Pdp','Plp'],['FrameGenius'],['1']],1);}
{COT.setPriority(['Events_FSCapture'],'id'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Impression'],['FrameGenius'],['Landing']],1);}}
{{{COT.setAcceptedValues('Page_Section1','Fg_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Fg_Release')],['Impression']],['FrameGenius']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['Connection','Survey'],['FrameAdv']);COT.setAcceptedValues(['Page_Section1'],'Page_Type',['FaceScan'],['FrameAdv']);COT.setAcceptedValues(['Page_Section2'],'Fg_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Fg_Release')],['Impression']],['Onboarding','Facescan','Landing','FitGlasses','Profile','Frames','Matches','Pdp']);COT.setAcceptedValues(['Page_Section2'],'Page_Type'+DEP_SEP+'Page_Section1',[['Survey'],['FrameAdv']],['Gender','Jawline','Faceshape','Frametype','Adressee','Playlist']);COT.setAcceptedValues(['Page_Section2'],'Page_Type'+DEP_SEP+'Page_Section1',[['Plp'],['FrameAdv']],REB.isAlphaNumeric({nospaces:'yes',exceptions:[':']}));{COT.setAcceptedValues(['Page_Design'],'Page_Type',['Pdp'],['','FADV','FSA','Plus']);if(PROFILE_NAME==PROFILE_SSW||PROFILE_NAME==PROFILE_SSR){COT.setAcceptedValues(['Page_Design'],'Page_Type',['Plp'],['','Playlist']);}}}}}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},FrameAdvisorComponent.prototype));}());CONF_ENTITIES.push(function SizeAdvisorComponent(){var __cname='AutoQAConfiguration.SizeAdvisorComponent';var __export={};var __datalayer=new ArrayList('string',true,true);try{__datalayer.add(['Sg_Release','Page_UserFace','Page_UserStyle','Events_FSCapture']);__export.getDatalayer=function(){return __datalayer.getData();};__export=___.merge(__export,CONF_INTERFACE);__export.setDatalayerPropertyListTable=function(){CDPLT.setInfo(__datalayer.getData(),'string');};__export.setDatalayerStaticAcceptedValues=function(){};__export.setDatalayerTable=function(){var pageContext=CDCT.getContextOnPage();var eventContext=CDCT.getContextOnEvent();{}
{{CDT.setContextPriorityMap('Sg_Release',eventContext,2,['Impression','Event','AddToCart']);CDT.setAcceptedValues('Sg_Release',REB.isAlphaNumeric({nospaces:'yes',required:'yes',multiples:{type:'item',item:{sep_end:'yes'}}}));}}};__export.setOverrideDatalayerTable=function(){{{{COT.setPriority('Page_Section1','Sg_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Sg_Release')],['Impression']],1);}}
{}
{COT.setPriority(['Events_FSCapture'],'id'+DEP_SEP+'Page_Section1'+DEP_SEP+'Page_Section2',[['Impression'],['SizeGenius'],['Results']],1);}}
{{{COT.setAcceptedValues('Page_Section1','Sg_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Sg_Release')],['Impression']],['SizeGenius']);COT.setAcceptedValues(['Page_Section2'],'Sg_Release'+DEP_SEP+'id',[[CDT.getAcceptedValues('Sg_Release')],['Impression']],['Onboarding','Facescan','Form','Results']);}}
{}}};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(__export||{},SizeAdvisorComponent.prototype));}());}
var CONF_TABLES=[];{CONF_TABLES.push(function ConfigErrorTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CET');CET.setPriorities([-1,1,2]);var tagging_plan_url='https://docs.google.com/spreadsheets/d/1qedeSsDNt8PSFdw1Uw22SXLs_XQBXCi_94tcbxsOSMc/edit?usp=sharing';var tagging_plan_link='<a href="'+tagging_plan_url+'" target="_blank">Tagging Plan</a>';CET.setCauses({CORRECT:'Variable is correct!',EXISTING:'Variable is missing!',FORMAT:'Variable\'s format is not correct!',ACCEPTED_VALUES:'Please to check Accepted values, Definition, Triggering condition in '+tagging_plan_link,SKIP:'Variable is not analyzed!',UNEXPECTED:'Variable is not expected on this context!',MANUAL_CHECK_REQUIRED:'Variable may be required depending on the Triggering condition. More info in '+tagging_plan_link,});var types=CET.getTypes();CET.setEntry(types.ERROR,{priority:1,style:'error_row',label:'ERROR',message:'Severe Error'});CET.setEntry(types.WARNING,{priority:2,style:'warning_row',label:'WARNING',message:'Moderate Error'});CET.setEntry(types.SUCCESS,{priority:-1,style:'success_row',label:'SUCCESS',message:'Correct'});CET.setEntry(types.SKIP,{priority:-1,style:'skip_row',label:'SKIP',message:'Skip test'});MLOG.timeEnd('AUTO QA: CONFIGURATION > CET');});CONF_TABLES.push(function ConfigQAProperty(){MLOG.timeStart('AUTO QA: CONFIGURATION > CQAP');CQAP.setApplyCallback(function(prop,value,priority,format,accValues,suggestions){var types=CET.getTypes();var causes=CET.getCauses();if(priority==CDT.getNoPriority()){if(CQAP.checkExist(value)&&(!CQAP.checkFormat(value,format)||(!CQAP.checkEmpty(value,format)))){return{type:types.WARNING,message:causes.UNEXPECTED};}}
else{if(CQAP.checkExist(value)&&(!(priority==2&&CQAP.checkFormat(value,format)&&CQAP.checkEmpty(value,format)))){if(CQAP.checkFormat(value,format)){if(CQAP.checkAcceptedValues(value,accValues)){}
else return{type:types.ERROR,message:(suggestions||causes.ACCEPTED_VALUES)};}else{return{type:types.ERROR,message:causes.FORMAT};}}else{return{type:CET.getTypeBy('priority',priority),message:priority==2?causes.MANUAL_CHECK_REQUIRED:causes.EXISTING};}}
return{type:types.SUCCESS,message:causes.CORRECT};});MLOG.timeEnd('AUTO QA: CONFIGURATION > CQAP');});CONF_TABLES.push(function ConfigGlobalStaticTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CGST');CONF_ENTITIES.forEach(function(entity){entity.setDatalayerGlobalStaticValues();});MLOG.timeEnd('AUTO QA: CONFIGURATION > CGST');});CONF_TABLES.push(function ConfigPropertyStaticTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CPST');CPST.init();CONF_ENTITIES.forEach(function(entity){entity.setDatalayerStaticAcceptedValues();});MLOG.timeEnd('AUTO QA: CONFIGURATION > CPST');});CONF_TABLES.push(function ConfigSuggestionTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CHT');CHT.init();CHT.setGlobalSuggestions({SINGLE_VALUE:'Please to provide the value',MULTIPLE_VALUE:'Please to provide one of available values:',EMPTY_STRING:'empty string'});CONF_ENTITIES.forEach(function(entity){entity.setDatalayerSuggestionTable();});MLOG.timeEnd('AUTO QA: CONFIGURATION > CHT');});CONF_TABLES.push(function ConfigDatalayerPropertyListTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CDPLT');CDPLT.init();CDPLT.setFormats(['string','object']);CONF_ENTITIES.forEach(function(entity){entity.setDatalayerPropertyListTable();});MLOG.timeEnd('AUTO QA: CONFIGURATION > CDPLT');});CONF_TABLES.push(function ConfigDatalayerContextTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CDCT');CONF_ENTITIES.forEach(function(entity){entity.setDatalayerContextTable();});MLOG.timeEnd('AUTO QA: CONFIGURATION > CDCT');});CONF_TABLES.push(function ConfigRestrictTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CRT');var datalayerProfile=new ArrayList('string',true,true);CONF_ENTITIES.forEach(function(entity){var datalayerEntity=entity.getDatalayerRestriction()||entity.getDatalayer();datalayerProfile.add(datalayerEntity);});if(!datalayerProfile.isEmpty()){var datalayer=new ArrayList('string',true,true);datalayer.setData(CDPLT.getAllProps('list'));datalayer.remove(datalayerProfile.getData());CRT.setInfo(PROFILE_GROUP,datalayer.getData());}
MLOG.timeEnd('AUTO QA: CONFIGURATION > CRT');});CONF_TABLES.push(function ConfigDatalayerTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CDT');CDT.init();CDT.setPriorities([-1,1,2]);CDT.setNoPriority(-1);{MLOG.timeStart('AUTO QA: CONFIGURATION > CDT > Init Default');CDT.initDefaultTable();MLOG.timeEnd('AUTO QA: CONFIGURATION > CDT > Init Default');}
{MLOG.timeStart('AUTO QA: CONFIGURATION > CDT > Init Custom');CONF_ENTITIES.forEach(function(entity){entity.setDatalayerTable();});MLOG.timeEnd('AUTO QA: CONFIGURATION > CDT > Init Custom');}
MLOG.timeEnd('AUTO QA: CONFIGURATION > CDT');});CONF_TABLES.push(function ConfigOverrideTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > COT');COT.init();CONF_ENTITIES.forEach(function(entity){entity.setOverrideDatalayerTable();});MLOG.timeEnd('AUTO QA: CONFIGURATION > COT');});CONF_TABLES.push(function ConfigPreProcessRulesTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CPRET');CPRET.setToFirstWin();CONF_ENTITIES.forEach(function(entity){entity.setPreProcessingRules();});MLOG.timeEnd('AUTO QA: CONFIGURATION > CPRET');});CONF_TABLES.push(function ConfigPostProcessRulesTable(){MLOG.timeStart('AUTO QA: CONFIGURATION > CPOST');CPOST.setToFirstWin();CPOST.setApplyPreconditionsCallback(function(QAResultInfo){if(QAResultInfo.priority>CDT.getNoPriority()&&(QAResultInfo.error.label==CET.getTypes('SUCCESS')||(QAResultInfo.error.message==CET.getCauses('EXISTING')||QAResultInfo.error.message==CET.getCauses('MANUAL_CHECK_REQUIRED'))||(QAResultInfo.error.priority==-1)))return true;return false;});CONF_ENTITIES.forEach(function(entity){entity.setPostProcessingRules();});MLOG.timeEnd('AUTO QA: CONFIGURATION > CPOST');});}
CONF_TABLES.forEach(function(runConfigurationTable){runConfigurationTable();});}catch(e){if(console)console.error('### AutoQAConfiguration has not been completed successfully! => caused by: '+e.stack);}};}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.automatic_qa_conf="23-09-03";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_utag_components")&&!window.tealium_ext000_utag_components__WeAreInBeta){window.tealium_ext000_utag_components__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_utag_components"));}
else{tealium_logContext='preloader utag builder';tealium_logNote='';var UtagBuilder=function UtagBuilderCTRL(){var __cname='UtagBuilder';var MLOG=__Utils__.MessageLogging;try{var ___=__Utils__.Common;var COOKIE=__Utils__.Cookie;var STORAGE=__Utils__.Storage;var UTAG_HELPER=__Utils__.UtagHelper;var ArrayList=__Utils__.ArrayList;var formatlistMap={User_Segments:',',Content_TestList:'|',};var __resume=function(o){for(var index in utag.data){if(!utag.data.hasOwnProperty(index)
||(o[index]&&(!index.match(/^Products/)))||index.match(/Tags__Abort/)||index.match(/^Page_Name$/)||(index.match(/^(Page_Section1|Page_Section2|Page_Type|Page_Design)$|Error_/)&&(''+o.id).match(/VirtualPage-View/i))//@NOTE: queste variabili non saranno resumate per le pagine virtuali
)continue;if((index.match(/Device_|Page_|Session_|User_|Store_/)&&(!index.match(/^Store_Search/)))||(index.match(/Error_|Tags_/)&&(!(index.match(/Error_Datalayer|Error_QA/)))&&utag.data.Tracking_EventIdLog.match(/:abort\]\[[^\]\[]*\]$/))
||(index.match(/^(Order_|Search_|Exam_|Store_|Oneconf_|Vm_)/)&&(''+o.id).match(/Loading-Ready/i)))o[index]=utag.data[index];if(index.match(/^Products/)&&(''+o.id).match(/Loading-Ready/i)){if(utag.data[index]){o[index]=___.merge(utag.data[index],o[index]);}
}}
if((''+o.id).match(/Loading-Ready/i)&&utag.data.hasOwnProperty('Events_Array')&&utag.data.Events_Array){var list=['UserLogin','UserAccountNew','UserEmailSub','UserEmailUnsub','UserPhoneSub','ProdViewEcomOosEmailClick','ActionContactUs','OrderReminderSave','SavePrescriptionCL','SavePrescriptionEyewear','SearchFiltering','SearchRun','CartAdd','ProdFavAdd','CartRemove','GiftCardTentative','GiftCardApplied','OrderCancel','ReturnCreate','Error','PrescriptionOk','InsuranceApplied','InsuranceTentative','SocialShare','FunnelStoreSearch','FunnelCancellation','FunnelAddExam','FGFit','FAProfileSkinConfirmed','FAProfileChanged','FSCapture','CPLoaded','CPSizeChanged','CPEngravingChanged','CPRecipeSaved','CPRecipeChanged','CPCaseEngravingChanged','VMRender','VMFit','VMAdjust','VMScreenshot',];for(index in list){if(!o.hasOwnProperty('Events_'+list[index])&&utag.data.Events_Array.hasOwnProperty(list[index])&&utag.data.Events_Array[list[index]].tofire==1){o['Events_'+list[index]]='1';}}}};var __checkGet=function(o){window.tealium_querystring_object={};window.location.search.replace(/^\?/,'').split(/&/).forEach(function(duet){duet=duet.split('=');duet[0]=duet[0].replace(/pid/i,'pid').replace(/cid/i,'cid');tealium_querystring_object[duet[0]]=duet[1];});if(window.location.search.indexOf('analytics_filter=off')>-1)STORAGE.removeItem('tealium_filter');if(window.location.search.indexOf('analytics_filter=on')>-1)STORAGE.setItem('tealium_filter','on','forever');};var __checkStorage=function(o){var regexp='^tealium_data2track[^_]*_';var list=STORAGE.getKeys(regexp);for(var index=0;index<list.length;index++){var key=list[index];var index2=key.replace(new RegExp(regexp),'');if(!o[index2]||o[index2]=='Unknown'){o[index2]=(STORAGE.getItem(key,'')||COOKIE.get(key,''));tealium_log.old('data2track: '+index2+' = '+o[index2]);}
//@TODO: use isValueOf existing function in tool QA for matching one of available values
else if(index2.match(new RegExp('^('+Object.keys(formatlistMap).join('|')+')$'))){var temp=new ArrayList('string',true,true,formatlistMap[index2]);temp.setData(o[index2]);temp.add(STORAGE.getItem(key,'')||COOKIE.get(key,''));o[index2]=temp.getData(true);tealium_log.old('datalayer+data2track: '+index2+' = '+o[index2]);}}
};var __updateContext=function(o){if(/(VirtualPage-View|Prods-Update|Exam-Funnel-FindStore|Exam-Funnel-Info|Exam-Funnel-Review|Exam-Funnel-Confirmation)/g.test(o.Tracking_EventId)){window.utag_data=___.merge(window.utag_data,o);}};var __buildPage=function(o){{o.Page_Country=(typeof o.Page_Country==='string'?o.Page_Country:'').replace(/UK/i,'GB');o.Page_Country=o.Page_Country.replace(/\s/g,'').toUpperCase();o.Page_Country=o.Page_Country||'Unknown';}
{o.Page_Region=o.Page_Country.match(/ROE|EU|AT|BE|CZ|DK|EE|FI|FR|DE|GR|HU|IE|IT|LV|LT|LU|MT|NL|NO|PL|PT|RU|SK|ES|SE|CH|TR|GB|UA/)?'EU':o.Page_Country.match(/US|CA/)?'NA':o.Page_Country.match(/AU|DB|CN|HK|IN|MY|MV|MM|NP|PK|SG|LK|TH/)?'ASIAPAC':o.Page_Country.match(/JP|KR|TW/)?'FAREAST':o.Page_Country.match(/LA|AR|BR|MX/)?'CLA':o.Page_Country.match(/AE|BH|QA|EG|IL|LB|SA|KW/)?'MENA':o.Page_Country.match(/ZA/)?'AFRICA':'Unknown';}
{o.Page_Language=(typeof o.Page_Language==='string'?o.Page_Language:'');o.Page_Language=o.Page_Language.toUpperCase();o.Page_Language=o.Page_Language||'Unknown';}
{o.Page_DeviceType=(typeof o.Page_DeviceType==='string'?o.Page_DeviceType:'')
.replace(/^wall43.*/i,'wall43')
.replace(/^ip.*/i,'ipad')
.replace(/^m.*/i,'mobile')
.replace(/^t.*/i,'tablet')
.replace(/^d.*/i,'desktop')
.replace(/^x.*|^a.*./i,'all');o.Page_DeviceType=o.Page_DeviceType.toLowerCase();o.Page_DeviceType=o.Page_DeviceType||'Unknown';}
{o.Page_Type=(typeof o.Page_Type==='string'?o.Page_Type:'');o.Page_Type=o.Page_Type.charAt(0).toUpperCase()+o.Page_Type.slice(1);o.Page_Type=o.Page_Type||'Unknown';}
{o.Page_Section1=(typeof o.Page_Section1==='string'?o.Page_Section1:'');o.Page_Section1=o.Page_Section1.split(' ').map(function(k){return(k.charAt(0).toUpperCase()+k.slice(1).toLowerCase());}).join(' ');o.Page_Section1=o.Page_Section1.split(':').map(function(k){return(k.charAt(0).toUpperCase()+k.slice(1).toLowerCase());}).join(':');o.Page_Section1=o.Page_Section1.replace(/[^(\w|\:)]/g,'');}
{o.Page_Section2=(typeof o.Page_Section2==='string'?o.Page_Section2:'');o.Page_Section2=o.Page_Section2.split(' ').map(function(k,v){return(k.charAt(0).toUpperCase()+k.slice(1).toLowerCase());}).join(' ');o.Page_Section2=o.Page_Section2.split(':').map(function(k,v){return(k.charAt(0).toUpperCase()+k.slice(1).toLowerCase());}).join(':');o.Page_Section2=o.Page_Section2.replace(/[^(\w|\:)]/g,'');}
{o.Page_Platform=(typeof o.Page_Platform==='string'?o.Page_Platform:'');o.Page_Platform=o.Page_Platform||'Unknown';}
{o.Page_PlatformRelease=(typeof o.Page_PlatformRelease==='string'?o.Page_PlatformRelease:'');o.Page_PlatformRelease=o.Page_PlatformRelease||'Unknown';}
{o.Page_Design=(typeof o.Page_Design==='string'?o.Page_Design:'');}
{o.Page_Name=[o.Page_Section1,o.Page_Section2,o.Page_Type==o.Page_Section1&&o.Page_Section2===''?'':(o.Page_Type===o.Page_Section2)?'':o.Page_Type].join(':').replace(/:+$/,'').replace(/:+/,':');if(o.Page_Design)o.Page_Name+='-'+o.Page_Design;o.Page_BrandCountry=[o.Page_Brand,o.Page_Country,].join(':');}
{o.Page_Url=(document.location.href).replace(/(=|%3D)[a-z0-9\.\-_]+(@|%40)[a-z0-9\.\-_]+(&|%26|#|%23|$)/ig,'$1***$2***$3');o.Page_Path=(document.location.pathname).replace(/(.)\/$/,'$1');o.Page_QueryString=(document.location.search).replace(/(=|%3D)[a-z0-9\.\-_]+(@|%40)[a-z0-9\.\-_]+(&|%26|#|%23|$)/ig,'$1***$2***$3');o.Page_PathQueryString=o.Page_Path+o.Page_QueryString;switch(o.Page_Platform){case'WCS':{//@TODO: considerare anche l'url codificata tramite encodeURIComponent
o.Page_Url=o.Page_Url.replace(/(^krypto|&krypto)=[^&]+/,'');o.Page_QueryString=o.Page_QueryString.replace(/(^krypto|&krypto)=[^&]+/,'');break;}}}
{o.Page_CountryThirdPlatforms=UtagSettings.get('Page_CountryThirdPlatforms',o);o.Page_CountryThirdPlatforms_YN=o.Page_Country.match(new RegExp(o.Page_CountryThirdPlatforms))?'Y':'N';o.Page_CountryEcommerce_YN=UtagSettings.get('Page_CountryEcommerce_YN',o);}
{o.Page_UserFace=(typeof o.Page_UserFace==='string'?o.Page_UserFace:'');o.Page_UserStyle=(typeof o.Page_UserStyle==='string'?o.Page_UserStyle:'');var list;if(o.Page_UserFace){list=new ArrayList('string',true,true,',');list.setData(o.Page_UserFace);var el=list.search(/jawshape\=/i);if(el.length==1){el=el[0].split('=')[1];var temp={'oval_angled':{jawline:'Angular',shape:'Rectangular'},'square':{jawline:'Angular',shape:'Squared'},'triangle':{jawline:'Angular',shape:'Triangle'},'oval_round':{jawline:'Rounded',shape:'Oval'},'round':{jawline:'Rounded',shape:'Circular'},};list.add('Jawline='+(temp[el]?temp[el].jawline:''));list.add('Shape='+(temp[el]?temp[el].shape:''));o.Page_UserFace=list.getData(true);}}
if(o.Page_UserFace||o.Page_UserStyle){list=new ArrayList('string',true,true,',');if(o.Page_UserProfile)list.setData(o.Page_UserProfile);if(o.Page_UserFace)list.add(o.Page_UserFace);if(o.Page_UserStyle)list.add(o.Page_UserStyle);o.Page_UserProfile=list.getData(true);}}
{o.page_type=o.Page_Type.match(/home/i)?'home':o.Page_Type.match(/Plp|Clp|Clv/i)?'category':o.Page_Type.match(/product|Configurator|Pdp|Pcp/i)?'product':o.Page_Type.match(/InternalSearch|Search/i)?'search':o.Page_Type.match(/CartPage|Cart/i)?'cart':o.Page_Type.match(/Payment|Delivery/i)?'checkout':o.Page_Type.match(/confirmation|ThankYou/i)?'confirmation':'';}};var __buildStore=function(o){{}
{o.Store_Brand=(typeof o.Store_Brand==='string'?o.Store_Brand:'');o.Store_Custom=(typeof o.Store_Custom==='string'?o.Store_Custom:'');if(o.Store_Brand||o.Store_Custom){var list=new ArrayList('string',true,true,'|');list.add('Brand='+o.Store_Brand);list.add('Custom='+o.Store_Custom);o.Store_Configuration=list.getData(true);}}};var __buildTags=function(o){{if(o['ut.version']){o.Tags_Tealium_ReleaseCode=o['ut.version'].slice(0,-4)+'.'+o['ut.version'].slice(-4);if(!tealium_log.utagjs.version){tealium_log.utagjs.version=o.Tags_Tealium_ReleaseCode;tealium_log.update();STORAGE.setItem('tealium_version',o.Tags_Tealium_ReleaseCode,'forever');}}
window.utag_data.Tags_Tealium_Triggered_Array=[];}
{{o.Tags_AdobeAnalytics_Server=UtagSettings.get('Tags_AdobeAnalytics_Server',o);o.Tags_AdobeAnalytics_ServerSecure=UtagSettings.get('Tags_AdobeAnalytics_ServerSecure',o);}
{o.Tags_AdobeAnalytics_RSID=UtagSettings.get('Tags_AdobeAnalytics_RSID',o);o.Tags_AdobeAnalytics_RSID_Alternative=UtagSettings.get('Tags_AdobeAnalytics_RSID_Alternative',o);if(o.Page_Environment=='PROD'){o.Tags_AdobeAnalytics_RSID=o.Tags_AdobeAnalytics_RSID_Alternative;}}
{if((''+o.Tracking_EventId).match(/Impression/)||(''+o.Page_Name).match(/SignUp|RenewalPopup|QuickView|MiniCart|MiniWishlist|Overlay|Cart|Checkout|Account/i)){o.Tags_AdobeAnalytics_PageName=o.Page_Name;}
else o.Tags_AdobeAnalytics_PageName=o.Page_Path;}
{o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit=o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit||((!window.tealium_querystring_object)?(''):(tealium_querystring_object.pid||tealium_querystring_object.cid||''));if(o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit){if(!COOKIE.get('tealium_data_tags_adobeAnalytics_trafficSourceCid_thisSession','')){COOKIE.set('tealium_data_tags_adobeAnalytics_trafficSourceCid_lastFirst',o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit,30);}
COOKIE.set('tealium_data_tags_adobeAnalytics_trafficSourceCid_thisSession',o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit);STORAGE.setItem('tealium_data_tags_adobeAnalytics_trafficSourceCid_last',o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit,'forever');}
o.Tags_AdobeAnalytics_TrafficSourceCid_ThisSession=COOKIE.get('tealium_data_tags_adobeAnalytics_trafficSourceCid_thisSession','');o.Tags_AdobeAnalytics_TrafficSourceCid_Last=STORAGE.getItem('tealium_data_tags_adobeAnalytics_trafficSourceCid_last','');o.Tags_AdobeAnalytics_TrafficSourceCid_LastFirst=COOKIE.get('tealium_data_tags_adobeAnalytics_trafficSourceCid_lastFirst','');}
if(window.tealium_log.preloader.state!='done'){var JID={};JID.dayCode=new Date();JID.dayCode=''
+(''+JID.dayCode.getUTCFullYear()).substr(3,1)
+(''+(101+JID.dayCode.getUTCMonth())).substr(1)
+(''+(100+JID.dayCode.getUTCDate())).substr(1);o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit='';o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking=STORAGE.getItem('tealium_data_tags_adobeAnalytics_trafficSourceJid_stacking','');o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array=o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking?o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking.split('-'):[];o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession=COOKIE.get('tealium_data_tags_adobeAnalytics_trafficSourceJid_stackingInSession','');o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array=o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession?o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession.split('-'):[];if(o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit){o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit=o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit
.replace(/^RB08/,'XX-SGA')
.replace(/^RB01/,'XX-TOC')
.replace(/^SA03/,'XX-FGS')
.replace(/^RB30/,'XX-TNP')
.replace(/^RB31/,'XX-TGC')
.replace(/^RB39/,'XX-TOD')
.replace(/^IP01/,'XX-SGA')
.replace(/^SA01/,'XX-SGA')
.replace(/^GL01/,'XX-MVT')
.replace(/^SA06/,'XX-AWN')
.replace(/^\w\w\d\d/,'XX----')
.substr(3,3)
.toUpperCase()
.replace('EEF','TEF')
.replace('OPG','PPG')
.replace('SBA','PBA')
.replace('SBI','PBI')
.replace('SGA','PGA')
.replace('SGD','PGD')
.replace('SHA','PHA')
.replace('SLU','PLU')
.replace('SSO','PSO')
.replace('SYA','PYA')
.substr(0,1)
.replace(/^A$/,'AFF')
.replace(/^C$/,'CAL')
.replace(/^D$/,'DIS')
.replace(/^E$/,'EDM')
.replace(/^M$/,'APP')
.replace(/^O$/,'OFF')
.replace(/^R$/,'REF')
.replace(/^P$/,'SEM')
.replace(/^F$/,'FEE')
.replace(/^S$/,'SOC')
.replace(/^X$/,'STO')
.replace(/^T$/,'TRA')
.replace(/^Y$/,'YEX');}
else{JID.referrer=(document.referrer||'').replace(/^https?:\/\//i,'').replace(/^www\./i,'');JID.internal=(window.location.hostname||'');JID.engines='about.com|alice.com|alltheweb.com|altavista.com|aol.com|ask.com|baidu.com|bing.com|cnn.com/search|daum.net|duckduckgo.com|ekolay.net|eniro.se|google|kvasir.no|lycos.com|mamma.com|msn.com|mynet.com|najdi.org.mk|naver.com|online.onetcenter.org|ozu.es|pchome.com|rambler.ru|search.com|search.netscape.com|search.virgilio.it|sesam.no|seznam.cz|szukacz.pl|terra.com|voila.fr|wp.pl|search.yahoo.com|yam.com|yandex.com';JID.social=''
+'12seconds.tv|4travel.jp|advogato.org|ameba.jp|anobii.com|asmallworld.net|backtype.com|badoo.com|bebo.com|bigadda.com|bigtent.com|biip.no|blackplanet.com|blog.seesaa.jp|blogspot.com|blogster.com|blomotion.jp|bolt.com|brightkite.com|buzznet.com|cafemom.com|care2.com|classmates.com|cloob.com|collegeblender.com|cyworld.co.kr|cyworld.com.cn|dailymotion.com|delicious.com|deviantart.com|digg.com|diigo.com|disqus.com|draugiem.lv'
+'|facebook.com|faceparty.com|fc2.com|flickr.com|flixster.com|fotolog.com|foursquare.com|friendfeed.com|friendsreunited.com|friendster.com|fubar.com|gaiaonline.com|geni.com|goodreads.com|grono.net|habbo.com|hatena.ne.jp|hi5.com|hotnews.infoseek.co.jp|hyves.nlibibo.comidenti.ca|instagram.com|imeem.com|intensedebate.com|irc-galleria.net|iwiw.hu|jaiku.com|jp.myspace.com|kaixin001.com|kaixin002.com|kakaku.com|kanshin.com'
+'|kozocom.com|last.fm|linkedin.com|livejournal.com|matome.naver.jp|me2day.net|meetup.com|mister-wong.com|mixi.jp|mixx.com|mouthshut.com|multiply.com|myheritage.com|mylife.com|myspace.com|myyearbook.com|nasza-klasa.pl|netlog.com|nettby.no|netvibes.com|nicovideo.jp|ning.com|odnoklassniki.ru|orkut.com|pakila.jp|photobucket.com|pinterest.com|plaxo.com|plurk.com|plus.google.com|reddit.com|renren.com|skyrock.com|slideshare.net'
+'|smcb.jp|smugmug.com|sonico.com|studivz.net|stumbleupon.com|t.163.com|t.co|t.hexun.com|t.ifeng.com|t.people.com.cn|t.qq.com|t.sina.com.cn|t.sohu.com|tabelog.com|tagged.com|taringa.net|thefancy.com|tripit.com|trombi.com|trytrend.jp|tuenti.com|tumblr.com|twine.com|twitter.com|uhuru.jp|viadeo.comvimeo.com|vk.com|vox.com|wayn.com|weibo.com|weourfamily.com|wer-kennt-wen.de|wordpress.com|xanga.com|xing.com|yammer.com|yaplog.jp'
+'|yelp.com|youku.com|youtube.com|yozm.daum.net|yuku.com|zooomr.com';JID.internal=new RegExp('^(\\w*\\.)?('+JID.internal.replace(/\./g,'\\.').replace(/\//g,'\\/')+')([\\./].*)?$','i');JID.engines=new RegExp('^(\\w*\\.)?('+JID.engines.replace(/\./g,'\\.').replace(/\//g,'\\/')+')([\\./].*)?$','i');JID.social=new RegExp('^(\\w*\\.)?('+JID.social.replace(/\./g,'\\.').replace(/\//g,'\\/')+')([\\./].*)?$','i');JID.isInternal=JID.referrer.match(JID.internal)?1:0;JID.isFirst=o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking==='';JID.isEntry=o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession==='';o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit=(JID.referrer.match(JID.engines))?'ORG':(JID.referrer.match(JID.social))?'SOC':(JID.isInternal&&JID.isFirst)?'INT':(JID.isInternal&&JID.isEntry)?'RES':(JID.isInternal)?'':(JID.referrer===''&&JID.isFirst)?'DIR':(JID.referrer===''&&JID.isEntry)?'RES':(JID.referrer==='')?'':'REF';}
if(o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit){o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit=''
+JID.dayCode
+(o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession===''?1:o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.length>8?'+':(o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.length+1))
+o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit;o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array.push(o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit);while(o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array.length>15){o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array.shift();}
o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking=o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array.join('-');o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.push(o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit);while(o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.length>15){o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.shift();}
o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession=o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.join('-');COOKIE.set('tealium_data2track_Tags_AdobeAnalytics_TrafficSourceJid_ThisHit',o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit);STORAGE.setItem('tealium_data_tags_adobeAnalytics_trafficSourceJid_stacking',o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking,'forever');COOKIE.set('tealium_data_tags_adobeAnalytics_trafficSourceJid_stackingInSession',o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession);}
delete window.JID;delete o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array;delete o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array;}
if(window.tealium_log.preloader.state!='done'){var MID={};o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit='';o.Tags_AdobeAnalytics_TrafficSourceMid_ThisSession=COOKIE.get('tealium_data_tags_adobeAnalytics_trafficSourceMid_thisSession','');o.Tags_AdobeAnalytics_TrafficSourceMid_Last=STORAGE.getItem('tealium_data_tags_adobeAnalytics_trafficSourceMid_last','');MID.isFirst=!o.Tags_AdobeAnalytics_TrafficSourceMid_ThisSession;if(o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit){o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit=o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit;}else if(MID.isFirst){o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit=(document.referrer||'').replace(/^https?:\/\//i,'').replace(/^www\./i,'');if(!o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit){o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit='direct';}
else{var __host=(window.location.hostname||'').split('.');if(__host.length>2){__host.shift();}
MID.internal=__host.join('.');MID.internal=new RegExp('^(\\w*\\.)?('+MID.internal.replace(/\./g,'\\.').replace(/\//g,'\\/')+')([\\./].*)?$','i');MID.isInternal=o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit.match(MID.internal)?1:0;if(MID.isInternal)o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit=o.Tags_AdobeAnalytics_TrafficSourceMid_Last||'internal';}}
if(o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit){COOKIE.set('tealium_data2track_Tags_AdobeAnalytics_TrafficSourceMid_ThisHit',o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit);o.Tags_AdobeAnalytics_TrafficSourceMid_Last=o.Tags_AdobeAnalytics_TrafficSourceMid_ThisSession=o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit;STORAGE.setItem('tealium_data_tags_adobeAnalytics_trafficSourceMid_last',o.Tags_AdobeAnalytics_TrafficSourceMid_Last,'forever');COOKIE.set('tealium_data_tags_adobeAnalytics_trafficSourceMid_thisSession',o.Tags_AdobeAnalytics_TrafficSourceMid_ThisSession);}
delete window.MID;}}
{o.Tags_Google_clickId=tealium_querystring_object.gclid||'';o.Tags_Google_dClickId=tealium_querystring_object.dclid||'';}};var __buildDevice=function(o){if(window.navigator.userAgent)o.Device_UserAgent=window.navigator.userAgent;if(!o.Device_UserAgent){o.Page_Country='JUNK';o.Device_UserAgent='empty';tealium_log.old('filter: switched from '+o.Page_Country+' to JUNK due to blank useragent');}
else if(o.Device_UserAgent=='test'){o.Page_Country='JUNK';o.Device_UserAgent='test';tealium_log.old('filter: switched from '+o.Page_Country+' to JUNK due to test flag');}
else if(o.Device_UserAgent.match(/gomez|bot/i)){o.Page_Country='JUNK';tealium_log.old('filter: switched from '+o.Page_Country+' to JUNK due to gomez/bot detection');}
else if(o.Device_UserAgent.match(/micromessenger|windowswechat/i)){o.Device_UserAgent='WeChat browser';}
else if(o.Device_UserAgent.match(/\[FB/i)){o.Device_UserAgent='Facebook browser';}
else if(o.Device_UserAgent.match(/\(POG\)/i)){o.Device_UserAgent='Purchases on Google Shopping (POG)';}
else{var temp=o.Device_UserAgent.split('@');if(temp.length>1&&!temp[1].match(/\w+([\.-]?\w+)*(\.\w{2,3})+/)){o.Device_UserAgent=temp[0]+'***';}
}
o.Device_ScreenSize=window.screen.width+'x'+window.screen.height;var isHighDensity=function(){return((window.devicePixelRatio&&window.devicePixelRatio>1.3)||(window.matchMedia&&(window.matchMedia('only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)').matches||window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)').matches)));};var isRetina=function(){return(/(Macintosh|iPad|iPhone|iPod)/g.test(window.navigator.userAgent)&&((window.devicePixelRatio&&window.devicePixelRatio>=2)||(window.matchMedia&&(window.matchMedia('only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)').matches||window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)').matches))));};o.Device_ScreenDensity=(isRetina())?('Retina'):(isHighDensity())?('HD'):('SD');o.Device_ScreenZoom=(o.Page_DeviceType=='mobile')?('mobile'):(!window.devicePixelRatio)?('n.a.'):(o.Device_ScreenDensity=='SD')?(Math.round(window.devicePixelRatio*100)):(o.Device_ScreenDensity=='HD')?(Math.round(window.devicePixelRatio*100/3)):(o.Device_ScreenDensity=='Retina')?(Math.round(window.devicePixelRatio*100/2)):'n.a.';var getOrientation=function(){if(window.matchMedia('(orientation: portrait)').matches)return'portrait';if(window.matchMedia('(orientation: landscape)').matches)return'landscape';return'';};o.Device_ScreenOrientation=getOrientation();o.Device_Screen=o.Device_ScreenSize+' z'+o.Device_ScreenZoom+' d'+o.Device_ScreenDensity+' o'+o.Device_ScreenOrientation;};var __buildUser=function(o){{}
{o.User_IdTimeStamp=STORAGE.getItem('tealium_data_user_timeStamp',Date.now());STORAGE.setItem('tealium_data_user_timeStamp',o.User_IdTimeStamp,'forever');}
{o.User_Country=(0||((o.User_Country&&o.User_Country!='N.A.')?o.User_Country:'')||COOKIE.get('aka-cc','')||STORAGE.getItem('tealium_data_user_country','N.A.')).toUpperCase();STORAGE.setItem('tealium_data_user_country',o.User_Country);if(!o.User_International){if((!o.User_Country||o.User_Country=='N.A.')||(!o.Page_Country)){o.User_International='NA';}else if(o.User_Country==o.Page_Country){o.User_International='LOCAL';}else{o.User_International='INTERNATIONAL';}
o.User_International+=' '+o.User_Country;}
o.User_Language=(0||o.User_Language||window.navigator.language||STORAGE.getItem('tealium_data_user_language','')||'NA').toUpperCase();STORAGE.setItem('tealium_data_user_language',o.User_Language);o.User_ZipCode=(0||o.User_ZipCode||COOKIE.get('aka-zp','').split(/[-+]/)[0]||STORAGE.getItem('tealium_data_user_zipcode',''));STORAGE.setItem('tealium_data_user_zipcode',o.User_ZipCode);}
{o.User_LoginStatus=o.User_LoginStatus||'';}
if(o.User_Email_MD5){COOKIE.set('tealium_data_user_emailMd5',o.User_Email_MD5);}else{o.User_Email_MD5=COOKIE.get('tealium_data_user_emailMd5','');}
if(o.User_Phone_MD5){COOKIE.set('tealium_data_user_phoneMd5',o.User_Phone_MD5);}else{o.User_Phone_MD5=COOKIE.get('tealium_data_user_phoneMd5','');}
{o.User_Segments=(typeof o.User_Segments==='string')?o.User_Segments:'';window.tealium_data_user_segments=STORAGE.getItem('tealium_data_user_segments','');var list=new ArrayList('string',true,true,',');list.setData(o.User_Segments);{jQuery('input[type="text"],input[type="email"]').each(function(){var temp=jQuery(this).val();if(temp.match(/@[^@]*luxottica\.com/))list.add('Luxotticans');else if(temp.match(/@jetconcierge\.net/)||temp.match(/@jetspecialorder\.com/))list.add('Jet.com');});if(COOKIE.get('sr_token','')!=='')list.add('Shoprunner');if(COOKIE.get('isCSRSession','')!=='')list.add('CSR');}
o.User_Segments=list.getData(true);list.add(window.tealium_data_user_segments);window.tealium_data_user_segments=list.getData(true);}};var __buildSearch=function(o){o.Search_Keyword=typeof o.Search_Keyword==='string'?o.Search_Keyword.toLowerCase():o.Search_Keyword;};var __buildCDH=function(o){o.CDH_Algolia_UserID=(''+o.User_LoginStatus).match(/Logged/i)&&o.User_Email_MD5?o.User_Email_MD5:o.tealium_visitor_id;};var __buildSession=function(o){{o.Session_IdTimeStamp=COOKIE.get('tealium_data_session_timeStamp',0);o.Session_Serial=STORAGE.getItem('tealium_data_session_serial',0);if(o.Session_IdTimeStamp===0){o.Session_IdTimeStamp=Date.now();o.Session_Serial=parseInt(o.Session_Serial,10)+1;}
else if(o.Session_Serial===0){o.Session_Serial=1;}
COOKIE.set('tealium_data_session_timeStamp',o.Session_IdTimeStamp);STORAGE.setItem('tealium_data_session_serial',o.Session_Serial,'forever');}
{var currentDate=new Date();o.Session_Time_Hour=('0'+currentDate.getHours()).slice(-2);o.Session_Time_DayOfWeek='Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',')[currentDate.getDay()];o.Session_Time=(currentDate.getYear()>115&&currentDate.getYear()<130)?'y'+currentDate.getYear().toString().substring(1)
+' m'+(101+currentDate.getMonth()).toString().substring(1)
+' d'+(100+currentDate.getDate()).toString().substring(1)
+' h'+o.Session_Time_Hour
+' w'+o.Session_Time_DayOfWeek:'';}
{o.Session_Status=(o.Session_Status&&(''+o.Session_Status).match(/^(On|Off)$/i))?o.Session_Status:'';}
{o.Session_Id=(typeof o.Session_Id==='string'&&o.Session_Id!='')?o.Session_Id:'Unknown';}};var __buildProductsOrder=function(o){tealium_objReplace(o.Products,[','],'|',['OosOptions','Engraving','Badges','InsuranceBenefits']);var temp=tealium_objReplace(o.Products,'htmlEntities');var temp2=tealium_objReplace(o.Products,'csvSeparator',null,null,['Image','Url']);UTAG_HELPER.sendBug(o,'','2356',(temp.isReplaced||temp2.isReplaced?'WR':'CR'));var Order='';var Cart='';var ViewPdp='';var ViewPlp='';var View;var ViewOther='';//@TODO: to rename with 'Other' and to check the condition where it is applied!
{if(o.Order_Id&&(!o.Order_CancellationId)&&(!o.Return_Type)&&o.Page_Type.match(/ThankYou/i))Order=1;else if(o.Page_Type.match(/Cart/i)||o.Page_Section1.match(/checkout/i))Cart=1;else if((o.Tracking_EventId.match(/QuickViewOverlay|Impression/i)&&o.Page_Section2.match(/QuickView/i))||(o.Tracking_EventId.match(/PageView/i)&&o.Page_Type.match(/Pdp/i))||(o.Tracking_EventId.match(/PageView/i)&&o.Page_Type.match(/Pcp/i)&&o.Page_Brand.match(/^OO|OSI$/i))||(o.Tracking_EventId.match(/OneConfigurator/i)&&o.Oneconf_Action==='Loaded')||(o.Tracking_EventId.match(/Loading-Ready/i)&&o.Page_Type.match(/Pcp/i)&&o.Events_CPLoaded==='1'))ViewPdp=1;else if(o.Tracking_EventId.match(/PageView/i)&&o.Page_Type.match(/Plp/i))ViewPlp=1;else if(o.Products&&Object.getOwnPropertyNames(o.Products).length>0)ViewOther=1;View=ViewPdp||ViewPlp;}
{if(o.Order_CartId&&!STORAGE.getItem('tealium_data_cart_id','')){STORAGE.setItem('tealium_data_cart_id',o.Order_CartId);}
if(o.Order_CartUrl&&!STORAGE.getItem('tealium_data_cart_url','')){STORAGE.setItem('tealium_data_cart_url',o.Order_CartUrl);}
if(Order&&o.Order_Currency){var today=new Date();if(today.getYear()>115&&today.getYear()<130){o.Order_CurrencyAndTimestamp=o.Order_Currency+'-'+today.getYear().toString().substring(1)+(101+today.getMonth()).toString().substring(1);}}
if(o.Order_DiscountCode&&typeof o.Order_DiscountCode=='string'&&o.Order_DiscountCode!='Unknown'){if(Order){o.Order_DiscountCode=o.Order_DiscountCode.replace(' - applied','');}
else{if(!o.Order_DiscountCode.match(/ - applied| - tentative/))o.Order_DiscountCode+=' - applied';}}
if(o.Order_DiscountAmount&&parseFloat(o.Order_DiscountAmount)!==0&&Order){o.Order_DiscountMethod=(o.Order_DiscountCode)?'Discount (promo code)':'Discount';}
if(Order){o.Order_Id_Prefixed=(''+o.Page_Platform).replace(/ /g,'-')+'_'+o.Order_Id;o.Order_Id_PurchaseAdobe=((''+o.Page_Platform).match(/^SS/i))?(''+o.Page_Platform).substr(2,1)+(''+o.Order_Id).split('#')[0]+(''+o.Order_Id).slice((''+o.Order_Id).length-(20-(''+o.Order_Id).split('#')[0].length-1))
:((''+o.Order_Id_Prefixed).length>20)?(''+o.Order_Id_Prefixed).slice((''+o.Order_Id_Prefixed).length-20)
:o.Order_Id_Prefixed;}
else delete o.Order_Id;if(o.Order_GiftCardCode&&typeof o.Order_GiftCardCode=='string'&&o.Order_GiftCardCode!='Unknown'){if(Order){o.Order_GiftCardCode=o.Order_GiftCardCode.replace(' - applied','');}
else{if(!o.Order_GiftCardCode.match(/ - applied| - tentative/))o.Order_GiftCardCode+=' - applied';}}else if(!o.Order_GiftCardCode&&(''+o.Order_PaymentType).match(/GiftCard/i)){o.Order_GiftCardCode='Unknown';}
if(o.Order_InsuranceCode&&typeof o.Order_InsuranceCode=='string'&&o.Order_InsuranceCode!='Unknown'){if(Order){o.Order_InsuranceCode=o.Order_InsuranceCode.replace(' - applied','');}
else{if(!o.Order_InsuranceCode.match(/ - applied| - tentative/))o.Order_InsuranceCode+=' - applied';}}
if(o.Order_InsuranceBenefits&&!STORAGE.getItem('tealium_data_orderInsuranceBenefits','')){STORAGE.setItem('tealium_data_orderInsuranceBenefits',o.Order_InsuranceBenefits);}
if(Order&&(''+o.Order_PaymentType).match(/,GiftCard|GiftCard,/)){o.Order_PaymentType=o.Order_PaymentType.replace(/,GiftCard|GiftCard,/gi,'');}
if(!o.Order_TaxIncluded){o.Order_TaxIncluded=UtagSettings.get('Order_TaxIncluded',o);}
if(Order){if(o.Products){var flag=false;for(var index2 in o.Products){if(!o.Products.hasOwnProperty(index2)){continue;}
if(o.Products[index2].Preorder==='1'){flag=true;break;}}
if(flag)o.Order_Type='Preorder';}
o.Order_Type=o.Order_Type===''?'Standard':o.Order_Type;}}
if(Order){o.Order_ProductsUnits=(!isNaN(parseFloat(o.Order_ProductsUnits)))?parseInt(o.Order_ProductsUnits,10):0;o.Order_ProductsAmount=(!isNaN(parseFloat(o.Order_ProductsAmount)))?parseFloat(o.Order_ProductsAmount):0;o.Order_DiscountAmount=(!isNaN(parseFloat(o.Order_DiscountAmount)))?parseFloat(Math.abs(parseFloat(o.Order_DiscountAmount))*-1):0;o.Order_ShippingAmount=(!isNaN(parseFloat(o.Order_ShippingAmount)))?parseFloat(o.Order_ShippingAmount):0;o.Order_TaxAmount=(!isNaN(parseFloat(o.Order_TaxAmount)))?parseFloat(o.Order_TaxAmount):0;o.Order_TotalAmount=(!isNaN(parseFloat(o.Order_TotalAmount)))?parseFloat(o.Order_TotalAmount):0;o.Order_ProductsTaxRate=(!isNaN(parseFloat(o.Order_ProductsTaxRate)))?parseFloat(o.Order_ProductsTaxRate):UtagSettings.get('Order_ProductsTaxRate',o)||((!o.Order_ProductsAmount||!o.Order_TaxAmount)?0:(Math.round(o.Order_TaxAmount/(o.Order_ProductsAmount+o.Order_DiscountAmount+(o.Page_Platform.match(/wcs/i)?0:o.Order_ShippingAmount)-((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_TaxAmount:0))*100000)/100000));o.Order_ShippingTaxRate=(!isNaN(parseFloat(o.Order_ShippingTaxRate)))?parseFloat(o.Order_ShippingTaxRate):o.Order_ProductsTaxRate;o.Order_ProductsRevenue=(!isNaN(parseFloat(o.Order_ProductsRevenue)))?parseFloat(o.Order_ProductsRevenue):+(o.Order_ProductsAmount/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_ProductsTaxRate:0))).toFixed(2);o.Order_DiscountRevenue=(!isNaN(parseFloat(o.Order_DiscountRevenue)))?parseFloat(o.Order_DiscountRevenue):+(o.Order_DiscountAmount/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_ProductsTaxRate:0))).toFixed(2);o.Order_ShippingRevenue=(!isNaN(parseFloat(o.Order_ShippingRevenue)))?parseFloat(o.Order_ShippingRevenue):+(o.Order_ShippingAmount/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_ShippingTaxRate:0))).toFixed(2);o.Order_ProductsTax=(!isNaN(parseFloat(o.Order_ProductsTax)))?parseFloat(o.Order_ProductsTax):(Math.round((o.Order_ProductsRevenue+o.Order_DiscountRevenue)*o.Order_ProductsTaxRate*100)/100);o.Order_ProductsRevenueTaxInc=(!isNaN(parseFloat(o.Order_ProductsRevenueTaxInc)))?parseFloat(o.Order_ProductsRevenueTaxInc):(Math.round((o.Order_ProductsRevenue+o.Order_ProductsTax)*100)/100);o.Order_DiscountTax=(!isNaN(parseFloat(o.Order_DiscountTax)))?parseFloat(o.Order_DiscountTax):(Math.round(o.Order_DiscountRevenue*o.Order_ProductsTaxRate*100)/100);o.Order_DiscountRevenueTaxInc=(!isNaN(parseFloat(o.Order_DiscountRevenueTaxInc)))?parseFloat(o.Order_DiscountRevenueTaxInc):(o.Order_DiscountRevenue+o.Order_DiscountTax);o.Order_DiscountRate=(!isNaN(parseFloat(o.Order_DiscountRate)))?parseFloat(o.Order_DiscountRate):(o.Order_ProductsRevenue)?(Math.round(o.Order_DiscountRevenue/o.Order_ProductsRevenue*10000)/10000):0;o.Order_ShippingTax=(!isNaN(parseFloat(o.Order_ShippingTax)))?parseFloat(o.Order_ShippingTax):(Math.round(o.Order_ShippingRevenue*o.Order_ShippingTaxRate*100)/100);o.Order_ShippingRevenueTaxInc=(!isNaN(parseFloat(o.Order_ShippingRevenueTaxInc)))?parseFloat(o.Order_ShippingRevenueTaxInc):(o.Order_ShippingRevenue+o.Order_ShippingTax);o.Order_Engraving=typeof o.Order_Engraving==='string'?o.Order_Engraving:'N';o.Order_EngravingUnits='';o.Order_InsuranceAmount=(!isNaN(parseFloat(o.Order_InsuranceAmount)))?parseFloat(Math.abs(parseFloat(o.Order_InsuranceAmount))*-1):0;}
var prog={rev:0,revT:0,dis:0,disT:0,uni:0,giftrev:0,giftuni:0,ins:0};if(Order||Cart||View||ViewOther){var prod=o.Products?o.Products:{};var return_reason_list=[];o.Products_Id_Array=[];o.Products_Id_Normalized_Array=[];o.Products_Category_Array=[];o.Products_Units_Array=[];o.Products_EngravingText_Array=[];o.Products_Engraving_Array=[];o.Products_FrameTechnology_Array=[];o.Products_LensTechnology_Array=[];o.Products_ModelName_Array=[];o.Products_Shape_Array=[];o.Products_Brand_Array=[];o.Products_Sku_Array=[];o.Products_FrameType_Array=[];o.Products_LensType_Array=[];o.Products_ModelCode_Array=[];o.Products_Lens_Array=[];o.Products_Frame_Array=[];o.Products_Case_Array=[];o.Products_Size_Array=[];o.Products_Badges_Array=[];o.Products_MoCo_Array=[];o.Products_Image_Array=[];o.Products_Url_Array=[];o.Products_LensUPC_Array=[];o.Products_InsuranceCode_Array=[];o.Products_InsuranceBenefits_Array=[];o.Products_ShippingTo_Array=[];o.Products_Status_Array=[];o.Products_Preorder_Array=[];o.Products_Visibility_Array=[];o.Products_Fg_Badge_Array=[];o.Products_Fg_BestMatch_Array=[];o.Products_Sg_Badge_Array=[];o.Products_Sg_BestMatch_Array=[];o.Products_Vm_Badge_Array=[];o.Products_La_Badge_Array=[];o.Products_Conf_IsUpcSupported_Array=[];o.Products_Recom_Badge_Array=[];if(ViewOther||View){o.Products_Tags_Array=[];o.Products_OosOptions_Array=[];if(ViewPdp){o.Products_ViewPdp_Array=[];o.Products_ViewPdp_Ecom_Array=[];o.Products_ViewPdp_EcomOos_Array=[];o.Products_ViewPdp_EcomOosEmailView_Array=[];o.Products_Price_Array=[];o.Products_PriceFull_Array=[];o.Products_PricePerUnits_Array=[];o.Products_PriceFullPerUnits_Array=[];o.Products_DiscountPricePerUnits_Array=[];}else if(ViewPlp){o.Products_ViewPlp_Array=[];}}
if(o.Events_CartAdd=='1'||Cart){o.Products_CartUnits_Array=[];o.Products_CartUnique_Array=[];}
if(o.Events_CartAdd=='1'||o.Page_Type.match(/Cart/i)||(o.Page_Type.match(/Overlay/i)&&o.Page_Section2.match(/MiniCart/i))||o.Tracking_EventId.match(/MiniCartOverlay-Open|Cart-Preview/i)){o.Products_Price_Array=[];o.Products_PriceFull_Array=[];o.Products_PricePerUnits_Array=[];o.Products_PriceFullPerUnits_Array=[];o.Products_DiscountPricePerUnits_Array=[];}
if(o.Page_Type.match(/pcp/i)&&(o.Events_CartAdd=='1'||o.Events_CPRecipeSaved=='1')){o.Products_Conf_Change_Array=[];}
if(Order){o.Products_CartUnique_Array=[];o.Products_Price_Array=[];o.Products_PriceFull_Array=[];o.Products_PricePerUnits_Array=[];o.Products_PriceFullPerUnits_Array=[];o.Products_DiscountPricePerUnits_Array=[];o.Products_Revenue_Array=[];o.Products_RevenuePerUnit_Array=[];o.Products_RevenueTaxInc_Array=[];o.Products_Tax_Array=[];o.Products_TaxRate_Array=[];o.Products_Discount_Array=[];o.Products_DiscountPerUnit_Array=[];o.Products_DiscountTax_Array=[];o.Products_DiscountTaxInc_Array=[];o.Products_DiscountUnits_Array=[];o.GiftCard_Revenue_Array=[];o.GiftCard_Units_Array=[];o.GiftCard_Bought='N';}
for(var index in prod){if(!prod.hasOwnProperty(index)){continue;}
prod[index].IdNormalized=typeof prod[index].IdNormalized==='string'?prod[index].IdNormalized:index.replace(/^Rmx_.+/,'remix').replace(/#.*/,'');prod[index].Category=typeof prod[index].Category==='string'?prod[index].Category.replace(/(\s)+&\s+/g,'$1'):'N.A.';prod[index].Units=UTAG_HELPER.getUnitsISOFormat((typeof prod[index].Units==='string'?prod[index].Units.replace(',',''):prod[index].Units),1);prod[index].Units=ViewPdp?1:prod[index].Units>0?prod[index].Units:1;prod[index].Price=UTAG_HELPER.getPriceISOFormat(typeof prod[index].Price==='string'?prod[index].Price.replace(',',''):prod[index].Price);prod[index].PriceFull=UTAG_HELPER.getPriceISOFormat(typeof prod[index].PriceFull==='string'?prod[index].PriceFull.replace(',',''):prod[index].PriceFull);prod[index].PricePerUnits=prod[index].Price*prod[index].Units;prod[index].PriceFullPerUnits=prod[index].PriceFull*prod[index].Units;prod[index].DiscountPricePerUnits=Math.round(((prod[index].PriceFullPerUnits-prod[index].PricePerUnits)*100)/prod[index].PriceFullPerUnits)+'%';prod[index].EngravingText=typeof prod[index].EngravingText==='string'?prod[index].EngravingText:'';prod[index].FrameTechnology=typeof prod[index].FrameTechnology==='string'?prod[index].FrameTechnology:'';prod[index].LensTechnology=typeof prod[index].LensTechnology==='string'?prod[index].LensTechnology:'';prod[index].ModelName=typeof prod[index].ModelName==='string'?prod[index].ModelName:'';prod[index].Shape=typeof prod[index].Shape==='string'?prod[index].Shape:'';prod[index].Brand=typeof prod[index].Brand==='string'?prod[index].Brand:'';prod[index].Sku=typeof prod[index].Sku==='string'?prod[index].Sku:'';prod[index].Type=typeof prod[index].Type==='string'?prod[index].Type:'';prod[index].FrameType=typeof prod[index].FrameType==='string'&&prod[index].FrameType=='CP'?'CP':'NA';prod[index].LensType=typeof prod[index].LensType==='string'&&prod[index].LensType&&(!prod[index].Category.match(/CONTACT LENSES/i))?prod[index].LensType:'';prod[index].Size=typeof prod[index].Size==='string'?prod[index].Size.replace(/ +/g,''):'';prod[index].ModelCode=typeof prod[index].ModelCode==='string'?prod[index].ModelCode:'';prod[index].Lens=typeof prod[index].Lens==='string'?prod[index].Lens:'';prod[index].Frame=typeof prod[index].Frame==='string'?prod[index].Frame:'';prod[index].Case=typeof prod[index].Case==='string'?prod[index].Case:'';prod[index].Engraving=typeof prod[index].Engraving==='string'?prod[index].Engraving.replace(/, /g,'|').replace(/ ,/g,'|').replace(/,/g,'|').replace(/ +/g,'|'):'';prod[index].LensUPC=typeof prod[index].LensUPC==='string'?prod[index].LensUPC:'';prod[index].MoCo=typeof prod[index].MoCo==='string'?prod[index].MoCo:'';prod[index].Image=typeof prod[index].Image==='string'?prod[index].Image:'';prod[index].Url=typeof prod[index].Url==='string'?prod[index].Url:'';prod[index].InsuranceCode=typeof prod[index].InsuranceCode==='string'?prod[index].InsuranceCode:'';prod[index].InsuranceBenefits=typeof prod[index].InsuranceBenefits==='string'?prod[index].InsuranceBenefits:'';prod[index].Badges=typeof prod[index].Badges==='string'&&prod[index].Badges!=''?prod[index].Badges:o.Page_QueryString.match(/frameadvisor=true/i)?'FrameAdv':'';prod[index].ShippingTo=typeof prod[index].ShippingTo==='string'?prod[index].ShippingTo:'';if(prod[index].ShippingTo&&o.Store_Id){prod[index].ShippingTo=(prod[index].ShippingTo==o.Store_Id?'self':'door')+'-'+prod[index].ShippingTo;}
prod[index].Status=typeof prod[index].Status==='string'?prod[index].Status:'Unknown';prod[index].Preorder=typeof prod[index].Preorder==='string'?prod[index].Preorder:'';prod[index].Visibility=typeof prod[index].Visibility==='string'?(prod[index].Visibility?prod[index].Visibility:'Public'):'';if(prod[index].Preorder=='1'){if((''+o.Page_Brand).match(/^MYL/i)){if(prod[index].Status.match(/Available/i))prod[index].Status='coming soon';}
else{if(prod[index].Status.match(/^(Available|Out-of-stock|SoldOut)$/i))prod[index].Status+='-PreOrder';}}
prod[index].Return_Reason=typeof prod[index].Return_Reason==='string'?prod[index].Return_Reason:'';prod[index].Fg_Badge=(((''+o.Page_Section1).match(/^FrameGenius$/i)&&(''+o.Page_Section2).match(/^Pdp$/i))||o.Events_FGFit=='1')?'Y':'';prod[index].Fg_BestMatch=typeof prod[index].Fg_BestMatch==='string'?prod[index].Fg_BestMatch:'';prod[index].Sg_BestMatch=typeof prod[index].Sg_BestMatch==='string'?prod[index].Sg_BestMatch:'';prod[index].Sg_Badge=(o.Events_CartAdd=='1'&&prod[index].Sg_BestMatch)?'Y':'';prod[index].La_Badge=(o.Events_CartAdd=='1'&&o.La_Badge=='1')?'Y':'';prod[index].Conf_Change=(''+o.Page_Type).match(/pcp/i)?(STORAGE.getItem('tealium_data_conf_change','').split(':')[1]||''):'';prod[index].Vm_Badge=o.Events_VMFit=='1'?'Y':'';prod[index].Recom_Badge=((''+o.Page_Type).match(/pdp/i)||o.Events_CartAdd=='1')&&COOKIE.get('tealium_data_action_lastAction','').match(/Recommendations Tile/i)?'Y':'';if(Order){prod[index].TaxRate=(!isNaN(parseFloat(prod[index].TaxRate)))?parseFloat(prod[index].TaxRate):(o.Order_ProductsTaxRate!=='')?o.Order_ProductsTaxRate:0;prod[index].RevenueAmount=(!isNaN(parseFloat(prod[index].RevenueAmount)))?parseFloat(prod[index].RevenueAmount):0;prod[index].Revenue=0;if(prod[index].Revenue===0&&prod[index].Price!==0){prod[index].Revenue=Math.round(prod[index].Price*prod[index].Units/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?(prod[index].TaxRate):0))*100)/100;}
if(prod[index].Revenue===0&&prod[index].RevenueAmount!==0){prod[index].Revenue=Math.round(parseFloat(prod[index].RevenueAmount)/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?(prod[index].TaxRate):0))*100)/100;}
if(prod[index].Price===0&&prod[index].Revenue!==0){prod[index].Price=Math.round(prod[index].Revenue/prod[index].Units*(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?(prod[index].TaxRate):0))*100)/100;}
if(prod[index].Revenue<0)prod[index].Revenue=0;prod[index].Revenue=(!isNaN(parseFloat(prod[index].Revenue)))?Math.round(prod[index].Revenue*100)/100:0;prod[index].GiftCardUnits=(prod[index].Category.match(/gift/i))?prod[index].Units:0;prod[index].GiftCardRevenue=(prod[index].Category.match(/gift/i))?prod[index].Revenue:0;o.GiftCard_Bought=(prod[index].Category.match(/gift/i))?'Y':o.GiftCard_Bought;prod[index].Discount=(!isNaN(parseFloat(prod[index].Discount)))?parseFloat(prod[index].Discount):Math.round(prod[index].Revenue*o.Order_DiscountRate*100)/100;prod[index].DiscountUnits=(!isNaN(parseFloat(prod[index].DiscountUnits)))?parseInt(prod[index].DiscountUnits,10):(o.Order_DiscountRate&&o.Order_DiscountRate!=='0')?(prod[index].Units):0;if(prod[index].Discount){prod[index].Revenue=prod[index].Revenue+prod[index].Discount;}
prod[index].InsuranceAmount=(!isNaN(parseFloat(prod[index].InsuranceAmount)))?-Math.abs(parseFloat(prod[index].InsuranceAmount)):0;if(prod[index].InsuranceAmount){prod[index].Revenue=prod[index].Revenue-prod[index].InsuranceAmount;}
prod[index].RevenuePerUnit=(!isNaN(parseFloat(prod[index].Units)))?Math.round(prod[index].Revenue/prod[index].Units*100)/100:0;prod[index].DiscountPerUnit=(!isNaN(parseFloat(prod[index].Units)))?Math.round(prod[index].Discount/prod[index].Units*100)/100:0;prod[index].Tax=(!isNaN(parseFloat(prod[index].Tax)))?parseFloat(prod[index].Tax):Math.round(prod[index].Revenue*prod[index].TaxRate*100)/100;prod[index].RevenueTaxInc=(!isNaN(parseFloat(prod[index].RevenueTaxInc)))?parseFloat(prod[index].RevenueTaxInc):(prod[index].Revenue+prod[index].Tax);prod[index].DiscountTax=(!isNaN(parseFloat(prod[index].DiscountTax)))?parseFloat(prod[index].DiscountTax):Math.round(prod[index].Discount*prod[index].TaxRate*100)/100;prod[index].DiscountTaxInc=(!isNaN(parseFloat(prod[index].DiscountTaxInc)))?parseFloat(prod[index].DiscountTaxInc):(prod[index].Discount+prod[index].DiscountTax);prod[index].Id=index;}
if(ViewOther||View){prod[index].Tags=typeof prod[index].Tags==='string'?prod[index].Tags:'';prod[index].OosOptions=typeof prod[index].OosOptions==='string'?prod[index].OosOptions:'';prod[index].Conf_IsUpcSupported=prod[index].Conf_IsUpcSupported==='1'?'Y':'';if(ViewPdp){prod[index].ViewPdp='Y';prod[index].ViewPdp_Ecom=prod[index].Status.match(/^available(|-(oneleft|twoleft|fewleft|MTO|PreOrder))$/i)?'Y'
:(o.Page_Brand=='RB'&&o.Tracking_EventId.match(/Prods-Update/i)&&(''+o.Page_Type).match(/PClp/i))?'Y':'';prod[index].ViewPdp_EcomOos=prod[index].Status.match(/^(out-of-stock)(-PreOrder)?$/i)?'Y':'';prod[index].ViewPdp_EcomOosEmailView=prod[index].Status.match(/out-of-stock/i)&&prod[index].OosOptions.match(/EmailMeWhenAvailable/i)?'Y':'';prod[index].ViewPdp_EcomOos=prod[index].ViewPdp_EcomOos||prod[index].ViewPdp_EcomOosEmailView;}
if(ViewPlp){prod[index].ViewPlp='Y';}}
if(ViewOther||View||Cart){if(prod[index].Type.match(/CP/i)){prod[index].Id=index;}
else{prod[index].Id=index;}}
{var suffix=(''+prod[index].Id).match(/#.+_|#.+$/);if(suffix){suffix=suffix[0].split('_')[0];prod[index].Id=prod[index].Id.replace(suffix,'')+suffix;}}
{var errore='';var prop='';var tocheckNeg=['Price','Revenue','RevenueAmount','RevenuePerUnit','RevenueTaxInc','Tax','TaxRate'];var tocheckPos=['Discount','DiscountTax','DiscountTaxInc'];var	tocheckHig={'USD':1600,'EUR':1500,'GBP':1400};for(prop in tocheckNeg)if(prod[index][tocheckNeg[prop]]<0){errore=tocheckNeg[prop]+' = '+prod[index][tocheckNeg[prop]]+' Order_Id:'+o.Order_Id+'for prod '+index;prod[index][tocheckNeg[prop]]=0;}
for(prop in tocheckPos)if(tocheckPos.hasOwnProperty(prop)&&prod[index][tocheckPos[prop]]>0){errore=tocheckPos[prop]+' = '+prod[index][tocheckPos[prop]]+' Order_Id:'+o.Order_Id+'for prod '+index;prod[index][tocheckPos[prop]]=0;}
if(o.Order_Currency){var pmedio=1*(prod[index].Revenue/prod[index].Units).toFixed(2);if(tocheckHig[o.Order_Currency]&&pmedio>tocheckHig[o.Order_Currency]){errore='revenue per unit = '+pmedio+' for '+index;prod[index].Revenue=prod[index].Units*tocheckHig[o.Order_Currency];}}
if(errore)tealium_log.builder.set('error',o,'builder Products-Order: '+errore);}
o.Products_Id_Array.push(prod[index].Id?(''+prod[index].Id).replace(/_?#.*/,''):'');o.Products_Id_Normalized_Array.push(prod[index].IdNormalized);o.Products_Category_Array.push(prod[index].Category);o.Products_Units_Array.push(prod[index].Units);o.Products_EngravingText_Array.push(prod[index].EngravingText);o.Products_Engraving_Array.push(prod[index].Engraving);o.Products_FrameTechnology_Array.push(prod[index].FrameTechnology);o.Products_LensTechnology_Array.push(prod[index].LensTechnology);o.Products_ModelName_Array.push(prod[index].ModelName);o.Products_Shape_Array.push(prod[index].Shape);o.Products_Brand_Array.push(prod[index].Brand);o.Products_Sku_Array.push(prod[index].Sku);o.Products_FrameType_Array.push(prod[index].FrameType);o.Products_LensType_Array.push(prod[index].LensType);o.Products_ModelCode_Array.push(prod[index].ModelCode);o.Products_Lens_Array.push(prod[index].Lens);o.Products_Frame_Array.push(prod[index].Frame);o.Products_Case_Array.push(prod[index].Case);o.Products_Size_Array.push(prod[index].Size);o.Products_LensUPC_Array.push(prod[index].LensUPC);o.Products_Badges_Array.push(prod[index].Badges);o.Products_InsuranceCode_Array.push(prod[index].InsuranceCode);o.Products_InsuranceBenefits_Array.push(prod[index].InsuranceBenefits);o.Products_ShippingTo_Array.push(prod[index].ShippingTo);o.Products_MoCo_Array.push(prod[index].MoCo);o.Products_Image_Array.push(prod[index].Image);o.Products_Url_Array.push(prod[index].Url);o.Products_Status_Array.push(prod[index].Status);o.Products_Preorder_Array.push(prod[index].Preorder);o.Products_Visibility_Array.push(prod[index].Visibility);o.Products_Fg_Badge_Array.push(prod[index].Fg_Badge);o.Products_Fg_BestMatch_Array.push(prod[index].Fg_BestMatch);o.Products_Sg_Badge_Array.push(prod[index].Sg_Badge);o.Products_Sg_BestMatch_Array.push(prod[index].Sg_BestMatch);o.Products_Vm_Badge_Array.push(prod[index].Vm_Badge);o.Products_La_Badge_Array.push(prod[index].La_Badge);o.Products_Conf_IsUpcSupported_Array.push(prod[index].Conf_IsUpcSupported);o.Products_Recom_Badge_Array.push(prod[index].Recom_Badge);if(ViewOther||View){o.Products_Tags_Array.push(prod[index].Tags);o.Products_OosOptions_Array.push(prod[index].OosOptions);if(ViewPdp){o.Products_ViewPdp_Array.push(prod[index].ViewPdp);o.Products_ViewPdp_Ecom_Array.push(prod[index].ViewPdp_Ecom);o.Products_ViewPdp_EcomOos_Array.push(prod[index].ViewPdp_EcomOos);o.Products_ViewPdp_EcomOosEmailView_Array.push(prod[index].ViewPdp_EcomOosEmailView);o.Products_Price_Array.push(prod[index].Price);o.Products_PriceFull_Array.push(prod[index].PriceFull);o.Products_PricePerUnits_Array.push(prod[index].PricePerUnits);o.Products_PriceFullPerUnits_Array.push(prod[index].PriceFullPerUnits);o.Products_DiscountPricePerUnits_Array.push(prod[index].DiscountPricePerUnits);}else if(ViewPlp){o.Products_ViewPlp_Array.push(prod[index].ViewPlp);}}
if(o.Events_CartAdd=='1'||Cart){o.Products_CartUnits_Array.push(prod[index].Units);o.Products_CartUnique_Array.push('1');}
if(o.Events_CartAdd=='1'||o.Page_Type.match(/Cart/i)||(o.Page_Type.match(/Overlay/i)&&o.Page_Section2.match(/MiniCart/i))||o.Tracking_EventId.match(/MiniCartOverlay-Open|Cart-Preview/i)){o.Products_Price_Array.push(prod[index].Price);o.Products_PriceFull_Array.push(prod[index].PriceFull);o.Products_PricePerUnits_Array.push(prod[index].PricePerUnits);o.Products_PriceFullPerUnits_Array.push(prod[index].PriceFullPerUnits);o.Products_DiscountPricePerUnits_Array.push(prod[index].DiscountPricePerUnits);}
if(o.Page_Type.match(/pcp/i)&&(o.Events_CartAdd=='1'||o.Events_CPRecipeSaved=='1')){o.Products_Conf_Change_Array.push(prod[index].Conf_Change);}
if(Order){o.Products_CartUnique_Array.push('1');o.Products_Price_Array.push(prod[index].Price);o.Products_PriceFull_Array.push(prod[index].PriceFull);o.Products_PricePerUnits_Array.push(prod[index].PricePerUnits);o.Products_PriceFullPerUnits_Array.push(prod[index].PriceFullPerUnits);o.Products_DiscountPricePerUnits_Array.push(prod[index].DiscountPricePerUnits);o.Products_Revenue_Array.push(prod[index].Revenue);o.Products_RevenuePerUnit_Array.push(prod[index].RevenuePerUnit);o.Products_RevenueTaxInc_Array.push(prod[index].RevenueTaxInc);o.Products_TaxRate_Array.push(prod[index].TaxRate);o.Products_Tax_Array.push(prod[index].Tax);o.Products_Discount_Array.push(prod[index].Discount);o.Products_DiscountPerUnit_Array.push(prod[index].DiscountPerUnit);o.Products_DiscountTax_Array.push(prod[index].DiscountTax);o.Products_DiscountTaxInc_Array.push(prod[index].DiscountTaxInc);o.Products_DiscountUnits_Array.push(prod[index].DiscountUnits);o.GiftCard_Units_Array.push(prod[index].GiftCardUnits);o.GiftCard_Revenue_Array.push(prod[index].GiftCardRevenue);}
if(Order){prog.rev+=parseFloat(prod[index].Revenue);prog.uni+=parseFloat(prod[index].Units);prog.revT+=parseFloat(prod[index].Tax);prog.dis+=parseFloat(prod[index].Discount);prog.disT+=parseFloat(prod[index].DiscountTax);prog.ins+=parseFloat(prod[index].InsuranceAmount);}
{if(!o.Order_InsuranceCode&&prod[index].InsuranceCode)o.Order_InsuranceCode=prod[index].InsuranceCode;if(!o.Order_InsuranceBenefits&&prod[index].InsuranceBenefits)o.Order_InsuranceBenefits=(''+prod[index].InsuranceBenefits).replace(/\|/g,',');if(prod[index].Engraving&&prod[index].Engraving!='N'){o.Order_Engraving='Y';o.Order_EngravingUnits=typeof o.Order_EngravingUnits==='string'&&parseInt(o.Order_EngravingUnits)>0?(''+(parseInt(o.Order_EngravingUnits)+parseInt(prod[index].Units))):(''+prod[index].Units);}
if(!o.Return_Reasons&&prod[index].Return_Reason)return_reason_list.push(prod[index].Return_Reason);}}
if(Order&&o.GiftCard_Bought=='N'){delete o.GiftCard_Revenue_Array;delete o.GiftCard_Units_Array;}
if(!o.Return_Reasons&&return_reason_list.length>0)o.Return_Reasons=return_reason_list.join(',');for(index in o){if(o.hasOwnProperty(index)&&typeof index==='string'&&index.match(/^Products_.+_Array$/)){if(!index.match(/^Products_(Image|Url)_Array$/)){o[index.replace(/_Array/,'_Csv')]=o[index].join();}}}
utag.data.Products=JSON.parse(JSON.stringify(prod));}
if(Order){if(!o.Order_ProductsUnits)o.Order_ProductsUnits=prog.uni;if(!o.Order_ProductsRevenue)o.Order_ProductsRevenue=prog.rev;if(!o.Order_ProductsTax)o.Order_ProductsTax=prog.revT;if(!o.Order_ProductsRevenueTaxInc)o.Order_ProductsRevenueTaxInc=prog.revT+prog.rev;if(!o.Order_ProductsAmount)o.Order_ProductsAmount=(o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_ProductsRevenueTaxInc:o.Order_ProductsRevenue;if(!o.Order_DiscountRevenue)o.Order_DiscountRevenue=prog.dis;if(!o.Order_DiscountTax)o.Order_DiscountTax=prog.disT;if(!o.Order_DiscountRevenueTaxInc)o.Order_DiscountRevenueTaxInc=prog.disT+prog.dis;if(!o.Order_TaxAmount)o.Order_TaxAmount=prog.revT+o.Order_ShippingTax;if(!o.Order_TotalAmount)o.Order_TotalAmount=+(prog.rev+prog.revT+o.Order_ShippingRevenueTaxInc).toFixed(2);if(!o.Order_InsuranceAmount)o.Order_InsuranceAmount=prog.ins;o.Order_ProductsUnits=''+o.Order_ProductsUnits;o.Order_ProductsAmount=''+o.Order_ProductsAmount;o.Order_DiscountAmount=''+o.Order_DiscountAmount;o.Order_ShippingAmount=''+o.Order_ShippingAmount;o.Order_TaxAmount=''+o.Order_TaxAmount;o.Order_TotalAmount=''+o.Order_TotalAmount;o.Order_ProductsRevenue=''+o.Order_ProductsRevenue;o.Order_ProductsRevenueTaxInc=''+o.Order_ProductsRevenueTaxInc;o.Order_ProductsTax=''+o.Order_ProductsTax;o.Order_ProductsTaxRate=''+o.Order_ProductsTaxRate;o.Order_DiscountRate=''+o.Order_DiscountRate;o.Order_DiscountRevenue=''+o.Order_DiscountRevenue;o.Order_DiscountRevenueTaxInc=''+o.Order_DiscountRevenueTaxInc;o.Order_DiscountTax=''+o.Order_DiscountTax;o.Order_ShippingRevenue=''+o.Order_ShippingRevenue;o.Order_ShippingRevenueTaxInc=''+o.Order_ShippingRevenueTaxInc;o.Order_ShippingTax=''+o.Order_ShippingTax;o.Order_ShippingTaxRate=''+o.Order_ShippingTaxRate;o.Order_InsuranceAmount=''+o.Order_InsuranceAmount;}};var __buildErrors=function(o){if(o.Error_Detail&&!o.Error_Details)o.Error_Details=o.Error_Detail;{if(typeof o.Error_Source==='string'){o.Error_SourceLabel=(o.Error_Source.match(/404/i)&&document.referrer.indexOf(location.protocol+'//'+location.host)===0)?'CONTENT':(o.Error_Source.match(/404/i)&&document.referrer.indexOf(location.protocol+'//'+location.host)!==0)?'MARKETING':(o.Error_Source.match(/Server|Client|Anomaly/i))?'IT':(o.Error_Source.match(/User/i))?'UX':(o.Error_Source.match(/Product/i))?'PRODUCT':(o.Error_Source)?'UNKNOWN':'';}
o.Error_Code=typeof o.Error_Code==='string'?tealium_textClean(o.Error_Code,'[nomultiplespaces][nobreaks]'):'';if(o.Error_Code==='')delete o.Error_Code;else{o.Error_Code=(o.Error_SourceLabel?o.Error_SourceLabel+': ':'')+o.Error_Code;if(o.Error_Code.match(/404/))o.page_type='errorPage';}
if(o.Error_Code)o.Error_Details=tealium_textClean(o.Error_Details||'','[nobreaks][nomultiplespaces]');}};var __buildAction=function(o){o.Content_Box=(o.Content_Box||'').replace(/[\[\]\|]/g,'');o.Content_Description=(o.Content_Description||'').replace(/[\[\]\|]/g,'');o.Action_Type=(o.Action_Type&&o.Action_Type.match(/view|click/))?o.Action_Type:(o.Content_Box||o.Content_Description)?'click':(o.Tracking_EventId.match(/PageView/))?'view':'event';if(o.Action_Type==='event')return;var dat=new Date();o.Action_PreviousAction=COOKIE.get('tealium_data_action_lastAction','');o.Action_PreviousEvent=COOKIE.get('tealium_data_action_lastEvent','');o.Action_TimeStamp=Date.now();o.Action_Serial=parseInt(STORAGE.getItem('tealium_data_action_lastSerial',0),10)+1;o.Action_TimeElapsed=parseInt(STORAGE.getItem('tealium_data_action_lastTimeStamp',0),10);o.Action_TimeElapsed=(((o.Action_TimeStamp-((o.Action_TimeElapsed===0)?(o.Action_TimeStamp):(o.Action_TimeElapsed)))/1000).toFixed(0));o.Action_Time=(dat.getYear()>115&&dat.getYear()<130)?'y'+dat.getYear().toString().substring(1)
+' m'+(101+dat.getMonth()).toString().substring(1)
+' d'+(100+dat.getDate()).toString().substring(1)
+' h'+('0'+dat.getHours()).slice(-2)
+' w'+'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',')[dat.getDay()]:'';if(o.Action_Serial==1){o.Action_PreviousEvent=tealium_querystring_object.cid?'cid':'';o.Action_PreviousAction='external-https'+(o.Action_PreviousEvent?' '+o.Action_PreviousEvent:'');}
o.Action_Page=(o.Page_Name||'');if(o.Action_Page.match(/:/)&&o.Page_Name.match(/([^\/]+)\/(clv|plp|clp)/))
o.Action_Page=o.Action_Page.replace(/:/,':'+/([^\/]+)\/(clv|plp|clp)/.exec(o.Page_Name)[1]+':');o.Action_Page=o.Action_Page.replace(/[\[\]\|]/g,'');o.Action_Event='';if(o.Action_Type=='click'){o.Action_Event+='click ['+o.Content_Box+']';if(o.Content_Description)o.Action_Event+='['+o.Content_Description.substring(0,25)+']';}
o.Action=o.Action_Page+(o.Action_Event?' '+o.Action_Event:'');o.Action_Combo=o.Action.trim()+'|'+o.Action_PreviousAction.trim();o.Action_Combo=o.Action_Combo.replace(/^\||\|$/,'');o.Action_Timeline='u'+o.User_IdTimeStamp+' '
+'v'+(('000'+o.Session_Serial).slice(-2))+' '
+'a'+(('000'+o.Action_Serial).slice(-3))+' '
+(('000'+o.Action_TimeElapsed).slice(-3))+'s '
+o.Action;o.Events_Action=o.Session_Serial+(('000'+o.Action_Serial).slice(-3));};var __buildEventSource=function(o){var prev_action=COOKIE.get('tealium_data_action_lastAction','');var prev_pagetype=prev_action?prev_action.split(' ')[0].split(':').pop():'';var prev_event=COOKIE.get('tealium_data_action_lastEvent','');var prev_contentbox='External';if(o.Event_Source)prev_contentbox=o.Event_Source;else if(o.Tracking_EventId=='Click'&&o.Content_Box&&(Object.keys(o).filter(function(prop){if(prop.match(/^Events_/)&&o[prop]==1)return true;})).length>0){prev_contentbox=o.Content_Box.split(' ').slice(0,2).join(' ');}
else if(prev_event)prev_contentbox=prev_event.match('[:#]')?'Unknown element':prev_event.replace(/]/g,'').split('[')[1].split(' ').slice(0,2).join(' ');else prev_pagetype='';o.Event_Source=(prev_pagetype?(prev_pagetype+' '):'')+prev_contentbox;};var __buildEvents=function(o){if(!o.Events_Array||Object.keys(o.Events_Array).length===0){o.Events_Array={'Action':{'enabled':1,'sitecat':'event45','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'ActionContactUs':{'enabled':1,'sitecat':'event72','tealiumEventName':'action_contactus','tofire':0,'fired':0,'value':'','serialization':''},'CartAdd':{'enabled':1,'sitecat':'scAdd,scOpen','tealiumEventName':'cart_add','tofire':0,'fired':0,'value':'','serialization':''},'CartCreate':{'enabled':1,'sitecat':'scOpen','tealiumEventName':'cart_create','tofire':0,'fired':0,'value':'','serialization':''},'CartRemove':{'enabled':1,'sitecat':'scRemove','tealiumEventName':'cart_remove','tofire':0,'fired':0,'value':'','serialization':''},'CartView':{'enabled':1,'sitecat':'scView,event187','tealiumEventName':'cart_view','tofire':0,'fired':0,'value':'','serialization':''},'Checkout':{'enabled':1,'sitecat':'scCheckout','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutLogin':{'enabled':1,'sitecat':'event186,scCheckout','tealiumEventName':'checkout_login','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutDelivery':{'enabled':1,'sitecat':'event21,scCheckout','tealiumEventName':'checkout_delivery','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutShipping':{'enabled':1,'sitecat':'event136,scCheckout','tealiumEventName':'checkout_shipping','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutPayment':{'enabled':1,'sitecat':'event22,scCheckout','tealiumEventName':'checkout_payment','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutSummary':{'enabled':1,'sitecat':'event74,scCheckout','tealiumEventName':'checkout_summary','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutStandard':{'enabled':1,'sitecat':'event184,scCheckout','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutExpress':{'enabled':1,'sitecat':'event185,scCheckout','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutQoto':{'enabled':1,'sitecat':'event188,scCheckout','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CheckoutReorder':{'enabled':1,'sitecat':'event189,scCheckout','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'ErrorBlocking':{'enabled':1,'sitecat':'event4','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'ErrorNotBlocking':{'enabled':1,'sitecat':'event58','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'Error404':{'enabled':1,'sitecat':'event51','tealiumEventName':'error_404','tofire':0,'fired':0,'value':'','serialization':''},'ErrorContent':{'enabled':1,'sitecat':'event55,event4','tealiumEventName':'error_content','tofire':0,'fired':0,'value':'','serialization':''},'ErrorIT':{'enabled':1,'sitecat':'event52,event4','tealiumEventName':'error_it','tofire':0,'fired':0,'value':'','serialization':''},'ErrorMarketing':{'enabled':1,'sitecat':'event82,event4','tealiumEventName':'error_mktg','tofire':0,'fired':0,'value':'','serialization':''},'ErrorUX':{'enabled':1,'sitecat':'event53,event58','tealiumEventName':'error_ux','tofire':0,'fired':0,'value':'','serialization':''},'ErrorProduct':{'enabled':1,'sitecat':'event50,event58','tealiumEventName':'error_product','tofire':0,'fired':0,'value':'','serialization':''},'ErrorTealium':{'enabled':1,'sitecat':'event69','tealiumEventName':'error_tealium','tofire':0,'fired':0,'value':'','serialization':''},'UserEmailSub':{'enabled':1,'sitecat':'event3','tealiumEventName':'email_signup','tofire':0,'fired':0,'value':'','serialization':''},'UserEmailUnsub':{'enabled':1,'sitecat':'event38','tealiumEventName':'email_signoff','tofire':0,'fired':0,'value':'','serialization':''},'UserPhoneSub':{'enabled':1,'sitecat':'event12','tealiumEventName':'phone_signup','tofire':0,'fired':0,'value':'','serialization':''},'UserAccountNew':{'enabled':1,'sitecat':'event2','tealiumEventName':'user_register','tofire':0,'fired':0,'value':'','serialization':''},'UserLogin':{'enabled':1,'sitecat':'event1','tealiumEventName':'user_login','tofire':0,'fired':0,'value':'','serialization':''},'GiftcardOrd':{'enabled':1,'sitecat':'event20','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'OrderReminderSave':{'enabled':1,'sitecat':'event28','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'OrderCancel':{'enabled':1,'sitecat':'event70','tealiumEventName':'order_cancel','tofire':0,'fired':0,'value':'','serialization':''},'OrderCreate':{'enabled':1,'sitecat':'','tealiumEventName':'purchase','tofire':0,'fired':0,'value':'','serialization':''},'OrderPaymentGiftcard':{'enabled':1,'sitecat':'event61','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'OrderShippingRev':{'enabled':1,'sitecat':'event25,event26','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'OrderShippingTax':{'enabled':1,'sitecat':'event63,event64','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'OrderWithDiscount':{'enabled':1,'sitecat':'event19','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'OrderWithEngraving':{'enabled':1,'sitecat':'event79','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'OrderWithGift':{'enabled':1,'sitecat':'event16','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'OrderWithSubscription':{'enabled':1,'sitecat':'event94','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'UnitsWithEngraving':{'enabled':1,'sitecat':'event78','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'PageView':{'enabled':0,'sitecat':'','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'PrescriptionOk':{'enabled':1,'sitecat':'event77','tealiumEventName':'prescription_ok','tofire':0,'fired':0,'value':'','serialization':''},'ProdFavAdd':{'enabled':1,'sitecat':'event9,prodView','tealiumEventName':'fav_add','tofire':0,'fired':0,'value':'','serialization':''},'ProdView':{'enabled':1,'sitecat':'','tealiumEventName':'product_view','tofire':0,'fired':0,'value':'','serialization':''},'ProdViewEcomOosEmailClick':{'enabled':1,'sitecat':'event46','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'ProdListView':{'enabled':1,'sitecat':'','tealiumEventName':'prodlist_view','tofire':0,'fired':0,'value':'','serialization':''},'QubitImpression':{'enabled':1,'sitecat':'event57','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'ReturnCreate':{'enabled':1,'sitecat':'event39','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'SearchRun':{'enabled':1,'sitecat':'event5,event6','tealiumEventName':'search_view','tofire':0,'fired':0,'value':'','serialization':''},'SearchImg':{'enabled':1,'sitecat':'event91','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'SearchSugg':{'enabled':1,'sitecat':'event93','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'SearchText':{'enabled':1,'sitecat':'event92','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'SearchBarcode':{'enabled':1,'sitecat':'event95','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'SearchFiltering':{'enabled':1,'sitecat':'event10,event23','tealiumEventName':'facet_applied','tofire':0,'fired':0,'value':'','serialization':''},'SocialShare':{'enabled':1,'sitecat':'event14','tealiumEventName':'share','tofire':0,'fired':0,'value':'','serialization':''},'Store_SearchNoResults':{'enabled':1,'sitecat':'event36','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'Store_SearchQueries':{'enabled':1,'sitecat':'event35','tealiumEventName':'store_search_queries','tofire':0,'fired':0,'value':'','serialization':''},'FunnelFindStore':{'enabled':1,'sitecat':'event73','tealiumEventName':'exam_step1','tofire':0,'fired':0,'value':'','serialization':''},'FunnelStoreSearch':{'enabled':1,'sitecat':'event87,event35','tealiumEventName':'exam_search','tofire':0,'fired':0,'value':'','serialization':''},'FunnelQuestion1':{'enabled':1,'sitecat':'event7,event113','tealiumEventName':'exam_question1','tofire':0,'fired':0,'value':'','serialization':''},'FunnelQuestion2':{'enabled':1,'sitecat':'event114','tealiumEventName':'exam_question2','tofire':0,'fired':0,'value':'','serialization':''},'FunnelQuestion3':{'enabled':1,'sitecat':'event115','tealiumEventName':'exam_question3','tofire':0,'fired':0,'value':'','serialization':''},'FunnelQuestion4':{'enabled':1,'sitecat':'event116','tealiumEventName':'exam_question4','tofire':0,'fired':0,'value':'','serialization':''},'FunnelQuestion5':{'enabled':1,'sitecat':'event117','tealiumEventName':'exam_question5','tofire':0,'fired':0,'value':'','serialization':''},'FunnelScheduler':{'enabled':1,'sitecat':'event118','tealiumEventName':'exam_scheduler','tofire':0,'fired':0,'value':'','serialization':''},'FunnelPersonalInfo':{'enabled':1,'sitecat':'event86','tealiumEventName':'exam_step2','tofire':0,'fired':0,'value':'','serialization':''},'FunnelReview':{'enabled':1,'sitecat':'event119','tealiumEventName':'examp_review','tofire':0,'fired':0,'value':'','serialization':''},'FunnelCancellation':{'enabled':1,'sitecat':'event75','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'FunnelAddExam':{'enabled':1,'sitecat':'event76','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'FunnelExamQty':{'enabled':1,'sitecat':'event67','tealiumEventName':'','tofire':0,'fired':0,'value':o.Exam_PatientNum,'serialization':''},'FunnelConfirmation':{'enabled':1,'sitecat':'event8,event76','tealiumEventName':'exam_confirmation','tofire':0,'fired':0,'value':'','serialization':''},'VMIsBrowserSupported':{'enabled':1,'sitecat':'event103','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'VMIsUpcSupported':{'enabled':1,'sitecat':'event104','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'VMRender':{'enabled':1,'sitecat':'event108','tealiumEventName':'vm_render','tofire':0,'fired':0,'value':'','serialization':''},'VMFit':{'enabled':1,'sitecat':'event111','tealiumEventName':'vm_fit','tofire':0,'fired':0,'value':'','serialization':''},'VMAdjust':{'enabled':1,'sitecat':'event112','tealiumEventName':'vm_adjust','tofire':0,'fired':0,'value':'','serialization':''},'VMCloseMirror':{'enabled':1,'sitecat':'event109','tealiumEventName':'vm_close_mirror','tofire':0,'fired':0,'value':'','serialization':''},'VMScreenshot':{'enabled':1,'sitecat':'event135','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CPIsUpcSupported':{'enabled':1,'sitecat':'event120','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CPLoaded':{'enabled':1,'sitecat':'event121','tealiumEventName':'cp_loaded','tofire':0,'fired':0,'value':'','serialization':''},'CPRecipeChanged':{'enabled':0,'sitecat':'','tealiumEventName':'cp_recipe_changed','tofire':0,'fired':0,'value':'','serialization':''},'CPConfirmConf':{'enabled':1,'sitecat':'event124','tealiumEventName':'cp_confirm','tofire':0,'fired':0,'value':'','serialization':''},'CPClosed':{'enabled':1,'sitecat':'event125','tealiumEventName':'cp_closed','tofire':0,'fired':0,'value':'','serialization':''},'CPComponentsEngagementIndexByVisit':{'enabled':1,'sitecat':'event126','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CPComponentsEngagementIndexByModel':{'enabled':1,'sitecat':'event129','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CPComponentsFirstInteractionsByVisit':{'enabled':1,'sitecat':'event127','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CPComponentsFirstInteractionsByModel':{'enabled':1,'sitecat':'event128','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CPSizeChanged':{'enabled':1,'sitecat':'event97','tealiumEventName':'cp_size_changed','tofire':0,'fired':0,'value':'','serialization':''},'CPEngravingChanged':{'enabled':1,'sitecat':'event98','tealiumEventName':'cp_frame_engraving_changed','tofire':0,'fired':0,'value':'','serialization':''},'CPRecipeSaved':{'enabled':1,'sitecat':'event99','tealiumEventName':'cp_recipe_saved','tofire':0,'fired':0,'value':'','serialization':''},'CPCaseEngravingChanged':{'enabled':1,'sitecat':'event17','tealiumEventName':'cp_case_engraving_changed','tofire':0,'fired':0,'value':'','serialization':''},'EditorialAdd':{'enabled':1,'sitecat':'event130','tealiumEventName':'editorial_add','tofire':0,'fired':0,'value':'','serialization':''},'EditorialRemove':{'enabled':1,'sitecat':'event131','tealiumEventName':'editorial_remove','tofire':0,'fired':0,'value':'','serialization':''},'EditorialShare':{'enabled':1,'sitecat':'event132','tealiumEventName':'editorial_share','tofire':0,'fired':0,'value':'','serialization':''},'EditorialDownload':{'enabled':1,'sitecat':'event133','tealiumEventName':'editorial_download','tofire':0,'fired':0,'value':'','serialization':''},'EditorialSend':{'enabled':1,'sitecat':'event134','tealiumEventName':'editorial_send','tofire':0,'fired':0,'value':'','serialization':''},'SessionStart':{'enabled':1,'sitecat':'event140','tealiumEventName':'session_start','tofire':0,'fired':0,'value':'','serialization':''},'RX_Type':{'enabled':1,'sitecat':'event150','tealiumEventName':'rx_type','tofire':0,'fired':0,'value':'','serialization':[(o.tealium_session_id+'_'+(o.Products_Id_Array||[])[0])]},'RX_Brand':{'enabled':1,'sitecat':'event151','tealiumEventName':'rx_brand','tofire':0,'fired':0,'value':'','serialization':[(o.tealium_session_id+'_'+(o.Products_Id_Array||[])[0])]},'RX_Material':{'enabled':1,'sitecat':'event152','tealiumEventName':'rx_material','tofire':0,'fired':0,'value':'','serialization':[(o.tealium_session_id+'_'+(o.Products_Id_Array||[])[0])]},'RX_Treatment':{'enabled':1,'sitecat':'event153','tealiumEventName':'rx_treatment','tofire':0,'fired':0,'value':'','serialization':[(o.tealium_session_id+'_'+(o.Products_Id_Array||[])[0])]},'RX_Review':{'enabled':1,'sitecat':'event154','tealiumEventName':'rx_review','tofire':0,'fired':0,'value':'','serialization':[(o.tealium_session_id+'_'+(o.Products_Id_Array||[])[0])]},'RX_Performance':{'enabled':1,'sitecat':'event155','tealiumEventName':'rx_performance','tofire':0,'fired':0,'value':'','serialization':[(o.tealium_session_id+'_'+(o.Products_Id_Array||[])[0])]},'FindStoreOpen':{'enabled':1,'sitecat':'event11','tealiumEventName':'find_store_open','tofire':0,'fired':0,'value':'','serialization':''},'FSCapture':{'enabled':1,'sitecat':'event170,event171','tealiumEventName':'fs_capture','tofire':0,'fired':0,'value':'','serialization':''},'FAResults':{'enabled':1,'sitecat':'event172,event173','tealiumEventName':'fa_results','tofire':0,'fired':0,'value':'','serialization':''},'FAStart':{'enabled':1,'sitecat':'event174','tealiumEventName':'fa_start','tofire':0,'fired':0,'value':'','serialization':''},'FAProdView':{'enabled':1,'sitecat':'event144','tealiumEventName':'fa_product_view','tofire':0,'fired':0,'value':'','serialization':''},'FAProfileSkinConfirmed':{'enabled':1,'sitecat':'event145','tealiumEventName':'fa_profile_skin','tofire':0,'fired':0,'value':'','serialization':''},'FAProfileChanged':{'enabled':1,'sitecat':'event146','tealiumEventName':'fa_profile_change','tofire':0,'fired':0,'value':'','serialization':''},'FGFit':{'enabled':1,'sitecat':'event147','tealiumEventName':'fa_fit','tofire':0,'fired':0,'value':'','serialization':''},'InsuranceApplied':{'enabled':1,'sitecat':'event180,event182','tealiumEventName':'insurance_applied','tofire':0,'fired':0,'value':'','serialization':''},'InsuranceTentative':{'enabled':1,'sitecat':'event181,event182','tealiumEventName':'insurance_tentative','tofire':0,'fired':0,'value':'','serialization':''},'InsuranceOpen':{'enabled':1,'sitecat':'event183','tealiumEventName':'insurance_open','tofire':0,'fired':0,'value':'','serialization':''},'CourseStart':{'enabled':1,'sitecat':'event41','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'CourseContinue':{'enabled':1,'sitecat':'event42','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''},'SavePrescriptionCL':{'enabled':1,'sitecat':'event190','tealiumEventName':'prescription_save_cl','tofire':0,'fired':0,'value':'','serialization':''},'SavePrescriptionEyewear':{'enabled':1,'sitecat':'event191','tealiumEventName':'prescription_save_cl','tofire':0,'fired':0,'value':'','serialization':''},'ProductComparatorView':{'enabled':1,'sitecat':'event192','tealiumEventName':'product_comparator_view','tofire':0,'fired':0,'value':'','serialization':''},'LASTLINE':{'enabled':0,'sitecat':'','tealiumEventName':'','tofire':0,'fired':0,'value':'','serialization':''}};o.Events_Array.ProdView.detection=function(){return((''+o.Products_ViewPdp_Csv).match(/Y/)||(''+o.Products_ViewPdp_Ecom_Csv).match(/Y/)||(''+o.Products_ViewPdp_EcomOos_Csv).match(/Y/)||(''+o.Products_ViewPdp_EcomOosEmailView_Csv).match(/Y/));};o.Events_Array.ProdListView.detection=function(){return((''+o.Products_ViewPlp_Csv).match(/Y/));};if(o.Order_Id&&!o.Order_CancellationId){o.Events_Array.OrderCreate.detection=function(){return(((o.Order_Id_Prefixed||o.Order_Id_PurchaseAdobe)&&((''+o.Tracking_EventId).match(/VirtualPage-View/i)||___.length(o.Products)>0))?true:false);};o.Events_Array.GiftcardOrd.detection=function(){return(o.Products_Category_Csv&&o.Products_Category_Csv.match(/GiftCard/i));};o.Events_Array.OrderPaymentGiftcard.detection=function(){return(o.Order_GiftCardCode&&o.Order_GiftCardCode!=='');};o.Events_Array.OrderWithDiscount.detection=function(){return(o.Order_DiscountAmount&&parseInt(o.Order_DiscountAmount,10)!==0&&o.Order_Id&&o.Page_Type&&o.Page_Type.match(/ThankYou/i));};o.Events_Array.OrderWithEngraving.detection=function(){return(o.Order_Engraving=='Y');};o.Events_Array.UnitsWithEngraving.detection=function(){if(typeof o.Order_EngravingUnits==='string'&&parseInt(o.Order_EngravingUnits)>0){o.Events_Array.UnitsWithEngraving.value=o.Order_EngravingUnits;return true;}return false;};o.Events_Array.OrderShippingRev.detection=function(){if(o.Order_ShippingRevenue){o.Events_Array.OrderShippingRev.value=o.Order_ShippingRevenue;return true;}return false;};o.Events_Array.OrderShippingTax.detection=function(){if(o.Order_ShippingTax){o.Events_Array.OrderShippingTax.value=o.Order_ShippingTax;return true;}return false;};}
o.Events_Array.OrderWithSubscription.detection=function(){return(o.Order_SubscriptionFrequency&&o.Order_SubscriptionFrequency!=='0');};o.Events_Array.CheckoutExpress.detection=function(){return(''+o.Page_Section1).match(/^Checkout$/i)&&((''+o.Page_Section2).match(/^Express$/i)||(''+o.Order_PaymentType).match(/ExpressCheckout/i));};o.Events_Array.CheckoutStandard.detection=function(){return(''+o.Page_Section1).match(/^Checkout$/i)&&(''+o.Page_Section2).match(/^Standard$/i)&&(!(''+o.Page_Type).match(/^(Thankyou|Login&Register)$/i));};o.Events_Array.CheckoutQoto.detection=function(){return(''+o.Page_Section1).match(/^Checkout$/i)&&(''+o.Page_Section2).match(/^Qoto$/i)&&(!(''+o.Page_Type).match(/^(Thankyou|Login&Register)$/i));};o.Events_Array.CheckoutReorder.detection=function(){return(''+o.Page_Section1).match(/^Checkout$/i)&&(''+o.Page_Section2).match(/^Reorder$/i)&&(!(''+o.Page_Type).match(/^(Thankyou|Login&Register)$/i));};o.Events_Array.ErrorTealium.detection=function(){return(o.Error_Tealium?true:false);};o.Events_Array.FunnelFindStore.detection=function(){return(o.Action_Type=='view'&&((o.Page_Type=='FindStore'&&o.Page_Section1=='Exam')||o.Page_Section2=='FindStore'));};o.Events_Array.FunnelStoreSearch.detection=function(){return(o.Store_Search_Keyword||o.Store_Search_Type);};o.Events_Array.FunnelPersonalInfo.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Info'&&o.Page_Section1=='Exam'&&(!o.Page_Section2||o.Page_Section2==''||(''+o.Page_Section2).match(/^PersonalInfo$/i)));};o.Events_Array.FunnelQuestion1.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Info'&&o.Page_Section1=='Exam'&&o.Page_Section2=='Question1');};o.Events_Array.FunnelQuestion2.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Info'&&o.Page_Section1=='Exam'&&o.Page_Section2=='Question2');};o.Events_Array.FunnelQuestion3.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Info'&&o.Page_Section1=='Exam'&&o.Page_Section2=='Question3');};o.Events_Array.FunnelQuestion4.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Info'&&o.Page_Section1=='Exam'&&o.Page_Section2=='Question4');};o.Events_Array.FunnelQuestion5.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Info'&&o.Page_Section1=='Exam'&&o.Page_Section2=='Question5');};o.Events_Array.FunnelScheduler.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Info'&&o.Page_Section1=='Exam'&&o.Page_Section2=='Scheduler');};o.Events_Array.FunnelReview.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Review'&&o.Page_Section1=='Exam');};o.Events_Array.FunnelConfirmation.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Confirmation'&&o.Page_Section1=='Exam');};o.Events_Array.FunnelCancellation.detection=function(){return(o.Action_Type=='view'&&o.Page_Type=='Cancellation'&&o.Page_Section1=='Exam');};o.Events_Array.RX_Type.detection=function(){return(o.Action_Type=='view'&&(''+o.Page_Section1).match(/LensPanel/i)&&(''+o.Page_Section2).match(/LensType/i));};o.Events_Array.RX_Performance.detection=function(){return(o.Action_Type=='view'&&(''+o.Page_Section1).match(/LensPanel/i)&&(''+o.Page_Section2).match(/LensPerformance/i));};o.Events_Array.RX_Brand.detection=function(){return(o.Action_Type=='view'&&(''+o.Page_Section1).match(/LensPanel/i)&&(''+o.Page_Section2).match(/LensBrand/i));};o.Events_Array.RX_Material.detection=function(){return(o.Action_Type=='view'&&(''+o.Page_Section1).match(/LensPanel/i)&&(''+o.Page_Section2).match(/LensMaterial/i));};o.Events_Array.RX_Treatment.detection=function(){return(o.Action_Type=='view'&&(''+o.Page_Section1).match(/LensPanel/i)&&(''+o.Page_Section2).match(/LensTreatment/i));};o.Events_Array.RX_Review.detection=function(){return(o.Action_Type=='view'&&(''+o.Page_Section1).match(/LensPanel/i)&&(''+o.Page_Section2).match(/LensReview/i));};o.Events_Array.FAResults.detection=function(){return(o.Page_Type=='Plp'&&(''+o.Page_Section1).match(/^FrameAdv$/i));};o.Events_Array.FAStart.detection=function(){return((''+o.Page_Type).match(/^(Connection|Facescan|Survey)$/i)&&(''+o.Page_Section1).match(/^FrameAdv$/i));};o.Events_Array.FAProdView.detection=function(){return((''+o.Page_Section1).match(/^FrameGenius$/i)&&(''+o.Page_Section2).match(/^Pdp$/i));};o.Events_Array.CPIsUpcSupported.detection=function(){return((''+o.Page_Type).match(/^(Pdp|Pcp)$/i)&&(''+o.Products_Conf_IsUpcSupported_Csv).match(/Y/));};o.Events_Array.VMIsBrowserSupported.detection=function(){return(o.Vm_IsBrowserSupported&&o.Vm_IsBrowserSupported==='1');};o.Events_Array.VMIsUpcSupported.detection=function(){return(o.Vm_IsUpcSupported&&o.Vm_IsUpcSupported==='1');};o.Events_Array.VMScreenshot.detection=function(){return(o.Action_Type=='click'&&(''+o.Content_Box).match(/VirtualMirror Screenshot/i));};o.Events_Array.VMAdjust.detection=function(){return(o.Action_Type=='click'&&(''+o.Content_Box).match(/VirtualMirror Adjust/i));};o.Events_Array.VMCloseMirror.detection=function(){return(o.Action_Type=='click'&&(''+o.Content_Box).match(/VirtualMirror Close/i));};o.Events_Array.SearchRun.detection=function(){return o.Search_Keyword?true:false;};o.Events_Array.SearchFiltering.detection=function(){return o.Search_FacetValues_String?true:false;};o.Events_Array.ProductComparatorView.detection=function(){return o.Action_Type=='view'&&(''+o.Page_Type).match(/^Comparator$/i)&&(''+o.Page_Section1).match(/^Comparator$/i)?true:false;};o.Events_Array.InsuranceOpen.detection=function(){return o.Action_Type=='view'&&(''+o.Tracking_EventId).match(/Impression$/)&&(''+o.Page_Section2).match(/^InsurancePanel$/i)?true:false;};tealium_log.old('events object created');}else{tealium_log.old('events object already existing');}
{var temp,el;//@NOTE: IMPORTANT! Per evitare anomalie di override di event_name dovremmo verificare per ogni evento della mappa se  stato inviato da datalayer e/o esiste una detection!!!
for(el in o)if(o.hasOwnProperty(el)&&typeof el==='string'&&el.match(/^Events_/)&&el!='Events_Array'){if(!o[el]||o[el]==0){delete o[el];continue;}
tealium_log.old('detection '+el.replace('Events_','')+' by Events_');temp='';if(o.Events_Array[el.replace('Events_','')]!==undefined)temp=el.replace('Events_','');if(temp){o.Events_Array[temp].tofire=1;if(o[el]!==1&&o[el]!=='1')o.Events_Array[temp].value=o[el];}
else tealium_log.oldcall(o,'detection '+el.replace('Events_','')+' not in Events_Array','Bug');delete o[el];}
for(temp in o.Events_Array)
if(o.Events_Array.hasOwnProperty(temp)&&o.Events_Array[temp].detection&&o.Events_Array[temp].detection()){tealium_log.old('detection '+temp+' by method');o.Events_Array[temp].tofire=1;}
{if(o.Page_Type!='Unknown'&&(!o.Tracking_EventId||o.Tracking_EventId.match(/PageView|Impression|MiniCart|Cart-Preview/i))){switch(o.Page_Type.toLowerCase()){case'cart':case'cartpage':o.Events_Array.CartView.tofire=1;break;case'login&register':{if(o.Page_Section1&&(''+o.Page_Section1).match(/Checkout/i)){o.Events_Array.CheckoutLogin.tofire=1;o.Events_Array.Checkout.tofire=1;}
break;}
case'delivery':o.Events_Array.CheckoutDelivery.tofire=1;o.Events_Array.Checkout.tofire=1;break;case'shipping':o.Events_Array.CheckoutShipping.tofire=1;o.Events_Array.Checkout.tofire=1;break;case'payment':o.Events_Array.CheckoutPayment.tofire=1;o.Events_Array.Checkout.tofire=1;break;case'ordersummary':o.Events_Array.CheckoutSummary.tofire=1;o.Events_Array.Checkout.tofire=1;break;case'thankyou':{o.Events_Array.Checkout.tofire=1;break;}
case'checkout':case'doctor':case'prescription':case'prescriptionok':{if(o.Page_Section1&&(''+o.Page_Section1).match(/Checkout/i)){o.Events_Array.Checkout.tofire=1;}
break;}}}
{if(o.Error_SourceLabel){switch(o.Error_SourceLabel){case'IT':o.Events_Array.ErrorIT.tofire=1;break;case'CONTENT':o.Events_Array.ErrorContent.tofire=1;o.Events_Array.Error404.tofire=(''+o.Error_Source).match(/404/i)?1:0;break;case'MARKETING':o.Events_Array.ErrorMarketing.tofire=1;o.Events_Array.Error404.tofire=(''+o.Error_Source).match(/404/i)?1:0;break;case'UX':o.Events_Array.ErrorUX.tofire=1;break;case'PRODUCT':o.Events_Array.ErrorProduct.tofire=1;break;default:o.Events_Array.ErrorNotBlocking.tofire=1;}
tealium_log.old('detection Error by Error_Source');}
if(o.Events_Array.Error404.tofire===1&&o.Page_Name&&o.Page_Name.match(/checkout|:cart:/i)){o.Events_Array.Error404.tofire=0;o.Events_Array.ErrorIT.tofire=1;tealium_log.old('switch Error from 404 to Server');}}
if(typeof o.Search_Type==='string'&&o.Events_Array.SearchRun.tofire==1){o.Search_Type=o.Search_Type.toLowerCase();switch(o.Search_Type){case'img':o.Events_Array.SearchImg.tofire=1;break;case'suggested':o.Events_Array.SearchSugg.tofire=1;break;case'text':o.Events_Array.SearchText.tofire=1;break;case'free':o.Events_Array.SearchText.tofire=1;break;case'barcode':o.Events_Array.SearchBarcode.tofire=1;break;}}
if(o.Events_Array){if(o.Events_Array.FunnelStoreSearch.tofire==1&&o.Store_Search_ResultItemsQnt=='0'){o.Events_Array.Store_SearchNoResults.tofire=1;}}}
if((''+o.Page_Platform).match(/^SS/i)){if((''+o.Session_Status).match(/Off/i)&&o.Events_Array.SessionStart.tofire==1){if(window.utag_data){delete window.utag_data.Session_Status;delete window.utag_data.Session_IdTimeStamp;delete window.utag_data.Session_Serial;delete window.utag_data.Action;delete window.utag_data.Action_Event;delete window.utag_data.Action_Serial;delete window.utag_data.Action_TimeStamp;}
{var filter='^(tealium_data|tealium_data2track|tealium_configurator_usage)';STORAGE.removeItems(filter);COOKIE.removeItems(filter);}
STORAGE.setItem('tealium_data2track_Events_SessionStart','1');STORAGE.setItem('tealium_data2track_Session_Status','On');}}
if(o.Page_Type.match(/pcp/i)){if((''+o.Tracking_EventId).match(/Loading-Ready$/i)&&o.Products_Id_Normalized_Csv){temp=STORAGE.getItem('tealium_data_conf_change','').split(':')[0];if(!temp||o.Products_Id_Normalized_Csv!=temp){STORAGE.setItem('tealium_data_conf_change',(o.Products_Id_Normalized_Csv+':'+'0'),'forever');}}
if(o.Events_Array.CPRecipeChanged.tofire==1&&o.Products_Id_Normalized_Csv){temp=STORAGE.getItem('tealium_data_conf_change','').split(':')[1];if(temp)STORAGE.setItem('tealium_data_conf_change',(o.Products_Id_Normalized_Csv+':'+(parseInt(temp)+1)),'forever');}
if(o.Events_Array.CartAdd.tofire==1||o.Events_Array.CPRecipeSaved.tofire==1){STORAGE.removeItem('tealium_data_conf_change');}}}
{o.Tags_AdobeAnalytics_Events=Object.keys(o.Events_Array).filter(function(e){if(e.match(/^Action$/))return false;return o.Events_Array[e].enabled==1&&o.Events_Array[e].tofire==1?true:false;}).join(',');}
{for(var key in o.Events_Array){if(o.Events_Array.hasOwnProperty(key)&&typeof key==='string'&&o.Events_Array[key].enabled===1&&o.Events_Array[key].tofire===1&&o.Events_Array[key].tealiumEventName!==''){o.event_name=o.Events_Array[key].tealiumEventName;}}}};var __updateStorage=function(o){var hidden=(!o.Tracking_Type||o.Tracking_Type!=='hiddenaction')?0:1;var aborto=(o.Tags__Abort)?1:0;if(!hidden&&!aborto){STORAGE.removeItems('^tealium_data2track_');}
STORAGE.setItem('tealium_data_user_segments',tealium_data_user_segments);if(!aborto){if(o.Action_Serial)STORAGE.setItem('tealium_data_action_lastSerial',o.Action_Serial);if(o.Action_TimeStamp)STORAGE.setItem('tealium_data_action_lastTimeStamp',o.Action_TimeStamp,'forever');if(o.Action)COOKIE.set('tealium_data_action_lastAction',o.Action);if(o.Action_Event)COOKIE.set('tealium_data_action_lastEvent',o.Action_Event);if(o.Action_Type=='view')STORAGE.removeItems('tealium_data_element_id_');}};this.export={resume:function(o){return ___.tryCatch(__resume,[o],'[ERROR]',__cname);},checkGet:function(o){return ___.tryCatch(__checkGet,[o],'[ERROR]',__cname);},checkStorage:function(o){return ___.tryCatch(__checkStorage,[o],'[ERROR]',__cname);},updateContext:function(o){return ___.tryCatch(__updateContext,[o],'[ERROR]',__cname);},buildPage:function(o){return ___.tryCatch(__buildPage,[o],'[ERROR]',__cname);},buildStore:function(o){return ___.tryCatch(__buildStore,[o],'[ERROR]',__cname);},buildTags:function(o){return ___.tryCatch(__buildTags,[o],'[ERROR]',__cname);},buildDevice:function(o){return ___.tryCatch(__buildDevice,[o],'[ERROR]',__cname);},buildUser:function(o){return ___.tryCatch(__buildUser,[o],'[ERROR]',__cname);},buildSearch:function(o){return ___.tryCatch(__buildSearch,[o],'[ERROR]',__cname);},buildCDH:function(o){return ___.tryCatch(__buildCDH,[o],'[ERROR]',__cname);},buildSession:function(o){return ___.tryCatch(__buildSession,[o],'[ERROR]',__cname);},buildProductsOrder:function(o){return ___.tryCatch(__buildProductsOrder,[o],'[ERROR]',__cname);},buildErrors:function(o){return ___.tryCatch(__buildErrors,[o],'[ERROR]',__cname);},buildAction:function(o){return ___.tryCatch(__buildAction,[o],'[ERROR]',__cname);},buildEventSource:function(o){return ___.tryCatch(__buildEventSource,[o],'[ERROR]',__cname);},buildEvents:function(o){return ___.tryCatch(__buildEvents,[o],'[ERROR]',__cname);},updateStorage:function(o){return ___.tryCatch(__updateStorage,[o],'[ERROR]',__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},UtagBuilderCTRL.prototype));}();tealium_logContext='preloader utag qa';tealium_logNote='';var UtagQA=function UtagQACTRL(){var __cname='UtagQA';var MLOG=__Utils__.MessageLogging;try{var ___=__Utils__.Common;var TC=__Utils__.TypeChecking;var STORAGE=__Utils__.Storage;var UTAG_HELPER=__Utils__.UtagHelper;var isAutoQAConfigured=false;var __configure=function(){if(!isAutoQAConfigured){MLOG.timeStart('AUTO QA: CONFIGURATION');AutoQAConfiguration();MLOG.timeEnd('AUTO QA: CONFIGURATION');isAutoQAConfigured=true;}};var __getCommon=function(datalayer,context_name){var common={};common.Page_Brand=UtagSettings.get('Brand');if(window.utag_data){var CDCT=AutoQAService.ConfigDatalayerContextTable;if(CDCT.isContextOnEvent(context_name)&&datalayer[context_name]!='Click'&&(!CDCT.isEventToUseAsPageContext(datalayer[context_name]))&&(!CDCT.isEventWithPageContext(datalayer[context_name]))){common.Page_Type=window.utag_data.Page_Type;}
var deps=['Page_Brand','Page_Platform'];for(var i=0;i<deps.length;i++)common[deps[i]]=common[deps[i]]||window.utag_data[deps[i]];}
return common;};var __getQuery=function(){var renamePropName={'^Products\\$\\$(.)+\\$\\$':'Prod_','^Products\\$\\$(.)+':'Prod_UPC',};var renameErrorMessage=function(){var causes=AutoQAService.ConfigErrorTable.getCauses();var map={};map['^'+causes.EXISTING+'$']='MS';map['^'+causes.FORMAT+'$']='FMT';map['(.)+']='WR';return map;}();var minPriority=AutoQAService.ConfigDatalayerTable.getMinPriority();var filterRows=function(selectors){return selectors['prop.priority']==minPriority&&selectors['error.priority']>-1;};return{select:['prop.name','error.message'],unique:true,groupby:'prop.priority',rename:{'prop.name':renamePropName,'error.message':renameErrorMessage,},separator:' ',filters:filterRows,};};var __apply=function(datalayer){MLOG.timeStart('AUTO QA: RUN');var context_name=AutoQAService.QADatalayer.findContextName(datalayer);if(context_name){datalayer.Result_QA=AutoQAService.run(datalayer,__getCommon(datalayer,context_name),UtagSettings.get('ProfileGroup'));datalayer.Error_DatalayerObject=AutoQAService.QAQueryResult.apply(__getQuery());UTAG_HELPER.sendQAErrors(datalayer,datalayer.Error_DatalayerObject);}
MLOG.timeEnd('AUTO QA: RUN');};var __run=function(datalayer){if(STORAGE.getItem('tealium_log','')!='show'){MLOG.showMessage({type:'warn',cname:__cname,fname:'__run',msg:'Invalid Precondition > tealium log is not enabled!'});return;}
if(TC.isObject(datalayer.Error_DatalayerObject))return;__configure();__apply(datalayer);};this.export={run:function(datalayer){return ___.tryCatch(__run,[datalayer],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},UtagQACTRL.prototype));}();tealium_logContext='preloader utag repairer';tealium_logNote='';var UtagRepairer=function UtagRepairerCTRL(){var __cname='UtagRepairer';var MLOG=__Utils__.MessageLogging;try{var temp;var TC=__Utils__.TypeChecking;var ___=__Utils__.Common;var COOKIE=__Utils__.Cookie;var STORAGE=__Utils__.Storage;var UTAG_HELPER=__Utils__.UtagHelper;var __getOrderCurrency=function(o){var CFG_OCPC=GlobalSettings.ConfigOrderCurrencyByPageCountryTable;if(TC.isString(o.Page_Country)&&CFG_OCPC.hasKey(o.Page_Country.toUpperCase()))return CFG_OCPC.getValue(o.Page_Country.toUpperCase());if(TC.isString(o.Order_Currency)&&/^[a-z]{3,3}$/gi.test(o.Order_Currency))return o.Order_Currency.toUpperCase();return'USD';};var __require=function(o){if(window.tealium_querystring_object){if(window.tealium_querystring_object.pid&&(!window.tealium_querystring_object.pid.match(/_/))){window.tealium_querystring_object.pid=window.tealium_querystring_object.pid+'_';}
if(window.tealium_querystring_object.cid&&(!window.tealium_querystring_object.cid.match(/_/))){window.tealium_querystring_object.cid=window.tealium_querystring_object.cid+'_';}}
o.Page_Brand=UtagSettings.get('Brand',o)||o.Page_Brand||'';o.Page_Environment=UtagSettings.get('Page_Environment',o);o.Order_Currency=__getOrderCurrency(o);};var __patch=function(o){{UTAG_HELPER.sendBugOldProp(o,'Order_GiftCard','Order_GiftCardCode','1918');if(o.Order_PaymentType){temp='CR';o.Order_PaymentTypeBefore=o.Order_PaymentType;o.Order_PaymentType=o.Order_PaymentType.trim()
.replace(/YKB_|Garnt_/i,'')
.replace(/master( )?card/i,'MasterCard')
.replace(/amex|american( )?express/i,'Amex')
.replace(/visa/i,'Visa')
.replace(/amex/i,'Amex')
.replace(/COD|Cash On Delivery/i,'Cash-On-Delivery')
.replace(/SOFORT/i,'Sofort')
.replace(/ideal/i,'Ideal')
.replace(/Gift Card/i,'GiftCard')
.replace(/apple( )?pay/i,'ApplePay');o.Order_PaymentType=(o.Order_PaymentType.match(/PaypalExp/i))?'PayPalExpressCheckout':(o.Order_PaymentType.match(/ApplePayExp/i))?'ApplePayExpressCheckout':o.Order_PaymentType;if(o.Order_PaymentTypeBefore!==o.Order_PaymentType){temp='WR';delete o.Order_PaymentTypeBefore;}
UTAG_HELPER.sendBug(o,'Order_PaymentType','',temp);}
if(o.Order_Id&&(o.Page_Type+'').match(/Thankyou/i)){temp='CR';if(!o.Order_ShippingMode){temp='MS';o.Order_ShippingMode='standard';}
UTAG_HELPER.sendBug(o,'Order_ShippingMode','',temp);}}
{if(typeof o.Page_Country==='string'&&o.Page_Country!='Unknown'){o.Page_Country_Prev=o.Page_Country;o.Page_Country=(o.Page_Country+'')
.replace(/M[1-3]/i,'MEA')
.replace(/S[1-3]/i,'SEE');temp=o.Page_Country_Prev!=o.Page_Country?'WR':'CR';delete o.Page_Country_Prev;STORAGE.setItem('tealium_data_page_countryLast',o.Page_Country);}else{o.Page_Country=STORAGE.getItem('tealium_data_page_countryLast','');STORAGE.removeItem('tealium_data_page_countryLast');temp='MS';}
UTAG_HELPER.sendBug(o,'Page_Country','',temp);temp='CR';if(!o.Page_Language){if(document.getElementsByTagName('html')[0].getAttribute('lang')){o.Page_Language=document.getElementsByTagName('html')[0].getAttribute('lang').toLowerCase().split('-').shift();}else{o.Page_Language=o.Page_Country?(o.Page_Country+'').toLowerCase():'';}
temp='MS';}
UTAG_HELPER.sendBug(o,'Page_Language','',temp);temp='CR';if(!o.Page_DeviceType){o.Page_DeviceType='D';if(0||window.location.pathname.match(/mobile/i)||window.location.hostname.match(/^m\./i)||(o.Page_Name+'').match(/:mobi:/i)||(o.Page_NameFull+'').match(/:mobi:/i)||(o.Page_Platform+'').match(/mobile/i)){o.Page_DeviceType='M';}
temp='MS';}
UTAG_HELPER.sendBug(o,'Page_DeviceType','',temp);if(!o.Page_Name){if(window.utag&&utag.data&&utag.data.Page_Name)o.Page_Name=utag.data.Page_Name;else if(window.utag_data&&utag_data.Page_Name)o.Page_Name=utag_data.Page_Name;}
if(!o.Page_Type&&o.Page_Name){temp=/([^:]+)$/.exec(o.Page_Name);o.Page_Type=temp?temp[1]:'';UTAG_HELPER.sendBug(o,'Page_TypeX','','MS');}
if(!o.Page_Section1&&o.Page_Name){temp=/^([^:]+)/.exec(o.Page_Name);o.Page_Section1=temp?temp[1]:'';UTAG_HELPER.sendBug(o,'Page_Section1X','','MS');}
if((o.Page_Section1+'').match(/Checkout/i)){o.Page_Section2_Prev=o.Page_Section2;if(!o.Page_Section2)o.Page_Section2='Standard';if((o.Order_PaymentType+'').match(/Express|^EXP/i)||(COOKIE.get('tealium_data_action_lastAction','')&&COOKIE.get('tealium_data_action_lastAction','').match(/checkout:express/i))){o.Page_Section2='Express';}
UTAG_HELPER.sendBug(o,'Page_Section2X','',(o.Page_Section2_Prev!=o.Page_Section2?'WR':'CR'));delete o.Page_Section2_Prev;}
if(o.Products){for(var index in o.Products){if(o.Products.hasOwnProperty(index)){if((''+o.Products[index].Category).match(/electronic/i)){o.Products[index].Category='Electronics';}
if((!o.Products[index].FrameType)||(!o.Products[index].LensType)){if((''+o.Products[index].Type)=='STD'){o.Products[index].FrameType='NA';o.Products[index].LensType='PLANO';UTAG_HELPER.sendBug(o,'','12099','WR');}
else if((''+o.Products[index].Type)=='RX'){o.Products[index].LensType='RX';if(index.match(/CP/))o.Products[index].FrameType='CP';else o.Products[index].FrameType='NA';UTAG_HELPER.sendBug(o,'','12099','WR');}
else if((''+o.Products[index].Type)=='CP'){o.Products[index].FrameType='CP';if((''+o.Products[index].Lens).match(/-7Y|-7H|-DE|-00|-65|-RH|-RY/))o.Products[index].LensType='RX';else o.Products[index].LensType='PLANO';UTAG_HELPER.sendBug(o,'','12099','WR');}
}}}}
if(o.Order_Id){if(!((''+o.Page_Type).match(/ThankYou/i)||(o.Page_Brand=='RB'&&o.Page_Name&&(''+o.Page_Name).match(/Checkout(.)*ThankYou$/i))//@NOTE: questa dovrebbe scomparire, Page_Type  l'unica soluzione
||((''+o.Page_Brand).match(/OO|OSI/i)&&(''+window.location.pathname).match(/checkout\/orderConfirmation/i))//@NOTE: questa dovrebbe scomparire, Page_Type  l'unica soluzione
)){UTAG_HELPER.sendBug(o,'Order_Id','','WR');delete o.Order_Id;delete o.order_id;}
else{if((''+o.Order_Id).match(new RegExp('^'+(''+o.Page_Platform+'_'))))UTAG_HELPER.sendBug(o,'','9180','WR');}}}};var __run=function(o){__require(o);if(o.Page_Environment=='PROD'||STORAGE.getItem('tealium_team','')=='lwa'){if(window.tealium_repairer_patches&&window.tealium_repairer_patches.apply)tealium_repairer_patches.apply(o);__patch(o);}
tealium_objReplace(o,'trim');//@NOTE: decide if you want to send a bug in case of trim is applied
};this.export={run:function(o){return ___.tryCatch(__run,[o],'[ERROR]',__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},UtagRepairerCTRL.prototype));}();tealium_logContext='preloader utag settings';tealium_logNote='';var UtagSettings=function UtagSettingsCTRL(){var __cname='UtagSettings';var MLOG=__Utils__.MessageLogging;try{var ___=__Utils__.Common;var MapObject=__Utils__.MapObject;var __table=new MapObject('function');var __get=function(name,o){var extVal;if(window.tealium_utag_settings&&window.tealium_utag_settings.apply)extVal=tealium_utag_settings.apply(name,o);return extVal||__table.getValue(name)(o);};var __set=function(name,callback){__table.setEntry(name,callback);};this.export={set:function(name,callback){return ___.tryCatch(__set,[name,callback],null,__cname);},get:function(name,o){return ___.tryCatch(__get,[name,o],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},UtagSettingsCTRL.prototype));}();var GlobalUtagSettingsConfiguration=function(){try{UtagSettings.set('Brand',function(o){return'';});UtagSettings.set('MultiBrand',function(o){return'';});UtagSettings.set('ProfileGroup',function(o){return'';});UtagSettings.set('ProfileName',function(o){return __Utils__.UtagHelper.getUtagProfile();});UtagSettings.set('Page_CountryThirdPlatforms',function(o){return'';});UtagSettings.set('Page_CountryEcommerce_YN',function(o){return'';});UtagSettings.set('Page_Environment',function(o){return __Utils__.UtagHelper.getUtagEnvironment()==='prod'?'PROD':'UAT';});UtagSettings.set('Order_ProductsTaxRate',function(o){return(!o||!o.Page_Country)?'':(o.Page_Country.match(/^BR$/))?0.2725:(o.Page_Country.match(/^(DK|NO|SE)$/))?0.25:(o.Page_Country.match(/^(FI|GR)$/))?0.24:(o.Page_Country.match(/^(IE|PL|PT)$/))?0.23:(o.Page_Country.match(/^(IT|SI)$/))?0.22:(o.Page_Country.match(/^(BE|CZ|ES|LT|LV|NL)$/))?0.21:(o.Page_Country.match(/^(AT|EE|FR|GB|SK)$/))?0.2:(o.Page_Country.match(/^(CY|DE)$/))?0.19:(o.Page_Country.match(/^(MT|TR)$/))?0.18:(o.Page_Country.match(/^(CN|LU)$/))?0.17:(o.Page_Country.match(/^MX$/))?0.16:(o.Page_Country.match(/^NZ$/))?0.125:(o.Page_Country.match(/^(AU|JP|MY)$/))?0.10:(o.Page_Country.match(/^CH$/))?0.077:(o.Page_Country.match(/^(SG|TH)$/))?0.07:(o.Page_Country.match(/^(CA|HK|IN|US)$/))?'':'';});UtagSettings.set('Order_TaxIncluded',function(o){return(!o||!o.Page_Country)?'':((o.Page_Country.match(/^(CA|US)$/))?'N':'Y');});UtagSettings.set('Tags__Abort',function(o){return((__Utils__.Storage.getItem('tealium_filter','')=='on')
||((!o.Tags_AdobeAnalytics_TrafficSourceCid_ThisSession||o.Tags_AdobeAnalytics_TrafficSourceCid_ThisSession=='')&&(window.screen.availHeight=='2000'&&window.screen.availWidth=='2000'))
||(!(!o.Tracking_Pusher||o.Tracking_Pusher=='data2track.push'||o.Tracking_Pusher=='utag.track'&&(''+o.Tracking_EventId)=='PageView:default'))
||(o.Action_Serial==1&&o.Action_Type=='click')
||(o.Events_Array.CPRecipeChanged.tofire==1&&(Object.keys(o.Events_Array).filter(function(e){if(!e.match(/^PerfTealium/i)&&o.Events_Array[e].tofire==1)return true;})).length==1)
||(UtagSettings.get('Tealium_Data2track_Limit',o)>-1&&UtagTracking.size()>=UtagSettings.get('Tealium_Data2track_Limit',o)))?1:0;});UtagSettings.set('Tags_AdobeAnalytics_RSID',function(o){return'lux-lf-dev';});UtagSettings.set('Tags_AdobeAnalytics_RSID_Alternative',function(o){//@TODO: IF <!Page_Country> OR <!Page_CountryEcommerce_YN> => Report Suite JUNK
return'';});UtagSettings.set('Tags_AdobeAnalytics_Server',function(o){//@NOTE: Tags_AdobeAnalytics_Server EQUALS TO Tags_AdobeAnalytics_ServerSecure => it could be useful to remove it
return'luxottica.d2.sc.omtrdc.net';});UtagSettings.set('Tags_AdobeAnalytics_ServerSecure',function(o){return'luxottica.d2.sc.omtrdc.net';});UtagSettings.set('Tealium_SinglePageApp',function(o){return'';});UtagSettings.set('Tealium_Data2track_Limit',function(o){return(UtagSettings.get('Tealium_SinglePageApp',o)=='Y'?10000:(''+o.Page_Type).match(/Pcp/)||(''+o.Page_Section2).match(/^OneConf:/i)||(''+o.Event_Source).match(/ Config /i)?200:(''+o.Page_Section1).match(/^(Sun)?LensPanel$/i)||(''+o.Action_PreviousAction).match(/^(Sun)?LensPanel:/i)||(''+o.Event_Source).match(/ LensPanel /i)?100:(''+o.Page_Section1).match(/^FrameGenius$/i)||(''+o.Action_PreviousAction).match(/^FrameGenius:/i)||(''+o.Event_Source).match(/ FrameGenius /i)?100:(''+o.Page_Section1).match(/^SizeGenius$/i)||(''+o.Action_PreviousAction).match(/^SizeGenius:/i)||(''+o.Event_Source).match(/ SizeGenius /i)?100:(''+o.Page_Section1).match(/^VirtualMirror$/i)||(''+o.Action_PreviousAction).match(/^VirtualMirror:/i)||(''+o.Event_Source).match(/ VirtualMirror /i)?100:(''+o.Page_Section1).match(/^Exam$/i)||(''+o.Action_PreviousAction).match(/^Exam:/i)||(''+o.Event_Source).match(/ OEE /i)?100:(''+o.Page_Section1).match(/^Checkout$/i)?100:40);});}catch(e){if(console)console.error('### GlobalUtagSettingsConfiguration has not been completed successfully! => caused by: '+e.stack);}}();tealium_logContext='preloader utag tracking';tealium_logNote='';var UtagTracking=function UtagTrackingCTRL(){var __cname='UtagTracking';var MLOG=__Utils__.MessageLogging;try{var ___=__Utils__.Common;var TC=__Utils__.TypeChecking;var REB=__Utils__.RegExpBuilder;var STORAGE=__Utils__.Storage;var UTAG=__Utils__.UtagHelper;var ArrayList=__Utils__.ArrayList;window.tealium_data2track=window.tealium_data2track||[];window.tealium_data2track.push=function(e){__track(e);};var __stack=[];var __cleanAllOccurrences=function(eid,findList,findSensitive){var length=findList.length;for(var i=0;i<length;i++)eid=eid.replace(new RegExp((findList[i]+'-'),('g'+(findSensitive?'':'i'))),'');return eid;};var __cleanTrackingEventId=function(eid){var pageDevType=['M','D','X','T','R','A'];var pagePlatform=['WCS'];eid=__cleanAllOccurrences(eid,pageDevType.concat(pagePlatform),true);var otherReplaceWords=['CheckoutThankYou','CheckoutDelivery'];var pageType=['Home','Clv','Clp','Plp','EPlp','CPlp','Pdp','PClp','Pcp','Search','CartPage','Login&Register','Wishlist','Login','Delivery','Doctor','Payment','OrderSummary','Thankyou','Prescription','PrescriptionOk','FindStore','Info','Review','Confirmation','Cancellation','UserLogin','UserRegister','UserSummary','CartReturn','OrderReturn','Profile','GiftCardBalance','History','Subscriptions','FidelityCard','LoyaltyProgram','NewslForm','UserNewsl','StoreLocator','Landing','Static','Quoto','Error','LensType','LensBrand','LensMaterial','LensLight','LensColour','LensTreatment','LensTreatmentDetail','Addons','LensReview','LensPerformance','LensDesign','Connection','Facescan','Survey',];eid=__cleanAllOccurrences(eid,otherReplaceWords.concat(pageType),false);return eid;};var __checkAndGetToolNamePrefix=function(prefix,eid,esrc){var __prefix='';var toolNamePrefixMap={'Bounce':'BE','Monetate':'MO'};if(TC.isString(prefix)&&prefix.match(REB.isValueOf(Object.values(toolNamePrefixMap))))__prefix=prefix;else{for(var key in toolNamePrefixMap){if(toolNamePrefixMap.hasOwnProperty(key)&&((TC.isString(eid)&&eid.match(new RegExp('^'+key)))||esrc===key)){__prefix=toolNamePrefixMap[key];break;}}}
return __prefix?'['+__prefix+']':'';};var __track=function(e){var settings;try{window.tealium_datacopy=___.merge({},e,10);window.tealium_datacopy_array=UTAG.getArrayMap(window.tealium_datacopy);var index,index2,prod,temp;var Result_QA;var utagTrackType='';if(!TC.isPureObject(e)){e={};e.id='Event';e.Error_Datalayer='eobj WR';}
else if(!e.id&&!e.Tracking_EventId){e.id='Event';e.Error_Datalayer='eid MS';}
e.id=e.id||e.Tracking_EventId||'';e.Tracking_EventId=typeof e.id=='string'?e.id:'';e.Tracking_Type=((e.Tracking_Method&&!e.Tracking_Type)?e.Tracking_Method:e.Tracking_Type)||'';e.Tracking_Type=e.Tracking_Type=='hiddenlink'?'hiddenaction':e.Tracking_Type;tealium_log.data2track.set('processing',e);e.Tracking_EventId_Clean=__cleanTrackingEventId(e.Tracking_EventId);e.Tracking_Pusher='data2track.push';if(!e.Tracking_EventId_Clean.match(/^(ABTest|Monetate|Bounce)|Loading-Ready/)&&e.Tracking_EventId_Clean!='Click'){UtagQA.run(e);if(e.Error_DatalayerObject){tealium_log.events[e.Tracking_EventId_Serial].data2track.datalayer.Error_DatalayerObject=___.merge({},e.Error_DatalayerObject);}
if(e.Result_QA){Result_QA=___.merge({},e.Result_QA);tealium_log.events[e.Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;delete e.Result_QA;}}
switch(e.Tracking_EventId_Clean){case'ABTest-Impression':case'Monetate-Impression':case'BounceImpression':case'BounceClick':case'Bounce-Impression':case'Bounce-Click':{e.Content_TestCampaign=TC.isString(e.Content_TestCampaign)&&e.Content_TestCampaign?e.Content_TestCampaign:'Unknown campaign';e.Content_TestVariation=TC.isString(e.Content_TestVariation)&&e.Content_TestVariation?e.Content_TestVariation:'Unknown variation';{e.Content_TestVersion=TC.isString(e.Content_TestVersion)&&e.Content_TestVersion?e.Content_TestVersion:(e.Content_TestCampaign+': '+e.Content_TestVariation);if(e.Tracking_EventId.match(/Bounce/)){e.Content_TestVersion=__checkAndGetToolNamePrefix(e.Tool_Name_Abbreviation,e.Tracking_EventId,e.Event_Source)+(e.Content_TestVersion.replace(/ \| /g,'').replace(/ \- /g,' '))+' '+(e.Tracking_EventId.match(/-Click$/)?'CLICK':'IMP');}
else if(e.Tracking_EventId.match(/Monetate/)){e.Content_TestVersion=__checkAndGetToolNamePrefix(e.Tool_Name_Abbreviation,e.Tracking_EventId,e.Event_Source)+e.Content_TestVersion;}
e.Content_TestVersion=e.Content_TestVersion.replace(/\|/g,'');}
temp=new ArrayList('string',true,true,'|');temp.setData(STORAGE.getItem('tealium_data2track_Content_TestList',''));temp.add(e.Content_TestVersion);STORAGE.setItem('tealium_data2track_Content_TestList',temp.getData(true));break;}
case'Loading-Ready':{tealium_log.utag_data2track.set('processing',{Tracking_EventId_Serial:e.Tracking_EventId_Serial});{___.merge(tealium_log.events[e.Tracking_EventId_Serial].utag_data2track.datalayer,tealium_log.utag_data.datalayer);___.merge(tealium_log.events[e.Tracking_EventId_Serial].utag_data2track.datalayer,e);if(tealium_log.events[e.Tracking_EventId_Serial].utag_data2track.datalayer.Error_DatalayerObject){delete tealium_log.events[e.Tracking_EventId_Serial].utag_data2track.datalayer.Error_DatalayerObject;}
if(tealium_log.events[e.Tracking_EventId_Serial].utag_data2track.datalayer.Result_QA){delete tealium_log.events[e.Tracking_EventId_Serial].utag_data2track.datalayer.Result_QA;}
UtagQA.run(tealium_log.events[e.Tracking_EventId_Serial].utag_data2track.datalayer);e.Error_QA=tealium_log.events[e.Tracking_EventId_Serial].utag_data2track.datalayer.Error_QA||'';}
tealium_log.utag_data2track.set('done',e.Tracking_EventId_Serial);utagTrackType='view';break;}
case'Click':{var runAutoQAonClick=function(elem){e.data_element_id=e.data_element_id||e.Content_Box||settings.b||settings.b2||'';e.data_description=e.data_description||e.Content_Description||(settings.d||'').replace(/#/,'#'+(settings.d0||'')).replace(/^#$/,(settings.d2||''))||'';e.data_analytics_available_call=e.data_analytics_available_call||jQuery(elem).closest('[data-analytics_available_call]').data('analytics_available_call')||'';UtagQA.run(e);tealium_log.events[e.Tracking_EventId_Serial].data2track.datalayer.data_element_id=e.data_element_id;tealium_log.events[e.Tracking_EventId_Serial].data2track.datalayer.data_description=e.data_description;tealium_log.events[e.Tracking_EventId_Serial].data2track.datalayer.data_analytics_available_call=e.data_analytics_available_call;if(e.Error_DatalayerObject){tealium_log.events[e.Tracking_EventId_Serial].data2track.datalayer.Error_DatalayerObject=___.merge({},e.Error_DatalayerObject);}
if(e.Result_QA){tealium_log.events[e.Tracking_EventId_Serial].data2track.datalayer.Result_QA=___.merge({},e.Result_QA);delete e.Result_QA;}};index='';var el=e.Click_FocusElement&&e.Click_FocusElement.getAttribute?e.Click_FocusElement:document.createElement('a');{{settings={s:this,on:'mousedown',tt:'',sm:false,cn:'',pc:'',pd:'',pn:'',pp:'',pu:/.?/i,ji:function(){},js:function(){},je:function(){},b:'',d:'#'
};}
{settings.tt=e.Tracking_Type||settings.tt;settings.b=e.Content_Box||e.data_element_id||settings.b;settings.d=e.Content_Description||e.data_description||settings.d;}
{for(index in tealium_clickTracking_customized){if(!tealium_clickTracking_customized.hasOwnProperty(index)){index='';continue;}
temp=jQuery.extend({},settings,tealium_clickTracking_customized[index]);if((!temp.s||(jQuery(temp.s).length&&jQuery.inArray(el,jQuery(temp.s))!=-1))&&(!temp.pc||(utag_data.Page_Country&&utag_data.Page_Country.match(temp.pc)))&&(!temp.pd||(utag_data.Page_DeviceType&&utag_data.Page_DeviceType.match(temp.pd)))&&(!temp.pn||(utag_data.Page_Name&&utag_data.Page_Name.match(temp.pn)))&&(!temp.pp||(utag_data.Page_Platform&&utag_data.Page_Platform.match(temp.pp)))&&(!temp.pu||(utag_data.Page_Url&&utag_data.Page_Url.match(temp.pu)))&&(!temp.cn||eval(temp.cn))){___.merge(settings,tealium_clickTracking_customized[index]);settings.b=(typeof settings.b==='string'?settings.b:(typeof settings.b==='function'&&settings.b?(''+settings.b(jQuery(el))):''));settings.d=(typeof settings.d==='string'?settings.d:(typeof settings.d==='function'&&settings.d?(''+settings.d(jQuery(el))):''));if(!temp.sm){break;}
}else{index='';}}
tealium_log.data2track.set('processing',___.merge(e,settings));}}
{if(!settings.tt||!(settings.tt+'').match(/^(link|hiddenaction|configurator)$/)){settings.tt='link';if(jQuery(el).is('a')){if(jQuery(el).attr('href')&&!jQuery(el).attr('href').match(/^#/)&&!jQuery(el).attr('href').match(/\.pdf$|\.mp4$/i)&&jQuery(el)[0].hostname==window.location.hostname)settings.tt='hiddenaction';}}
if(settings.ji){try{if(settings.ji()===false){runAutoQAonClick(el);break;}}catch(err){tealium_log.data2track.set('error',e,'settings.ji: '+err.stack);}}
settings.b2='';var selector='';selector+='*[id^="D_"],				*[id^="M_"],				*[id^="X_"],';selector+='*[data-element-id],';selector+='*[class*="D_"],			*[class*="M_"],				*[class*="X_"]';var parents=jQuery(el).closest(selector);if(!settings.b){if(e.Content_Box){settings.b2=e.Content_Box;}
else if(el.getAttribute('Content_Box')){settings.b2=el.getAttribute('Content_Box');}
//@TODO: nei requisiti  stato aggiunto anche la possibilit di ricevere data_element_id
else if(jQuery(el).attr('data-element-id')){settings.b2=jQuery(el).attr('data-element-id');}
else if(jQuery(el).data('element-id')){settings.b2=jQuery(el).data('element-id');}
else if(parents&&parents.length){if(parents.data('element-id')){settings.b2=parents.data('element-id');}
else if(parents.attr('id')&&parents.attr('id').match(/^(D|M|X)/)){settings.b2=parents.attr('id');}
else if(parents.attr('class')&&parents.attr('class').match(/(X|D|M)_[^\s]+/i)){settings.b2=parents.attr('class').match(/(X|D|M)_[^\s]+/i)[0].toString();}}
else if(el.getAttribute('id')){settings.b2=el.getAttribute('id');}
e.data_element_id=settings.b2;settings.b2=settings.b2.toString();settings.__prevb2=settings.b2;settings.b2=settings.b2?(settings.b2.replace(/ |'/g,'')):'';delete settings.__prevb2;settings.b2=settings.b2?(settings.b2.replace(/_/g,' ')):'';settings.b2=settings.b2?(settings.b2.replace(/\stemp$/i,'')):'';}
else{e.data_element_id=settings.b;settings.b=settings.b.toString();settings.b=settings.b?(settings.b.replace(/_/g,' ')):'';settings.b=settings.b?(settings.b.replace(/\stemp$/i,'')):'';}
settings.d0='';settings.d2='';if(settings.d&&settings.d=='#'){selector='';selector+='*[data-linkname],';selector+='*[data-description],';selector+='*[Content_Box]';parents=jQuery(el).closest(selector);if(el.getAttribute('data-linkname')){settings.d2=el.getAttribute('data-linkname').match(/([^:])+$/);}
else if(el.getAttribute('data-description')){settings.d2=tealium_textClean(el.getAttribute('data-description'),'[nobreaks][nospaces]');}
else if(el.getAttribute('Content_Description')){settings.d2=tealium_textClean(el.getAttribute('Content_Description'),'[nobreaks][nospaces]');}
else if(el.getAttribute('value')){settings.d2=tealium_textClean(el.getAttribute('value'),'[nobreaks][nospaces]');}
else if(tealium_textClean(el.innerText,'[nobreaks][nospaces]').length){settings.d2=tealium_textClean(el.innerText,'[nobreaks][nospaces]');}
else if(el.getAttribute('title')){settings.d2=tealium_textClean(el.getAttribute('title'),'[nobreaks][nospaces]');}
else if(el.querySelector('img')&&el.querySelector('img').getAttribute('alt')){settings.d2=tealium_textClean(el.querySelector('img').getAttribute('alt'),'[nobreaks][nospaces]');}
else if(el.querySelector('img')&&el.querySelector('img').getAttribute('title')){settings.d2=tealium_textClean(el.querySelector('img').getAttribute('title'),'[nobreaks][nospaces]');}
else if(parents&&parents.length){if(parents.data('linkname')){settings.d2=parents.data('linkname').match(/([^:])+$/);}
else if(parents.data('description')){settings.d2=tealium_textClean(parents.data('description'),'[nobreaks][nospaces]');}
else if(parents.getAttribute&&parents.getAttribute('Content_Description')){settings.d2=tealium_textClean(parents.getAttribute('Content_Description'),'[nobreaks][nospaces]');}}
else{settings.d2='';}}
else if(settings.d&&settings.d.match(/#/)){settings.d0=jQuery(settings.s).index(el)||'?';}}
//@TODO al momento lo lasciamo qui, ma concettualmente questo dovrebbe andare nella sezione dell'import dei settings o nell'abort
{//@NOTE: il valore  sempre una stringa, quindi nel caso di numeri  necessario gestire le conversioni
if(e.data_element_id&&e.data_analytics_available_call&&((''+e.data_analytics_available_call)=='1')){if(STORAGE.getItem('tealium_data_element_id_'+e.data_element_id,'')){tealium_log.data2track.set('processing',___.merge(e,settings),'click tracking aborted due to the analytics_available_call attribute');runAutoQAonClick(el);break;}
STORAGE.setItem('tealium_data_element_id_'+e.data_element_id,'1');}
if(jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call')!=null){if(jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call')=='0'&&!index){tealium_log.data2track.set('processing',___.merge(e,settings),'click tracking aborted due to the analytics_available_call attribute');runAutoQAonClick(el);break;}
if(jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call')!='0'&&!index){temp=jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call')||'1';e.data_analytics_available_call=''+temp;temp=parseInt(temp,10);jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call',''+(temp-1));}}
temp=jQuery(el).data();if(temp){jQuery.each(temp,function(k,v){if(k.match('analytics_available_call'))return;if(!k.match(/analytics(-|_)/i,''))return;e[k.replace(/analytics(-|_)/i,'')]=v;});}}
{tealium_log.data2track.set('processing',___.merge(e,settings),'added details:');runAutoQAonClick(el);e.Tracking_Type=settings.tt;if(settings.js){try{if(settings.js()===false)break;}catch(err){tealium_log.data2track.set('error',e,'settings.js: '+err.stack);}}
e.data_element_id=e.Content_Box=settings.b||settings.b2||'';e.data_description=e.Content_Description=(settings.d||'').replace(/#/,'#'+settings.d0).replace(/^#$/,settings.d2);switch(e.Tracking_Type){case'hiddenaction':{e.Action_Type='click';utagTrackType='link';break;}
case'link':{utagTrackType='link';break;}
case'configurator':{var tealium_configurator_usage=JSON.parse(STORAGE.getItem('tealium_configurator_usage','{"firstInteractionsByVisit":"","firstInteractionsByModel":{},"engagementIndexByVisit":"","engagementIndexByModel":{}}'));prod=(window.utag&&utag.data&&utag.data.Products)?Object.keys(utag.data.Products)[0]:'NA';if(e.Content_Box.match(/Menu.+Open/)){if(tealium_configurator_usage.firstInteractionsByVisit==''){tealium_configurator_usage.firstInteractionsByVisit=e.Content_Box;e.Events_CPComponentsFirstInteractionsByVisit='1';}
if(tealium_configurator_usage.firstInteractionsByModel[prod]==null){tealium_configurator_usage.firstInteractionsByModel[prod]=e.Content_Box;e.Events_CPComponentsFirstInteractionsByModel='1';}
else{tealium_log.data2track.set('processing',e,'data2track stopped, duplicated click on configurator');break;}}
if(e.Content_Box.match(/Menu.+Select/)){if(!tealium_configurator_usage.engagementIndexByVisit.match('\\['+e.Content_Box+'\\]')){tealium_configurator_usage.engagementIndexByVisit+='['+e.Content_Box+']';e.Events_CPComponentsEngagementIndexByVisit='1';}
if(!tealium_configurator_usage.engagementIndexByModel[prod])tealium_configurator_usage.engagementIndexByModel[prod]='';if(!tealium_configurator_usage.engagementIndexByModel[prod].match('\\['+e.Content_Box+'\\]')){tealium_configurator_usage.engagementIndexByModel[prod]+='['+e.Content_Box+']';e.Events_CPComponentsEngagementIndexByModel='1';}
else{tealium_log.data2track.set('processing',e,'data2track stopped, duplicated click on configurator');break;}}
STORAGE.setItem('tealium_configurator_usage',JSON.stringify(tealium_configurator_usage));utagTrackType='link';break;}}
e.Content_Box=e.Content_Box.match(/^(X|D|M|R|A) /)?e.Content_Box.split(' ').slice(2).join(' '):e.Content_Box;if(settings.je){try{if(settings.je()===false)break;}catch(err){tealium_log.data2track.set('error',e,'settings.je: '+err.stack);}}}
break;}
case'VirtualPage-View':case'Prods-Update':{utagTrackType='view';break;}
case'Exam-Funnel-FindStore':{e.Page_Type='FindStore';e.Page_Section1='Exam';e.Page_Section2='';if(e.Search_Keyword||e.Search_ResultItemsQnt||e.Search_Type){e.Store_Search_Keyword=e.Search_Keyword;e.Store_Search_Type=e.Search_Type;e.Store_Search_ResultItemsQnt=e.Search_ResultItemsQnt;delete e.Search_Keyword;delete e.Search_Type;delete e.Search_ResultItemsQnt;}
if(e.Store_Search_Keyword||e.Store_Search_ResultItemsQnt||e.Store_Search_Type){e.Events_FunnelStoreSearch=1;}
utagTrackType='view';break;}
case'Exam-Funnel-Info':{e.Page_Type='Info';e.Page_Section1='Exam';utagTrackType='view';break;}
case'Exam-Funnel-Review':{e.Page_Type='Review';e.Page_Section1='Exam';e.Page_Section2='';utagTrackType='view';break;}
case'Exam-Funnel-Confirmation':{e.Page_Type='Confirmation';e.Page_Section1='Exam';utagTrackType='view';break;}
case'Checkout-Step-Delivery':{e.Page_Type='Delivery';e.Page_Section1='Checkout';e.Events_CheckoutDelivery='1';utagTrackType='view';break;}
case'Checkout-Step-Payment':{e.Page_Type='Payment';e.Page_Section1='Checkout';e.Events_CheckoutPayment='1';utagTrackType='view';break;}
case'Checkout-Step-Gateway':{break;}
case'QuickViewOverlay-Loading-Ready':case'QuickViewOverlay-LoadingReady':case'QuickViewOverlay-Loading-Error':case'QuickViewOverlay':case'MiniWishOverlay-Open':case'MiniCartOverlay-Open':case'Cart-Preview':case'Overlay-View':case'Impression':{if((''+e.Page_Type).match(/LensType|LensBrand|LensPerformance|LensMaterial|LensTreatment|LensTreatmentDetail|LensReview|LensColour|LensPrescription|LensLight|Addons|LensDesign/i)){if(!e.Page_Section2)e.Page_Section2=e.Page_Type;else e.Page_Section2=e.Page_Section2+':'+e.Page_Type;}
e.Page_Type='Overlay';if(e.Tracking_EventId.match(/^QuickViewOverlay/i))e.Page_Section2='QuickView';utagTrackType='view';break;}
case'SignUpOverlay-Open':{e.Page_Section2=(e.Page_Section2)?''+':SignUpOverlay':'SignUpOverlay';utagTrackType='view';break;}
case'Popup-Account-Renewal':{e.Page_Section2=(e.Page_Section2)?''+':RenewalPopup':'RenewalPopup';utagTrackType='view';break;}
case'Event':{utagTrackType='link';break;}
case'Checkout-Order-PrescriptionOk':{e.Events_PrescriptionOk='1';utagTrackType='link';break;}
case'User-Newsletter-SignUpConfirm':case'SignupForm':{e.Events_UserEmailSub='1';utagTrackType='link';break;}
case'NewsletterUnsubscribe-Confirm':case'Unsubscribe':{e.Page_Section2=(e.Page_Section2)?''+':EmailUnsubscribeConfirm':'EmailUnsubscribeConfirm';e.Events_UserEmailUnsub='1';utagTrackType='view';break;}
case'EmailMeWhenAvailable':{e.Events_ProdViewEcomOosEmailClick='1';utagTrackType='link';break;}
case'Account-Create':{e.Events_UserAccountNew='1';utagTrackType='link';break;}
case'ProdFavAdd':{e.Events_ProdFavAdd='1';utagTrackType='link';break;}
case'AddToCart':{e.Events_CartAdd='1';utagTrackType='link';break;}
case'Prods-Delete':{e.Events_CartRemove='1';utagTrackType='link';break;}
case'Login':{e.Events_UserLogin='1';e.User_LoginStatus='Logged';utagTrackType='link';break;}
case'OrderDiscountCode-Tentative':{e.Order_DiscountCode=(e.Order_DiscountCode||'Unknown')+' - tentative';utagTrackType='link';break;}
case'OrderDiscountCode-Applied':{e.Order_DiscountCode=(e.Order_DiscountCode||'Unknown')+' - applied';utagTrackType='link';break;}
case'OrderGiftCard-Tentative':{e.Order_GiftCardCode=(e.Order_GiftCardCode||'Unknown')+' - tentative';utagTrackType='link';break;}
case'OrderGiftCard-Applied':{e.Order_GiftCardCode=(e.Order_GiftCardCode||'Unknown')+' - applied';utagTrackType='link';break;}
case'OrderCancSubmitted':{e.Events_OrderCancel='1';utagTrackType='link';break;}
case'Insurance-Tentative':{e.Events_InsuranceTentative='1';e.Order_InsuranceCode=(e.Order_InsuranceCode||'Unknown')+' - tentative';utagTrackType='link';break;}
case'Insurance-Applied':{e.Events_InsuranceApplied='1';e.Order_InsuranceCode=(e.Order_InsuranceCode||'Unknown')+' - applied';utagTrackType='link';break;}
case'SearchPageReady':{e.Events_SearchRun='1';utagTrackType='link';break;}
case'SearchFilterUpdated':{e.Events_SearchFiltering='1';utagTrackType='link';break;}
case'ContactUs':{e.Events_ActionContactUs='1';utagTrackType='link';break;}
case'Exam-Funnel-FindStoreResults':{e.Events_FunnelStoreSearch=1;if(e.Search_Keyword||e.Search_ResultItemsQnt||e.Search_Type){e.Store_Search_Keyword=e.Search_Keyword;e.Store_Search_Type=e.Search_Type;e.Store_Search_ResultItemsQnt=e.Search_ResultItemsQnt;delete e.Search_Keyword;delete e.Search_Type;delete e.Search_ResultItemsQnt;}
utagTrackType='link';break;}
case'Exam-Funnel-Cancellation':{e.Events_FunnelCancellation=1;utagTrackType='link';break;}
case'Exam-Funnel-AddExam':{e.Events_FunnelAddExam=1;utagTrackType='link';break;}
case'VirtualMirror':{e.Vm_Action=e.Vm_Action||'';switch(e.Vm_Action){case'InitializeSuccess':{break;}
case'Ready':{break;}
case'TryOn':{break;}
case'RequestWebcam':{break;}
case'WebcamAllowed':{break;}
case'Render':{e.Events_VMRender='1';utagTrackType='link';break;}
case'FitGlasses':{e.Events_VMFit='1';utagTrackType='link';break;}
case'AdjustGlasses':{break;}
case'CloseMirror':{break;}}
break;}
case'OneConfigurator':{e.Tracking_EventId+='-'+e.Oneconf_Action;switch(e.Oneconf_Action){case'Loaded':{e.Events_CPLoaded='1';jQuery('#fluidConfigure').removeAttr('data-analytics_available_call');utagTrackType='link';break;}
case'Randomized':{break;}
case'RecipeChanged':{break;}
case'RecipeSaved':{e.Events_ProdFavAdd='1';utagTrackType='link';break;}
case'ConfirmConf':{e.Events_CPConfirmConf='1';utagTrackType='link';break;}
case'AddToCart':{e.Events_CartAdd='1';utagTrackType='link';break;}
case'ApplePayGateway':{break;}
case'StartOver':{break;}
case'Closed':{e.Events_CPClosed='1';utagTrackType='link';break;}}
break;}
case'EditorialApp':case'EditorialPage':case'EditorialFile':{e.Event_Category=e.Tracking_EventId_Clean;e['Events_Editorial'+e.Event_Action]=1;utagTrackType='link';break;}
case'TealiumBug':case'Error':{utagTrackType='link';break;}
default:{e.Error_Datalayer='eid WR';utagTrackType='link';}}
__stack.push(e);tealium_log.data2track.set('done',e.Tracking_EventId_Serial);if(utagTrackType=='view'||utagTrackType=='link')utag.track(utagTrackType,e);}catch(err){tealium_logViaPixel('data2track',___.merge(e,settings)||null,(e&&e.id?e.id+': ':'')+err.stack);}};var __init=function(){var list=window.tealium_data2track.slice(0);for(var key in list)if(list.hasOwnProperty(key))setTimeout(function(e){window.tealium_data2track.push(e);},500,list[key]);};var __size=function(){return __stack.length;};var __reset=function(from,to){var l1=[],l2=[];if(TC.isNumber(from)&&(from>-1)){l1=__stack.slice(0,from);if(TC.isNumber(to)&&(to>-1)&&(from<to))l2=__stack.slice(to);}
__stack=l1.concat(l2);};__init();this.export={size:function(){return ___.tryCatch(__size,[],0,__cname);},reset:function(from,to){return ___.tryCatch(__reset,[from,to],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},UtagTrackingCTRL.prototype));}();tealium_logContext='preloader tealium_clickTracking';tealium_logNote='';var tealium_clickTracking_customized=tealium_clickTracking_customized||[];{tealium_clickTracking_customized.push({s:'[id*=Add-To-Cart]',ji:function(){return false;}});tealium_clickTracking_customized.push({s:'[id*=Add-To-Bag]',ji:function(){return false;}});tealium_clickTracking_customized.push({s:'[class*=spott-player-container] *',ji:function(){return false;}});tealium_clickTracking_customized.push({s:'[data-element-id*=YMAL]',b:function(e){return(e&&(e.attr('data-element-id')||e.data('element-id')))?(e.attr('data-element-id')||e.data('element-id')).replace(/YMAL/g,"AlsoLike"):'';}});}
{tealium_clickTracking_customized.push({s:'[data-element-id*=Prod_FindStoreOpen]',Events_FindStoreOpen:'1',tt:'link'});tealium_clickTracking_customized.push({s:'[data-element-id$=Share]',Events_SocialShare:'1',tt:'link'});}
if(window.tealium_customize_clicks&&window.tealium_customize_clicks.apply)tealium_customize_clicks.apply();tealium_logContext='preloader utag listeners';tealium_logNote='';var UtagListeners=function UtagListenersCTRL(){var __cname='UtagListeners';var MLOG=__Utils__.MessageLogging;try{var ___=__Utils__.Common;var TC=__Utils__.TypeChecking;var REB=__Utils__.RegExpBuilder;var EventsListener=new __Utils__.EventsListener();var __clickTrackingCallBack=function(target){var dl={id:'Click',Click_FocusElement:target};tealium_log.listener.set('done',dl,'Automatic Click Tracking');tealium_data2track.push(dl);};var __autoClickTracking=function(){if(UtagSettings.get('Brand')!='PV'){EventsListener.set(document.body,'a,button','mousedown',function(){__clickTrackingCallBack(this);});}};var __autoPostMessageTracking=function(){EventsListener.set(window,null,'message',function(__event){if(__event&&__event.data&&TC.isString(__event.data.id)&&REB.isValueOf(['Impression','Event','Click']).test(__event.data.id)){tealium_data2track.push(__event.data);}});};var __autoClean=function(){EventsListener.set(window,null,'unload',EventsListener.reset);};var __apply=function(){EventsListener.reset();__autoClickTracking();__autoPostMessageTracking();__autoClean();if(window.tealium_listeners&&window.tealium_listeners.apply)tealium_listeners.apply({set:EventsListener.set,load:EventsListener.load});};this.export={apply:function(){return ___.tryCatch(__apply,[],null,__cname);},};}catch(e){MLOG.showMessage({type:'error',cname:__cname,fname:'constructor',msg:'has not been completed successfully! => caused by: '+e.stack});}
return Object.freeze(Object.setPrototypeOf(this.export||{},UtagListenersCTRL.prototype));}();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.utag_components="23-09-03";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000")&&!window.tealium_ext000_WeAreInBeta){window.tealium_ext000_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000"));}
else{var tealium_logContext='preloader';var tealium_logNote='';var PreloaderInitialization=function(){try{tealium_logContext='preloader tealium_log';tealium_logNote='';var MLOG=__Utils__.MessageLogging;var TC=__Utils__.TypeChecking;var STORAGE=__Utils__.Storage;tealium_log.switchUserRoleByUrlParam();MLOG.setDebugMode(STORAGE.getItem('tealium_team')=='lwa');if(STORAGE.getItem('tealium_visibility','')=='on')tealium_log.toggle();tealium_log.utagjs.set('done');tealium_log.preloader.set('processing');tealium_logContext='preloader utag_data';tealium_logNote='';tealium_log.utag_data.set('processing',utag_data);window.utag_data=window.utag_data||{};window.tealium_datacopy=__Utils__.Common.merge({},utag_data,10);window.tealium_datacopy_array=__Utils__.UtagHelper.getArrayMap(window.tealium_datacopy);utag_data.Tracking_EventId=utag_data.Tracking_EventId||'PageView:default';var result;if(window.utag_cfg_ovrd&&window.utag_cfg_ovrd.noview){tealium_log.utag_data.set('done',utag_data);tealium_logContext='preloader utag_data - checkGet';result=UtagBuilder.checkGet(utag_data);if(TC.isError(result))throw result;tealium_logContext='preloader utag_data - builder Tags';result=UtagBuilder.buildTags(utag_data);if(TC.isError(result))throw result;}
else{UtagQA.run(utag_data);tealium_log.utag_data.set('done',__Utils__.Common.merge({},utag_data));delete utag_data.Result_QA;tealium_logContext='preloader utag_data - checkGet';result=UtagBuilder.checkGet(utag_data);if(TC.isError(result))throw result;tealium_logContext='preloader utag_data - checkStorage';result=UtagBuilder.checkStorage(utag_data);if(TC.isError(result))throw result;tealium_logContext='preloader utag_data - repairer';result=UtagRepairer.run(utag_data);if(TC.isError(result))throw result;tealium_logContext='preloader utag_data - builder Page';result=UtagBuilder.buildPage(utag_data);if(TC.isError(result))throw result;tealium_logContext='preloader utag_data - builder Tags';result=UtagBuilder.buildTags(utag_data);if(TC.isError(result))throw result;}
tealium_log.preloader.set('done',utag_data);}catch(e){if(console)console.error('### PreloaderInitialization has not been completed successfully! => caused by: '+e.stack);tealium_logViaPixel('preloader',(window.utag_data||null),e.stack);}}();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.preloader="23-06-03";}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(typeof utag=="undefined"&&!utag_condload){var utag={id:"luxottica.opsm",o:{},sender:{},send:{},rpt:{ts:{a:new Date()}},dbi:[],db_log:[],loader:{q:[],lc:0,f:{},p:0,ol:0,wq:[],lq:[],bq:{},bk:{},rf:0,ri:0,rp:0,rq:[],ready_q:[],sendq:{"pending":0},run_ready_q:function(){for(var i=0;i<utag.loader.ready_q.length;i++){utag.DB("READY_Q:"+i);try{utag.loader.ready_q[i]()}catch(e){utag.DB(e)};}},lh:function(a,b,c){a=""+location.hostname;b=a.split(".");c=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\.|\...\.jp$/.test(a))?3:2;return b.splice(b.length-c,c).join(".");},WQ:function(a,b,c,d,g){utag.DB('WQ:'+utag.loader.wq.length);try{if(utag.udoname&&utag.udoname.indexOf(".")<0){utag.ut.merge(utag.data,window[utag.udoname],0);}
if(utag.cfg.load_rules_at_wait){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};d=0;g=[];for(a=0;a<utag.loader.wq.length;a++){b=utag.loader.wq[a];b.load=utag.loader.cfg[b.id].load;if(b.load==4){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.load>0){g.push(b);d++;}else{this.f[b.id]=1;}}
for(a=0;a<g.length;a++){utag.loader.AS(g[a]);}
if(d==0){utag.loader.END();}},AS:function(a,b,c,d){utag.send[a.id]=a;if(typeof a.src=='undefined'){a.src=utag.cfg.path+((typeof a.name!='undefined')?a.name:'ut'+'ag.'+a.id+'.js')}
a.src+=(a.src.indexOf('?')>0?'&':'?')+'utv='+(a.v?utag.cfg.template+a.v:utag.cfg.v);utag.rpt['l_'+a.id]=a.src;b=document;this.f[a.id]=0;if(a.load==2){utag.DB("Attach sync: "+a.src);a.uid=a.id;b.write('<script id="utag_'+a.id+'" src="'+a.src+'"></scr'+'ipt>')
if(typeof a.cb!='undefined')a.cb();}else if(a.load==1||a.load==3){if(b.createElement){c='utag_luxottica.opsm_'+a.id;if(!b.getElementById(c)){d={src:a.src,id:c,uid:a.id,loc:a.loc}
if(a.load==3){d.type="iframe"};if(typeof a.cb!='undefined')d.cb=a.cb;utag.ut.loader(d);}}}},GV:function(a,b,c){b={};for(c in a){if(a.hasOwnProperty(c)&&typeof a[c]!="function")b[c]=a[c];}
return b},OU:function(tid,tcat,a,b,c,d,f,g){g={};utag.loader.RDcp(g);try{if(typeof g['cp.OPTOUTMULTI']!='undefined'){c=utag.loader.cfg;a=utag.ut.decode(g['cp.OPTOUTMULTI']).split('|');for(d=0;d<a.length;d++){b=a[d].split(':');if(b[1]*1!==0){if(b[0].indexOf('c')==0){for(f in utag.loader.GV(c)){if(c[f].tcat==b[0].substring(1))c[f].load=0;if(c[f].tid==tid&&c[f].tcat==b[0].substring(1))return true;}
if(tcat==b[0].substring(1))return true;}else if(b[0]*1==0){utag.cfg.nocookie=true}else{for(f in utag.loader.GV(c)){if(c[f].tid==b[0])c[f].load=0}
if(tid==b[0])return true;}}}}}catch(e){utag.DB(e)}
return false;},RDdom:function(o){var d=document||{},l=location||{};o["dom.referrer"]=d.referrer;o["dom.title"]=""+d.title;o["dom.domain"]=""+l.hostname;o["dom.query_string"]=(""+l.search).substring(1);o["dom.hash"]=(""+l.hash).substring(1);o["dom.url"]=""+d.URL;o["dom.pathname"]=""+l.pathname;o["dom.viewport_height"]=window.innerHeight||(d.documentElement?d.documentElement.clientHeight:960);o["dom.viewport_width"]=window.innerWidth||(d.documentElement?d.documentElement.clientWidth:960);},RDcp:function(o,b,c,d){b=utag.loader.RC();for(d in b){if(d.match(/utag_(.*)/)){for(c in utag.loader.GV(b[d])){o["cp.utag_"+RegExp.$1+"_"+c]=b[d][c];}}}
for(c in utag.loader.GV((utag.cl&&!utag.cl['_all_'])?utag.cl:b)){if(c.indexOf("utag_")<0&&typeof b[c]!="undefined")o["cp."+c]=b[c];}},RDqp:function(o,a,b,c){a=location.search+(location.hash+'').replace("#","&");if(utag.cfg.lowerqp){a=a.toLowerCase()};if(a.length>1){b=a.substring(1).split('&');for(a=0;a<b.length;a++){c=b[a].split("=");if(c.length>1){o["qp."+c[0]]=utag.ut.decode(c[1])}}}},RDmeta:function(o,a,b,h){a=document.getElementsByTagName("meta");for(b=0;b<a.length;b++){try{h=a[b].name||a[b].getAttribute("property")||"";}catch(e){h="";utag.DB(e)};if(utag.cfg.lowermeta){h=h.toLowerCase()};if(h!=""){o["meta."+h]=a[b].content}}},RDva:function(o){var readAttr=function(o,l){var a="",b;a=localStorage.getItem(l);if(!a||a=="{}")return;b=utag.ut.flatten({va:JSON.parse(a)});utag.ut.merge(o,b,1);}
try{readAttr(o,"tealium_va");readAttr(o,"tealium_va_"+o["ut.account"]+"_"+o["ut.profile"]);}catch(e){utag.DB(e)}},RDut:function(o,a){var t={};var d=new Date();var m=(utag.ut.typeOf(d.toISOString)=="function");o["ut.domain"]=utag.cfg.domain;o["ut.version"]=utag.cfg.v;t["tealium_event"]=o["ut.event"]=a||"view";t["tealium_visitor_id"]=o["ut.visitor_id"]=o["cp.utag_main_v_id"];t["tealium_session_id"]=o["ut.session_id"]=o["cp.utag_main_ses_id"];t["tealium_session_number"]=o["cp.utag_main__sn"];t["tealium_session_event_number"]=o["cp.utag_main__se"];try{t["tealium_datasource"]=utag.cfg.datasource;t["tealium_account"]=o["ut.account"]=utag.cfg.utid.split("/")[0];t["tealium_profile"]=o["ut.profile"]=utag.cfg.utid.split("/")[1];t["tealium_environment"]=o["ut.env"]=utag.cfg.path.split("/")[6];}catch(e){utag.DB(e)}
t["tealium_random"]=Math.random().toFixed(16).substring(2);t["tealium_library_name"]="ut"+"ag.js";t["tealium_library_version"]=(utag.cfg.template+"0").substring(2);t["tealium_timestamp_epoch"]=Math.floor(d.getTime()/1000);t["tealium_timestamp_utc"]=(m?d.toISOString():"");d.setHours(d.getHours()-(d.getTimezoneOffset()/60));t["tealium_timestamp_local"]=(m?d.toISOString().replace("Z",""):"");utag.ut.merge(o,t,0);},RDses:function(o,a,c){a=(new Date()).getTime();c=(a+parseInt(utag.cfg.session_timeout))+"";if(!o["cp.utag_main_ses_id"]){o["cp.utag_main_ses_id"]=a+"";o["cp.utag_main__ss"]="1";o["cp.utag_main__se"]="1";o["cp.utag_main__sn"]=(1+parseInt(o["cp.utag_main__sn"]||0))+"";}else{o["cp.utag_main__ss"]="0";o["cp.utag_main__se"]=(1+parseInt(o["cp.utag_main__se"]||0))+"";}
o["cp.utag_main__pn"]=o["cp.utag_main__pn"]||"1";o["cp.utag_main__st"]=c;utag.loader.SC("utag_main",{"_sn":(o["cp.utag_main__sn"]||1),"_se":o["cp.utag_main__se"],"_ss":o["cp.utag_main__ss"],"_st":c,"ses_id":(o["cp.utag_main_ses_id"]||a)+";exp-session","_pn":o["cp.utag_main__pn"]+";exp-session"});},RDpv:function(o){if(typeof utag.pagevars=="function"){utag.DB("Read page variables");utag.pagevars(o);}},RD:function(o,a){utag.DB("utag.loader.RD");utag.DB(o);utag.loader.RDcp(o);if(!utag.loader.rd_flag){utag.loader.rd_flag=1;o["cp.utag_main_v_id"]=o["cp.utag_main_v_id"]||utag.ut.vi((new Date()).getTime());o["cp.utag_main__pn"]=(1+parseInt(o["cp.utag_main__pn"]||0))+"";utag.loader.SC("utag_main",{"v_id":o["cp.utag_main_v_id"]});utag.loader.RDses(o);}
if(a&&!utag.cfg.noview)utag.loader.RDses(o);utag.loader.RDqp(o);utag.loader.RDmeta(o);utag.loader.RDdom(o);utag.loader.RDut(o,a||"view");utag.loader.RDpv(o);utag.loader.RDva(o);},RC:function(a,x,b,c,d,e,f,g,h,i,j,k,l,m,n,o,v,ck,cv,r,s,t){o={};b=(""+document.cookie!="")?(document.cookie).split("; "):[];r=/^(.*?)=(.*)$/;s=/^(.*);exp-(.*)$/;t=(new Date()).getTime();for(c=0;c<b.length;c++){if(b[c].match(r)){ck=RegExp.$1;cv=RegExp.$2;}
e=utag.ut.decode(cv);if(typeof ck!="undefined"){if(ck.indexOf("ulog")==0||ck.indexOf("utag_")==0){e=cv.split("$");g=[];j={};for(f=0;f<e.length;f++){try{g=e[f].split(":");if(g.length>2){g[1]=g.slice(1).join(":");}
v="";if((""+g[1]).indexOf("~")==0){h=g[1].substring(1).split("|");for(i=0;i<h.length;i++)h[i]=utag.ut.decode(h[i]);v=h}else v=utag.ut.decode(g[1]);j[g[0]]=v;}catch(er){utag.DB(er)};}
o[ck]={};for(f in utag.loader.GV(j)){if(j[f]instanceof Array){n=[];for(m=0;m<j[f].length;m++){if(j[f][m].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);if(k>t)n[m]=(x==0)?j[f][m]:RegExp.$1;}}
j[f]=n.join("|");}else{j[f]=""+j[f];if(j[f].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);j[f]=(k<t)?null:(x==0?j[f]:RegExp.$1);}}
if(j[f])o[ck][f]=j[f];}}else if(utag.cl[ck]||utag.cl['_all_']){o[ck]=e}}}
return(a)?(o[a]?o[a]:{}):o;},SC:function(a,b,c,d,e,f,g,h,i,j,k,x,v){if(!a)return 0;if(a=="utag_main"&&utag.cfg.nocookie)return 0;v="";var date=new Date();var exp=new Date();exp.setTime(date.getTime()+(365*24*60*60*1000));x=exp.toGMTString();if(c&&c=="da"){x="Thu, 31 Dec 2009 00:00:00 GMT";}else if(a.indexOf("utag_")!=0&&a.indexOf("ulog")!=0){if(typeof b!="object"){v=b}}else{d=utag.loader.RC(a,0);for(e in utag.loader.GV(b)){f=""+b[e];if(f.match(/^(.*);exp-(\d+)(\w)$/)){g=date.getTime()+parseInt(RegExp.$2)*((RegExp.$3=="h")?3600000:86400000);if(RegExp.$3=="u")g=parseInt(RegExp.$2);f=RegExp.$1+";exp-"+g;}
if(c=="i"){if(d[e]==null)d[e]=f;}else if(c=="d")delete d[e];else if(c=="a")d[e]=(d[e]!=null)?(f-0)+(d[e]-0):f;else if(c=="ap"||c=="au"){if(d[e]==null)d[e]=f;else{if(d[e].indexOf("|")>0){d[e]=d[e].split("|")}
g=(d[e]instanceof Array)?d[e]:[d[e]];g.push(f);if(c=="au"){h={};k={};for(i=0;i<g.length;i++){if(g[i].match(/^(.*);exp-(.*)$/)){j=RegExp.$1;}
if(typeof k[j]=="undefined"){k[j]=1;h[g[i]]=1;}}
g=[];for(i in utag.loader.GV(h)){g.push(i);}}
d[e]=g}}else d[e]=f;}
h=new Array();for(g in utag.loader.GV(d)){if(d[g]instanceof Array){for(c=0;c<d[g].length;c++){d[g][c]=encodeURIComponent(d[g][c])}
h.push(g+":~"+d[g].join("|"))}else h.push((g+":").replace(/[\,\$\;\?]/g,"")+encodeURIComponent(d[g]))}
if(h.length==0){h.push("");x=""}
v=(h.join("$"));}
document.cookie=a+"="+v+";path=/;domain="+utag.cfg.domain+";expires="+x;return 1},LOAD:function(a,b,c,d){if(!utag.loader.cfg){return}
if(this.ol==0){if(utag.loader.cfg[a].block&&utag.loader.cfg[a].cbf){this.f[a]=1;delete utag.loader.bq[a];}
for(b in utag.loader.GV(utag.loader.bq)){if(utag.loader.cfg[a].load==4&&utag.loader.cfg[a].wait==0){utag.loader.bk[a]=1;utag.DB("blocked: "+a);}
utag.DB("blocking: "+b);return;}
utag.loader.INIT();return;}
utag.DB('utag.loader.LOAD:'+a);if(this.f[a]==0){this.f[a]=1;if(utag.cfg.noview!=true){if(utag.loader.cfg[a].send){utag.DB("SENDING: "+a);try{if(utag.loader.sendq.pending>0&&utag.loader.sendq[a]){utag.DB("utag.loader.LOAD:sendq: "+a);while(d=utag.loader.sendq[a].shift()){utag.DB(d);utag.sender[a].send(d.event,utag.handler.C(d.data));utag.loader.sendq.pending--;}}else{utag.sender[a].send('view',utag.handler.C(utag.data));}
utag.rpt['s_'+a]=0;}catch(e){utag.DB(e);utag.rpt['s_'+a]=1;}}}
if(utag.loader.rf==0)return;for(b in utag.loader.GV(this.f)){if(this.f[b]==0||this.f[b]==2)return}
utag.loader.END();}},EV:function(a,b,c,d){if(b=="ready"){if(!utag.data){try{utag.cl={'_all_':1};utag.loader.initdata();utag.loader.RD(utag.data);}catch(e){utag.DB(e)};}
if((document.attachEvent||utag.cfg.dom_complete)?document.readyState==="complete":document.readyState!=="loading")setTimeout(c,1);else{utag.loader.ready_q.push(c);var RH;if(utag.loader.ready_q.length<=1){if(document.addEventListener){RH=function(){document.removeEventListener("DOMContentLoaded",RH,false);utag.loader.run_ready_q()};if(!utag.cfg.dom_complete)document.addEventListener("DOMContentLoaded",RH,false);window.addEventListener("load",utag.loader.run_ready_q,false);}else if(document.attachEvent){RH=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",RH);utag.loader.run_ready_q()}};document.attachEvent("onreadystatechange",RH);window.attachEvent("onload",utag.loader.run_ready_q);}}}}else{if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent(((d==1)?"":"on")+b,c)}}},END:function(b,c,d,e,v,w){if(this.ended){return};this.ended=1;utag.DB("loader.END");b=utag.data;if(utag.handler.base&&utag.handler.base!='*'){e=utag.handler.base.split(",");for(d=0;d<e.length;d++){if(typeof b[e[d]]!="undefined")utag.handler.df[e[d]]=b[e[d]]}}else if(utag.handler.base=='*'){utag.ut.merge(utag.handler.df,b,1);}
utag.rpt['r_0']="t";for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}
utag.rpt.ts['s']=new Date();(function(a,b,c,l){if(typeof utag_err!='undefined'&&utag_err.length>0){a='//uconnect.tealiumiq.com/ulog/_error?utid='+utag.cfg.utid;l=utag_err.length>5?5:utag_err.length;for(b=0;b<l;b++){c=utag_err[b];a+='&e'+b+'='+encodeURIComponent(c.t+'::'+c.l+'::'+c.s+'::'+c.e);}
utag.dbi.push((new Image()).src=a);}})();v=utag.cfg.path;w=v.indexOf(".tiqcdn.");if(w>0&&b["cp.utag_main__ss"]==1&&!utag.cfg.no_session_count)utag.ut.loader({src:v.substring(0,v.indexOf("/ut"+"ag/")+6)+"tiqapp/ut"+"ag.v.js?a="+utag.cfg.utid+(utag.cfg.nocookie?"&nocookie=1":"&cb="+(new Date).getTime()),id:"tiqapp"})
if(utag.cfg.noview!=true)utag.handler.RE('view',b,"end");utag.handler.INIT();}},DB:function(a,b){if(utag.cfg.utagdb===false){return;}else if(typeof utag.cfg.utagdb=="undefined"){b=document.cookie+'';utag.cfg.utagdb=((b.indexOf('utagdb=true')>=0)?true:false);}
if(utag.cfg.utagdb===true){var t;if(utag.ut.typeOf(a)=="object"){t=utag.handler.C(a)}else{t=a}
utag.db_log.push(t);try{if(!utag.cfg.noconsole)console.log(t)}catch(e){}}},RP:function(a,b,c){if(typeof a!='undefined'&&typeof a.src!='undefined'&&a.src!=''){b=[];for(c in utag.loader.GV(a)){if(c!='src')b.push(c+'='+escape(a[c]))}
this.dbi.push((new Image()).src=a.src+'?utv='+utag.cfg.v+'&utid='+utag.cfg.utid+'&'+(b.join('&')))}},view:function(a,c,d){return this.track({event:'view',data:a||{},cfg:{cb:c,uids:d}})},link:function(a,c,d){return this.track({event:'link',data:a||{},cfg:{cb:c,uids:d}})},track:function(a,b,c,d,e){a=a||{};if(typeof a=="string"){a={event:a,data:b||{},cfg:{cb:c,uids:d}}}
for(e in utag.loader.GV(utag.o)){utag.o[e].handler.trigger(a.event||"view",a.data||a,a.cfg||{cb:b,uids:c})}
a.cfg=a.cfg||{cb:b};if(typeof a.cfg.cb=="function")a.cfg.cb();return true},handler:{base:"",df:{},o:{},send:{},iflag:0,INIT:function(a,b,c){utag.DB('utag.handler.INIT');if(utag.initcatch){utag.initcatch=0;return}
this.iflag=1;a=utag.loader.q.length;if(a>0){utag.DB("Loader queue");for(b=0;b<a;b++){c=utag.loader.q[b];utag.handler.trigger(c.a,c.b,c.c)}}
},test:function(){return 1},LR:function(b){utag.DB("Load Rules");for(var d in utag.loader.GV(utag.cond)){utag.cond[d]=false;}
utag.DB(b);utag.loader.loadrules(b);utag.DB(utag.cond);utag.loader.initcfg();utag.loader.OU();for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}},RE:function(a,b,c,d,e,f,g){if(c!="alr"&&!this.cfg_extend){return 0;}
utag.DB("RE: "+c);if(c=="alr")utag.DB("All Tags EXTENSIONS");utag.DB(b);if(typeof this.extend!="undefined"){g=0;for(d=0;d<this.extend.length;d++){try{e=0;if(typeof this.cfg_extend!="undefined"){f=this.cfg_extend[d];if(typeof f.count=="undefined")f.count=0;if(f[a]==0||(f.once==1&&f.count>0)||f[c]==0){e=1}else{if(f[c]==1){g=1};f.count++}}
if(e!=1){this.extend[d](a,b);utag.rpt['ex_'+d]=0}}catch(er){utag.DB(er);utag.rpt['ex_'+d]=1;utag.ut.error({e:er.message,s:utag.cfg.path+'utag.js',l:d,t:'ge'});}}
utag.DB(b);return g;}},trigger:function(a,b,c,d,e,f){utag.DB('trigger:'+a+(c&&c.uids?":"+c.uids.join(","):""));b=b||{};utag.DB(b);if(!this.iflag){utag.DB("trigger:called before tags loaded");for(d in utag.loader.f){if(!(utag.loader.f[d]===1))utag.DB('Tag '+d+' did not LOAD')}
utag.loader.q.push({a:a,b:utag.handler.C(b),c:c});return;}
utag.ut.merge(b,this.df,0);utag.loader.RD(b,a);utag.cfg.noview=false;function sendTag(a,b,d){try{if(typeof utag.sender[d]!="undefined"){utag.DB("SENDING: "+d);utag.sender[d].send(a,utag.handler.C(b));utag.rpt['s_'+d]=0;}else if(utag.loader.cfg[d].load!=2){utag.loader.sendq[d]=utag.loader.sendq[d]||[];utag.loader.sendq[d].push({"event":a,"data":utag.handler.C(b)});utag.loader.sendq.pending++;utag.loader.AS({id:d,load:1});}}catch(e){utag.DB(e)}}
if(c&&c.uids){this.RE(a,b,"alr");for(f=0;f<c.uids.length;f++){d=c.uids[f];if(!utag.loader.OU(utag.loader.cfg[d].tid)){sendTag(a,b,d);}}}else if(utag.cfg.load_rules_ajax){this.RE(a,b,"blr");this.LR(b);this.RE(a,b,"alr");for(f=0;f<utag.loader.cfgsort.length;f++){d=utag.loader.cfgsort[f];if(utag.loader.cfg[d].load&&utag.loader.cfg[d].send){sendTag(a,b,d);}}}else{this.RE(a,b,"alr");for(d in utag.loader.GV(utag.sender)){sendTag(a,b,d);}}
this.RE(a,b,"end");},C:function(a,b,c){b={};for(c in utag.loader.GV(a)){if(a[c]instanceof Array){b[c]=a[c].slice(0)}else{b[c]=a[c]}}
return b}},ut:{pad:function(a,b,c,d){a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return""+d+a},vi:function(t,a,b){if(!utag.v_id){a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2);a+=this.pad(navigator.userAgent.length,3);a+=this.pad(document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5)}catch(e){utag.DB(e);a+="12345"};utag.v_id=a;}
return utag.v_id},hasOwn:function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a)},isEmptyObject:function(o,a){for(a in o){if(utag.ut.hasOwn(o,a))return false}
return true},isEmpty:function(o){var t=utag.ut.typeOf(o);if(t=="number"){return isNaN(o)}else if(t=="boolean"){return false}else if(t=="string"){return o.length===0}else return utag.ut.isEmptyObject(o)},typeOf:function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},flatten:function(o){var a={};function r(c,p){if(Object(c)!==c||c instanceof Array){a[p]=c;}else{if(utag.ut.isEmptyObject(c)){}else{for(var d in c){r(c[d],p?p+"."+d:d);}}}}
r(o,"");return a;},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d]}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")a[d]=b[d]}}},decode:function(a,b){b="";try{b=decodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=unescape(a)};return b},encode:function(a,b){b="";try{b=encodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=escape(a)};return b},error:function(a,b,c){if(typeof utag_err!="undefined"){utag_err.push(a)}},loader:function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){m.parentNode.removeChild(m);}
b=a.createElement("iframe");o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}
if(o.id){b.id=o.id};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l])}
b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}
if(typeof o.error=="function"){utag.loader.EV(b,"error",o.error);}
if(o.type!="img"){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}}};utag.o['luxottica.opsm']=utag;utag.cfg={template:"ut4.46.",load_rules_ajax:true,load_rules_at_wait:false,lowerqp:false,noconsole:false,session_timeout:1800000,readywait:0,noload:0,domain:utag.loader.lh(),datasource:"##UTDATASOURCE##".replace("##"+"UTDATASOURCE##",""),path:"//tags.tiqcdn.com/utag/luxottica/opsm/prod/",utid:"luxottica/opsm/202309250934"};utag.cfg.v=utag.cfg.template+"202309250934";utag.cond={11:0,14:0,15:0,16:0,17:0,18:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,28:0,29:0,30:0,31:0,32:0,33:0,36:0,37:0,3:0,46:0,47:0,48:0,49:0,50:0,510:0,511:0,512:0,51:0,521:0,530:0,539:0,541:0,54:0,55:0,567:0,569:0,56:0,57:0,584:0,585:0,586:0,587:0,588:0,589:0,58:0,59:0,62:0,63:0,64:0,65:0,66:0,68:0,69:0,71:0,72:0,8:0};utag.pagevars=function(ud){ud=ud||utag.data;try{ud['js_page.tealium_listenerOn']=tealium_listenerOn}catch(e){utag.DB(e)};try{ud['js_page.tealium_cookies_object']=tealium_cookies_object}catch(e){utag.DB(e)};try{ud['js_page.tealium_querystring_object']=tealium_querystring_object}catch(e){utag.DB(e)};try{ud['js_page.tealium_data_user_segments']=tealium_data_user_segments}catch(e){utag.DB(e)};try{ud['js_page.tealium_datacopy.Page_Code']=tealium_datacopy.Page_Code}catch(e){utag.DB(e)};try{ud['js_page.tealium_datacopy.Page_Name']=tealium_datacopy.Page_Name}catch(e){utag.DB(e)};try{ud['js_page.tealium_datacopy']=tealium_datacopy}catch(e){utag.DB(e)};try{ud['js_page.tealium_datacopy_array']=tealium_datacopy_array}catch(e){utag.DB(e)};};utag.loader.initdata=function(){try{utag.data=(typeof utag_data!='undefined')?utag_data:{};utag.udoname='utag_data';}catch(e){utag.data={};utag.DB('idf:'+e);}};utag.loader.loadrules=function(_pd,_pc){var d=_pd||utag.data;var c=_pc||utag.cond;for(var l in utag.loader.GV(c)){switch(l){case'11':try{c[11]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('FindAStoreSuccess'.toLowerCase())>-1)||(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('InStoreLookUpSuccess'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'14':try{c[14]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:ChooseLocation'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'15':try{c[15]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:SelectAppointment'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'16':try{c[16]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:BookingConfirmation'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'17':try{c[17]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('EyeCare:EyeTests:LandingPage'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'18':try{c[18]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Home:Home:Homepage'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'20':try{c[20]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Home:Home:Homepage'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'21':try{c[21]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:Search:ResultsPage'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'22':try{c[22]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Accounts:Register:CompleteAccount'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'23':try{c[23]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:BookingConfirmation'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'24':try{c[24]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:SelectAppointment'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'25':try{c[25]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:ChooseLocation'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'26':try{c[26]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:LandingPage'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'28':try{c[28]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:ChooseLocation'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('NewBETChooseLocation'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'29':try{c[29]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:SelectAppointment'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'3':try{c[3]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['dom.pathname'].toString().toLowerCase().indexOf('opsm-nz'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'30':try{c[30]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:ChooseLocation'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('NewBETChooseLocation'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'31':try{c[31]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf('Common:BookEyeTest:SelectAppointment'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'32':try{c[32]|=(d['pageName'].toString().toLowerCase().indexOf('Catalog:ProductCatalog:ProductPages'.toLowerCase())>-1&&typeof d['cp.catalog']!='undefined'&&d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1)||(d['pageName'].toString().toLowerCase().indexOf('Catalog:ProductCatalog:ProductPages'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&typeof d['cp.rcamp']!='undefined')}catch(e){utag.DB(e)};break;case'33':try{c[33]|=(d['pageName'].toString().toLowerCase().indexOf('Catalog:ProductCatalog:ProductPages'.toLowerCase())>-1&&typeof d['cp.catalog']!='undefined'&&d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1)||(d['pageName'].toString().toLowerCase().indexOf('Catalog:ProductCatalog:ProductPages'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&typeof d['cp.rcamp']!='undefined')}catch(e){utag.DB(e)};break;case'36':try{c[36]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('FindAStore'.toLowerCase())>-1&&typeof d['cp.catalog']!='undefined')||(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('FindAStore'.toLowerCase())>-1&&typeof d['cp.rcamp']!='undefined')||(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('InStoreLookUpSuccess'.toLowerCase())>-1&&typeof d['cp.catalog']!='undefined')||(d['dom.domain'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('InStoreLookUpSuccess'.toLowerCase())>-1&&typeof d['cp.rcamp']!='undefined')}catch(e){utag.DB(e)};break;case'37':try{c[37]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('FindAStore'.toLowerCase())>-1&&typeof d['cp.catalog']!='undefined')||(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('FindAStore'.toLowerCase())>-1&&typeof d['cp.rcamp']!='undefined')||(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('InStoreLookUpSuccess'.toLowerCase())>-1&&typeof d['cp.catalog']!='undefined')||(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('InStoreLookUpSuccess'.toLowerCase())>-1&&typeof d['cp.rcamp']!='undefined')}catch(e){utag.DB(e)};break;case'46':try{c[46]|=(d['pageName'].toString().toLowerCase().indexOf('ContactLenses:AllContactLenses:ProductGrid'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'47':try{c[47]|=(d['pageName'].toString().toLowerCase().indexOf(':All Contact Lenses:'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf(':ProductGrid'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('.co.nz'.toLowerCase())>-1)||(d['pageName'].toString().toLowerCase().indexOf(':ContactLenses:'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf(':ProductGrid'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('.co.nz'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'48':try{c[48]|=(/:ProductDetail$/i.test(d['pageName'])&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1&&/^ContactLen/i.test(d['productsList']))}catch(e){utag.DB(e)};break;case'49':try{c[49]|=(/:ProductDetail$/i.test(d['pageName'])&&d['dom.domain'].toString().toLowerCase().indexOf('.co.nz'.toLowerCase())>-1&&/^ContactLen/i.test(d['productsList']))}catch(e){utag.DB(e)};break;case'50':try{c[50]|=(d['pageEvents'].toString().toLowerCase()=='CartCheckout'.toLowerCase()&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1&&d['productsList'].toString().toLowerCase().indexOf('ContactLen'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'51':try{c[51]|=(d['pageEvents'].toString().toLowerCase()=='CartCheckout'.toLowerCase()&&d['dom.domain'].toString().toLowerCase().indexOf('.co.nz'.toLowerCase())>-1&&d['productsList'].toString().toLowerCase().indexOf('ContactLen'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'510':try{c[510]|=(typeof d['Tags__Abort']=='undefined'&&d['Tracking_EventId'].toString().toLowerCase().indexOf('click'.toLowerCase())<0)||(typeof d['Tags__Abort']!='undefined'&&d['Tags__Abort']==''&&d['Tracking_EventId'].toString().toLowerCase().indexOf('click'.toLowerCase())<0)||(d['Tags__Abort']!='1'&&d['Tracking_EventId'].toString().toLowerCase().indexOf('click'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'511':try{c[511]|=(typeof d['Tags_AdobeAnalytics_Abort']=='undefined')||(typeof d['Tags_AdobeAnalytics_Abort']!='undefined'&&d['Tags_AdobeAnalytics_Abort']=='')||(d['Tags_AdobeAnalytics_Abort']!='1')}catch(e){utag.DB(e)};break;case'512':try{c[512]|=(typeof d['Tracking_Type']=='undefined')||(typeof d['Tracking_Type']!='undefined'&&d['Tracking_Type']=='')||(d['Tracking_Type'].toString().toLowerCase()!='hiddenaction'.toLowerCase())}catch(e){utag.DB(e)};break;case'521':try{c[521]|=(d['tealium_event'].toString().toLowerCase()=='user_register'.toLowerCase())}catch(e){utag.DB(e)};break;case'530':try{c[530]|=(d['tealium_event'].toString().indexOf('purchase')>-1)}catch(e){utag.DB(e)};break;case'539':try{c[539]|=(d['Page_Country'].toString().toLowerCase().indexOf('AU'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'54':try{c[54]|=(d['pageName'].toString().toLowerCase().indexOf('Frames:AllEyeglasses:ProductGrid'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'541':try{c[541]|=(d['tealium_event'].toString().toLowerCase().indexOf('exam_confirmation'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'55':try{c[55]|=(d['pageName'].toString().toLowerCase().indexOf('Sunglasses:AllSunglasses:ProductGrid'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'56':try{c[56]|=(d['pageName'].toString().toLowerCase().indexOf('Frames'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf(':ProductDetail'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'567':try{c[567]|=(d['Action_Type'].toString().toLowerCase()!='click'.toLowerCase())}catch(e){utag.DB(e)};break;case'569':try{c[569]|=(d['ut.profile'].toString().toLowerCase().indexOf('ray-ban'.toLowerCase())<0&&d['ut.profile'].toString().toLowerCase().indexOf('university'.toLowerCase())<0)||(d['Page_Country'].toString().toLowerCase()=='FR'.toLowerCase()&&d['gdprstate'].toString().toLowerCase()=='1'.toLowerCase())||(d['Page_Country'].toString().toLowerCase()=='FR'.toLowerCase()&&d['gdpranalytics'].toString().toLowerCase()=='1'.toLowerCase())||(d['ut.profile'].toString().toLowerCase().indexOf('ray-ban'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('FR'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'57':try{c[57]|=(d['pageName'].toString().toLowerCase().indexOf('Sunglasses'.toLowerCase())>-1&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1&&d['pageName'].toString().toLowerCase().indexOf(':ProductDetail'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'58':try{c[58]|=(d['pageEvents'].toString().toLowerCase()=='CartCheckout'.toLowerCase()&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1&&d['productsList'].toString().toLowerCase().indexOf('Sunglasses'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'584':try{c[584]|=(d['dom.url'].toString().indexOf('webapp/wcs/stores/servlet/ThankYou')>-1)}catch(e){utag.DB(e)};break;case'585':try{c[585]|=(typeof d['Tags__Abort']=='undefined')||(typeof d['Tags__Abort']!='undefined'&&d['Tags__Abort']=='')||(d['Tags__Abort']!='1')}catch(e){utag.DB(e)};break;case'586':try{c[586]|=(d['cp.cookie-policy'].toString().indexOf('"analytics":true')>-1&&typeof d['Page_Brand']!='undefined'&&/UNI/i.test(d['Page_Brand'])&&typeof d['Page_Country']!='undefined'&&d['Page_Country'].toString().toLowerCase().indexOf('US'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'587':try{c[587]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country'].toString().toLowerCase()=='US'.toLowerCase()&&typeof d['Page_Brand']!='undefined'&&/RB|SGH|OO|CO|PO|OP|OSI|TO|CD|LC|GL|MYEL|S360|CL/i.test(d['Page_Brand']))||(typeof d['Page_Country']!='undefined'&&/GB|UK/i.test(d['Page_Country'])&&typeof d['Page_Brand']!='undefined'&&/OO|RB|SGH/i.test(d['Page_Brand']))||(typeof d['Page_Country']!='undefined'&&/AU/i.test(d['Page_Country'])&&typeof d['Page_Brand']!='undefined'&&/SGH|OPSM/i.test(d['Page_Brand']))||(typeof d['Page_Country']!='undefined'&&/BR/i.test(d['Page_Country'])&&typeof d['Page_Brand']!='undefined'&&/RB/i.test(d['Page_Brand']))||(typeof d['Page_Country']!='undefined'&&/CA/i.test(d['Page_Country'])&&typeof d['Page_Brand']!='undefined'&&/OO|CL/i.test(d['Page_Brand']))||(typeof d['Page_Country']!='undefined'&&/EN/i.test(d['Page_Country'])&&typeof d['Page_Brand']!='undefined'&&/S360/i.test(d['Page_Brand']))}catch(e){utag.DB(e)};break;case'588':try{c[588]|=(typeof d['Tags__Abort']=='undefined')||(typeof d['Tags__Abort']!='undefined'&&d['Tags__Abort']=='')||(d['Tags__Abort']!='1')}catch(e){utag.DB(e)};break;case'589':try{c[589]|=(d['Action_Type'].toString().toLowerCase()!='click'.toLowerCase())}catch(e){utag.DB(e)};break;case'59':try{c[59]|=(d['pageEvents'].toString().toLowerCase()=='CartCheckout'.toLowerCase()&&d['dom.domain'].toString().toLowerCase().indexOf('.com.au'.toLowerCase())>-1&&d['productsList'].toString().toLowerCase().indexOf('Frames'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'62':try{c[62]|=(d['dom.referrer'].toString().toLowerCase().indexOf('google.'.toLowerCase())>-1&&d['dom.query_string'].toString().toLowerCase().indexOf('cid'.toLowerCase())<0&&d['dom.query_string'].toString().toLowerCase().indexOf('pid'.toLowerCase())<0)||(d['dom.referrer'].toString().toLowerCase().indexOf('bing.'.toLowerCase())>-1&&d['dom.query_string'].toString().toLowerCase().indexOf('cid'.toLowerCase())<0&&d['dom.query_string'].toString().toLowerCase().indexOf('pid'.toLowerCase())<0)||(d['dom.referrer'].toString().toLowerCase().indexOf('yahoo.'.toLowerCase())>-1&&d['dom.query_string'].toString().toLowerCase().indexOf('cid'.toLowerCase())<0&&d['dom.query_string'].toString().toLowerCase().indexOf('pid'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'63':try{c[63]|=(d['dom.url'].toString().toLowerCase().indexOf('book-an-eye-test'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('AU'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('AppointmentChooseStore'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('AU'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('servlet/AppointmentDetails'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('AU'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('servlet/BookAnEyeTestForm'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('AU'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'64':try{c[64]|=(d['Page_Country'].toString().toLowerCase().indexOf('AU'.toLowerCase())>-1&&d['dom.url'].toString().toLowerCase().indexOf('book-an-eye-test'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('AppointmentChooseStore'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('servlet/AppointmentDetails'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('servlet/BookAnEyeTestForm'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'65':try{c[65]|=(d['Page_Country'].toString().toLowerCase().indexOf('NZ'.toLowerCase())>-1&&d['dom.url'].toString().toLowerCase().indexOf('book-an-eye-test'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('AppointmentChooseStore'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('servlet/AppointmentDetails'.toLowerCase())<0&&d['dom.url'].toString().toLowerCase().indexOf('servlet/BookAnEyeTestForm'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'66':try{c[66]|=(d['dom.url'].toString().toLowerCase().indexOf('book-an-eye-test'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('NZ'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('AppointmentChooseStore'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('NZ'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('servlet/AppointmentDetails'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('NZ'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('servlet/BookAnEyeTestForm'.toLowerCase())>-1&&d['Page_Country'].toString().toLowerCase().indexOf('NZ'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'68':try{c[68]|=(d['dom.url'].toString().toLowerCase().indexOf('100-percent-yours'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'69':try{c[69]|=(/cart_add|fav_add/i.test(d['tealium_event']))}catch(e){utag.DB(e)};break;case'71':try{c[71]|=(d['dom.url'].toString().toLowerCase().indexOf('opsm.com.au'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'72':try{c[72]|=(d['Page_Country'].toString().toLowerCase()=='NZ'.toLowerCase())||(d['dom.url'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'8':try{c[8]|=(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('FindAStoreSuccess'.toLowerCase())>-1)||(d['dom.domain'].toString().toLowerCase().indexOf('opsm.co.nz'.toLowerCase())>-1&&d['pageEvents'].toString().toLowerCase().indexOf('InStoreLookUpSuccess'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;}}};utag.pre=function(){utag.loader.initdata();utag.pagevars();try{utag.loader.RD(utag.data)}catch(e){utag.DB(e)};utag.loader.loadrules();};utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();utag.handler.extend=[function(a,b){try{if(1){if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext200")&&!window.tealium_ext200_WeAreInBeta){window.tealium_ext200_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext200"));}
else{var AllTagsBefore=function(){try{var TC=__Utils__.TypeChecking;if(window.utag_cfg_ovrd&&window.utag_cfg_ovrd.noview&&(''+b.Tracking_EventId).match(/PageView:default/i)){}
else{tealium_logContext='builder';tealium_log.builder.set('processing',b);var build=function(cmds){if(!b)return;for(var i=0;i<cmds.length;i++){var cmd=((''+cmds[i]).match(/(resume|checkGet|checkStorage|updateContext|updateStorage)/)?'':'build')+cmds[i];var result=UtagBuilder[cmd](b);if(TC.isError(result))tealium_log.builder.set('error',b,'builder '+cmds[i]+': '+result.stack);}};{b.Tracking_EventId=b.Tracking_EventId||'';if(!b.Tracking_EventId.match(/^PageView:|^LinkTracking:/))b.Tracking_EventId=((a=='view'?'PageView':'LinkTracking'))+(b.Tracking_EventId?':':'')+b.Tracking_EventId;b.Tracking_EventIdLog=utag.data.Tracking_EventIdLog=(utag.data.Tracking_EventIdLog||'')+'['+b.Tracking_EventId+']';b.Tracking_Pusher=b.Tracking_Pusher||"utag.track";b.Tracking_EventSerial_Ids=b.Tracking_EventId+(b.Tracking_EventId_Serial?"::"+b.Tracking_EventId_Serial:"");}
{build(['resume','checkGet','checkStorage','updateContext']);var result=UtagRepairer.run(b);if(TC.isError(result))tealium_log.builder.set('error',b,'repairer: '+result.stack);build(['Page','Store','Tags','Device','User','Search','CDH','Session','ProductsOrder','Errors','Action','EventSource','Events']);}
{tealium_logContext='builder abort';b.Tags__Abort=UtagSettings.get('Tags__Abort',b);if(b.Tags__Abort){b.Tracking_EventId=b.Tracking_EventId.match(/\:/)?b.Tracking_EventId.replace(/[\:].*/,':abort'):b.Tracking_EventId+':abort';b.Tracking_EventIdLog=utag.data.Tracking_EventIdLog=b.Tracking_EventIdLog.replace(/\]$/,':abort]');}else{build(['updateStorage']);}}
tealium_log.builder.set('done',b);}}catch(e){if(console)console.error('### AllTagsBefore has not been completed successfully! => caused by: '+e.stack);tealium_log.builder.set('error',b,tealium_logContext+': '+e.stack);}}();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.alltagsbefore="23-07-02";}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b.gdprstate=utag.gdpr.getConsentState();b.gdpranalytics=utag.gdpr.getCookieValues().c1;}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b.Storage_Tealium_Team=window.localStorage.getItem('tealium_team');b.Storage_Tealium_Log=window.localStorage.getItem('tealium_log');}}catch(e){utag.DB(e)}},function(a,b){try{if((/home/i.test(b['Page_Type'])&&b['Action_Type'].toString().toLowerCase().indexOf('view'.toLowerCase())>-1)){b['tealium_event']='home_view'}}catch(e){utag.DB(e);}},function(a,b){try{if(b['event_name']=='cart_add'){b['tealium_event']='cart_add';}}catch(e){utag.DB(e);}try{if(b['event_name']=='cart_remove'){b['tealium_event']='cart_empty';}}catch(e){utag.DB(e);}try{if(b['event_name']=='cart_remove'){b['tealium_event']='cart_remove';}}catch(e){utag.DB(e);}try{if((b['page_type']=='cart'&&b['Page_Section1'].toString().toLowerCase().indexOf('cart'.toLowerCase())>-1&&b['tealium_event'].toString().indexOf('view')>-1)||b['event_name']=='cart_view'){b['tealium_event']='cart_view';}}catch(e){utag.DB(e);}try{if((b['page_type']=='category'&&b['tealium_event'].toString().indexOf('view')>-1)){b['tealium_event']='category_view';}}catch(e){utag.DB(e);}try{if((b['page_type']=='checkout'&&b['tealium_event'].toString().indexOf('view')>-1)||b['event_name']=='checkout'){b['tealium_event']='checkout';}}catch(e){utag.DB(e);}try{if(b['event_name']=='email_signup'){b['tealium_event']='email_signup';}}catch(e){utag.DB(e);}try{if(b['tealium_event']=='view'){b['tealium_event']='page_view';}}catch(e){utag.DB(e);}try{if((b['page_type']=='product'&&b['tealium_event'].toString().indexOf('view')>-1)||b['event_name']=='product_view'){b['tealium_event']='product_view';}}catch(e){utag.DB(e);}try{if((b['page_type']=='confirmation'&&b['tealium_event'].toString().indexOf('view')>-1)){b['tealium_event']='purchase';}}catch(e){utag.DB(e);}try{if((b['page_type']=='search'&&b['tealium_event'].toString().indexOf('view')>-1)||b['event_name'].toString().toLowerCase().indexOf('search_view'.toLowerCase())>-1){b['tealium_event']='search';}}catch(e){utag.DB(e);}try{if(b['event_name'].toString().toLowerCase().indexOf('share'.toLowerCase())>-1){b['tealium_event']='social_share';}}catch(e){utag.DB(e);}try{if(b['event_name']=='user_login'){b['tealium_event']='user_login';}}catch(e){utag.DB(e);}try{if(b['event_name']=='user_logout'){b['tealium_event']='user_logout';}}catch(e){utag.DB(e);}try{if(b['event_name']=='user_register'){b['tealium_event']='user_register';}}catch(e){utag.DB(e);}},function(a,b){try{if(/action_contactus|cart_create|facet_applied|fav_add|checkout_login|checkout_delivery|checkout_payment|checkout_summary|order_cancel|email_signoff|prescription_ok|store_search_queries|exam_search|exam_step1|exam_question1|exam_step2|exam_scheduler|exam_confirmation|exam_question1|exam_question2|exam_question3|exam_question4|exam_question5|exam_scheduler|examp_review|exam_cancel|vm_ready|vm_tryon|vm_request_webcam|vm_webcam_allowed|vm_render|vm_fit|vm_adjust|cp_loaded|cp_randomized|cp_recipe_changed|cp_recipe_saved|cp_start_over|cp_confirm|cp_closed|session_start|rx_type|rx_brand|rx_material|rx_treatment|rx_review|rx_performance|find_store_open/i.test(b['event_name'])){b['tealium_event']=b['event_name']}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['User_Email_MD5']!='undefined'&&b['User_Email_MD5']==''&&b['qp.h5e'].toString().toLowerCase()!='d41d8cd98f00b204e9800998ecf8427e'.toLowerCase())||(typeof b['User_Email_MD5']=='undefined'&&b['qp.h5e'].toString().toLowerCase()!='d41d8cd98f00b204e9800998ecf8427e'.toLowerCase())){b['User_Email_MD5']=b['qp.h5e']}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['User_Email_MD5']!='undefined'&&typeof b['User_Email_MD5']!='undefined'&&b['User_Email_MD5']!=''&&b['User_Email_MD5'].toString().toLowerCase()!='d41d8cd98f00b204e9800998ecf8427e'.toLowerCase())){document.cookie="md5="+b['User_Email_MD5']+";path=/;domain="+utag.cfg.domain+";expires=Thu, 31 Dec 2099 00:00:00 GMT";b['cp.md5']=b['User_Email_MD5'];}}catch(e){utag.DB(e);}},function(a,b){try{if(b['User_Email_MD5'].toString().toLowerCase()=='d41d8cd98f00b204e9800998ecf8427e'.toLowerCase()){b['User_Email_MD5']=''}}catch(e){utag.DB(e);}},function(a,b,c,d){b._ccity=(typeof b['']!='undefined')?b['']:'';b._ccountry=(typeof b['User_Country']!='undefined')?b['User_Country']:'';b._ccurrency=(typeof b['Order_Currency']!='undefined')?b['Order_Currency']:'';b._ccustid=(typeof b['User_IdTimeStamp']!='undefined')?b['User_IdTimeStamp']:'';b._corder=(typeof b['Order_Id']!='undefined')?b['Order_Id']:'';b._cpromo=(typeof b['Order_DiscountCode']!='undefined')?b['Order_DiscountCode']:'';b._cship=(typeof b['Order_ShippingRevenue']!='undefined')?b['Order_ShippingRevenue']:'';b._cstate=(typeof b['']!='undefined')?b['']:'';b._cstore=(typeof b['Page_Country']!='undefined')?b['Page_Country']:'web';b._csubtotal=(typeof b['Order_ProductsRevenue']!='undefined')?b['Order_ProductsRevenue']:'';b._ctax=(typeof b['Order_TaxAmount']!='undefined')?b['Order_TaxAmount']:'';b._ctotal=(typeof b['Order_TotalAmount']!='undefined')?b['Order_TotalAmount']:'';b._ctype=(typeof b['Order_PaymentType']!='undefined')?b['Order_PaymentType']:'';b._czip=(typeof b['User_ZipCode']!='undefined')?b['User_ZipCode']:'';b._cprod=(typeof b['Products_Id_Array']!='undefined'&&b['Products_Id_Array'].length>0)?b['Products_Id_Array']:[];b._cprodname=(typeof b['Products_ModelName_Array']!='undefined'&&b['Products_ModelName_Array'].length>0)?b['Products_ModelName_Array']:[];b._cbrand=(typeof b['Products_Brand_Array']!='undefined'&&b['Products_Brand_Array'].length>0)?b['Products_Brand_Array']:[];b._ccat=(typeof b['Products_Category_Array']!='undefined'&&b['Products_Category_Array'].length>0)?b['Products_Category_Array']:[];b._ccat2=(typeof b['']!='undefined'&&b[''].length>0)?b['']:[];b._cquan=(typeof b['Products_Units_Array']!='undefined'&&b['Products_Units_Array'].length>0)?b['Products_Units_Array']:[];b._cprice=(typeof b['Products_RevenuePerUnit_Array']!='undefined'&&b['Products_RevenuePerUnit_Array'].length>0)?b['Products_RevenuePerUnit_Array']:[];b._csku=(typeof b['Products_Sku_Array']!='undefined'&&b['Products_Sku_Array'].length>0)?b['Products_Sku_Array']:[];b._cpdisc=(typeof b['Products_DiscountPerUnit_Array']!='undefined'&&b['Products_DiscountPerUnit_Array'].length>0)?b['Products_DiscountPerUnit_Array']:[];if(b._cprod.length==0){b._cprod=b._csku.slice()};if(b._cprodname.length==0){b._cprodname=b._csku.slice()};function tf(a){if(a==''||isNaN(parseFloat(a))){return a}else{return(parseFloat(a)).toFixed(2)}};b._ctotal=tf(b._ctotal);b._csubtotal=tf(b._csubtotal);b._ctax=tf(b._ctax);b._cship=tf(b._cship);for(c=0;c<b._cprice.length;c++){b._cprice[c]=tf(b._cprice[c])};for(c=0;c<b._cpdisc.length;c++){b._cpdisc[c]=tf(b._cpdisc[c])};},function(a,b){try{if((typeof b['_cprod']!='undefined'&&b['_cprod']!=''&&typeof b['_cprice']!='undefined'&&b['_cprice']=='')){b['_cprice']=b['Products_Price_Array']}}catch(e){utag.DB(e);}},function(a,b){try{if((typeof b['Order_ProductsAmount']!='undefined'&&b['Order_ProductsAmount']!=''&&typeof b['_csubtotal']!='undefined'&&b['_csubtotal']==''&&/checkout|cart_view/i.test(b['tealium_event']))){b['_csubtotal']=b['Order_ProductsAmount']}}catch(e){utag.DB(e);}},function(a,b){try{if(1){if(typeof utag!="undefined"){if(utag.ut.md5===undefined){var md5=function(t,n){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r&&"function"==typeof require)
try{r=require("crypto")}catch(t){}
var e=function(){if(r){if("function"==typeof r.getRandomValues)
try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}
if("function"==typeof r.randomBytes)
try{return r.randomBytes(4).readInt32LE()}catch(t){}}
throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}
return function(n){var r;return t.prototype=n,r=new t,t.prototype=null,r}}(),o={},s=o.lib={},a=s.Base={extend:function(t){var n=i(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)
t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var n=this.words,r=t.words,e=this.sigBytes,i=t.sigBytes;if(this.clamp(),e%4)
for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;n[e+o>>>2]|=s<<24-(e+o)%4*8}
else
for(o=0;o<i;o+=4)
n[e+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var n=this.words,r=this.sigBytes;n[r>>>2]&=4294967295<<32-r%4*8,n.length=t.ceil(r/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],r=0;r<t;r+=4)
n.push(e());return new c.init(n,t)}}),u=o.enc={},f=u.Hex={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push((o>>>4).toString(16)),e.push((15&o).toString(16))}
return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e+=2)
r[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new c.init(r,n/2)}},h=u.Latin1={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push(String.fromCharCode(o))}
return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e++)
r[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c.init(r,n)}},d=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},l=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var r,e=this._data,i=e.words,o=e.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=n?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,f=t.min(4*u,o);if(u){for(var h=0;h<u;h+=s)
this._doProcessBlock(i,h);r=i.splice(0,u),e.sigBytes-=f}
return new c.init(r,f)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(s.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,r){return new t.init(r).finalize(n)}},_createHmacHelper:function(t){return function(n,r){return new p.HMAC.init(t,r).finalize(n)}}}),o.algo={});return o}(Math);(function(t){var n=md5,r=n.lib,e=r.WordArray,i=r.Hasher,o=n.algo,s=[];!function(){for(var n=0;n<64;n++)
s[n]=4294967296*t.abs(t.sin(n+1))|0}();var a=o.MD5=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var r=0;r<16;r++){var e=n+r,i=t[e];t[e]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}
var o=this._hash.words,a=t[n+0],d=t[n+1],l=t[n+2],p=t[n+3],y=t[n+4],g=t[n+5],w=t[n+6],v=t[n+7],_=t[n+8],m=t[n+9],B=t[n+10],x=t[n+11],b=t[n+12],S=t[n+13],H=t[n+14],z=t[n+15],C=o[0],M=o[1],A=o[2],D=o[3];C=c(C,M,A,D,a,7,s[0]),D=c(D,C,M,A,d,12,s[1]),A=c(A,D,C,M,l,17,s[2]),M=c(M,A,D,C,p,22,s[3]),C=c(C,M,A,D,y,7,s[4]),D=c(D,C,M,A,g,12,s[5]),A=c(A,D,C,M,w,17,s[6]),M=c(M,A,D,C,v,22,s[7]),C=c(C,M,A,D,_,7,s[8]),D=c(D,C,M,A,m,12,s[9]),A=c(A,D,C,M,B,17,s[10]),M=c(M,A,D,C,x,22,s[11]),C=c(C,M,A,D,b,7,s[12]),D=c(D,C,M,A,S,12,s[13]),A=c(A,D,C,M,H,17,s[14]),C=u(C,M=c(M,A,D,C,z,22,s[15]),A,D,d,5,s[16]),D=u(D,C,M,A,w,9,s[17]),A=u(A,D,C,M,x,14,s[18]),M=u(M,A,D,C,a,20,s[19]),C=u(C,M,A,D,g,5,s[20]),D=u(D,C,M,A,B,9,s[21]),A=u(A,D,C,M,z,14,s[22]),M=u(M,A,D,C,y,20,s[23]),C=u(C,M,A,D,m,5,s[24]),D=u(D,C,M,A,H,9,s[25]),A=u(A,D,C,M,p,14,s[26]),M=u(M,A,D,C,_,20,s[27]),C=u(C,M,A,D,S,5,s[28]),D=u(D,C,M,A,l,9,s[29]),A=u(A,D,C,M,v,14,s[30]),C=f(C,M=u(M,A,D,C,b,20,s[31]),A,D,g,4,s[32]),D=f(D,C,M,A,_,11,s[33]),A=f(A,D,C,M,x,16,s[34]),M=f(M,A,D,C,H,23,s[35]),C=f(C,M,A,D,d,4,s[36]),D=f(D,C,M,A,y,11,s[37]),A=f(A,D,C,M,v,16,s[38]),M=f(M,A,D,C,B,23,s[39]),C=f(C,M,A,D,S,4,s[40]),D=f(D,C,M,A,a,11,s[41]),A=f(A,D,C,M,p,16,s[42]),M=f(M,A,D,C,w,23,s[43]),C=f(C,M,A,D,m,4,s[44]),D=f(D,C,M,A,b,11,s[45]),A=f(A,D,C,M,z,16,s[46]),C=h(C,M=f(M,A,D,C,l,23,s[47]),A,D,a,6,s[48]),D=h(D,C,M,A,v,10,s[49]),A=h(A,D,C,M,H,15,s[50]),M=h(M,A,D,C,g,21,s[51]),C=h(C,M,A,D,b,6,s[52]),D=h(D,C,M,A,p,10,s[53]),A=h(A,D,C,M,B,15,s[54]),M=h(M,A,D,C,d,21,s[55]),C=h(C,M,A,D,_,6,s[56]),D=h(D,C,M,A,z,10,s[57]),A=h(A,D,C,M,w,15,s[58]),M=h(M,A,D,C,S,21,s[59]),C=h(C,M,A,D,y,6,s[60]),D=h(D,C,M,A,x,10,s[61]),A=h(A,D,C,M,l,15,s[62]),M=h(M,A,D,C,m,21,s[63]),o[0]=o[0]+C|0,o[1]=o[1]+M|0,o[2]=o[2]+A|0,o[3]=o[3]+D|0},_doFinalize:function(){var n=this._data,r=n.words,e=8*this._nDataBytes,i=8*n.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(e/4294967296),s=e;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var f=c[u];c[u]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}
return a},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,n,r,e,i,o,s){var a=t+(n&r|~n&e)+i+s;return(a<<o|a>>>32-o)+n}
function u(t,n,r,e,i,o,s){var a=t+(n&e|r&~e)+i+s;return(a<<o|a>>>32-o)+n}
function f(t,n,r,e,i,o,s){var a=t+(n^r^e)+i+s;return(a<<o|a>>>32-o)+n}
function h(t,n,r,e,i,o,s){var a=t+(r^(n|~e))+i+s;return(a<<o|a>>>32-o)+n}
n.MD5=i._createHelper(a),n.HmacMD5=i._createHmacHelper(a)}(Math));}else{var md5=utag.ut.md5;}
if(typeof utag.Utils=="undefined")utag.Utils={};if(typeof utag.Utils.generateEventID=="undefined"){utag.Utils.generateEventID=function(event,data,lookup_id){var hash_input=(data["tealium_timestamp_epoch"]||(function(){var d=new Date();return Math.floor(d.getTime()/1000);})())+"-"+lookup_id+"-"+event+"-"+b['ut.session_id'],event_id=md5.MD5(hash_input).toString();return event_id;};}
lookup_id=b.tealium_random;if(typeof lookup_id!=="undefined"){if(typeof utag.globals=="undefined")utag.globals={};utag.globals[lookup_id]=window.utag.globals[lookup_id]||{};}else{lookup_id=Math.random().toFixed(16).substring(2);utag.DB("send:##UTID##: The tealium_random variable was not defined. Any Facebook event IDs generated will not be collected by Tealium Collect. Please ensure you are using the latest version of utag.js to generate a tealium_random value.");}
if(b.tealium_random){var event_id="";if(typeof b.tealium_event!="undefined"&&b.tealium_event!=""){event_id=utag.Utils.generateEventID(b.tealium_event,b,lookup_id);}else{event_id=utag.Utils.generateEventID(b.Page_Type,b,lookup_id);}
b["fb_event_id_generic"]=event_id;if(window.utag.globals[b.tealium_random]){if(typeof b.tealium_event!="undefined"&&b.tealium_event!=""){window.utag.globals[b.tealium_random]["fb_event_id_"+b.tealium_event]=event_id;b["fb_event_id_"+b.tealium_event]=event_id;}else{window.utag.globals[b.tealium_random]["fb_event_id_"+b.Page_Type]=event_id;b["fb_event_id_"+b.Page_Type]=event_id;}
}}else{utag.DB("send:##UTID##: Event ID Generation is enabled, but the tealium_random value was not found in the data layer. No event ID was generated for "+event_name);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['pageName'].toString().indexOf(':BookEyeTest:BookingConfirmation')>-1){b['ecomm_cstore']=b['StoreDetails'];b['ecomm_ccurrency']=b['currency'];b['ecomm_ctype']=b['ConversionType'];b['ecomm_cprod']=b['eyeTestProductId'];b['ecomm_cprodname']=b['orderNamesList'];b['ecomm_ccat']=b['orderNamesList']}}catch(e){utag.DB(e);}},function(a,b){try{if(b['pageName'].toString().indexOf(':Common:Cart:OrderConfirmation')>-1){b['ecomm_corder']=b['orderId'];b['ecomm_ctotal']=b['CartTotal'];b['ecomm_csku']=b['CartSKUIdList'];b['ecomm_ccurrency']=b['currency'];b['ecomm_cprod']=b['CartProductIdList'];b['ecomm_cship']=b['CartShippingCost'];b['ecomm_ctax']=b['CartTax'];b['ecomm_cquan']=b['CartQuanList'];b['ecomm_cprice']=b['CartPriceList'];b['ecomm_cpdisc']=b['CartDiscount'];b['ecomm_csubtotal']=b['CartTotal'];b['ecomm_ccat']=b['productCatList']}}catch(e){utag.DB(e);}},function(a,b){try{if(1){window._uxa=window._uxa||[];window._uxa.push(['setPIISelectors',{PIISelectors:[".fa__profile-picture-box, .rb-frame-genius-my-account__icon, .frame-advisor--floating-button, .render-canvas, .mirror-canvas-output, #screenshot img, #webcam-target, #framegenius-ui button, #img_takePhoto, #frameadv-wrapper button, .user-pic, .user-avatar"]}]);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext400")&&!window.tealium_ext400_WeAreInBeta){window.tealium_ext400_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext400"));}
else{var AllTagsAfter=function(){try{tealium_logContext='all tags after - clean';delete b.Tracking_EventId_Serial;if(b.Tracking_Pusher)delete b.Tracking_Pusher;delete window.tealium_ext000_utils__WeAreInBeta;delete window.tealium_ext000_ui_components__WeAreInBeta;delete window.tealium_ext000_global_settings__WeAreInBeta;delete window.tealium_ext000_automatic_qa__WeAreInBeta;delete window.tealium_ext000_tealium_log__WeAreInBeta;delete window.tealium_ext000_automatic_qa_conf__WeAreInBeta;delete window.tealium_ext000_utag_components__WeAreInBeta;delete window.tealium_ext000_repairer_patch__WeAreInBeta;delete window.tealium_ext000_customize_clicks__WeAreInBeta;delete window.tealium_ext000_listeners__WeAreInBeta;delete window.tealium_ext000_utag_settings__WeAreInBeta;delete window.tealium_ext000_WeAreInBeta;delete window.tealium_ext100_WeAreInBeta;delete window.tealium_ext200_WeAreInBeta;delete window.tealium_ext300_WeAreInBeta;delete window.tealium_ext400_WeAreInBeta;delete b.page_type;}catch(e){if(console)console.error('### AllTagsAfter has not been completed successfully! => caused by: '+e.stack);tealium_log.builder.set('error',b,tealium_logContext+': '+e.stack);}}();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.alltagsafter="23-09-03";}}catch(e){utag.DB(e)}}];utag.handler.cfg_extend=[{"alr":0,"id":"467","end":0,"bwq":0,"blr":1},{"end":0,"bwq":0,"blr":1,"id":"460","alr":0},{"blr":1,"bwq":0,"end":0,"alr":0,"id":"412"},{"end":0,"bwq":0,"blr":1,"id":"438","alr":0},{"blr":1,"bwq":0,"end":0,"alr":0,"id":"416"},{"end":0,"bwq":0,"blr":1,"id":"417","alr":0},{"end":0,"bwq":0,"blr":1,"id":"455","alr":0},{"id":"452","alr":0,"end":0,"bwq":0,"blr":1},{"blr":1,"bwq":0,"end":0,"alr":0,"id":"485"},{"end":0,"bwq":0,"blr":0,"alr":1,"id":"411"},{"id":"431","alr":1,"blr":0,"bwq":0,"end":0},{"alr":1,"id":"442","blr":0,"bwq":0,"end":0},{"id":"453","alr":1,"blr":0,"bwq":0,"end":0},{"blr":0,"bwq":0,"end":0,"id":"80","alr":1},{"blr":0,"bwq":0,"end":0,"alr":1,"id":"79"},{"alr":1,"id":"486","blr":0,"bwq":0,"end":0},{"blr":0,"bwq":0,"end":1,"id":"469","alr":0}];utag.loader.initcfg=function(){utag.loader.cfg={"274":{load:4,send:utag.cond[569],v:202209290925,wait:0,tid:1191},"336":{load:4,send:(((utag.cond[587]||utag.cond[586])&&(utag.cond[588])&&(utag.cond[589]))),v:202309250934,wait:1,tid:3131},"273":{load:4,send:(((utag.cond[511])&&(utag.cond[585])&&(utag.cond[512]))),v:202309250934,wait:1,tid:19063},"26":{load:(((utag.cond[539])&&(utag.cond[541])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"30":{load:(((utag.cond[72])&&(utag.cond[541])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"31":{load:(((utag.cond[539])&&(utag.cond[521])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"32":{load:(((utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"33":{load:(((utag.cond[11])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"34":{load:(((utag.cond[72])&&(utag.cond[521])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"35":{load:(((utag.cond[72])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"36":{load:(((utag.cond[72])&&(utag.cond[8])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"62":{load:(((utag.cond[72])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"63":{load:(((utag.cond[539])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"74":{load:(((utag.cond[14])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"75":{load:(((utag.cond[15])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"76":{load:(((utag.cond[16])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"77":{load:(((utag.cond[17])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"78":{load:(((utag.cond[18])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"80":{load:(((utag.cond[72])&&(utag.cond[20])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"81":{load:(((utag.cond[72])&&(utag.cond[21])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"82":{load:(((utag.cond[72])&&(utag.cond[22])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"83":{load:(((utag.cond[72])&&(utag.cond[23])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"84":{load:(((utag.cond[72])&&(utag.cond[24])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"86":{load:(((utag.cond[72])&&(utag.cond[24])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"87":{load:(((utag.cond[72])&&(utag.cond[25])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"88":{load:(((utag.cond[72])&&(utag.cond[26])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"101":{load:(((utag.cond[28])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"102":{load:(((utag.cond[29])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"103":{load:(((utag.cond[72])&&(utag.cond[30])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"104":{load:(((utag.cond[72])&&(utag.cond[31])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:11003},"127":{load:(((utag.cond[539])&&(utag.cond[32])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"128":{load:(((utag.cond[539])&&(utag.cond[32])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"129":{load:(((utag.cond[72])&&(utag.cond[33])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"130":{load:(((utag.cond[539])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"132":{load:(((utag.cond[72])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"133":{load:(((utag.cond[539])&&(utag.cond[36])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"134":{load:(((utag.cond[36])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"135":{load:(((utag.cond[37])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"164":{load:(((utag.cond[46])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"165":{load:(((utag.cond[72])&&(utag.cond[47])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"166":{load:(((utag.cond[72])&&(utag.cond[49])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"167":{load:(((utag.cond[48])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"168":{load:(((utag.cond[72])&&(utag.cond[51])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"169":{load:(((utag.cond[50])&&(utag.cond[72])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"170":{load:(((utag.cond[539])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"174":{load:(((utag.cond[72])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"178":{load:(((utag.cond[54])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"179":{load:(((utag.cond[55])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"180":{load:(((utag.cond[56])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"181":{load:(((utag.cond[57])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"182":{load:(((utag.cond[59])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"183":{load:(((utag.cond[58])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"184":{load:(((utag.cond[539])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"185":{load:(((utag.cond[539])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"187":{load:(((utag.cond[539])&&(utag.cond[64])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:19050},"192":{load:(((utag.cond[62])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:20067},"195":{load:((utag.cond[510])),send:1,v:202307030932,wait:1,tid:9024},"205":{load:(((utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:16017},"207":{load:((utag.cond[510])),send:1,v:202307030932,wait:1,tid:3015},"208":{load:(((utag.cond[63])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:19050},"209":{load:(((utag.cond[65])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:19050},"210":{load:(((utag.cond[66])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:19050},"213":{load:(((utag.cond[68])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:4001},"223":{load:(((utag.cond[71])&&(utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:16017},"231":{load:(((utag.cond[71])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:2063},"232":{load:(((utag.cond[71])&&(utag.cond[541])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:17001},"233":{load:(((utag.cond[541])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:17001},"276":{load:((utag.cond[510])),send:1,v:202307030932,wait:1,tid:6037},"277":{load:(((utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:6026},"278":{load:(((utag.cond[539])&&(utag.cond[69])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:6026},"106":{load:(((utag.cond[72])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:7115},"105":{load:(((utag.cond[3])&&(utag.cond[539])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:7115},"203":{load:(((utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:7117},"284":{load:(((utag.cond[71])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:7132},"280":{load:(((utag.cond[541]||utag.cond[584])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:7132},"283":{load:(((utag.cond[530])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:7132},"290":{load:(((utag.cond[567])&&(utag.cond[71])&&(utag.cond[510]))),send:1,v:202307030932,wait:1,tid:3167},"292":{load:((utag.cond[510])),send:1,v:202307030932,wait:1,tid:20010},"293":{load:4,send:(((utag.cond[567])&&(utag.cond[510]))),v:202307030932,wait:1,tid:20064},"333":{load:((utag.cond[510])),send:1,v:202307030932,wait:1,tid:20067}};utag.loader.cfgsort=["274","336","273","26","30","31","32","33","34","35","36","62","63","74","75","76","77","78","80","81","82","83","84","86","87","88","101","102","103","104","127","128","129","130","132","133","134","135","164","165","166","167","168","169","170","174","178","179","180","181","182","183","184","185","187","192","195","205","207","208","209","210","213","223","231","232","233","276","277","278","106","105","203","284","280","283","290","292","293","333"];}
utag.loader.initcfg();}
if(typeof utag_cfg_ovrd!='undefined'){for(utag._i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[utag._i]=utag_cfg_ovrd[utag._i]};utag.loader.PINIT=function(a,b,c){utag.DB("Pre-INIT");if(utag.cfg.noload){return;}
try{this.GET();if(utag.handler.RE('view',utag.data,"blr")){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};a=this.cfg;c=0;for(b in this.GV(a)){if(a[b].block==1||(a[b].load>0&&(typeof a[b].src!='undefined'&&a[b].src!=''))){a[b].block=1;c=1;this.bq[b]=1;}}
if(c==1){for(b in this.GV(a)){if(a[b].block){a[b].id=b;if(a[b].load==4)a[b].load=1;a[b].cb=function(){var d=this.uid;utag.loader.cfg[d].cbf=1;utag.loader.LOAD(d)};this.AS(a[b]);}}}
if(c==0)this.INIT();};utag.loader.INIT=function(a,b,c,d,e){utag.DB('utag.loader.INIT');if(this.ol==1)return-1;else this.ol=1;if(utag.cfg.noview!=true)utag.handler.RE('view',utag.data,"alr");utag.rpt.ts['i']=new Date();d=this.cfgsort;for(a=0;a<d.length;a++){e=d[a];b=this.cfg[e];b.id=e;if(b.block!=1){if(utag.loader.bk[b.id]||((utag.cfg.readywait||utag.cfg.noview)&&b.load==4)){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.wait==1&&utag.loader.rf==0){utag.DB('utag.loader.INIT: waiting '+b.id);this.wq.push(b)
this.f[b.id]=2;}else if(b.load>0){utag.DB('utag.loader.INIT: loading '+b.id);this.lq.push(b);this.AS(b);}}}
if(this.wq.length>0)utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.DB('READY:utag.loader.wq');utag.loader.rf=1;utag.loader.WQ();}});else if(this.lq.length>0)utag.loader.rf=1;else if(this.lq.length==0)utag.loader.END();return 1};utag.loader.EV('','ready',function(a){if(utag.loader.efr!=1){utag.loader.efr=1;try{try{if(1){if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext100")&&!window.tealium_ext100_WeAreInBeta){window.tealium_ext100_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext100"));}
else{var DomReadyInitialization=function(){try{tealium_log.domready.set('processing',utag_data);UtagListeners.apply();{if(window.tealium_domready_patches&&window.tealium_domready_patches.apply)tealium_domready_patches.apply();}
tealium_log.domready.set('done',utag_data);}catch(e){if(console)console.error('### DomReadyInitialization has not been completed successfully! => caused by: '+e.stack);var datalayer={id:'Error'};tealium_log.domready.set('error',datalayer,'dom ready: '+e.stack);tealium_data2track.push(datalayer);}}();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.domready="23-05-05";}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};}})
if(utag.cfg.readywait||utag.cfg.waittimer){utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.loader.rf=1;utag.cfg.readywait=1;utag.DB('READY:utag.cfg.readywait');setTimeout(function(){utag.loader.PINIT()},utag.cfg.waittimer||1);}})}else{utag.loader.PINIT()}}
//tealium universal tag - utag.274 ut4.0.202309250934, Copyright 2023 Tealium.com Inc. All Rights Reserved.
var e=function(){"use strict";function e(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var i=this.callbacks[e].push(t)-1;return function(){this.callbacks[e].splice(i,1)}},execute:function(e,t){if(this.callbacks[e]){t=void 0===t?[]:t,t=t instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var i=this.callbacks[e].shift();"function"==typeof i?i.apply(null,t):i instanceof Array&&i[1].apply(i[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!v.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var i=void 0!==e[t]?e[t]:"";this.execute(t,i)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function t(e){for(var t=/^\d+$/,i=0,n=e.length;i<n;i++)if(!t.test(e[i]))return!1;return!0}function i(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function n(e,t){for(var i=0;i<e.length;i++){var n=parseInt(e[i],10),r=parseInt(t[i],10);if(n>r)return 1;if(r>n)return-1}return 0}function r(e,r){if(e===r)return 0;var a=e.toString().split("."),s=r.toString().split(".");return t(a.concat(s))?(i(a,s),n(a,s)):NaN}var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,i,n=1;n<arguments.length;++n){i=arguments[n];for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e};var s={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},o={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},l={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut"},d={CUSTOMERIDS:"getCustomerIDs"},c={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs"},u={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},f={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},g={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},m={GLOBAL:"global"},_={MESSAGES:s,STATE_KEYS_MAP:o,ASYNC_API_MAP:l,SYNC_API_MAP:d,ALL_APIS:c,FIELDGROUP_TO_FIELD:u,FIELDS:f,AUTH_STATE:g,OPT_OUT:m},h=_.STATE_KEYS_MAP,p=function(e){function t(){}function i(t,i){var n=this;return function(){var t=e(0,h.MCMID),r={};return r[h.MCMID]=t,n.setStateAndPublish(r),i(t),t}}this.getMarketingCloudVisitorID=function(e){e=e||t;var n=this.findField(h.MCMID,e),r=i.call(this,h.MCMID,e);return void 0!==n?n:r()}},C=_.MESSAGES,S=_.ASYNC_API_MAP,I=_.SYNC_API_MAP,D=function(){function e(){}function t(e,t){var i=this;return function(){return i.callbackRegistry.add(e,t),i.messageParent(C.GETSTATE),""}}function i(i){this[S[i]]=function(n){n=n||e;var r=this.findField(i,n),a=t.call(this,i,n);return void 0!==r?r:a()}}function n(t){this[I[t]]=function(){return this.findField(t,e)||{}}}Object.keys(S).forEach(i,this),Object.keys(I).forEach(n,this)},A=_.ASYNC_API_MAP,M=function(){Object.keys(A).forEach(function(e){this[A[e]]=function(t){this.callbackRegistry.add(e,t)}},this)},v=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){t.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},t.isValueEmpty=function(e){return""===e||t.isObjectEmpty(e)},t.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},t.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},t.isObject=function(e){return null!==e&&"object"==typeof e&&!1===Array.isArray(e)}}),y=(v.isObjectEmpty,v.isValueEmpty,v.getIeVersion,v.encodeAndBuildRequest,v.isObject,e),b=_.MESSAGES,T={0:"prefix",1:"orgID",2:"state"},k=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach(function(e,i){if(void 0!==e){t[T[i]]=2!==i?e:JSON.parse(e)}}),t}catch(e){}},this.isInvalid=function(i){var n=this.parse(i);if(!n||Object.keys(n).length<2)return!0;var r=e!==n.orgID,a=!t||i.origin!==t,s=-1===Object.keys(b).indexOf(n.prefix);return r||a||s},this.send=function(i,n,r){var a=n+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{i.postMessage(a,t)}catch(e){}}},O=_.MESSAGES,E=function(e,t,i,n){function r(e){Object.assign(m,e)}function s(e){Object.assign(m.state,e),m.callbackRegistry.executeAll(m.state)}function o(e){if(!C.isInvalid(e)){h=!1;var t=C.parse(e);m.setStateAndPublish(t.state)}}function l(e){!h&&_&&(h=!0,C.send(n,e))}function d(){r(new p(i._generateID)),m.getMarketingCloudVisitorID(),m.callbackRegistry.executeAll(m.state,!0),a.removeEventListener("message",c)}function c(e){if(!C.isInvalid(e)){var t=C.parse(e);h=!1,a.clearTimeout(m._handshakeTimeout),a.removeEventListener("message",c),r(new D(m)),a.addEventListener("message",o),m.setStateAndPublish(t.state),m.callbackRegistry.hasCallbacks()&&l(O.GETSTATE)}}function u(){_&&postMessage?(a.addEventListener("message",c),l(O.HANDSHAKE),m._handshakeTimeout=setTimeout(d,250)):d()}function f(){a.s_c_in||(a.s_c_il=[],a.s_c_in=0),m._c="Visitor",m._il=a.s_c_il,m._in=a.s_c_in,m._il[m._in]=m,a.s_c_in++}function g(){function e(e){0!==e.indexOf("_")&&"function"==typeof i[e]&&(m[e]=function(){})}Object.keys(i).forEach(e),m.getSupplementalDataID=i.getSupplementalDataID}var m=this,_=t.whitelistParentDomain;m.state={},m.version=i.version,m.marketingCloudOrgID=e,m.cookieDomain=i.cookieDomain||"",m._instanceType="child";var h=!1,C=new k(e,_);m.callbackRegistry=y(),m.init=function(){f(),g(),r(new M(m)),u()},m.findField=function(e,t){if(m.state[e])return t(m.state[e]),m.state[e]},m.messageParent=l,m.setStateAndPublish=s},L=_.MESSAGES,P=_.ALL_APIS,R=_.ASYNC_API_MAP,F=_.FIELDGROUP_TO_FIELD,w=function(e,t){function i(){var t={};return Object.keys(P).forEach(function(i){var n=P[i],r=e[n]();v.isValueEmpty(r)||(t[i]=r)}),t}function n(){var t=[];return e._loading&&Object.keys(e._loading).forEach(function(i){if(e._loading[i]){var n=F[i];t.push(n)}}),t.length?t:null}function r(t){return function i(r){var a=n();if(a){var s=R[a[0]];e[s](i,!0)}else t()}}function a(e,n){var r=i();t.send(e,n,r)}function s(e){l(e),a(e,L.HANDSHAKE)}function o(e){r(function(){a(e,L.PARENTSTATE)})()}function l(i){function n(n){r.call(e,n),t.send(i,L.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=n}return function(e){if(!t.isInvalid(e)){(t.parse(e).prefix===L.HANDSHAKE?s:o)(e.source)}}},V=function(e,t){function i(e){return function(i){n[e]=i,r++,r===a&&t(n)}}var n={},r=0,a=Object.keys(e).length;Object.keys(e).forEach(function(t){var n=e[t];if(n.fn){var r=n.args||[];r.unshift(i(t)),n.fn.apply(n.context||null,r)}})},N=function(e){var t;if(!e&&a.location&&(e=a.location.hostname),t=e)if(/^[0-9.]+$/.test(t))t="";else{var i=",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,",n=t.split("."),r=n.length-1,s=r-1;if(r>1&&n[r].length<=2&&(2===n[r-1].length||i.indexOf(","+n[r]+",")<0)&&s--,s>0)for(t="";r>=s;)t=n[r]+(t?".":"")+t,r--}return t},x={compare:r,isLessThan:function(e,t){return r(e,t)<0},areVersionsDifferent:function(e,t){return 0!==r(e,t)},isGreaterThan:function(e,t){return r(e,t)>0},isEqual:function(e,t){return 0===r(e,t)}},j=!!a.postMessage,U={postMessage:function(e,t,i){var n=1;t&&(j?i.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(i.location=t.replace(/#.*$/,"")+"#"+ +new Date+n+++"&"+e))},receiveMessage:function(e,t){var i;try{j&&(e&&(i=function(i){if("string"==typeof t&&i.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(i.origin))return!1;e(i)}),a.addEventListener?a[e?"addEventListener":"removeEventListener"]("message",i):a[e?"attachEvent":"detachEvent"]("onmessage",i))}catch(e){}}},H=function(e){var t,i,n="0123456789",r="",a="",s=8,o=10,l=10;if(1==e){for(n+="ABCDEF",t=0;16>t;t++)i=Math.floor(Math.random()*s),r+=n.substring(i,i+1),i=Math.floor(Math.random()*s),a+=n.substring(i,i+1),s=16;return r+"-"+a}for(t=0;19>t;t++)i=Math.floor(Math.random()*o),r+=n.substring(i,i+1),0===t&&9==i?o=3:(1==t||2==t)&&10!=o&&2>i?o=10:2<t&&(o=10),i=Math.floor(Math.random()*l),a+=n.substring(i,i+1),0===t&&9==i?l=3:(1==t||2==t)&&10!=l&&2>i?l=10:2<t&&(l=10);return r+a},B=function(e,t){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(a.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new a[this.corsMetadata.corsType]},fireCORS:function(t,i,n){function r(e){var i;try{if((i=JSON.parse(e))!==Object(i))return void s.handleCORSError(t,null,"Response is not JSON")}catch(e){return void s.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var n=t.callback,r=a,o=0;o<n.length;o++)r=r[n[o]];r(i)}catch(e){s.handleCORSError(t,e,"Error forming callback function")}}var s=this;i&&(t.loadErrorHandler=i);try{var o=this.getCORSInstance();o.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(o.withCredentials=!0,o.timeout=e.loadTimeout,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&r(this.responseText)}),o.onerror=function(e){s.handleCORSError(t,e,"onerror")},o.ontimeout=function(e){s.handleCORSError(t,e,"ontimeout")},o.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,i,n){e.CORSErrors.push({corsData:t,error:i,description:n}),t.loadErrorHandler&&("ontimeout"===n?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},G={POST_MESSAGE_ENABLED:!!a.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/},q=function(e,t){var i=a.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,n="http://fast.",r="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(i.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(n=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=n+this.subdomain+".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(i.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:G.POST_MESSAGE_ENABLED?null:100,jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){r=i.createElement("iframe"),r.sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=n.id,r.name=n.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=n.url,n.newIframeCreated=!0,t(),i.body.appendChild(r)}function t(e){r.addEventListener("load",function(){r.className="aamIframeLoaded",n.iframeHasLoaded=!0,n.fireIframeLoadedCallbacks(e),n.requestToProcess()})}this.startedAttachingIframe=!0;var n=this,r=i.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach(function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function i(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var n,r=this;if(t===Object(t)&&t.ibs)if(n=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var a,s,o,l=!1;for(a=0,s=this.jsonForComparison.length;a<s;a++)if(o=this.jsonForComparison[a],n===JSON.stringify(o.ibs||[])){l=!0;break}l?this.jsonDuplicates.push(t):i()}else i();if((this.receivedThirdPartyCookiesNotification||!G.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var d=this.jsonWaiting.shift();this.process(d),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=G.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,i){var n=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return n?r&&(e._setFieldExpire("MCAAMLH",i),e._setField("MCAAMLH",r),parseInt(n,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),n=r)):(n=r)&&(e._setFieldExpire("MCAAMLH",i),e._setField("MCAAMLH",n)),n||(n=""),n},processSyncOnPage:function(e){var t,i,n,r;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(n=0;n<i;n++)r=t[n],r.syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,i,n,r,a,s=encodeURIComponent,o=!1;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(o=!0,n=0;n<i;n++)r=t[n],a=[s("ibs"),s(r.id||""),s(r.tag||""),v.encodeAndBuildRequest(r.url||[],","),s(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));o&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,i,n){var r="syncOnPage"===n,a=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var s,o,l=e._getField(a),d=!1,c=!1,u=Math.ceil((new Date).getTime()/G.MILLIS_PER_DAY);l?(s=l.split("*"),o=this.pruneSyncData(s,t.id,u),d=o.dataPresent,c=o.dataValid,d&&c||this.fireSync(r,t,i,s,a,u)):(s=[],this.fireSync(r,t,i,s,a,u))},pruneSyncData:function(e,t,i){var n,r,a,s=!1,o=!1;for(r=0;r<e.length;r++)n=e[r],a=parseInt(n.split("-")[1],10),n.match("^"+t+"-")?(s=!0,i<a?o=!0:(e.splice(r,1),r--)):i>=a&&(e.splice(r,1),r--);return{dataPresent:s,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,i,n,r,a,s){var o=this;if(t){if("img"===i.tag){var l,d,c,u,f=i.url,g=e.loadSSL?"https:":"http:";for(l=0,d=f.length;l<d;l++){c=f[l],u=/^\/\//.test(c);var m=new Image;m.addEventListener("load",function(t,i,n,r){return function(){o.onPagePixels[t]=null,e._readVisitor();var s,l=e._getField(a),d=[];if(l){s=l.split("*");var c,u,f;for(c=0,u=s.length;c<u;c++)f=s[c],f.match("^"+i.id+"-")||d.push(f)}o.setSyncTrackingData(d,i,n,r)}}(this.onPagePixels.length,i,a,s)),m.src=(u?g:"")+c,this.onPagePixels.push(m)}}}else this.addMessage(n),this.setSyncTrackingData(r,i,a,s)},addMessage:function(t){var i=encodeURIComponent,n=i(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((G.POST_MESSAGE_ENABLED?"":n)+t)},setSyncTrackingData:function(t,i,n,r){t.push(i.id+"-"+(r+Math.ceil(i.ttl/60/24))),this.manageSyncsSize(t),e._setField(n,t.join("*"))},sendMessages:function(){var e,t=this,i="",n=encodeURIComponent;this.regionChanged&&(i=n("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?G.POST_MESSAGE_ENABLED?(e=i+n("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(i+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){U.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,i=/^---destpub-to-parent---/;"string"==typeof e&&i.test(e)&&(t=e.replace(i,"").split("|"),"canSetThirdPartyCookies"===t[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(n){(null==this.url||n.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=n.subdomain||"",this.url=this.getUrl()),n.ibs instanceof Array&&n.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===i.readyState||"loaded"===i.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(n):this.requestToProcess(n),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(n)},canMakeSyncIDCall:function(t,i){return e._forceSyncIDCall||!t||i-t>G.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(i.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},Y={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},disableThirdPartyCalls:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},overwriteCrossDomainMCIDAndAID:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},X={getConfigNames:function(){return Object.keys(Y)},getConfigs:function(){return Y}},W=function(e,t,i){function n(e){var t=e;return function(e){var i=e||c.location.href;try{var n=d._extractParamFromUri(i,t);if(n)return y.parsePipeDelimetedKeyValues(n)}catch(e){}}}function r(e){function t(e,t){e&&e.match(G.VALID_VISITOR_ID_REGEX)&&t(e)}t(e[m],d.setMarketingCloudVisitorID),d._setFieldExpire(I,-1),t(e[C],d.setAnalyticsVisitorID)}function s(e){e=e||{},d._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",d._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},d._supplementalDataIDLast=e.supplementalDataIDLast||"",d._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function o(e){function t(e,t,i){return i=i?i+="|":i,i+=e+"="+encodeURIComponent(t)}function i(e,i){var n=i[0],r=i[1];return null!=r&&r!==D&&(e=t(n,r,e)),e}var n=e.reduce(i,"");return function(e){var t=y.getTimestampInSeconds();return e=e?e+="|":e,e+="TS="+t}(n)}function l(e){var t=e.minutesToLive,i="";return(d.idSyncDisableSyncs||d.disableIdSyncs)&&(i=i||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(i=i||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(i=i||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(i=i||"Error: config.minutesToLive needs to be a positive number")),{error:i,ttl:t}}if(!i||i.split("").reverse().join("")!==e)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var d=this;d.version="3.3.0";var c=a,u=c.Visitor;u.version=d.version,u.AuthState=_.AUTH_STATE,u.OptOut=_.OPT_OUT,c.s_c_in||(c.s_c_il=[],c.s_c_in=0),d._c="Visitor",d._il=c.s_c_il,d._in=c.s_c_in,d._il[d._in]=d,c.s_c_in++,d._instanceType="regular",d._log={requests:[]},d.marketingCloudOrgID=e,d.cookieName="AMCV_"+e,d.sessionCookieName="AMCVS_"+e,d.cookieDomain=N(),d.cookieDomain===c.location.hostname&&(d.cookieDomain=""),d.loadSSL=c.location.protocol.toLowerCase().indexOf("https")>=0,d.loadTimeout=3e4,d.CORSErrors=[],d.marketingCloudServer=d.audienceManagerServer="dpm.demdex.net",d.sdidParamExpiry=30;var f=c.document,g=null,m="MCMID",h="MCIDTS",p="A",C="MCAID",S="AAM",I="MCAAMB",D="NONE",A=function(e){return!Object.prototype[e]},M=B(d);d.FIELDS=_.FIELDS,d.cookieRead=function(e){e=encodeURIComponent(e);var t=(";"+f.cookie).split(" ").join(";"),i=t.indexOf(";"+e+"="),n=i<0?i:t.indexOf(";",i+1);return i<0?"":decodeURIComponent(t.substring(i+2+e.length,n<0?t.length:n))},d.cookieWrite=function(e,t,i){var n,r=d.cookieLifetime,a="";if(t=""+t,r=r?(""+r).toUpperCase():"",i&&"SESSION"!==r&&"NONE"!==r){if(n=""!==t?parseInt(r||0,10):-60)i=new Date,i.setTime(i.getTime()+1e3*n);else if(1===i){i=new Date;var s=i.getYear();i.setYear(s+2+(s<1900?1900:0))}}else i=0;return e&&"NONE"!==r?(d.configs&&d.configs.secureCookie&&"https:"===location.protocol&&(a="Secure"),f.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(i?" expires="+i.toGMTString()+";":"")+(d.cookieDomain?" domain="+d.cookieDomain+";":"")+a,d.cookieRead(e)===t):0},d.resetState=function(e){e?d._mergeServerState(e):s()},d._isAllowedDone=!1,d._isAllowedFlag=!1,d.isAllowed=function(){return d._isAllowedDone||(d._isAllowedDone=!0,(d.cookieRead(d.cookieName)||d.cookieWrite(d.cookieName,"T",1))&&(d._isAllowedFlag=!0)),d._isAllowedFlag},d.setMarketingCloudVisitorID=function(e){d._setMarketingCloudFields(e)},d._use1stPartyMarketingCloudServer=!1,d.getMarketingCloudVisitorID=function(e,t){if(d.isAllowed()){d.marketingCloudServer&&d.marketingCloudServer.indexOf(".demdex.net")<0&&(d._use1stPartyMarketingCloudServer=!0);var i=d._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return d._getRemoteField(m,n,e,t,i)}return""},d.getVisitorValues=function(e,t){var i={MCMID:{fn:d.getMarketingCloudVisitorID,args:[!0],context:d},MCOPTOUT:{fn:d.isOptedOut,args:[void 0,!0],context:d},MCAID:{fn:d.getAnalyticsVisitorID,args:[!0],context:d},MCAAMLH:{fn:d.getAudienceManagerLocationHint,args:[!0],context:d},MCAAMB:{fn:d.getAudienceManagerBlob,args:[!0],context:d}},n=t&&t.length?y.pluck(i,t):i;V(n,e)},d._currentCustomerIDs={},d._customerIDsHashChanged=!1,d._newCustomerIDsHash="",d.setCustomerIDs=function(e){function t(){d._customerIDsHashChanged=!1}if(d.isAllowed()&&e){if(!v.isObject(e)||v.isObjectEmpty(e))return!1;d._readVisitor();var i,n;for(i in e)if(A(i)&&(n=e[i]))if("object"==typeof n){var r={};n.id&&(r.id=n.id),void 0!=n.authState&&(r.authState=n.authState),d._currentCustomerIDs[i]=r}else d._currentCustomerIDs[i]={id:n};var a=d.getCustomerIDs(),s=d._getField("MCCIDH"),o="";s||(s=0);for(i in a)A(i)&&(n=a[i],o+=(o?"|":"")+i+"|"+(n.id?n.id:"")+(n.authState?n.authState:""));d._newCustomerIDsHash=String(d._hash(o)),d._newCustomerIDsHash!==s&&(d._customerIDsHashChanged=!0,d._mapCustomerIDs(t))}},d.getCustomerIDs=function(){d._readVisitor();var e,t,i={};for(e in d._currentCustomerIDs)A(e)&&(t=d._currentCustomerIDs[e],i[e]||(i[e]={}),t.id&&(i[e].id=t.id),void 0!=t.authState?i[e].authState=t.authState:i[e].authState=u.AuthState.UNKNOWN);return i},d.setAnalyticsVisitorID=function(e){d._setAnalyticsFields(e)},d.getAnalyticsVisitorID=function(e,t,i){if(!y.isTrackingServerPopulated()&&!i)return d._callCallback(e,[""]),"";if(d.isAllowed()){var n="";if(i||(n=d.getMarketingCloudVisitorID(function(t){d.getAnalyticsVisitorID(e,!0)})),n||i){var r=i?d.marketingCloudServer:d.trackingServer,a="";d.loadSSL&&(i?d.marketingCloudServerSecure&&(r=d.marketingCloudServerSecure):d.trackingServerSecure&&(r=d.trackingServerSecure));var s={};if(r){var o="http"+(d.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+d.version+"&mcorgid="+encodeURIComponent(d.marketingCloudOrgID)+(n?"&mid="+encodeURIComponent(n):"")+(d.idSyncDisable3rdPartySyncing||d.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",d._in,"_set"+(i?"MarketingCloud":"Analytics")+"Fields"];a=o+"?"+l+"&callback=s_c_il%5B"+d._in+"%5D._set"+(i?"MarketingCloud":"Analytics")+"Fields",s.corsUrl=o+"?"+l,s.callback=c}return s.url=a,d._getRemoteField(i?m:C,a,e,t,s)}}return""},d.getAudienceManagerLocationHint=function(e,t){if(d.isAllowed()){if(d.getMarketingCloudVisitorID(function(t){d.getAudienceManagerLocationHint(e,!0)})){var i=d._getField(C);if(!i&&y.isTrackingServerPopulated()&&(i=d.getAnalyticsVisitorID(function(t){d.getAudienceManagerLocationHint(e,!0)})),i||!y.isTrackingServerPopulated()){var n=d._getAudienceManagerURLData(),r=n.url;return d._getRemoteField("MCAAMLH",r,e,t,n)}}}return""},d.getLocationHint=d.getAudienceManagerLocationHint,d.getAudienceManagerBlob=function(e,t){if(d.isAllowed()){if(d.getMarketingCloudVisitorID(function(t){d.getAudienceManagerBlob(e,!0)})){var i=d._getField(C);if(!i&&y.isTrackingServerPopulated()&&(i=d.getAnalyticsVisitorID(function(t){d.getAudienceManagerBlob(e,!0)})),i||!y.isTrackingServerPopulated()){var n=d._getAudienceManagerURLData(),r=n.url;return d._customerIDsHashChanged&&d._setFieldExpire(I,-1),d._getRemoteField(I,r,e,t,n)}}}return""},d._supplementalDataIDCurrent="",d._supplementalDataIDCurrentConsumed={},d._supplementalDataIDLast="",d._supplementalDataIDLastConsumed={},d.getSupplementalDataID=function(e,t){d._supplementalDataIDCurrent||t||(d._supplementalDataIDCurrent=d._generateID(1));var i=d._supplementalDataIDCurrent;return d._supplementalDataIDLast&&!d._supplementalDataIDLastConsumed[e]?(i=d._supplementalDataIDLast,d._supplementalDataIDLastConsumed[e]=!0):i&&(d._supplementalDataIDCurrentConsumed[e]&&(d._supplementalDataIDLast=d._supplementalDataIDCurrent,d._supplementalDataIDLastConsumed=d._supplementalDataIDCurrentConsumed,d._supplementalDataIDCurrent=i=t?"":d._generateID(1),d._supplementalDataIDCurrentConsumed={}),i&&(d._supplementalDataIDCurrentConsumed[e]=!0)),i},d.getOptOut=function(e,t){if(d.isAllowed()){var i=d._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return d._getRemoteField("MCOPTOUT",n,e,t,i)}return""},d.isOptedOut=function(e,t,i){if(d.isAllowed()){t||(t=u.OptOut.GLOBAL);var n=d.getOptOut(function(i){var n=i===u.OptOut.GLOBAL||i.indexOf(t)>=0;d._callCallback(e,[n])},i);return n?n===u.OptOut.GLOBAL||n.indexOf(t)>=0:null}return!1},d._fields=null,d._fieldsExpired=null,d._hash=function(e){var t,i,n=0;if(e)for(t=0;t<e.length;t++)i=e.charCodeAt(t),n=(n<<5)-n+i,n&=n;return n},d._generateID=H,d._generateLocalMID=function(){var e=d._generateID(0);return T.isClientSideMarketingCloudVisitorID=!0,e},d._callbackList=null,d._callCallback=function(e,t){try{"function"==typeof e?e.apply(c,t):e[1].apply(e[0],t)}catch(e){}},d._registerCallback=function(e,t){t&&(null==d._callbackList&&(d._callbackList={}),void 0==d._callbackList[e]&&(d._callbackList[e]=[]),d._callbackList[e].push(t))},d._callAllCallbacks=function(e,t){if(null!=d._callbackList){var i=d._callbackList[e];if(i)for(;i.length>0;)d._callCallback(i.shift(),t)}},d._addQuerystringParam=function(e,t,i,n){var r=encodeURIComponent(t)+"="+encodeURIComponent(i),a=y.parseHash(e),s=y.hashlessUrl(e);if(-1===s.indexOf("?"))return s+"?"+r+a;var o=s.split("?"),l=o[0]+"?",d=o[1];return l+y.addQueryParamAtLocation(d,r,n)+a},d._extractParamFromUri=function(e,t){var i=new RegExp("[\\?&#]"+t+"=([^&#]*)"),n=i.exec(e);if(n&&n.length)return decodeURIComponent(n[1])},d._parseAdobeMcFromUrl=n(G.ADOBE_MC),d._parseAdobeMcSdidFromUrl=n(G.ADOBE_MC_SDID),d._attemptToPopulateSdidFromUrl=function(t){var i=d._parseAdobeMcSdidFromUrl(t),n=1e9;i&&i.TS&&(n=y.getTimestampInSeconds()-i.TS),i&&i.SDID&&i.MCORGID===e&&n<d.sdidParamExpiry&&(d._supplementalDataIDCurrent=i.SDID,d._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},d._attemptToPopulateIdsFromUrl=function(){var t=d._parseAdobeMcFromUrl();if(t&&t.TS){var i=y.getTimestampInSeconds(),n=i-t.TS;if(Math.floor(n/60)>G.ADOBE_MC_TTL_IN_MIN||t.MCORGID!==e)return;r(t)}},d._mergeServerState=function(e){if(e)try{if(e=function(e){return y.isObject(e)?e:JSON.parse(e)}(e),e[d.marketingCloudOrgID]){var t=e[d.marketingCloudOrgID];!function(e){y.isObject(e)&&d.setCustomerIDs(e)}(t.customerIDs),s(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},d._timeout=null,d._loadData=function(e,t,i,n){t=d._addQuerystringParam(t,"d_fieldgroup",e,1),n.url=d._addQuerystringParam(n.url,"d_fieldgroup",e,1),n.corsUrl=d._addQuerystringParam(n.corsUrl,"d_fieldgroup",e,1),T.fieldGroupObj[e]=!0,n===Object(n)&&n.corsUrl&&"XMLHttpRequest"===M.corsMetadata.corsType&&M.fireCORS(n,i,e)},d._clearTimeout=function(e){null!=d._timeout&&d._timeout[e]&&(clearTimeout(d._timeout[e]),d._timeout[e]=0)},d._settingsDigest=0,d._getSettingsDigest=function(){if(!d._settingsDigest){var e=d.version;d.audienceManagerServer&&(e+="|"+d.audienceManagerServer),d.audienceManagerServerSecure&&(e+="|"+d.audienceManagerServerSecure),d._settingsDigest=d._hash(e)}return d._settingsDigest},d._readVisitorDone=!1,d._readVisitor=function(){if(!d._readVisitorDone){d._readVisitorDone=!0;var e,t,i,n,r,a,s=d._getSettingsDigest(),o=!1,l=d.cookieRead(d.cookieName),c=new Date;if(null==d._fields&&(d._fields={}),l&&"T"!==l)for(l=l.split("|"),l[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==s&&(o=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)t=l[e].split("-"),i=t[0],n=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),o&&("MCCIDH"===i&&(n=""),r>0&&(r=c.getTime()/1e3-60)),i&&n&&(d._setField(i,n,1),r>0&&(d._fields["expire"+i]=r+(a?"s":""),(c.getTime()>=1e3*r||a&&!d.cookieRead(d.sessionCookieName))&&(d._fieldsExpired||(d._fieldsExpired={}),d._fieldsExpired[i]=!0)));!d._getField(C)&&y.isTrackingServerPopulated()&&(l=d.cookieRead("s_vi"))&&(l=l.split("|"),l.length>1&&l[0].indexOf("v1")>=0&&(n=l[1],e=n.indexOf("["),e>=0&&(n=n.substring(0,e)),n&&n.match(G.VALID_VISITOR_ID_REGEX)&&d._setField(C,n)))}},d._appendVersionTo=function(e){var t="vVersion|"+d.version,i=e?d._getCookieVersion(e):null;return i?x.areVersionsDifferent(i,d.version)&&(e=e.replace(G.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},d._writeVisitor=function(){var e,t,i=d._getSettingsDigest();for(e in d._fields)A(e)&&d._fields[e]&&"expire"!==e.substring(0,6)&&(t=d._fields[e],i+=(i?"|":"")+e+(d._fields["expire"+e]?"-"+d._fields["expire"+e]:"")+"|"+t);i=d._appendVersionTo(i),d.cookieWrite(d.cookieName,i,1)},d._getField=function(e,t){return null==d._fields||!t&&d._fieldsExpired&&d._fieldsExpired[e]?null:d._fields[e]},d._setField=function(e,t,i){null==d._fields&&(d._fields={}),d._fields[e]=t,i||d._writeVisitor()},d._getFieldList=function(e,t){var i=d._getField(e,t);return i?i.split("*"):null},d._setFieldList=function(e,t,i){d._setField(e,t?t.join("*"):"",i)},d._getFieldMap=function(e,t){var i=d._getFieldList(e,t);if(i){var n,r={};for(n=0;n<i.length;n+=2)r[i[n]]=i[n+1];return r}return null},d._setFieldMap=function(e,t,i){var n,r=null;if(t){r=[];for(n in t)A(n)&&(r.push(n),r.push(t[n]))}d._setFieldList(e,r,i)},d._setFieldExpire=function(e,t,i){var n=new Date;n.setTime(n.getTime()+1e3*t),null==d._fields&&(d._fields={}),d._fields["expire"+e]=Math.floor(n.getTime()/1e3)+(i?"s":""),t<0?(d._fieldsExpired||(d._fieldsExpired={}),d._fieldsExpired[e]=!0):d._fieldsExpired&&(d._fieldsExpired[e]=!1),i&&(d.cookieRead(d.sessionCookieName)||d.cookieWrite(d.sessionCookieName,"1"))},d._findVisitorID=function(e){return e&&("object"==typeof e&&(e=e.d_mid?e.d_mid:e.visitorID?e.visitorID:e.id?e.id:e.uuid?e.uuid:""+e),e&&"NOTARGET"===(e=e.toUpperCase())&&(e=D),e&&(e===D||e.match(G.VALID_VISITOR_ID_REGEX))||(e="")),e},d._setFields=function(e,t){if(d._clearTimeout(e),null!=d._loading&&(d._loading[e]=!1),T.fieldGroupObj[e]&&T.setState(e,!1),"MC"===e){!0!==T.isClientSideMarketingCloudVisitorID&&(T.isClientSideMarketingCloudVisitorID=!1);var i=d._getField(m);if(!i||d.overwriteCrossDomainMCIDAndAID){if(!(i="object"==typeof t&&t.mid?t.mid:d._findVisitorID(t))){if(d._use1stPartyMarketingCloudServer&&!d.tried1stPartyMarketingCloudServer)return d.tried1stPartyMarketingCloudServer=!0,void d.getAnalyticsVisitorID(null,!1,!0);i=d._generateLocalMID()}d._setField(m,i)}i&&i!==D||(i=""),"object"==typeof t&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&d._setFields(S,t),d._use1stPartyMarketingCloudServer&&t.mid&&d._setFields(p,{id:t.id})),d._callAllCallbacks(m,[i])}if(e===S&&"object"==typeof t){var n=604800;void 0!=t.id_sync_ttl&&t.id_sync_ttl&&(n=parseInt(t.id_sync_ttl,10));var r=b.getRegionAndCheckIfChanged(t,n);d._callAllCallbacks("MCAAMLH",[r]);var a=d._getField(I);(t.d_blob||t.blob)&&(a=t.d_blob,a||(a=t.blob),d._setFieldExpire(I,n),d._setField(I,a)),a||(a=""),d._callAllCallbacks(I,[a]),!t.error_msg&&d._newCustomerIDsHash&&d._setField("MCCIDH",d._newCustomerIDsHash)}if(e===p){var s=d._getField(C);s&&!d.overwriteCrossDomainMCIDAndAID||(s=d._findVisitorID(t),s?s!==D&&d._setFieldExpire(I,-1):s=D,d._setField(C,s)),s&&s!==D||(s=""),d._callAllCallbacks(C,[s])}if(d.idSyncDisableSyncs||d.disableIdSyncs)b.idCallNotProcesssed=!0;else{b.idCallNotProcesssed=!1;var o={};o.ibs=t.ibs,o.subdomain=t.subdomain,b.processIDCallData(o)}if(t===Object(t)){var l,c;d.isAllowed()&&(l=d._getField("MCOPTOUT")),l||(l=D,t.d_optout&&t.d_optout instanceof Array&&(l=t.d_optout.join(",")),c=parseInt(t.d_ottl,10),isNaN(c)&&(c=7200),d._setFieldExpire("MCOPTOUT",c,!0),d._setField("MCOPTOUT",l)),d._callAllCallbacks("MCOPTOUT",[l])}},d._loading=null,d._getRemoteField=function(e,t,i,n,r){var a,s="",o=y.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(d.isAllowed()){d._readVisitor(),s=d._getField(e,!0===l[e]);if(function(){return(!s||d._fieldsExpired&&d._fieldsExpired[e])&&(!d.disableThirdPartyCalls||o)}()){if(e===m||"MCOPTOUT"===e?a="MC":"MCAAMLH"===e||e===I?a=S:e===C&&(a=p),a)return!t||null!=d._loading&&d._loading[a]||(null==d._loading&&(d._loading={}),d._loading[a]=!0,d._loadData(a,t,function(t){if(!d._getField(e)){t&&T.setState(a,!0);var i="";e===m?i=d._generateLocalMID():a===S&&(i={error_msg:"timeout"}),d._setFields(a,i)}},r)),d._registerCallback(e,i),s||(t||d._setFields(a,{id:D}),"")}else s||(e===m?(d._registerCallback(e,i),s=d._generateLocalMID(),d.setMarketingCloudVisitorID(s)):e===C?(d._registerCallback(e,i),s="",d.setAnalyticsVisitorID(s)):(s="",n=!0))}return e!==m&&e!==C||s!==D||(s="",n=!0),i&&n&&d._callCallback(i,[s]),s},d._setMarketingCloudFields=function(e){d._readVisitor(),d._setFields("MC",e)},d._mapCustomerIDs=function(e){d.getAudienceManagerBlob(e,!0)},d._setAnalyticsFields=function(e){d._readVisitor(),d._setFields(p,e)},d._setAudienceManagerFields=function(e){d._readVisitor(),d._setFields(S,e)},d._getAudienceManagerURLData=function(e){var t=d.audienceManagerServer,i="",n=d._getField(m),r=d._getField(I,!0),a=d._getField(C),s=a&&a!==D?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(d.loadSSL&&d.audienceManagerServerSecure&&(t=d.audienceManagerServerSecure),t){var o,l,c=d.getCustomerIDs();if(c)for(o in c)A(o)&&(l=c[o],s+="&d_cid_ic="+encodeURIComponent(o)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var u="http"+(d.loadSSL?"s":"")+"://"+t+"/id",f="d_visid_ver="+d.version+"&d_rtbd=json&d_ver=2"+(!n&&d._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(d.marketingCloudOrgID)+"&d_nsid="+(d.idSyncContainerID||0)+(n?"&d_mid="+encodeURIComponent(n):"")+(d.idSyncDisable3rdPartySyncing||d.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===g?"&d_coop_safe=1":!1===g?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+s,_=["s_c_il",d._in,e];return i=u+"?"+f+"&d_cb=s_c_il%5B"+d._in+"%5D."+e,{url:i,corsUrl:u+"?"+f,callback:_}}return{url:i}},d.appendVisitorIDsTo=function(e){try{var t=[[m,d._getField(m)],[C,d._getField(C)],["MCORGID",d.marketingCloudOrgID]];return d._addQuerystringParam(e,G.ADOBE_MC,o(t))}catch(t){return e}},d.appendSupplementalDataIDTo=function(e,t){if(!(t=t||d.getSupplementalDataID(y.generateRandomString(),!0)))return e;try{var i=o([["SDID",t],["MCORGID",d.marketingCloudOrgID]]);return d._addQuerystringParam(e,G.ADOBE_MC_SDID,i)}catch(t){return e}};var y={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,i){var n=e.split("&");return i=null!=i?i:n.length,n.splice(i,0,t),n.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,i){if(e!==C)return!1;var n;return t||(t=d.trackingServer),i||(i=d.trackingServerSecure),!("string"!=typeof(n=d.loadSSL?i:t)||!n.length)&&(n.indexOf("2o7.net")<0&&n.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+(d.cookieDomain?" domain="+d.cookieDomain+";":"")},isTrackingServerPopulated:function(){return!!d.trackingServer||!!d.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){var i=t.split("=");return e[i[0]]=decodeURIComponent(i[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",i="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=i[Math.floor(Math.random()*i.length)];return t},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var i in e)e.hasOwnProperty(i)&&"function"==typeof e[i]&&(e[i]=t);return e},pluck:function(e,t){return t.reduce(function(t,i){return e[i]&&(t[i]=e[i]),t},Object.create(null))}};d._helpers=y;var b=q(d,u);d._destinationPublishing=b,d.timeoutMetricsLog=[];var T={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case p:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case S:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};d.isClientSideMarketingCloudVisitorID=function(){return T.isClientSideMarketingCloudVisitorID},d.MCIDCallTimedOut=function(){return T.MCIDCallTimedOut},d.AnalyticsIDCallTimedOut=function(){return T.AnalyticsIDCallTimedOut},d.AAMIDCallTimedOut=function(){return T.AAMIDCallTimedOut},d.idSyncGetOnPageSyncInfo=function(){return d._readVisitor(),d._getField("MCSYNCSOP")},d.idSyncByURL=function(e){var t=l(e||{});if(t.error)return t.error;var i,n,r=e.url,a=encodeURIComponent,s=b;return r=r.replace(/^https:/,"").replace(/^http:/,""),i=v.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),n=["ibs",a(e.dpid),"img",a(r),t.ttl,"",i],s.addMessage(n.join("|")),s.requestToProcess(),"Successfully queued"},d.idSyncByDataSource=function(e){return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,d.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},d.publishDestinations=function(e,t,i){if(i="function"==typeof i?i:function(){},"string"!=typeof e||!e.length)return void i({error:"subdomain is not a populated string."});if(!(t instanceof Array&&t.length))return void i({error:"messages is not a populated array."});var n=b;if(!n.readyToAttachIframePreliminary())return void i({error:"The destination publishing iframe is disabled in the Visitor library."});var r=!1;if(t.forEach(function(e){"string"==typeof e&&e.length&&(n.addMessage(e),r=!0)}),!r)return void i({error:"None of the messages are populated strings."});n.iframe?(i({message:"The destination publishing iframe is already attached and loaded."}),n.requestToProcess()):!d.subdomain&&d._getField(m)?(n.subdomain=e,n.doAttachIframe=!0,n.url=n.getUrl(),n.readyToAttachIframe()?(n.iframeLoadedCallbacks.push(function(e){i({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})}),n.attachIframe()):i({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):n.iframeLoadedCallbacks.push(function(e){i({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})},d._getCookieVersion=function(e){e=e||d.cookieRead(d.cookieName);var t=G.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},d._resetAmcvCookie=function(e){var t=d._getCookieVersion();t&&!x.isLessThan(t,e)||y.removeCookie(d.cookieName)},d.setAsCoopSafe=function(){g=!0},d.setAsCoopUnsafe=function(){g=!1},d.init=function(){!function(){if(t&&"object"==typeof t){d.configs=Object.create(null);for(var e in t)A(e)&&(d[e]=t[e],d.configs[e]=t[e]);d.idSyncContainerID=d.idSyncContainerID||0,g="boolean"==typeof d.isCoopSafe?d.isCoopSafe:y.parseBoolean(d.isCoopSafe),d.resetBeforeVersion&&d._resetAmcvCookie(d.resetBeforeVersion),d._attemptToPopulateIdsFromUrl(),d._attemptToPopulateSdidFromUrl(),d._readVisitor();var i=d._getField(h),n=Math.ceil((new Date).getTime()/G.MILLIS_PER_DAY);d.idSyncDisableSyncs||d.disableIdSyncs||!b.canMakeSyncIDCall(i,n)||(d._setFieldExpire(I,-1),d._setField(h,n)),d.getMarketingCloudVisitorID(),d.getAudienceManagerLocationHint(),d.getAudienceManagerBlob(),d._mergeServerState(d.serverState)}else d._attemptToPopulateIdsFromUrl(),d._attemptToPopulateSdidFromUrl()}(),function(){if(!d.idSyncDisableSyncs&&!d.disableIdSyncs){b.checkDPIframeSrc();var e=function(){var e=b;e.readyToAttachIframe()&&e.attachIframe()};c.addEventListener("load",function(){u.windowLoaded=!0,e()});try{U.receiveMessage(function(e){b.receiveMessage(e.data)},b.iframeHost)}catch(e){}}}(),function(){d.whitelistIframeDomains&&G.POST_MESSAGE_ENABLED&&(d.whitelistIframeDomains=d.whitelistIframeDomains instanceof Array?d.whitelistIframeDomains:[d.whitelistIframeDomains],d.whitelistIframeDomains.forEach(function(t){var i=new k(e,t),n=w(d,i);U.receiveMessage(n,t)}))}()}};return W.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var i=function(){var t=a.s_c_il;if(t)for(var i=0;i<t.length;i++){var n=t[i];if(n&&"Visitor"===n._c&&n.marketingCloudOrgID===e)return n}}();if(i)return i;var n=e,r=n.split("").reverse().join(""),s=new W(e,null,r);t===Object(t)&&t.cookieDomain&&(s.cookieDomain=t.cookieDomain),function(){a.s_c_il.splice(--a.s_c_in,1)}();var o=v.getIeVersion();if("number"==typeof o&&o<10)return s._helpers.replaceMethodsWithFunction(s,function(){});var l=function(){try{return a.self!==a.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e._helpers.removeCookie("TEST_AMCV_COOKIE"),!0)}(s)&&a.parent?new E(e,t,s,a.parent):new W(e,t,r);return s=null,l.init(),l},function(){function e(){W.windowLoaded=!0}a.addEventListener?a.addEventListener("load",e):a.attachEvent&&a.attachEvent("onload",e),W.codeLoadEnd=(new Date).getTime()}(),W.config=X,a.Visitor=W,W}();try{(function(id,loader){window.utag.tagsettings=window.utag.tagsettings||{};window.utag.tagsettings.adobe=window.utag.tagsettings.adobe||{};var vAPI=window.utag.tagsettings.adobe.visitorAPI=window.utag.tagsettings.adobe.visitorAPI||(function(){function logger(msg){utag.DB('['+id+'] : '+msg);}
function Observer(orgId,config){var observers=[],visitor={},demdex=null,instance=null,regex=new RegExp('AMCV_'+window.encodeURIComponent(orgId)+'=(.*?)(;|$)'),active=false,util={'hasOwn':function(o,a){return o!==null&&Object.prototype.hasOwnProperty.call(o,a);}},mTags=(function(){var tags=[],tag,cfg=utag.loader.cfg,loadcond={1:1,4:1};for(tag in cfg){if(!util.hasOwn(cfg,tag)){continue;}
if(cfg[tag].tid===1191&&loadcond[cfg[tag].load]){tags.push(tag);}}
return tags;}());function mTagsLoaded(){var loaded=true,id;for(var i=0,len=mTags.length;i<len;i++){id=mTags[i];if(!utag.loader.f[id]){loaded=false;break;}}
return loaded;}
function notify(result){instance=result;if(instance&&instance.setCustomerIDs){var aliases,alias;for(aliases in visitor){if(util.hasOwn(visitor,aliases)){alias=visitor[aliases];if(alias.authState&&Visitor.AuthState[alias.authState]!==undefined){alias.authState=Visitor.AuthState[alias.authState];}}}
instance.setCustomerIDs(visitor);}
while(observers.length!==0){var nextCallback=observers.shift();nextCallback(instance);}
return true;}
this.sync=function(ids){var alias;for(alias in ids){if(util.hasOwn(ids,alias)){if(!visitor[alias]){visitor[alias]=ids[alias];}}}
return true;};this.subscribe=function(callback){var self=this;if(instance!==null){return callback(instance);}else{observers.push(callback);if(!active){logger('demdex org id ['+orgId+'] sync requested');(function retry(retries){if(retries===0){logger('demdex org id ['+orgId+'] sync timed out!');active=false;return notify(undefined);}else{active=true;if(regex.test(document.cookie)&&/\|mcmid\|/i.test(window.decodeURIComponent(RegExp.$1))&&mTagsLoaded()){logger('demdex org id ['+orgId+'] sync completed');return config?notify(window.Visitor.getInstance(orgId,config)):notify(window.Visitor.getInstance(orgId));}else{if(window.Visitor&&window.Visitor.getInstance){if(config&&!demdex){demdex=window.Visitor.getInstance(orgId,config);}}
window.setTimeout(function(){logger('demdex org id ['+orgId+'] sync, waiting...');retry(--retries);},25);}}}(80));}}
return true;};}
function VisitorAPIWrapper(){var observers={};this._version='1.0';this.getInstance=function(orgId,callback,config,customerIds){if(!orgId){return callback(undefined);}
orgId=!/@AdobeOrg$/.test(orgId)?orgId+'@AdobeOrg':orgId;if(!observers[orgId]){if(!config){logger('demdex org id ['+orgId+'] sync error. marketing cloud tag missing demdex config');return callback(undefined);}
observers[orgId]=new Observer(orgId,config);}
if(customerIds){observers[orgId].sync(customerIds);}
observers[orgId].subscribe(callback);return true;};}
return new VisitorAPIWrapper();}());var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.hasOwn=function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a);};u.isEmptyObject=function(o,a){for(a in o){if(u.hasOwn(o,a))return false;}return true;};u.ev={"view":1};u.initialized=false;u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.clearEmptyKeys=function(object){for(var key in object){if(object[key]===""||object[key]===undefined){delete object[key];}}
return object;};u.map={"Tags_AdobeAnalytics_Server":"config.trackingServer","Tags_AdobeAnalytics_ServerSecure":"config.trackingServerSecure","User_Email_MD5":"customer_ids.email_md5.id"};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:274");utag.DB(b);var c,d,e,f;u.data={"adobe_org_id":"125138B3527845350A490D4C@AdobeOrg","config":{"trackingServer":"","trackingServerSecure":"","marketingCloudServer":"","marketingCloudServerSecure":"","cookieDomain":(function(){return utag.loader.RC('utag_main').vapi_domain||(function(){var i=0,d=document.domain,p=d.split('.'),s='_vapi'+new Date().getTime();while(i<(p.length-1)&&document.cookie.indexOf(s+'='+s)===-1){d=p.slice(-1-(++i)).join('.');document.cookie=s+'='+s+';domain='+d+';';}
document.cookie=s+'=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain='+d+';';utag.loader.SC('utag_main',{'vapi_domain':d});return d;}());}())},'customer_ids':{}};utag.DB("send:274:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}}
utag.DB("send:274:MAPPINGS");utag.DB(u.data);if(!u.data.adobe_org_id){utag.DB(u.id+": Tag not fired: Required attribute not populated [adobe_org_id]");return;}
if(!u.initialized){u.initialized=!0;vAPI.getInstance(u.data.adobe_org_id,function(instance){},u.clearEmptyKeys(u.data.config),u.data.customer_ids);}
utag.DB("send:274:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("274","luxottica.opsm"));}catch(error){utag.DB(error);}

//tealium universal tag - utag.336 ut4.0.202309250934, Copyright 2023 Tealium.com Inc. All Rights Reserved.
var _uxa=window._uxa||[];try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1,"link":1};u.scriptrequested=false;function forceBoolean(flag){if(typeof flag==="string"){if(flag.toLowerCase()==="false"){return false;}else if(flag.toLowerCase()==="true"){return true;}}
return Boolean(flag);};u.DVAR='dvar.';u.DVAR_LENGTH=u.DVAR.length;u.map={"Page_Type":"custom.1.Page Type","Page_Name":"custom.2.Page Name","Page_Section1":"custom.3.Page Section 1","Action":"custom.4.Action","Products_Id_Csv":"custom.5.Products ID","Products_Category_Csv":"custom.6.Products Category","Products_Price_Csv":"custom.7.Products Price","User_LoginStatus":"custom.8.User Login Status","User_Segments":"custom.9.User Segments","Order_PaymentType":"custom.10.Order Payment Type","Search_Keyword":"custom.11.Search Keyword","Error_Code":"custom.12.Error Code","Order_CartId":"custom.13.Order Cart ID","Order_Id":"custom.14.Order ID","Exam_Id":"custom.15.Exam ID","_corder":"order_id","_csubtotal":"order_total","Tags__VarsCustom1":"id_project","Tags_ClickTale_UserId":"dvar.csMatchingKey"};u.extend=[function(a,b){try{if(1){(function(){var version="1.11.0";function callback(){if(!disableCallback){disableCallback=true;if(window.CS_CONF){CS_CONF.integrations=CS_CONF.integrations||[];CS_CONF.integrations.push("Adobe Analytics - v"+version);}}}
var disableCallback=false;window._uxa=window._uxa||[];_uxa.push(["afterPageView",callback]);var cmk=null;var cn="_cs_mk_aa";function init(cookieValue){if(cookieValue){cmk=cookieValue;}else{cmk=Math.random()+"_"+Date.now();var now=new Date();var time=now.getTime();time+=30*60*1000;now.setTime(time);document.cookie=cn+"="+cmk+"; expires="+now.toUTCString()+";path=/;domain=."+utag.cfg.domain+";SameSite=None;Secure";}
window.utag_data.Tags_ClickTale_UserId=cmk;_uxa.push(["trackDynamicVariable",{key:"csMatchingKey",value:cmk,},]);}
if(!b["cp._cs_mk_aa"]){init();}else{var getCookieValue=b["cp._cs_mk_aa"];init(getCookieValue);}
if(window.utag_data.Tags_Tealium_Triggered_Array)window.utag_data.Tags_Tealium_Triggered_Array.push("CS");})();}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:336");utag.DB(b);var c,d,e,f,udh_collection=[];u.data={"base_url":"//t.contentsquare.net/uxa/##utag_id_project##.js","id_project":"4d7b4cbb8daaa","custom":{},"path":"","product_id":[],"product_name":[],"product_sku":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"order_id":"","order_total":"","order_shipping":"","order_tax":"","order_currency":"","send_udh_audiences":"false","send_udh_data":{},"sendEventsToReplay":"","dvar":{},};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};utag.DB("send:336:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf("custom.")===0){u.data.custom[[e[f].substr(7)]]=b[d];}else if(e[f].indexOf("send_udh_data.")===0||e[f].indexOf("send_data.")===0){u.data.send_udh_data[d]=e[f].split(".")[1];}else if(e[f]==="send_audiences"){u.data.send_udh_audiences=b[d];}else if(e[f].indexOf(u.DVAR)===0){u.data.dvar[[e[f].substr(u.DVAR_LENGTH)]]=b[d];}
else{u.data[e[f]]=b[d];}}}}
utag.DB("send:336:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";u.data.order_shipping=u.data.order_shipping||b._cship||"";u.data.order_tax=u.data.order_tax||b._ctax||"";u.data.order_currency=u.data.order_currency||b._ccurrency||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_sku.length===0&&b._csku!==undefined){u.data.product_sku=b._csku.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
u.data.base_url=u.data.base_url.replace("##utag_id_project##",u.data.id_project);u.data.path=u.data.path||location.pathname+location.hash.replace("#","?__");var custom,customVar;for(custom in u.data.custom){if(u.data.custom.hasOwnProperty(custom)&&custom!==""){customVar=custom.split(".");_uxa.push(["setCustomVariable",customVar[0],customVar[1],u.data.custom[custom],3]);}}
if(forceBoolean(u.data.send_udh_audiences)){Object.keys(b).forEach(function(key){if(key.indexOf("va.audiences.")===0){_uxa.push(["trackDynamicVariable",{"key":"CDP_TL_Audience ID : "+key.substr(key.lastIndexOf("_")+1),"value":b[key]}]);}});}
Object.keys(u.data.send_udh_data).forEach(function(key){_uxa.push(["trackDynamicVariable",{"key":"CDP_TL_Badge ID : "+key.substr(key.lastIndexOf(".")+1),"value":u.data.send_udh_data[key]}]);});Object.keys(u.data.dvar).forEach(function(key){_uxa.push(["trackDynamicVariable",{"key":key,"value":u.data.dvar[key]}]);});if(a==="view"){_uxa.push(["trackPageview",u.data.path]);}else{_uxa.push(["setPath",u.data.path]);}
if(u.data.order_id&&u.data.order_total){_uxa.push(["ecommerce:addTransaction",{"id":u.data.order_id,"revenue":u.data.order_total,"shipping":u.data.order_shipping,"tax":u.data.order_tax,"currency":u.data.order_currency}]);for(f=0;f<u.data.product_id.length;f++){if(u.data.product_name[f]&&u.data.product_sku[f]&&!isNaN(parseFloat(u.data.product_unit_price[f]))&&!isNaN(parseFloat(u.data.product_quantity[f]))){_uxa.push(["ecommerce:addItem",{"id":u.data.order_id,"name":u.data.product_name[f],"sku":u.data.product_sku[f],"category":u.data.product_category[f],"price":u.data.product_unit_price[f],"quantity":u.data.product_quantity[f]}]);}else{utag.DB(u.id+" (ContentSquare): Item not tracked in transaction: Required attribute(s) not populated");}}
_uxa.push(["ecommerce:send"]);}else{utag.DB(u.id+" (ContentSquare): Transaction not tracked: Required attribute(s) not populated");}
if(!u.scriptrequested){u.scriptrequested=true;u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_336","attrs":{}});}
utag.DB("send:336:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("336","luxottica.opsm"));}catch(error){utag.DB(error);}

//tealium universal tag - utag.273 ut4.0.202309250934, Copyright 2023 Tealium.com Inc. All Rights Reserved.
var s=new AppMeasurement();s.account="";s.trackDownloadLinks=false;s.trackExternalLinks=false;s.trackInlineStats=true;s.linkInternalFilters="javascript:ray-ban.com,rayban.com,ray-ban.com.cn";s.linkLeaveQueryString=false;s.linkTrackVars="None";s.linkTrackEvents="None";s.usePlugins=false;s.currencyCode="USD";s.visitorNamespace="luxottica";s.trackingServer="";s.trackingServerSecure="";s.charSet="UTF-8";s.expectSupplementalData=true;s.debugTracking=utag.cfg.utagdb;function AppMeasurement(){var a=this;a.version="2.1.0";var h=window;h.s_c_in||(h.s_c_il=[],h.s_c_in=0);a._il=h.s_c_il;a._in=h.s_c_in;a._il[a._in]=a;h.s_c_in++;a._c="s_c";var n=h.AppMeasurement.Ob;n||(n=null);var p=h,l,r;try{for(l=p.parent,r=p.location;l&&l.location&&r&&""+l.location!=""+r&&p.location&&""+l.location!=""+p.location&&l.location.host==r.host;)p=l,l=p.parent}catch(s){}a.P=function(a){try{console.log(a)}catch(b){}};a.La=function(a){return""+parseInt(a)==""+a};a.replace=function(a,b,d){return!a||0>a.indexOf(b)?a:a.split(b).join(d)};a.escape=function(c){var b,d;if(!c)return c;c=encodeURIComponent(c);for(b=0;7>b;b++)d="+~!*()'".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return c};a.unescape=function(c){if(!c)return c;c=0<=c.indexOf("+")?a.replace(c,"+"," "):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)};a.vb=function(){var c=h.location.hostname,b=a.fpCookieDomainPeriods,d;b||(b=a.cookieDomainPeriods);if(c&&!a.cookieDomain&&!/^[0-9.]+$/.test(c)&&(b=b?parseInt(b):2,b=2<b?b:2,d=c.lastIndexOf("."),0<=d)){for(;0<=d&&1<b;)d=c.lastIndexOf(".",d-1),b--;a.cookieDomain=0<d?c.substring(d):c}return a.cookieDomain};a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=" "+a.d.cookie,d=b.indexOf(" "+c+"="),f=0>d?d:b.indexOf(";",d);c=0>d?"":a.unescape(b.substring(d+2+c.length,0>f?b.length:f));return"[[B]]"!=c?c:""};a.c_w=a.cookieWrite=function(c,b,d){var f=a.vb(),e=a.cookieLifetime,g;b=""+b;e=e?(""+e).toUpperCase():"";d&&"SESSION"!=e&&"NONE"!=e&&((g=""!=b?parseInt(e?e:0):-60)?(d=new Date,d.setTime(d.getTime()+1E3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0))));return c&&"NONE"!=e?(a.d.cookie=a.escape(c)+"="+a.escape(""!=b?b:"[[B]]")+"; path=/;"+(d&&"SESSION"!=e?" expires="+d.toGMTString()+";":"")+(f?" domain="+f+";":""),a.cookieRead(c)==b):0};a.K=[];a.ia=function(c,b,d){if(a.Ea)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,k=["webkitvisibilitychange","visibilitychange"];g||(g=a.d.webkitVisibilityState);if(g&&"prerender"==g){if(!a.ja)for(a.ja=1,d=0;d<k.length;d++)a.d.addEventListener(k[d],function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState);"visible"==c&&(a.ja=0,a.delayReady())});f=1;e=0}else d||a.p("_d")&&(f=1);f&&(a.K.push({m:c,a:b,t:e}),a.ja||setTimeout(a.delayReady,a.maxDelay));return f};a.delayReady=function(){var c=(new Date).getTime(),b=0,d;for(a.p("_d")?b=1:a.xa();0<a.K.length;){d=a.K.shift();if(b&&!d.t&&d.t>c){a.K.unshift(d);setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.Ea=1;a[d.m].apply(a,d.a);a.Ea=0}};a.setAccount=a.sa=function(c){var b,d;if(!a.ia("setAccount",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(",")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||a.allAccounts.push(b[d]);else a.allAccounts=c.split(",")};a.foreachVar=function(c,b){var d,f,e,g,k="";e=f="";if(a.lightProfileID)d=a.O,(k=a.lightTrackVars)&&(k=","+k+","+a.na.join(",")+",");else{d=a.g;if(a.pe||a.linkType)k=a.linkTrackVars,f=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(k=a[e].Mb,f=a[e].Lb));k&&(k=","+k+","+a.G.join(",")+",");f&&k&&(k+=",events,")}b&&(b=","+b+",");for(f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!k||0<=k.indexOf(","+e+","))&&(!b||0<=b.indexOf(","+e+","))&&c(e,g)};a.r=function(c,b,d,f,e){var g="",k,m,h,t,l=0;"contextData"==c&&(c="c");if(b){for(k in b)if(!(Object.prototype[k]||e&&k.substring(0,e.length)!=e)&&b[k]&&(!d||0<=d.indexOf(","+(f?f+
".":"")+k+","))){h=!1;if(l)for(m=0;m<l.length;m++)k.substring(0,l[m].length)==l[m]&&(h=!0);if(!h&&(""==g&&(g+="&"+c+"."),m=b[k],e&&(k=k.substring(e.length)),0<k.length))if(h=k.indexOf("."),0<h)m=k.substring(0,h),h=(e?e:"")+m+".",l||(l=[]),l.push(h),g+=a.r(m,b,d,f,h);else if("boolean"==typeof m&&(m=m?"true":"false"),m){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(h=k.substring(0,4),t=k.substring(4),k){case"transactionID":k="xact";break;case"channel":k="ch";break;case"campaign":k="v0";break;default:a.La(t)&&("prop"==h?k="c"+t:"eVar"==h?k="v"+t:"list"==h?k="l"+t:"hier"==h&&(k="h"+t,m=m.substring(0,255)))}g+="&"+a.escape(k)+"="+a.escape(m)}}""!=g&&(g+="&."+c)}return g};a.usePostbacks=0;a.yb=function(){var c="",b,d,f,e,g,k,m,h,l="",p="",q=e="";if(a.lightProfileID)b=a.O,(l=a.lightTrackVars)&&(l=","+l+","+a.na.join(",")+",");else{b=a.g;if(a.pe||a.linkType)l=a.linkTrackVars,p=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(l=a[e].Mb,p=a[e].Lb));l&&(l=","+l+","+a.G.join(",")+",");p&&(p=","+p+",",l&&(l+=",events,"));a.events2&&(q+=(""!=q?",":"")+a.events2)}if(a.visitor&&a.visitor.getCustomerIDs){e=n;if(g=a.visitor.getCustomerIDs())for(d in g)Object.prototype[d]||(f=g[d],"object"==typeof f&&(e||(e={}),f.id&&(e[d+".id"]=f.id),f.authState&&(e[d+".as"]=f.authState)));e&&(c+=a.r("cid",e))}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.r("d",a.AudienceManagement.getEventCallConfigParams()));for(d=0;d<b.length;d++){e=b[d];g=a[e];f=e.substring(0,4);k=e.substring(4);g||("events"==e&&q?(g=q,q=""):"marketingCloudOrgID"==e&&a.visitor&&(g=a.visitor.marketingCloudOrgID));if(g&&(!l||0<=l.indexOf(","+e+","))){switch(e){case"customerPerspective":e="cp";break;case"marketingCloudOrgID":e="mcorgid";break;case"supplementalDataID":e="sdid";break;case"timestamp":e="ts";break;case"dynamicVariablePrefix":e="D";break;case"visitorID":e="vid";break;case"marketingCloudVisitorID":e="mid";break;case"analyticsVisitorID":e="aid";break;case"audienceManagerLocationHint":e="aamlh";break;case"audienceManagerBlob":e="aamb";break;case"authState":e="as";break;case"pageURL":e="g";255<g.length&&(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case"pageURLRest":e="-g";break;case"referrer":e="r";break;case"vmk":case"visitorMigrationKey":e="vmt";break;case"visitorMigrationServer":e="vmf";a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case"visitorMigrationServerSecure":e="vmf";!a.ssl&&a.visitorMigrationServer&&(g="");break;case"charSet":e="ce";break;case"visitorNamespace":e="ns";break;case"cookieDomainPeriods":e="cdp";break;case"cookieLifetime":e="cl";break;case"variableProvider":e="vvp";break;case"currencyCode":e="cc";break;case"channel":e="ch";break;case"transactionID":e="xact";break;case"campaign":e="v0";break;case"latitude":e="lat";break;case"longitude":e="lon";break;case"resolution":e="s";break;case"colorDepth":e="c";break;case"javascriptVersion":e="j";break;case"javaEnabled":e="v";break;case"cookiesEnabled":e="k";break;case"browserWidth":e="bw";break;case"browserHeight":e="bh";break;case"connectionType":e="ct";break;case"homepage":e="hp";break;case"events":q&&(g+=(""!=g?",":"")+q);if(p)for(k=g.split(","),g="",f=0;f<k.length;f++)m=k[f],h=m.indexOf("="),0<=h&&(m=m.substring(0,h)),h=m.indexOf(":"),0<=h&&(m=m.substring(0,h)),0<=p.indexOf(","+m+",")&&(g+=(g?",":"")+k[f]);break;case"events2":g="";break;case"contextData":c+=a.r("c",a[e],l,e);g="";break;case"lightProfileID":e="mtp";break;case"lightStoreForSeconds":e="mtss";a.lightProfileID||(g="");break;case"lightIncrementBy":e="mti";a.lightProfileID||(g="");break;case"retrieveLightProfiles":e="mtsr";break;case"deleteLightProfiles":e="mtsd";break;case"retrieveLightData":a.retrieveLightProfiles&&(c+=a.r("mts",a[e],l,e));g="";break;default:a.La(k)&&("prop"==f?e="c"+k:"eVar"==f?e="v"+k:"list"==f?e="l"+k:"hier"==f&&(e="h"+k,g=g.substring(0,255)))}g&&(c+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(c+=a.e)}return c};a.D=function(a){var b=a.tagName;if("undefined"!=""+a.Rb||"undefined"!=""+a.Hb&&"HTML"!=(""+a.Hb).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A"));return b};a.Ha=function(a){var b=h.location,d=a.href?a.href:"",f,e,g;f=d.indexOf(":");e=d.indexOf("?");g=d.indexOf("/");d&&(0>f||0<=e&&f>e||0<=g&&f>g)&&(e=a.protocol&&1<a.protocol.length?a.protocol:b.protocol?b.protocol:"",f=b.pathname.lastIndexOf("/"),d=(e?e+"//":"")+(a.host?a.host:b.host?b.host:"")+("/"!=d.substring(0,1)?b.pathname.substring(0,0>f?0:f)+"/":"")+d);return d};a.L=function(c){var b=a.D(c),d,f,e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):"IMAGE"==b&&c.src&&(e=c.src):e=a.Ha(c),e)?{id:e.substring(0,100),type:g}:0};a.Pb=function(c){for(var b=a.D(c),d=a.L(c);c&&!d&&"BODY"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=a.D(c),d=a.L(c);d&&"BODY"!=b||(c=0);c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||0<=b.indexOf(".trackLink("))&&(c=0);return c};a.Gb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,k;a.oa=1;d||(a.oa=0,d=a.clickObject);if(d){c=a.D(d);for(b=a.L(d);d&&!b&&"BODY"!=c;)if(d=d.parentElement?d.parentElement:d.parentNode)c=a.D(d),b=a.L(d);b&&"BODY"!=c||(d=0);if(d&&!a.linkObject){var m=d.onclick?""+d.onclick:"";if(0<=m.indexOf(".tl(")||0<=m.indexOf(".trackLink("))d=0}}else a.oa=1;!e&&d&&(e=a.Ha(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),0<=g&&(e=e.substring(0,g)));if(!f&&e){var l=0,p=0,n;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(m=e.toLowerCase(),g=m.indexOf("?"),k=m.indexOf("#"),0<=g?0<=k&&k<g&&(g=k):g=k,0<=g&&(m=m.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),k=0;k<g.length;k++)(n=g[k])&&m.substring(m.length-(n.length+
1))=="."+n&&(f="d");if(a.trackExternalLinks&&!f&&(m=e.toLowerCase(),a.Ka(m)&&(a.linkInternalFilters||(a.linkInternalFilters=h.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),l=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(k=0;k<g.length;k++)n=g[k],0<=m.indexOf(n)&&(p=1);p?l&&(f="e"):l||(f="e")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),h.s_objectID&&(b.id=h.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="&pid="+a.escape(f.substring(0,255))+(e?"&pidt="+e:"")+"&oid="+a.escape(b.id.substring(0,100))+(b.type?"&oidt="+b.type:"")+"&ot="+c+(d?"&oi="+d:"")))};a.zb=function(){var c=a.oa,b=a.linkType,d=a.linkURL,f=a.linkName;b&&(d||f)&&(b=b.toLowerCase(),"d"!=b&&"e"!=b&&(b="o"),a.pe="lnk_"+b,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",c=1);a.abort&&(c=0);if(a.trackClickMap||a.trackInlineStats||a.ActivityMap){var b={},d=0,e=a.cookieRead("s_sq"),g=e?e.split("&"):0,k,m,h,e=0;if(g)for(k=0;k<g.length;k++)m=g[k].split("="),f=a.unescape(m[0]).split(","),m=a.unescape(m[1]),b[m]=f;f=a.account.split(",");k={};for(h in a.contextData)h&&!Object.prototype[h]&&"a.activitymap."==h.substring(0,14)&&(k[h]=a.contextData[h],a.contextData[h]="");a.e=a.r("c",k)+(a.e?a.e:"");if(c||a.e){c&&!a.e&&(e=1);for(m in b)if(!Object.prototype[m])for(h=0;h<f.length;h++)for(e&&(g=b[m].join(","),g==a.account&&(a.e+=("&"!=m.charAt(0)?"&":"")+m,b[m]=[],d=1)),k=0;k<b[m].length;k++)g=b[m][k],g==f[h]&&(e&&(a.e+="&u="+a.escape(g)+("&"!=m.charAt(0)?"&":"")+m+"&u=0"),b[m].splice(k,1),d=1);c||(d=1);if(d){e="";k=2;!c&&a.e&&(e=a.escape(f.join(","))+"="+a.escape(a.e),k=1);for(m in b)!Object.prototype[m]&&0<k&&0<b[m].length&&(e+=(e?"&":"")+a.escape(b[m].join(","))+"="+a.escape(m),k--);a.cookieWrite("s_sq",e)}}}return c};a.Ab=function(){if(!a.Kb){var c=new Date,b=p.location,d,f,e=f=d="",g="",k="",h="1.2",l=a.cookieWrite("s_cc","true",0)?"Y":"N",n="",q="";if(c.setUTCDate&&(h="1.3",(0).toPrecision&&(h="1.5",c=[],c.forEach))){h="1.6";f=0;d={};try{f=new Iterator(d),f.next&&(h="1.7",c.reduce&&(h="1.8",h.trim&&(h="1.8.1",Date.parse&&(h="1.8.2",Object.create&&(h="1.8.5")))))}catch(r){}}d=screen.width+"x"+screen.height;e=navigator.javaEnabled()?"Y":"N";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;k=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),n=a.b.Qb(b)?"Y":"N"}catch(s){}try{a.b.addBehavior("#default#clientCaps"),q=a.b.connectionType}catch(u){}a.resolution=d;a.colorDepth=f;a.javascriptVersion=h;a.javaEnabled=e;a.cookiesEnabled=l;a.browserWidth=g;a.browserHeight=k;a.connectionType=q;a.homepage=n;a.Kb=1}};a.Q={};a.loadModule=function(c,b){var d=a.Q[c];if(!d){d=h["AppMeasurement_Module_"+c]?new h["AppMeasurement_Module_"+c](a):{};a.Q[c]=a[c]=d;d.cb=function(){return d.hb};d.ib=function(b){if(d.hb=b)a[c+"_onLoad"]=b,a.ia(c+"_onLoad",[a,d],1)||b(a,d)};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.cb,set:d.ib}):d._olc=1}catch(f){d._olc=1}}b&&(a[c+"_onLoad"]=b,a.ia(c+"_onLoad",[a,d],1)||b(a,d))};a.p=function(c){var b,d;for(b in a.Q)if(!Object.prototype[b]&&(d=a.Q[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0};a.Cb=function(){var c=Math.floor(1E13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),f=a.cookieRead(d);if(b){b*=100;f&&(f=parseInt(f));if(!f){if(!a.cookieWrite(d,c))return 0;f=c}if(f%1E4>b)return 0}return 1};a.R=function(c,b){var d,f,e,g,k,h;for(d=0;2>d;d++)for(f=0<d?a.Aa:a.g,e=0;e<f.length;e++)if(g=f[e],(k=c[g])||c["!"+g]){if(!b&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(h in a[g])k[h]||(k[h]=a[g][h]);a[g]=k}};a.Ua=function(c,b){var d,f,e,g;for(d=0;2>d;d++)for(f=0<d?a.Aa:a.g,e=0;e<f.length;e++)g=f[e],c[g]=a[g],b||c[g]||(c["!"+g]=1)};a.ub=function(a){var b,d,f,e,g,k=0,h,l="",n="";if(a&&255<a.length&&(b=""+a,d=b.indexOf("?"),0<d&&(h=b.substring(d+1),b=b.substring(0,d),e=b.toLowerCase(),f=0,"http://"==e.substring(0,7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),d=e.indexOf("/",f),0<d&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,d),0<=e.indexOf("google")?k=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(k=",p,ei,"),k&&h)))){if((a=h.split("&"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf("="),0<d&&0<=k.indexOf(","+e.substring(0,d)+",")?l+=(l?"&":"")+e:n+=(n?"&":"")+e;l&&n?h=l+"&"+n:n=""}d=253-(h.length-n.length)-b.length;a=b+(0<d?g.substring(0,d):"")+"?"+h}return a};a.$a=function(c){var b=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];b||(b=a.d.webkitVisibilityState);if(b&&"prerender"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&c()});return!1}return!0};a.ea=!1;a.I=!1;a.kb=function(){a.I=!0;a.j()};a.ca=!1;a.V=!1;a.gb=function(c){a.marketingCloudVisitorID=c;a.V=!0;a.j()};a.fa=!1;a.W=!1;a.lb=function(c){a.visitorOptedOut=c;a.W=!0;a.j()};a.Z=!1;a.S=!1;a.Wa=function(c){a.analyticsVisitorID=c;a.S=!0;a.j()};a.ba=!1;a.U=!1;a.Ya=function(c){a.audienceManagerLocationHint=c;a.U=!0;a.j()};a.aa=!1;a.T=!1;a.Xa=function(c){a.audienceManagerBlob=c;a.T=!0;a.j()};a.Za=function(c){a.maxDelay||(a.maxDelay=250);return a.p("_d")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0};a.da=!1;a.H=!1;a.xa=function(){a.H=!0;a.j()};a.isReadyToTrack=function(){var c=!0,b=a.visitor,d,f,e;a.ea||a.I||(a.$a(a.kb)?a.I=!0:a.ea=!0);if(a.ea&&!a.I)return!1;b&&b.isAllowed()&&(a.ca||a.marketingCloudVisitorID||!b.getMarketingCloudVisitorID||(a.ca=!0,a.marketingCloudVisitorID=b.getMarketingCloudVisitorID([a,a.gb]),a.marketingCloudVisitorID&&(a.V=!0)),a.fa||a.visitorOptedOut||!b.isOptedOut||(a.fa=!0,a.visitorOptedOut=b.isOptedOut([a,a.lb]),a.visitorOptedOut!=n&&(a.W=!0)),a.Z||a.analyticsVisitorID||!b.getAnalyticsVisitorID||(a.Z=!0,a.analyticsVisitorID=b.getAnalyticsVisitorID([a,a.Wa]),a.analyticsVisitorID&&(a.S=!0)),a.ba||a.audienceManagerLocationHint||!b.getAudienceManagerLocationHint||(a.ba=!0,a.audienceManagerLocationHint=b.getAudienceManagerLocationHint([a,a.Ya]),a.audienceManagerLocationHint&&(a.U=!0)),a.aa||a.audienceManagerBlob||!b.getAudienceManagerBlob||(a.aa=!0,a.audienceManagerBlob=b.getAudienceManagerBlob([a,a.Xa]),a.audienceManagerBlob&&(a.T=!0)),c=a.ca&&!a.V&&!a.marketingCloudVisitorID,b=a.Z&&!a.S&&!a.analyticsVisitorID,d=a.ba&&!a.U&&!a.audienceManagerLocationHint,f=a.aa&&!a.T&&!a.audienceManagerBlob,e=a.fa&&!a.W,c=c||b||d||f||e?!1:!0);a.da||a.H||(a.Za(a.xa)?a.H=!0:a.da=!0);a.da&&!a.H&&(c=!1);return c};a.o=n;a.u=0;a.callbackWhenReadyToTrack=function(c,b,d){var f;f={};f.pb=c;f.ob=b;f.mb=d;a.o==n&&(a.o=[]);a.o.push(f);0==a.u&&(a.u=setInterval(a.j,100))};a.j=function(){var c;if(a.isReadyToTrack()&&(a.jb(),a.o!=n))for(;0<a.o.length;)c=a.o.shift(),c.ob.apply(c.pb,c.mb)};a.jb=function(){a.u&&(clearInterval(a.u),a.u=0)};a.eb=function(c){var b,d,f=n,e=n;if(!a.isReadyToTrack()){b=[];if(c!=n)for(d in f={},c)f[d]=c[d];e={};a.Ua(e,!0);b.push(f);b.push(e);a.callbackWhenReadyToTrack(a,a.track,b);return!0}return!1};a.wb=function(){var c=a.cookieRead("s_fid"),b="",d="",f;f=8;var e=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)f=Math.floor(Math.random()*f),b+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;c=b+"-"+d}a.cookieWrite("s_fid",c,1)||(c=0);return c};a.t=a.track=function(c,b){var d,f=new Date,e="s"+Math.floor(f.getTime()/
108E5)%10+Math.floor(1E13*Math.random()),g=f.getYear(),g="t="+a.escape(f.getDate()+"/"+f.getMonth()+"/"+(1900>g?g+1900:g)+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+" "+f.getDay()+" "+f.getTimezoneOffset());a.visitor&&a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState());a.p("_s");a.eb(c)||(b&&a.R(b),c&&(d={},a.Ua(d,0),a.R(c)),a.Cb()&&!a.visitorOptedOut&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=a.wb()),a.Gb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()/1E3)),f=h.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Va||(f=a.Util.getQueryParam("adobe_mc_ref",null,null,!0),a.referrer=f||void 0===f?void 0===f?"":f:p.document.referrer),a.Va=1,a.referrer=a.ub(a.referrer),a.p("_g")),a.zb()&&!a.abort&&(a.visitor&&!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?!1:!0)),a.Ab(),g+=a.yb(),a.Fb(e,g),a.p("_t"),a.referrer=""))),c&&a.R(d,1));a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=h.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0};a.za=[];a.registerPreTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof c?a.za.push([c,b]):a.debugTracking&&a.P("DEBUG: Non function type passed to registerPreTrackCallback")};a.bb=function(c){a.wa(a.za,c)};a.ya=[];a.registerPostTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof c?a.ya.push([c,b]):a.debugTracking&&a.P("DEBUG: Non function type passed to registerPostTrackCallback")};a.ab=function(c){a.wa(a.ya,c)};a.wa=function(c,b){if("object"==typeof c)for(var d=0;d<c.length;d++){var f=c[d][0],e=c[d][1];e.unshift(b);if("function"==typeof f)try{f.apply(null,e)}catch(g){a.debugTracking&&a.P(g.message)}}};a.tl=a.trackLink=function(c,b,d,f,e){a.linkObject=c;a.linkType=b;a.linkName=d;e&&(a.l=c,a.A=e);return a.track(f)};a.trackLight=function(c,b,d,f){a.lightProfileID=c;a.lightStoreForSeconds=b;a.lightIncrementBy=d;return a.track(f)};a.clearVars=function(){var c,b;for(c=0;c<a.g.length;c++)if(b=a.g[c],"prop"==b.substring(0,4)||"eVar"==b.substring(0,4)||"hier"==b.substring(0,4)||"list"==b.substring(0,4)||"channel"==b||"events"==b||"eventList"==b||"products"==b||"productList"==b||"purchaseID"==b||"transactionID"==b||"state"==b||"zip"==b||"campaign"==b)a[b]=void 0};a.tagContainerMarker="";a.Fb=function(c,b){var d,f=a.trackingServer;d="";var e=a.dc,g="sc.",h=a.visitorNamespace;f?a.trackingServerSecure&&a.ssl&&(f=a.trackingServerSecure):(h||(h=a.account,f=h.indexOf(","),0<=f&&(h=h.substring(0,f)),h=h.replace(/[^A-Za-z0-9]/g,"")),d||(d="2o7.net"),e=e?(""+e).toLowerCase():"d1","2o7.net"==d&&("d1"==e?e="112":"d2"==e&&(e="122"),g=""),f=h+"."+e+"."+g+d);d=a.ssl?"https://":"http://";e=a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks;d+=f+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(e?"10":"1")+"/JS-"+a.version+(a.Jb?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+c+"?AQB=1&ndh=1&pf=1&"+(e?"callback=s_c_il["+a._in+"].doPostbacks&et=1&":"")+b+"&AQE=1";a.bb(d);a.sb(d);a.ka()};a.Ta=/{(%?)(.*?)(%?)}/;a.Nb=RegExp(a.Ta.source,"g");a.tb=function(c){if("object"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=c.dests[b];if("string"==typeof d.c&&"aa."==d.id.substr(0,3))for(var f=d.c.match(a.Nb),e=0;e<f.length;++e){var g=f[e],h=g.match(a.Ta),l="";"%"==h[1]&&"timezone_offset"==h[2]?l=(new Date).getTimezoneOffset():"%"==h[1]&&"timestampz"==h[2]&&(l=a.xb());d.c=d.c.replace(g,a.escape(l))}}};a.xb=function(){var c=new Date,b=new Date(6E4*Math.abs(c.getTimezoneOffset()));return a.k(4,c.getFullYear())+"-"+a.k(2,c.getMonth()+1)+"-"+a.k(2,c.getDate())+"T"+a.k(2,c.getHours())+":"+a.k(2,c.getMinutes())+":"+a.k(2,c.getSeconds())+(0<c.getTimezoneOffset()?"-":"+")+a.k(2,b.getUTCHours())+":"+a.k(2,b.getUTCMinutes())};a.k=function(a,b){return(Array(a+1).join(0)+b).slice(-a)};a.ta={};a.doPostbacks=function(c){if("object"==typeof c)if(a.tb(c),"object"==typeof a.AudienceManagement&&"function"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&"function"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(c);else if("object"==typeof c&&"object"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=c.dests[b];"object"==typeof d&&"string"==typeof d.c&&"string"==typeof d.id&&"aa."==d.id.substr(0,3)&&(a.ta[d.id]=new Image,a.ta[d.id].alt="",a.ta[d.id].src=d.c)}};a.sb=function(c){a.i||a.Bb();a.i.push(c);a.ma=a.C();a.Ra()};a.Bb=function(){a.i=a.Db();a.i||(a.i=[])};a.Db=function(){var c,b;if(a.ra()){try{(b=h.localStorage.getItem(a.pa()))&&(c=h.JSON.parse(b))}catch(d){}return c}};a.ra=function(){var c=!0;a.trackOffline&&a.offlineFilename&&h.localStorage&&h.JSON||(c=!1);return c};a.Ia=function(){var c=0;a.i&&(c=a.i.length);a.q&&c++;return c};a.ka=function(){if(a.q&&(a.B&&a.B.complete&&a.B.F&&a.B.va(),a.q))return;a.Ja=n;if(a.qa)a.ma>a.N&&a.Pa(a.i),a.ua(500);else{var c=a.nb();if(0<c)a.ua(c);else if(c=a.Fa())a.q=1,a.Eb(c),a.Ib(c)}};a.ua=function(c){a.Ja||(c||(c=0),a.Ja=setTimeout(a.ka,c))};a.nb=function(){var c;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;c=a.C()-a.Oa;return a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c};a.Fa=function(){if(0<a.i.length)return a.i.shift()};a.Eb=function(c){if(a.debugTracking){var b="AppMeasurement Debug: "+c;c=c.split("&");var d;for(d=0;d<c.length;d++)b+="\n\t"+a.unescape(c[d]);a.P(b)}};a.fb=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.Y=!1;var q;try{q=JSON.parse('{"x":"y"}')}catch(u){q=null}q&&"y"==q.x?(a.Y=!0,a.X=function(a){return JSON.parse(a)}):h.$&&h.$.parseJSON?(a.X=function(a){return h.$.parseJSON(a)},a.Y=!0):a.X=function(){return null};a.Ib=function(c){var b,d,f;a.fb()&&2047<c.length&&("undefined"!=typeof XMLHttpRequest&&(b=new XMLHttpRequest,"withCredentials"in b?d=1:b=0),b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest,d=2),b&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.Y?b.Ba=!0:b=0));!b&&a.Sa&&(c=c.substring(0,2047));!b&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(b=a.d.createElement("SCRIPT"))&&"async"in b&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(b.type="text/javascript",b.setAttribute("async","async"),d=3):b=0);b||(b=new Image,b.alt="",b.abort||"undefined"===typeof h.InstallTrigger||(b.abort=function(){b.src=n}));b.Da=function(){try{b.F&&(clearTimeout(b.F),b.F=0)}catch(a){}};b.onload=b.va=function(){a.ab(c);b.Da();a.rb();a.ga();a.q=0;a.ka();if(b.Ba){b.Ba=!1;try{a.doPostbacks(a.X(b.responseText))}catch(d){}}};b.onabort=b.onerror=b.Ga=function(){b.Da();(a.trackOffline||a.qa)&&a.q&&a.i.unshift(a.qb);a.q=0;a.ma>a.N&&a.Pa(a.i);a.ga();a.ua(500)};b.onreadystatechange=function(){4==b.readyState&&(200==b.status?b.va():b.Ga())};a.Oa=a.C();if(1==d||2==d){var e=c.indexOf("?");f=c.substring(0,e);e=c.substring(e+1);e=e.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,"");1==d?(b.open("POST",f,!0),b.send(e)):2==d&&(b.open("POST",f),b.send(e))}else if(b.src=c,3==d){if(a.Ma)try{f.removeChild(a.Ma)}catch(g){}f.firstChild?f.insertBefore(b,f.firstChild):f.appendChild(b);a.Ma=a.B}b.F=setTimeout(function(){b.F&&(b.complete?b.va():(a.trackOffline&&b.abort&&b.abort(),b.Ga()))},5E3);a.qb=c;a.B=h["s_i_"+a.replace(a.account,",","_")]=b;if(a.useForcedLinkTracking&&a.J||a.A)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.ha=setTimeout(a.ga,a.forcedLinkTrackingTimeout)};a.rb=function(){if(a.ra()&&!(a.Na>a.N))try{h.localStorage.removeItem(a.pa()),a.Na=a.C()}catch(c){}};a.Pa=function(c){if(a.ra()){a.Ra();try{h.localStorage.setItem(a.pa(),h.JSON.stringify(c)),a.N=a.C()}catch(b){}}};a.Ra=function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.i.length>a.offlineLimit;)a.Fa()}};a.forceOffline=function(){a.qa=!0};a.forceOnline=function(){a.qa=!1};a.pa=function(){return a.offlineFilename+
"-"+a.visitorNamespace+a.account};a.C=function(){return(new Date).getTime()};a.Ka=function(a){a=a.toLowerCase();return 0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1};a.setTagContainer=function(c){var b,d,f;a.Jb=c;for(b=0;b<a._il.length;b++)if((d=a._il[b])&&"s_l"==d._c&&d.tagContainerName==c){a.R(d);if(d.lmq)for(b=0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f],f)!Object.prototype[b]&&("function"!=typeof f[b]||0>(""+f[b]).indexOf("s_c_il"))&&(c[b]=f[b]);if(d.mmq)for(b=0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&"function"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(c,b,d,f){var e,g="";b||(b=a.pageURL?a.pageURL:h.location);d=d?d:"&";if(!c||!b)return g;b=""+b;e=b.indexOf("?");if(0>e)return g;b=d+b.substring(e+1)+d;if(!f||!(0<=b.indexOf(d+c+d)||0<=b.indexOf(d+c+"="+d))){e=b.indexOf(d+c+"=");if(0>e)return g;b=b.substring(e+d.length+c.length+1);e=b.indexOf(d);0<=e&&(b=b.substring(0,e));0<b.length&&(g=a.unescape(b));return g}}};a.G="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" ");a.g=a.G.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));a.na="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");a.O=a.na.slice(0);a.Aa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks registerPreTrackCallback registerPostTrackCallback AudienceManagement".split(" ");for(l=0;250>=l;l++)76>l&&(a.g.push("prop"+l),a.O.push("prop"+l)),a.g.push("eVar"+l),a.O.push("eVar"+l),6>l&&a.g.push("hier"+l),4>l&&a.g.push("list"+l);l="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID".split(" ");a.g=a.g.concat(l);a.G=a.G.concat(l);a.ssl=0<=h.location.protocol.toLowerCase().indexOf("https");a.charSet="UTF-8";a.contextData={};a.offlineThrottleDelay=0;a.offlineFilename="AppMeasurement.offline";a.Oa=0;a.ma=0;a.N=0;a.Na=0;a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";a.w=h;a.d=h.document;try{if(a.Sa=!1,navigator){var v=navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName||0<=v.indexOf("MSIE ")||0<=v.indexOf("Trident/")&&0<=v.indexOf("Windows NT 6"))a.Sa=!0}}catch(w){}a.ga=function(){a.ha&&(h.clearTimeout(a.ha),a.ha=n);a.l&&a.J&&a.l.dispatchEvent(a.J);a.A&&("function"==typeof a.A?a.A():a.l&&a.l.href&&(a.d.location=a.l.href));a.l=a.J=a.A=0};a.Qa=function(){a.b=a.d.body;a.b?(a.v=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.Ca)if(a.useForcedLinkTracking)a.b.removeEventListener("click",a.v,!1);else{a.b.removeEventListener("click",a.v,!0);a.Ca=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.M&&a.M==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=0;else{var k=a.M=a.clickObject;a.la&&(clearTimeout(a.la),a.la=0);a.la=setTimeout(function(){a.M==k&&(a.M=0)},1E4);f=a.Ia();a.track();if(f<a.Ia()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.Ka(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||h.name&&d==h.name))){try{b=a.d.createEvent("MouseEvents")}catch(l){b=new h.MouseEvent}if(b){try{b.initMouseEvent("click",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(n){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.l=c.target,a.J=b)}}}}}catch(p){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.v):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&h.MouseEvent)&&(a.Ca=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.v,!0)),a.b.addEventListener("click",a.v,!1))):setTimeout(a.Qa,30)};a.Qa();a.loadModule("ActivityMap")}
function s_gi(a){var h,n=window.s_c_il,p,l,r=a.split(","),s,q,u=0;if(n)for(p=0;!u&&p<n.length;){h=n[p];if("s_c"==h._c&&(h.account||h.oun))if(h.account&&h.account==a)u=1;else for(l=h.account?h.account:h.oun,l=h.allAccounts?h.allAccounts:l.split(","),s=0;s<r.length;s++)for(q=0;q<l.length;q++)r[s]==l[q]&&(u=1);p++}u||(h=new AppMeasurement);h.setAccount?h.setAccount(a):h.sa&&h.sa(a);return h}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);function s_pgicq(){var a=window,h=a.s_giq,n,p,l;if(h)for(n=0;n<h.length;n++)p=h[n],l=s_gi(p.oun),l.setAccount(p.un),l.setTagContainer(p.tagContainerName);a.s_giq=0}s_pgicq();function AppMeasurement_Module_Integrate(l){var c=this;c.s=l;var e=window;e.s_c_in||(e.s_c_il=[],e.s_c_in=0);c._il=e.s_c_il;c._in=e.s_c_in;c._il[c._in]=c;e.s_c_in++;c._c="s_m";c.list=[];c.add=function(d,b){var a;b||(b="s_Integrate_"+d);e[b]||(e[b]={});a=c[d]=e[b];a.a=d;a.e=c;a._c=0;a._d=0;void 0==a.disable&&(a.disable=0);a.get=function(b,d){var f=document,h=f.getElementsByTagName("HEAD"),k;if(!a.disable&&(d||(v="s_"+c._in+"_Integrate_"+a.a+"_get_"+a._c),a._c++,a.VAR=v,a.CALLBACK="s_c_il["+c._in+"]."+
a.a+".callback",a.delay(),h=h&&0<h.length?h[0]:f.body))try{k=f.createElement("SCRIPT"),k.type="text/javascript",k.setAttribute("async","async"),k.src=c.c(a,b),0>b.indexOf("[CALLBACK]")&&(k.onload=k.onreadystatechange=function(){a.callback(e[v])}),h.firstChild?h.insertBefore(k,h.firstChild):h.appendChild(k)}catch(l){}};a.callback=function(b){var c;if(b)for(c in b)Object.prototype[c]||(a[c]=b[c]);a.ready()};a.beacon=function(b){var d="s_i_"+c._in+"_Integrate_"+a.a+"_"+a._c;a.disable||(a._c++,d=e[d]=new Image,d.src=c.c(a,b))};a.script=function(b){a.get(b,1)};a.delay=function(){a._d++};a.ready=function(){a._d--;a.disable||l.delayReady()};c.list.push(d)};c._g=function(d){var b,a=(d?"use":"set")+"Vars";for(d=0;d<c.list.length;d++)if((b=c[c.list[d]])&&!b.disable&&b[a])try{b[a](l,b)}catch(e){}};c._t=function(){c._g(1)};c._d=function(){var d,b;for(d=0;d<c.list.length;d++)if((b=c[c.list[d]])&&!b.disable&&0<b._d)return 1;return 0};c.c=function(c,b){var a,e,g,f;"http"!=b.toLowerCase().substring(0,4)&&(b="http://"+b);l.ssl&&(b=l.replace(b,"http:","https:"));c.RAND=Math.floor(1E13*Math.random());for(a=0;0<=a;)a=b.indexOf("[",a),0<=a&&(e=b.indexOf("]",a),e>a&&(g=b.substring(a+1,e),2<g.length&&"s."==g.substring(0,2)?(f=l[g.substring(2)])||(f=""):(f=""+c[g],f!=c[g]&&parseFloat(f)!=c[g]&&(g=0)),g&&(b=b.substring(0,a)+encodeURIComponent(f)+b.substring(e+1)),a=e));return b}}
function AppMeasurement_Module_ActivityMap(f){function g(a,d){var b,c,n;if(a&&d&&(b=e.c[d]||(e.c[d]=d.split(","))))for(n=0;n<b.length&&(c=b[n++]);)if(-1<a.indexOf(c))return null;p=1;return a}function q(a,d,b,c,e){var g,h;if(a.dataset&&(h=a.dataset[d]))g=h;else if(a.getAttribute)if(h=a.getAttribute("data-"+b))g=h;else if(h=a.getAttribute(b))g=h;if(!g&&f.useForcedLinkTracking&&e&&(g="",d=a.onclick?""+a.onclick:"")){b=d.indexOf(c);var l,k;if(0<=b){for(b+=10;b<d.length&&0<="= \t\r\n".indexOf(d.charAt(b));)b++;if(b<d.length){h=b;for(l=k=0;h<d.length&&(";"!=d.charAt(h)||l);)l?d.charAt(h)!=l||k?k="\\"==d.charAt(h)?!k:0:l=0:(l=d.charAt(h),'"'!=l&&"'"!=l&&(l=0)),h++;if(d=d.substring(b,h))a.e=new Function("s","var e;try{s.w."+c+"="+d+"}catch(e){}"),a.e(f)}}}return g||e&&f.w[c]}function r(a,d,b){var c;return(c=e[d](a,b))&&(p?(p=0,c):g(k(c),e[d+"Exclusions"]))}function s(a,d,b){var c;if(a&&!(1===(c=a.nodeType)&&(c=a.nodeName)&&(c=c.toUpperCase())&&t[c])&&(1===a.nodeType&&(c=a.nodeValue)&&(d[d.length]=c),b.a||b.t||b.s||!a.getAttribute||((c=a.getAttribute("alt"))?b.a=c:(c=a.getAttribute("title"))?b.t=c:"IMG"==(""+a.nodeName).toUpperCase()&&(c=a.getAttribute("src")||a.src)&&(b.s=c)),(c=a.childNodes)&&c.length))for(a=0;a<c.length;a++)s(c[a],d,b)}function k(a){if(null==a||void 0==a)return a;try{return a.replace(RegExp("^[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]+$","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t\t-\r \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u205f\u3000\ufeff]{1,}","mg")," ").substring(0,254)}catch(d){}}var e=this;e.s=f;var m=window;m.s_c_in||(m.s_c_il=[],m.s_c_in=0);e._il=m.s_c_il;e._in=m.s_c_in;e._il[e._in]=e;m.s_c_in++;e._c="s_m";e.c={};var p=0,t={SCRIPT:1,STYLE:1,LINK:1,CANVAS:1};e._g=function(){var a,d,b,c=f.contextData,e=f.linkObject;(a=f.pageName||f.pageURL)&&(d=r(e,"link",f.linkName))&&(b=r(e,"region"))&&(c["a.activitymap.page"]=a.substring(0,255),c["a.activitymap.link"]=128<d.length?d.substring(0,128):d,c["a.activitymap.region"]=127<b.length?b.substring(0,127):b,c["a.activitymap.pageIDType"]=f.pageName?1:0)};e.link=function(a,d){var b;if(d)b=g(k(d),e.linkExclusions);else if((b=a)&&!(b=q(a,"sObjectId","s-object-id","s_objectID",1))){var c,f;(f=g(k(a.innerText||a.textContent),e.linkExclusions))||(s(a,c=[],b={a:void 0,t:void 0,s:void 0}),(f=g(k(c.join(""))))||(f=g(k(b.a?b.a:b.t?b.t:b.s?b.s:void 0)))||!(c=(c=a.tagName)&&c.toUpperCase?c.toUpperCase():"")||("INPUT"==c||"SUBMIT"==c&&a.value?f=g(k(a.value)):"IMAGE"==c&&a.src&&(f=g(k(a.src)))));b=f}return b};e.region=function(a){for(var d,b=e.regionIDAttribute||"id";a&&(a=a.parentNode);){if(d=q(a,b,b,b))return d;if("BODY"==a.nodeName)return"BODY"}}}
try{(function(id,loader){window.utag.tagsettings=window.utag.tagsettings||{};window.utag.tagsettings.adobe=window.utag.tagsettings.adobe||{};var vAPI=window.utag.tagsettings.adobe.visitorAPI=window.utag.tagsettings.adobe.visitorAPI||(function(){return{getInstance:function(orgID,callback){if(orgID){utag.DB("["+u.id+"] OrgID used, but no 'Adobe Marketing Cloud ID Service' tag detected");}
return callback();}};}());var u={"id":id};utag.o[loader].sender[id]=u;u.ev={'view':1,'link':1,'video':1};u.o=s;u.varlist={pageName:'pageName',channel:'ch',campaign:'v0',hier1:'h1',hier2:'h2',hier3:'h3',hier4:'h4'};for(var i=1;i<76;i++){u.varlist['prop'+i]='c'+i;u.varlist['eVar'+i]='v'+i;}
u.pushlt=function(l,v){if(typeof l!="undefined")l.push(v)};u.map={"Tags_AdobeAnalytics_TrafficSourceCid_ThisSession":"campaign,eVar1,prop1","Order_Currency":"currencyCode","Page_Country":"prop2,eVar6","User_Id":"prop9,eVar9","Order_PaymentType":"prop10,eVar31","User_LoginStatus":"prop39,eVar39","Search_Keyword":"prop13,eVar12","Search_ResultItemsQnt":"prop14,eVar13","Error_Code":"prop25,eVar25,eVar83","Order_DiscountCode":"eVar29","Order_GiftCardCode":"eVar30","Order_CancellationId":"eVar34","User_ZipCode":"zip","Order_ProductsTaxRate":"eVar20","Device_UserAgent":"prop22,eVar22","Order_Id_Prefixed":"eVar35,prop6","Order_DiscountAmount":"eVar27","Return_Reasons":"prop46","Order_CurrencyAndTimestamp":"eVar40","Page_Platform":"prop29,eVar49","Error_Tealium":"prop30","Error_Message":"prop32","User_Country":"eVar52","Action":"prop60,eVar60,eVar44","Action_PreviousAction":"prop61,eVar61,eVar80","User_Language":"eVar53","Page_QueryString":"prop67","dom.referrer":"prop68,eVar68","User_IdTimeStamp":"prop62,eVar62","Page_Section1":"channel,prop20,eVar26","Page_Name":"prop58,eVar58","Tags_ClickTale_UserId":"eVar38,prop34","Page_Region":"prop35,eVar32","Error_Details":"prop36,eVar36","Order_ShippingMode":"eVar23","Order_PaymentInstallments":"eVar41","Products_DiscountUnits_Array":"PRODUCTS_event44","Page_DeviceType":"prop59,eVar59","Device_Screen":"eVar54,prop54","Search_FacetValues_String":"list2,eVar95","Session_Time":"prop7,eVar7","Tags_AdobeAnalytics_PageName":"pageName","User_Segments":"eVar45,prop45","Order_DiscountMethod":"eVar43","Tags_Tealium_ReleaseCode":"prop48,eVar48","Tags_AdobeAnalytics_TrafficSourceJid_Stacking":"prop55,eVar55","Products_Revenue_Array":"PRODUCTS_event60","Products_Tax_Array":"PRODUCTS_event24,PRODUCTS_event65","Products_Discount_Array":"PRODUCTS_event37,PRODUCTS_event62","Action_Combo":"list3,prop38","page_type":"pageType","Page_PathQueryString":"prop8,eVar8","Tags_AdobeAnalytics_RSID":"s_account","Order_CartId":"prop5,eVar5","Tags_AdobeAnalytics_Server":"trackingServer","Tags_AdobeAnalytics_ServerSecure":"trackingServerSecure","dom.domain":"server","Error_Datalayer":"eVar21,prop21","Order_Insured":"prop65,eVar65","Order_PrescriptionMethod":"prop70,eVar70","Tracking_EventId":"prop3","Search_Type":"eVar37","GiftCard_Revenue_Array":"PRODUCTS_event83,PRODUCTS_event84","GiftCard_Units_Array":"PRODUCTS_event85","Page_CountryEcommerce_YN":"eVar2","Products_OosOptions_Array":"PRODUCTS_eVar133","Order_SubscriptionFrequency":"prop49,eVar76","Tags_AdobeAnalytics_TrafficSourceMid_ThisHit":"prop19,eVar19","User_International":"prop51,eVar51","User_Email_MD5":"prop40,eVar17","Tracking_EventId_Serial":"prop72","Tags_Google_clickId":"eVar77","Page_Consent":"eVar84,prop71","Tags_AdobeAnalytics_Events":"prop73,eVar73","Store_Search_Keyword":"eVar24","Exam_Id":"eVar66","Exam_PatientNum":"eVar67","Exam_WornBefore":"eVar69","Exam_Fitting":"eVar78","qp.ad":"eVar85","cp.Cookie-Bot":"eVar81","Event_Category":"eVar86","Event_Label":"eVar87","Event_Scope":"eVar88","Event_Source":"eVar89","Order_InsuranceCode":"eVar82","Order_InsuranceAmount":"VALUE_event88","Page_PlatformRelease":"eVar91","Store_Id":"prop15,eVar92","Fs_IsConnected":"eVar93","Page_Brand":"prop74,eVar74","Page_UserProfile":"eVar96","Products_ViewPdp_Array:Y":"prodView,event32,event47","Products_ViewPdp_Ecom_Array:Y":"event13","Products_ViewPdp_EcomOos_Array:Y":"event27","Products_ViewPdp_EcomOosEmailView_Array:Y":"event66","Products_ViewPlp_Array:Y":"event96","Products_Badges_Array":"PRODUCTS_eVar94","Products_Type_Array":"PRODUCTS_eVar98","Products_LensUPC_Array":"PRODUCTS_eVar100","Order_InsuranceBenefits":"eVar97","Session_Status":"eVar99","Tags_Tealium_Triggered_Csv":"eVar120","Order_Id_PurchaseAdobe":"purchaseID","Order_State":"eVar14","Search_View":"eVar15","1LX_User_WorkLocation":"eVar121","1LX_User_BusinessUnit":"eVar122","1LX_User_BusinessFuntion":"eVar123","1LX_User_GroupIdap":"eVar124","1LX_User_BrandRetail":"eVar125","User_LoginType":"prop41,eVar71","Page_Url":"eVar126","Adobe_SessionId":"visitorID","Order_DiscountName":"eVar127","Cid_Override":"eVar16","cp.utag_main_v_id":"prop52,eVar112","cp.utag_main_ses_id":"prop53,eVar113","User_Nation":"prop42","Store_Configuration":"prop16,eVar10","qp.h5e":"eVar140,eVar141","Search_KeyActual":"eVar114,prop50","Products_ShippingTo_Array":"PRODUCTS_eVar132","Products_Status_Array":"PRODUCTS_eVar131","Products_CartUnits_Array":"PRODUCTS_event143","Error_QA":"prop23","Order_Type":"eVar128","Products_Preorder_Array":"PRODUCTS_eVar129","Products_Visibility_Array":"PRODUCTS_eVar130","Products_CartUnique_Array":"PRODUCTS_event142","Products_FrameType_Array":"PRODUCTS_eVar115","Products_LensType_Array":"PRODUCTS_eVar98","Fg_Release":"eVar119","Products_Fg_Badge_Array":"PRODUCTS_eVar116","Products_Fg_BestMatch_Array":"PRODUCTS_eVar118","User_Phone_MD5":"eVar63","Store_Segment":"prop18","Vm_Release":"eVar142","Take_Mode":"eVar143","Products_Vm_Badge_Array":"PRODUCTS_eVar144","Oc_Release":"eVar139","Products_Conf_Change_Array":"PRODUCTS_eVar28","Store_Chain":"prop12,eVar11","Sg_Release":"eVar148","Products_Sg_Badge_Array":"PRODUCTS_eVar138","Products_Sg_BestMatch_Array":"PRODUCTS_eVar147","Return_Cost":"eVar151","Products_Conf_IsUpcSupported_Array":"PRODUCTS_eVar149","Products_La_Badge_Array":"PRODUCTS_eVar153","Products_ModelName_Csv":"PRODUCTS_eVar154","Page_Language":"prop66","RX_Release":"eVar75","Tags_Google_dClickId":"eVar72","Page_Creativities":"prop28","Products_PricePerUnits_Array":"PRODUCTS_event175","Products_PriceFullPerUnits_Array":"PRODUCTS_event176","Products_DiscountPricePerUnits_Array":"PRODUCTS_eVar157","Page_Server":"prop17","Order_ShippingType":"eVar155","Store_Search_StoreId":"eVar156","Order_ShippingSameDay":"eVar158","Products_Recom_Badge_Array":"PRODUCTS_eVar160","User_HasPrescription":"eVar159","Content_TestList":"list1,prop24","Store_Search_Type":"eVar137","Store_Search_ResultItemsQnt":"eVar145","Exam_ZipCode":"eVar134","Exam_PreviousExam":"eVar135","Exam_InsuranceCode":"eVar161","Exam_AppointmentDate":"eVar136","Order_InsuranceMethod":"eVar150","Order_QuotId":"eVar163","Content_Answers":"eVar162","Warranty":"eVar164"};u.extend=[function(a,b){try{if(1){if(typeof utag.gdpr!=="undefined"){if(typeof utag.gdpr.getCookieValues().consent==="undefined"){b.Page_Consent="Not Opted";}else{if(utag.gdpr.getCookieValues().consent==="true"){if(!utag.gdpr.getCookieValues().c1){b.Page_Consent="Opt-In All";}else{var Cst_An=utag.gdpr.getCookieValues().c1;var Cst_So=utag.gdpr.getCookieValues().c7;var Cst_Ma=utag.gdpr.getCookieValues().c9;if(Cst_An===Cst_So&&Cst_So===Cst_Ma){b.Page_Consent=(utag.gdpr.getCookieValues().c1==="1")?"Opt-In All":"Opt-Out All";}else{b.Page_Consent="Opt-In Partial: Analytics "+Cst_An+" - Social "+Cst_So+" - Marketing "+Cst_Ma;}}}else{b.Page_Consent="Opt-Out All"}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(/^SS/i.test(b['Page_Platform'])){var visitor=Visitor.getInstance("125138B3527845350A490D4C@AdobeOrg");var aid=visitor.getMarketingCloudVisitorID();b.Adobe_SessionId=(typeof aid==="string"&&aid!==""&&!aid.match(/none|null|empty/i))?aid:visitor.getMarketingCloudVisitorID();utag_data.Adobe_SessionId=(b.Adobe_SessionId)?b.Adobe_SessionId:"";}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['qp.h5e']!='undefined'&&b['qp.h5e']=='')){b['qp.h5e']='empty'}}catch(e){utag.DB(e);}},function(a,b){try{if(1){if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext300")&&!window.tealium_ext300_WeAreInBeta){window.tealium_ext300_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext300"));}
else{tealium_logContext='adobe';var AdobeInitialization=function(){try{tealium_logContext='adobe serial ID';{var __serialID="UNKNOWN";if(b.Tracking_EventId_Serial)__serialID=b.Tracking_EventId_Serial;else if(b.Tracking_EventSerial_Ids){var __entry=b.Tracking_EventSerial_Ids.split("::");if(__entry.length>1)__serialID=__entry[__entry.length-1];}
tealium_log.adobe.set('processing',{Tracking_EventId_Serial:__serialID});}
tealium_logContext='adobe event trigger';{if(b.Events_Array)b.Events_Array=jQuery.extend({},b.Events_Array);//@NOTE: assign non  supportato da IE11: b.Events_Array = Object.assign({}, b.Events_Array);
var __sitecat,__value,__serialization;for(var key in b.Events_Array){if(b.Events_Array.hasOwnProperty(key)&&typeof key==="string"&&b.Events_Array[key].enabled===1&&b.Events_Array[key].tofire===1&&b.Events_Array[key].sitecat!==''){b.Events_Array[key].fired=1;__sitecat=b.Events_Array[key].sitecat.split(',');__value=b.Events_Array[key].value;for(var ev in __sitecat){if(!__sitecat.hasOwnProperty(ev))continue;__serialization='';if(Array.isArray(b.Events_Array[key].serialization)&&b.Events_Array[key].serialization.length>0&&b.Events_Array[key].serialization[0]!=''){if(b.Events_Array[key].serialization.length==1)__serialization=b.Events_Array[key].serialization[0];else{for(var index=1;index<b.Events_Array[key].serialization.length;index++){if(b.Events_Array[key].serialization[index]==__sitecat[ev]){__serialization=b.Events_Array[key].serialization[0];break;}}}}
u.addEvent(__sitecat[ev]+(__serialization?(':'+__serialization):'')+(__value!=''?('='+__value):''));}}}}
tealium_logContext='adobe cleanup unwanted revenues';{if(b.Products_Category_Array&&b.Page_Type.match(/ThankYou/i)){for(var i=0;i<b.Products_Category_Array.length;i++){if(b.Products_Category_Array[i].match(/gift/i)){b.Products_RevenuePerUnit_Array[i]="0";b.Products_DiscountPerUnit_Array[i]="0";}}}}
tealium_logContext='adobe cs integration';{var list=new __Utils__.ArrayList('string',true,true,',');list.setData(window.utag_data.Tags_Tealium_Triggered_Array||[]);if(!list.isEmpty())b.Tags_Tealium_Triggered_Csv=list.getData(true);b.Tags_ClickTale_UserId=window.utag_data.Tags_ClickTale_UserId||b.Tags_ClickTale_UserId;}
if(__Utils__.TypeChecking.isCustomObject(window.s)){tealium_logContext='adobe register preTrackCallback once';{if(!window.__isPreTrackCallbackRegistered){window.s.registerPreTrackCallback(function(requestUrl){if(b.Tracking_EventId.match(/VirtualPage-View/i))window.s.clearVars();});window.__isPreTrackCallbackRegistered=true;}}
tealium_logContext='adobe register postTrackCallback once';{if(!window.__isPostTrackCallbackRegistered){var buildAdobeDatalayer=function(url){var requestAdobeMap={"startWith":{"c":"prop","v":"eVar","l":"list"},"equal":{"cc":"currencyCode","g":"pageURL","r":"pageURLRest","ns":"visitorNamespace","ch":"channel","cid":"campaign"},"include":["account","visitorNamespace","currencyCode","campaign","events","eVar","list","prop","products","purchaseID","pageName","pageType","pageURL","pageURLRest","dynamicAccountList",],};var valuesWithAmp=["Click&Collect"];var replaceValuesWithAmp=function(list){for(var i=0;i<valuesWithAmp.length;i++){list=list.replace(valuesWithAmp[i].replace("&","&&&"),valuesWithAmp[i]);}
return list;};var __s={};var i_regexp=new RegExp("^("+requestAdobeMap.include.join("|")+")");var sw_regexp=new RegExp("^("+Object.keys(requestAdobeMap.startWith).join("|")+")[0-9]{1,3}$");try{var req=url.split("?");var params=replaceValuesWithAmp(decodeURIComponent(req[1]).replace(/&/g,"&&&")).split("&&&");params.map(function(k){var p=k.replace("=","===").split("===");if(p[0].match(sw_regexp)){p[0]=requestAdobeMap.startWith[p[0][0]]+p[0].substr(1);}else if(requestAdobeMap.equal[p[0]]){p[0]=requestAdobeMap.equal[p[0]];}
if(!p[0].match(i_regexp)){p[0]="adobe_"+p[0];}
__s[p[0]]=p[1];});}catch(e){tealium_log.old(e,'error');}
return __s;};window.s.registerPostTrackCallback(function(requestUrl){var __dl=buildAdobeDatalayer(requestUrl);__dl.account=window.s.account;__dl.Tracking_EventId_Serial=__dl.prop72;tealium_log.adobe.set('done',__dl);if(window.s.un)__Utils__.Cookie.set('s_un',window.s.un);});window.__isPostTrackCallbackRegistered=true;}}
tealium_logContext='adobe doPlugin';{window.s.usePlugins=true;window.s.doPlugins=function(s){if(s.prop68&&(s.prop68.indexOf('?')>-1))s.prop68=s.prop68.substring(0,s.prop68.indexOf('?'));if(s.prop22&&s.prop22.length>100){s.prop22=s.prop22.substring(s.prop22.length-100);s.eVar22=s.prop22;}
for(var p in s){if(s.hasOwnProperty(p)&&p.match(/^(eVar|prop|list)/i)&&typeof s[p]==="string"){if(s[p]==='')delete s[p];else s[p]=s[p].replace(/[a-z0-9\.\-_]+(@|%40)[a-z0-9\-]+\.[a-z0-9\.\-]+/ig,'***$1***');}}};}}}catch(e){if(console)console.error('### AdobeInitialization has not been completed successfully! => caused by: '+e.stack);tealium_logViaPixel('adobe',(window.s||null),tealium_logContext+': '+e.stack);}}();}
window.LuxotticaFrameworkVersion=window.LuxotticaFrameworkVersion||{};LuxotticaFrameworkVersion.sitecat="23-07-02";}}catch(e){utag.DB(e)}}];u.send=function(a,b,c,d,e,f,g,h,ev){if(u.ev[a]||typeof u.ev.all!="undefined"){utag.DB("send:273");u.data={"adobe_org_id":"125138B3527845350A490D4C@AdobeOrg","cookieDomain":(function(){return utag.loader.RC('utag_main').vapi_domain||(function(){var i=0,d=document.domain,p=d.split('.'),s='_vapi'+new Date().getTime();while(i<(p.length-1)&&document.cookie.indexOf(s+'='+s)===-1){d=p.slice(-1-(++i)).join('.');document.cookie=s+'='+s+';domain='+d+';';}
document.cookie=s+'=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain='+d+';';utag.loader.SC('utag_main',{'vapi_domain':d});return d;}());}()),"a":{},"serial":{},"send_timestamp":"no","timestamp":""};u.a=a;b.sc_events=b.sc_events||{};u.addEvent=function(v,n){var t=[];if(v instanceof Array){t=v.slice(0);}else if(typeof n!=="undefined"){t.push(v+"="+n);}else{t.push(v);}
for(var i=0;i<t.length;i++){b.sc_events[t[i]]=1;u.pushlt(u.lte,t[i].indexOf("=")>-1?t[i].split('=')[0]:t[i].split(':')[0]);}
return b.sc_events;};u.addProduct=function(v){u.data.sc_addProd="";if(v instanceof Array){u.data.sc_addProd=v.join(',');}else{u.data.sc_addProd=v;}};if(u.a==="link"){u.ltflag=true;if(typeof b.linkTrackVars==="undefined"){u.ltv=[];}
if(typeof b.linkTrackEvents==="undefined"){u.lte=[];}}
u.data.tagdevicetype="standard";u.data.detectserial="no";for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};try{if(window.sessionStorage){var standardDimensions=sessionStorage.getItem('s_dmdbase')||'';var customDimensions1=sessionStorage.getItem('s_dmdbase_custom1')||'';var customDimensions2=sessionStorage.getItem('s_dmdbase_custom2')||'';var customDimensions3=sessionStorage.getItem('s_dmdbase_custom3')||'';var customDimensions4=sessionStorage.getItem('s_dmdbase_custom4')||'';u.o.contextData.s_dmdbase=standardDimensions;u.o.contextData.s_dmdbase_custom1=customDimensions1;u.o.contextData.s_dmdbase_custom2=customDimensions2;u.o.contextData.s_dmdbase_custom3=customDimensions3;u.o.contextData.s_dmdbase_custom4=customDimensions4;}}
catch(e){utag.DB('AppMeasurement Demandbase Error: '+e.message);}
if(u.data.tagdevicetype==="mobile"){u.data.timestamp=u.data.timestamp||b.timestamp||b.timestamp_unix;if(isTrue(u.data.send_timestamp)&&u.data.timestamp){u.o.timestamp=u.data.timestamp;}
u.data.a={"AppID":b.app_id||"","CarrierName":b.carrier||"","DeviceName":b.device||"","HourOfDay":b.lifecycle_hourofday_local||"","DayOfWeek":b.lifecycle_dayofweek_local||"","OSVersion":b.os_version||b.platform_version||"","Resolution":b.device_resolution||""};if(b.lifecycle_type){u.data.a.disable_wake_track=false;u.data.a.disable_sleep_track=false;u.data.a.DaysSinceFirstUse=b.lifecycle_dayssincelaunch||"";u.data.a.DaysSinceLastUpgrade=b.lifecycle_dayssinceupdate||"";u.data.a.DaysSinceLastUse=b.lifecycle_dayssincelastwake||"";u.data.a.Launches=b.lifecycle_launchcount||"";u.data.a.InstallDate=b.lifecycle_firstlaunchdate_MMDDYYYY||"";u.data.a.UpgradeEvent=b.lifecycle_isfirstlaunchupdate||"";u.data.a.PrevSessionLength=b.lifecycle_priorsecondsawake||"";}
if(b.lifecycle_isfirstlaunch){u.data.a.InstallEvent="InstallEvent";}
if(b.lifecycle_diddetectcrash){u.data.a.CrashEvent="CrashEvent";}
if(b.lifecycle_type==="launch"){u.data.a.LaunchEvent="LaunchEvent";}
if(b.lifecycle_isfirslaunchupdate){u.data.a.UpgradeEvent="UpgradeEvent";}}
for(e in utag.loader.GV(u.map)){if(u.data.tagdevicetype==="mobile"){if(typeof b[e]!="undefined"&&typeof u.map[e]=="string"&&u.map[e].indexOf("contextData.a.")>-1){f=u.map[e].split(",");for(g=0;g<f.length;g++){if(f[g].indexOf("contextData.a.")===0){u.data.a[f[g].substring(14)]=b[e];}}}}else if(typeof b[e]!="undefined"&&typeof u.map[e]=="string"&&u.map[e].indexOf("SERIAL_")>-1){f=u.map[e].split(",");for(g=0;g<f.length;g++){if(f[g].indexOf("SERIAL_")===0){u.data.serial[f[g].substring(7)]=b[e];}}}else if(typeof b[e]!="undefined"&&typeof u.map[e]=="string"&&u.map[e].indexOf("PRODUCTS_")>-1){f=u.map[e].split(",");for(g=0;g<f.length;g++){if(f[g].indexOf("PRODUCTS_id")||f[g].indexOf("PRODUCTS_category")||f[g].indexOf("PRODUCTS_quantity")||f[g].indexOf("PRODUCTS_price")){u.data[f[g].substring(9)]=b[e];}}}}
if(u.data.a.disable_wake_track===true||u.data.a.disable_wake_track==="true"){if(b.lifecycle_type==="wake"){return false;}}
if(u.data.a.disable_sleep_track===true||u.data.a.disable_sleep_track==="true"){if(b.lifecycle_type==="sleep"){return false;}}
u.data.id=u.data.id||(typeof b._cprod!="undefined"?b._cprod.slice(0):[]);u.data.category=u.data.category||(typeof b._ccat!="undefined"?b._ccat.slice(0):[]);u.data.quantity=u.data.quantity||(typeof b._cquan!="undefined"?b._cquan.slice(0):[]);u.data.price=u.data.price||(typeof b._cprice!="undefined"?b._cprice.slice(0):[]);if(typeof u.data.id!="undefined"&&u.data.id!=""){c=[];d={};ev={};for(e in utag.loader.GV(u.map)){if(typeof b[e]!="undefined"&&typeof u.map[e]=="string"&&u.map[e].indexOf("PRODUCTS_")>-1){f=u.map[e].split(",");for(g=0;g<f.length;g++){var pv=f[g].substring(9);if(f[g].indexOf("PRODUCTS_evar")==0||f[g].indexOf("PRODUCTS_eVar")==0){if(b[e]instanceof Array){b.sc_prodevars=b.sc_prodevars||[];for(var i=0;i<b[e].length;i++){var prodvars={};if(typeof b.sc_prodevars[i]!="undefined"&&b.sc_prodevars[i]!=""){b.sc_prodevars[i][pv]=b[e][i];}else{prodvars[pv]=b[e][i];b.sc_prodevars.push(prodvars);}}}else{d[pv]=(b[e]+"").split(",");}}else if(f[g].indexOf("PRODUCTS_event")==0){if(b[e]instanceof Array){b.sc_prodevents=b.sc_prodevents||[];for(var i=0;i<b[e].length;i++){var prodevents={};if(typeof b.sc_prodevents[i]!="undefined"&&b.sc_prodevents[i]!=""){b.sc_prodevents[i][pv]=b[e][i];}else{prodevents[pv]=b[e][i];b.sc_prodevents.push(prodevents);}}
u.addEvent(pv);}else if(b[e]!==""){ev[pv]=b[e];u.addEvent(pv);}}}}}
e="";for(f in utag.loader.GV(d)){for(g=0;g<d[f].length;g++){if(e!="")e+="|"+f+"="+d[f][g];else e=f+"="+d[f][g];}}
h="";for(f in utag.loader.GV(ev)){if(h)h+="|"+f+"="+((isNaN(ev[f]))?"1":ev[f]);else h=f+"="+((isNaN(ev[f]))?"1":ev[f]);}
b.sc_prodevents=b.sc_prodevents||[];b.sc_prodevars=b.sc_prodevars||[];for(d=0;d<u.data.id.length;d++){var h2=h;var h3=e;if(typeof b.sc_prodevents!="undefined"){for(f in b.sc_prodevents[d]){if(typeof b.sc_prodevents[d][f]!="undefined"){var l=b.sc_prodevents[d][f];if(typeof l!="undefined"&&l!=""&&isNaN(l)==false){if(h2){h2+="|"+f+'='+l;}else{h2=f+'='+l;}}}}}
if(typeof b.sc_prodevars!="undefined"){for(f in b.sc_prodevars[d]){if(typeof b.sc_prodevars[d][f]!="undefined"){var l=b.sc_prodevars[d][f];if(typeof l!="undefined"&&l!=""){if(h3){h3+="|"+f+'='+l;}else{h3=f+'='+l;}}}}}
c.push((u.data.category[d]?u.data.category[d]:"")+";"+u.data.id[d]+";"+(u.data.quantity[d]?u.data.quantity[d]:"")+";"+(u.data.price[d]?((u.data.quantity[d]?parseInt(u.data.quantity[d]):1)*parseFloat(u.data.price[d])).toFixed(2):"")+";"+h2+";"+h3);}
if(typeof u.data.sc_addProd!=="undefined"&&u.data.sc_addProd){c.push(u.data.sc_addProd);}
u.o.products=c.join(",");}else{u.o.products="";}
var evt=/^event|prodView|scOpen|scAdd|scRemove|scView|scCheckout|purchase$/;for(c in utag.loader.GV(b)){if(b[c]!==""){f=(""+b[c]).split(",");for(g=0;g<f.length;g++){h=f[g].split(":");d=[];if(u.data.detectserial==="no"){if(typeof u.map[c+":"+h.join(":")]!="undefined"){d=u.map[c+":"+h.join(":")].split(",");}else if(typeof u.map[c]!="undefined"){d=u.map[c].split(",");}}else{if(h.length>1){var subTrigger=h[0];for(var i=1;i<h.length-1;i++){subTrigger+=":"+h[i];}
h[0]=subTrigger;h[1]=h[h.length-1];}
if(typeof u.map[c+":"+h[0]]!="undefined"){d=u.map[c+":"+h[0]].split(",");}else if(typeof u.map[c]!="undefined"){d=u.map[c].split(",");}}
for(e=0;e<d.length;e++){if(d[e]!="events"&&evt.test(d[e])&&d[e].indexOf("SERIAL_")!==0){if(u.data.serial[d[e]]!==undefined&&u.data.serial[d[e]]!==""){u.addEvent(d[e]+":"+u.data.serial[d[e]]);}else{if(u.data.detectserial==="yes"){u.addEvent(d[e]+(h.length>1?":"+h[1]:""));}else{u.addEvent(d[e]);}}}}}}}
for(var m in u.data.a){u.o.contextData["a."+m]=u.data.a[m];u.pushlt(u.ltv,"contextData.a."+m);}
for(c in utag.loader.GV(b)){if(typeof u.map[c]!="undefined"){d=u.map[c].split(",");for(e=0;e<d.length;e++){if(d[e].indexOf("VALUE_")==0){if(u.data.serial[d[e]]!==undefined&&u.data.serial[d[e]]!==""){u.addEvent(d[e].substring(6),b[c]+":"+u.data.serial[d[e]]);}else{u.addEvent(d[e].substring(6),b[c]);}}else if(d[e]=="doneAction"){b.doneAction=b[c];if(b.doneAction!="navigate"){b.doneAction=eval(b[c]);}}else if(d[e].indexOf("c.")==0||d[e].indexOf("contextData.")==0){d[e]=d[e].replace("contextData.","c.");if(d[e][2]!=="a"&&d[e][3]!=="."){u.o.contextData[d[e].substring(2)]=b[c];u.pushlt(u.ltv,"contextData."+d[e].substring(2))}}else{if(c=="sc_events"||c=="sc_prodevents"||c=="sc_prodevars"){utag.DB("Error:273: Mapping reserved object name "+c)}else{if(d[e]==="adobe_org_id"){u.data.adobe_org_id=b[c];}
else{u.o[d[e]]=b[c];}}
if(d[e]=="s_account"){u.o.account=b[c];}else if(d[e]=="linkTrackVars"){u.ltflag=false;}else{u.pushlt(u.ltv,d[e]);}}}}}
d=[];for(c in utag.loader.GV(b.sc_events)){if(b.sc_events[c])d.push(c);}
if(d.length>0){u.o.events=d.join(",");u.pushlt(u.lte,u.o.events);}else{u.o.events="";}
if(b._ccurrency){u.o.currencyCode=b._ccurrency;}
if(b._corder){u.pushlt(u.lte,"purchase");u.pushlt(u.ltv,"purchaseID");u.o.purchaseID=((u.o.purchaseID)?u.o.purchaseID:b._corder);u.o.events=((u.o.events)?u.o.events:"purchase");if(u.o.events.indexOf("purchase")<0){u.o.events+=",purchase";}}
vAPI.getInstance(u.data.adobe_org_id,function(instance){if(instance){u.o.visitor=instance;}
u.o.cookieDomain=u.o.visitor?u.o.visitor.cookieDomain||u.data.cookieDomain:u.data.cookieDomain;if(u.a=="view"){var img=u.o.t();if(typeof img!="undefined"&&img!=""){u.img=new Image();u.img.src=img.substring(img.indexOf("src=")+5,img.indexOf("width=")-2);}}else if(u.a=="link"){if(typeof u.ltv!="undefined"&&u.ltflag){if(u.o.events){u.ltv.push("events");}
if(u.o.products){u.ltv.push("products");}
b.linkTrackVars=u.ltv.join(',')}
if(typeof u.lte!="undefined"&&u.ltflag)b.linkTrackEvents=u.lte.join(',');u.o.linkTrackVars=u.data.linkTrackVars||b.linkTrackVars||"None";u.o.linkTrackEvents=u.data.linkTrackEvents||b.linkTrackEvents||"None";if(!u.o.linkType)u.o.linkType='o';if(b.link_name)b.link_text=b.link_name;b.link_text=(b.link_text)?b.link_text:"no link_name";if(b.link_type=='exit link'){u.o.linkType='e'}
else if(b.link_type=='download link')u.o.linkType='d';u.o.tl(((b.link_obj)?b.link_obj:true),u.o.linkType,b.link_text,null,(b.doneAction?b.doneAction:null));}
if("no"=="yes"){u.o.clearVars();u.o.contextData={};}
utag.DB("send:273:COMPLETE");});}};function isTrue(input){if(typeof input==="boolean"){return input;}else if(typeof input==="string"&&(input.toLowerCase()==="yes"||input.toLowerCase()==="true")){return true;}else{return false;}}
try{utag.o[loader].loader.LOAD(id)}catch(e){utag.loader.LOAD(id)}})('273','luxottica.opsm');}catch(e){utag.DB(e);}

//tealium universal tag - utag.293 ut4.0.202309250934, Copyright 2023 Tealium.com Inc. All Rights Reserved.
if(typeof JSON!=='object'){JSON={};}
(function(){'use strict';var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(n){return n<10?'0'+n:n;}
function this_value(){return this.valueOf();}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};Boolean.prototype.toJSON=this_value;Number.prototype.toJSON=this_value;String.prototype.toJSON=this_value;}
var gap,indent,meta,rep;function quote(string){rx_escapable.lastIndex=0;return rx_escapable.test(string)?'"'+string.replace(rx_escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}}());try{(function(id,loader,u){try{u=utag.o[loader].sender[id]={"id":id};}catch(e){u=utag.sender[id];}
utag.globals=window.utag.globals||{};u.ev={"all":1};u.server_domain="tealiumiq.com";u.server_prefix="";u.tag_config_server="";u.tag_config_sampling="100"||"100";if(utag.cfg.utagdb){u.tag_config_sampling="100";}
u.tag_config_region="default"||"default";u.region="";u.performance_timing_count=0;u.account=utag.cfg.utid.split("/")[0];u.data_source="";u.profile=""||utag.cfg.utid.split("/")[1];u.visitor_service_override="";u.request_increment=1;u.iab_v20_compliance=true;u.tc_string="";if(u.tag_config_server.indexOf("-collect."+u.server_domain)>1){u.server_prefix=u.tag_config_server.split("collect."+u.server_domain)[0];if(u.tag_config_server.indexOf("/i.gif")<0){u.tag_config_server="https://"+[u.server_prefix+"collect."+u.server_domain,u.account,u.profile,"2","i.gif"].join("/");}}
if(u.tag_config_server===""){if(u.tag_config_region==="default"){u.tag_config_server="https://"+[u.server_prefix+"collect."+u.server_domain,u.account,u.profile,"2","i.gif"].join("/");}else{u.tag_config_server="https://"+[u.server_prefix+"collect-"+u.tag_config_region+"."+u.server_domain,u.account,u.profile,"2","i.gif"].join("/");}}
if(u.tag_config_server.indexOf("-collect-")>-1){u.server_prefix=u.tag_config_server.split("collect-")[0];}
if(u.tag_config_region!=="default"&&u.tag_config_server.indexOf(u.server_prefix+"collect."+u.server_domain)>0){u.tag_config_server=u.tag_config_server.replace(u.server_prefix+"collect."+u.server_domain,u.server_prefix+"collect-"+u.tag_config_region+"."+u.server_domain);u.region=u.tag_config_region;}
u.data_enrichment="none";u.profile_specific_vid=0;u.enrichment_polling=1;u.enrichment_polling_delay=500;u.do_enrichment=function(){};u.deepCopy=function(input){var key,copy;if(typeof input==="object"&&input!==null){if(utag.ut.typeOf(input)==="array"){copy=[];}else{copy={};}
for(key in input){if(typeof input[key]==="object"){copy[key]=u.deepCopy(input[key]);}else{copy[key]=input[key];}}}else{copy=input;}
return copy;}
var q=u.tag_config_server.indexOf("?");if(q>0&&(q+1)==u.tag_config_server.length){u.tag_config_server=u.tag_config_server.replace("?","");}
u.server_list=u.tag_config_server.split("|");u.enrichment_enabled={};u.get_account_profile=function(s){var p;if(u.visitor_service_override||u.tag_config_server.indexOf("tealiumiq.com")===-1){p=[u.tag_config_server.split("//")[1],u.account,u.profile]}else{p=s.substring(s.indexOf(u.server_domain)).split("/");}
return p;};function infixParameters(url,params){var updated_url,url_parts=url.split("?");if(params){if(url_parts[1]===undefined){updated_url=url+"?"+params;}else if(url_parts[1]===""){updated_url=url+params;}else{updated_url=url_parts[0]+"?"+params+"&"+url_parts[1];}}else{updated_url=url;}
return updated_url;}
u.is_in_sample_group=function(b){var group="100";if(u.tag_config_sampling===""||u.tag_config_sampling==="100"){return true;}
if(b["cp.utag_main_dc_group"]){group=b["cp.utag_main_dc_group"];}else{group=Math.floor(Math.random()*100)+1;utag.loader.SC("utag_main",{"dc_group":group});}
if(parseInt(group)<=parseInt(u.tag_config_sampling)){return true;}else{return false;}};u.get_performance_timing=function(b){var t,timing;var data={};function subtract(val1,val2){var difference=0;if(val1>val2){difference=val1-val2;}
return difference;}
if(typeof localStorage!="undefined"&&JSON.parse&&window.performance&&window.performance.timing){t=window.performance.timing;timing=localStorage.getItem("tealium_timing");if(timing!==null&&timing!=="{}"&&typeof b!=="undefined"&&u.performance_timing_count===0){utag.ut.merge(b,utag.ut.flatten({timing:JSON.parse(timing)}),1);}}else{return;}
u.performance_timing_count++;for(var k in t){if((k.indexOf("dom")===0||k.indexOf("load")===0)&&t[k]===0&&u.performance_timing_count<20){setTimeout(u.get_performance_timing,1000);}}
data["domain"]=location.hostname+"";data["pathname"]=location.pathname+"";data["query_string"]=(""+location.search).substring(1);data["timestamp"]=(new Date()).getTime();data["dns"]=subtract(t.domainLookupEnd,t.domainLookupStart);data["connect"]=subtract(t.connectEnd,t.connectStart);data["response"]=subtract(t.responseEnd,t.responseStart);data["dom_loading_to_interactive"]=subtract(t.domInteractive,t.domLoading);data["dom_interactive_to_complete"]=subtract(t.domComplete,t.domInteractive);data["load"]=subtract(t.loadEventEnd,t.loadEventStart);data["time_to_first_byte"]=subtract(t.responseStart,t.connectEnd);data["front_end"]=subtract(t.loadEventStart,t.responseEnd);data["fetch_to_response"]=subtract(t.responseStart,t.fetchStart);data["fetch_to_complete"]=subtract(t.domComplete,t.fetchStart);data["fetch_to_interactive"]=subtract(t.domInteractive,t.fetchStart);try{localStorage.setItem("tealium_timing",JSON.stringify(data));}catch(e){utag.DB(e);}};u.validateProtocol=function(address,force_ssl){if(/^https?:\/\//i.test(address)){if(force_ssl){if(/^http:\/\//i.test(address)){address=address.toLowerCase().replace("http","https");}}}else{if(/^\/\//.test(address)){if(force_ssl){address="https:"+address;}else{address=location.protocol+address;}
}else{if(force_ssl){address="https://"+address;}else{address=location.protocol+"//"+address;}}}
return address;}
u.map={};u.extend=[];u.send=function(a,b){var c,d,i;if(u.ev[a]||typeof u.ev["all"]!=="undefined"){if(a==="remote_api"){utag.DB("Remote API event suppressed.");return;}
if(u.iab_v20_compliance===true||u.iab_v20_compliance==="true"){if(typeof __tcfapi==="function"){__tcfapi("getTCData",2,function(tcData,success){if(success){u.tc_string+="gdpr=";if(tcData.gdprApplies===true){u.tc_string+="1";}else if(tcData.gdprApplies===false){u.tc_string+="0";}else{u.tc_string+=String(tcData.gdprApplies);}
u.tc_string+="&gdpr_consent="+tcData.tcString;execute_send();}});}else{var frame=window;var cmpFrame;var cmpCallbacks={};while(frame){try{if(frame.frames["__tcfapiLocator"]){cmpFrame=frame;break;}}catch(error){utag.DB(error);}
if(frame===window.top){break;}
frame=frame.parent;}
if(!cmpFrame){execute_send();}else{window.__tcfapi=function(cmd,version,callback,arg){var callId=String(Math.random());var msg={__tcfapiCall:{command:cmd,parameter:arg,version:version,callId:callId}};cmpCallbacks[callId]=callback;cmpFrame.postMessage(msg,"*");};window.tealiumiabPostMessageHandler=function(event){var json={};try{json=typeof event.data==="string"?JSON.parse(event.data):event.data;}catch(error){utag.DB(error);}
var payload=json.__tcfapiReturn;if(payload){if(typeof cmpCallbacks[payload.callId]==="function"){cmpCallbacks[payload.callId](payload.returnValue,payload.success);cmpCallbacks[payload.callId]=null;}}};window.addEventListener("message",tealiumiabPostMessageHandler,false);__tcfapi("getTCData",2,function(tcData,success){if(success){u.tc_string+="gdpr=";if(tcData.gdprApplies===true){u.tc_string+="1";}else if(tcData.gdprApplies===false){u.tc_string+="0";}else{u.tc_string+=String(tcData.gdprApplies);}
u.tc_string+="&gdpr_consent="+tcData.tcString;execute_send();}});}}}else{execute_send();}
function execute_send(){if(u.data_source){b.tealium_datasource=u.data_source;}
u.make_enrichment_request=false;if(!u.is_in_sample_group(b)){return false;}
u.get_performance_timing(b);for(i=0;i<u.server_list.length;i++){if(u.server_list[i].toLowerCase().indexOf("http")===-1){u.server_list[i]=u.validateProtocol(u.server_list[i],true);}
if(u.enrichment_enabled[i]!==false){u.enrichment_enabled[u.server_list[i]]=true;}}
if(u.server_list.length>1){u.profile_specific_vid=1;}
u.data=utag.datacloud||{};u.data["loader.cfg"]={};for(d in utag.loader.GV(utag.loader.cfg)){if(utag.loader.cfg[d].load&&utag.loader.cfg[d].send){utag.loader.cfg[d].executed=1;}else{utag.loader.cfg[d].executed=0;}
u.data["loader.cfg"][d]=utag.loader.GV(utag.loader.cfg[d]);}
u.data.data=b;for(d in u.data.data){if((d+'').indexOf("qp.")===0){u.data.data[d]=encodeURIComponent(u.data.data[d]);}else if((d+'').indexOf("va.")===0){delete u.data.data[d];}}
if(!b["cp.utag_main_dc_event"]){b["cp.utag_main_dc_visit"]=(1+(b["cp.utag_main_dc_visit"]?parseInt(b["cp.utag_main_dc_visit"]):0))+"";}
b["cp.utag_main_dc_event"]=(1+(b["cp.utag_main_dc_event"]?parseInt(b["cp.utag_main_dc_event"]):0))+"";utag.loader.SC("utag_main",{"dc_visit":b["cp.utag_main_dc_visit"],"dc_event":b["cp.utag_main_dc_event"]+";exp-session"});utag.data["cp.utag_main_dc_visit"]=b["cp.utag_main_dc_visit"];utag.data["cp.utag_main_dc_event"]=b["cp.utag_main_dc_event"];var dt=new Date();u.data.browser={};try{u.data.browser["height"]=window.innerHeight||document.body.clientHeight;u.data.browser["width"]=window.innerWidth||document.body.clientWidth;u.data.browser["screen_height"]=screen.height;u.data.browser["screen_width"]=screen.width;u.data.browser["timezone_offset"]=dt.getTimezoneOffset();}catch(e){utag.DB(e);}
u.data["event"]=a+'';u.data["post_time"]=dt.getTime();if(u.data_enrichment==="frequent"||u.data_enrichment==="infrequent"){u.visit_num=b["cp.utag_main_dc_visit"];if(parseInt(u.visit_num)>1&&b["cp.utag_main_dc_event"]==="1"){u.enrichment_polling=2;}
try{u.va_update=parseInt(localStorage.getItem("tealium_va_update")||0);}catch(e){utag.DB(e);}
u.visitor_id=u.visitor_id||b.tealium_visitor_id||b["cp.utag_main_v_id"];if(u.data_enrichment==="frequent"||(u.data_enrichment==="infrequent"&&parseInt(u.visit_num)>1&&parseInt(b["cp.utag_main_dc_event"])<=5&&u.visit_num!==u.va_update)){u.make_enrichment_request=true;}
u.visitor_service_request=function(t,server){var s,p=u.get_account_profile(server);if(u.visitor_service_override){s=u.validateProtocol(u.visitor_service_override,true);}else{s=u.validateProtocol(u.server_prefix,true)+"visitor-service"+(u.region?"-"+u.region:"").replace(/[^-A-Za-z0-9+_.]/g,"")+"."+u.server_domain;}
(function(p){var prefix="tealium_va";var key="_"+p[1]+"_"+p[2];utag.ut["writeva"+p[2]]=function(o){utag.DB("Visitor Attributes: "+prefix+key);utag.DB(o);var str=JSON.stringify(o);if(str!=="{}"&&str!==""){try{localStorage.setItem("tealium_va_update",utag.data["cp.utag_main_dc_visit"]);localStorage.setItem(prefix,str);localStorage.setItem(prefix+key,str);}catch(e){utag.DB(e);}
if(typeof tealium_enrichment==="function"){tealium_enrichment(o,prefix+key);}}};}(p.slice(0)));var vid=u.visitor_id;if(u.profile_specific_vid===1){vid+=p[2];}
utag.ut.loader({id:"tealium_visitor_service_293"+p[2]+"_"+u.request_increment++,src:s+"/"+p[1]+"/"+p[2]+"/"+vid.replace(/\?callback=.*/g,"")+"?callback=utag.ut%5B%22writeva"+p[2]+"%22%5D&rnd="+t});};u.do_enrichment=function(server,enrichment_polling,enrichment_polling_delay){if(typeof utag.ut.loader!="undefined"){for(i=0;i<enrichment_polling;i++){setTimeout(function(){u.visitor_service_request((new Date).getTime(),server);},i*enrichment_polling_delay+1);}}};}
var json_string,regExpReplace=new RegExp(u.visitor_id,"g");if(b.tealium_random&&typeof utag.globals[b.tealium_random]==="object"){for(var downstream_param in utag.globals[b.tealium_random]){u.data.data[downstream_param]=u.deepCopy(utag.globals[b.tealium_random][downstream_param]);}}
if(window.FormData){function postData(server_index,enrichment_polling,enrichment_polling_delay){if(server_index+1>u.server_list.length){return;}
var xhr=new XMLHttpRequest();var server=u.validateProtocol(u.server_list[server_index],true);var formData=new FormData();xhr.addEventListener("readystatechange",function(){if(xhr.readyState===3){try{u.region=xhr.getResponseHeader("X-Region")||u.region||"";}catch(res_error){utag.DB(res_error);u.region=u.region||"";}
if(u.region)utag.loader.SC("utag_main",{"dc_region":u.region+";exp-session"});utag.DB("dc_region:"+u.region);}else if(xhr.readyState===4){postData(server_index+1,enrichment_polling,enrichment_polling_delay);if(u.make_enrichment_request&&u.enrichment_enabled[server]){u.do_enrichment(server,enrichment_polling,enrichment_polling_delay);}}});if(u.server_list[server_index].toLowerCase().indexOf("http")!==0){u.server_list[server_index]=u.validateProtocol(u.server_list[server_index],true);}
u.server_list[server_index]=infixParameters(u.server_list[server_index],u.tc_string);xhr.open("post",u.server_list[server_index],true);xhr.withCredentials=true;json_string=JSON.stringify(u.data);if(u.profile_specific_vid===1&&u.visitor_id){json_string=json_string.replace(regExpReplace,u.visitor_id+u.get_account_profile(server)[2]);}
formData.append("data",json_string);xhr.send(formData);}
postData(0,u.enrichment_polling,u.enrichment_polling_delay);}else{for(i=0;i<u.server_list.length;i++){(function(i,enrichment_polling,enrichment_polling_delay){var server=u.server_list[i];setTimeout(function(){json_string=JSON.stringify(u.data);if(u.profile_specific_vid==1&&u.visitor_id){json_string=json_string.replace(regExpReplace,u.visitor_id+u.get_account_profile(server)[2]);}
var img=new Image();img.src=server+"?"+(u.tc_string?u.tc_string+"&":"")+"data="+encodeURIComponent(json_string);if(u.make_enrichment_request&&u.enrichment_enabled[server]){u.do_enrichment(server,enrichment_polling,enrichment_polling_delay);}},i*700);}(i,u.enrichment_polling,u.enrichment_polling_delay));}}}}};try{utag.o[loader].loader.LOAD(id);}catch(e){utag.loader.LOAD(id);}})("293","luxottica.opsm");}catch(e){utag.DB(e);}
(function(){ if(typeof utag!='undefined' && !utag_condload){utag.initcatch=true;for(var i in utag.loader.GV(utag.loader.cfg)){var b=utag.loader.cfg[i];if(b.load!=4){utag.initcatch=false;break};if(b.wait==1){utag.initcatch=false;break}};if(utag.initcatch)utag.handler.INIT();} })();