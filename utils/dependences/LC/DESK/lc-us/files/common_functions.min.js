var modalWidth,forgotWidth,error_list=new Array,signinWidth=-1,currentPage="",products_in_comparison=new Array;function utagLinkSafe(){try{console.debug("utagLinkSafe utag = "+utag),"undefined"!=typeof utag&&utag.link.apply(utag,arguments)}catch(err){console.error(err)}}modelPWReset=!0,dojo={},dojo.addOnLoad=function(f){$(document).ready(f)},dojo.require=function(){},$.extend({getUrlVars:function(){var hash,vars=[];if(!window.location.href.includes("?"))return vars;for(var hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<hashes.length;i++)if(vars[(hash=hashes[i].split("="))[0]]){var value=vars[hash[0]].split("#")[0];value+="&"+decodeURIComponent(hash[1]),vars[hash[0]]=value}else vars.push(hash[0]),vars[hash[0]]=decodeURIComponent(hash[1]);return vars},getUrlVar:function(name){return $.getUrlVars()[name]}}),CommonFunctions={removeEmptyUtagEntries:function(utagObj){$.each(utagObj,(function(key,val){null!=val&&(""!=val&&null!=val||delete utagObj[key],"string"==typeof val?val=(val=(val=val.replace(/\\/g,"\\\\")).replace(/'/g,"\\'")).replace(/"/g,'\\"'):utagObj.length<=0&&delete utagObj[key],utagObj[key]=val)}))},getUserInsuranceEligibilityStatus:function(){var userInsuranceEligibilityStatus="not synced";return constants.ajaxParams.insuranceCheckEligibility&&(userInsuranceEligibilityStatus="synced"),userInsuranceEligibilityStatus}};var RiaHelper={getCookie:function(cookieName,parseJSON){for(var cookieValue=null,cookieValueStr="",ca=document.cookie.split(";").map((function(cookie){try{return decodeURIComponent(cookie)}catch(err){return cookie}})),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);0==c.indexOf(cookieName)&&(cookieValueStr=c.substring(cookieName.length+1,c.length))}if(cookieValueStr&&parseJSON)try{cookieValue=JSON.parse(cookieValueStr)}catch(e){console.error("Unable to parse cookie as JSON")}else cookieValue=cookieValueStr;return cookieValue},getInsuranceCookie:function(){var payload=RiaHelper.getCookie("ria_1");return""!==payload?payload:RiaHelper.getCookie("ria_0")},getAllInsuranceJSON:function(){var plans=[],primaryPlan=RiaHelper.getCookie("ria_0",!0);if(primaryPlan||(primaryPlan=RiaHelper.getCookie("ria_1",!0)),primaryPlan){plans.push(primaryPlan);var secondaryPlan=RiaHelper.getCookie("ria_2",!0);secondaryPlan&&plans.push(secondaryPlan)}return plans},loadJsonInsurance:function(category){var jsonInsurance=null,plans=RiaHelper.getAllInsuranceJSON();if(plans&&plans.length>0&&(jsonInsurance=plans[0],category)){for(var i=0,tempPlan=null;i<plans.length&&!tempPlan;){var plan=plans[i];if(plan.data)for(var j=0,categoryKeys=Object.keys(plan.data);j<categoryKeys.length&&!tempPlan;){var categoryKey=categoryKeys[j];categoryKey===category&&!0===plan.data[categoryKey][0].available&&(tempPlan=plan),j++}i++}null!==tempPlan&&(jsonInsurance=tempPlan)}return jsonInsurance},getTentativeUserCookie:function(){return RiaHelper.getCookie("tentative_user")},setInsuranceCookie:function(data){var now=new Date,time=now.getTime()+18e5;function fixInsurancePlanName(riaInsuranceInformation){return riaInsuranceInformation&&riaInsuranceInformation.planName&&(riaInsuranceInformation.planName=riaInsuranceInformation.planName.replace(",",""),riaInsuranceInformation=JSON.stringify(riaInsuranceInformation)),riaInsuranceInformation}if(now.setTime(time),data.plans){if(data.plans&&Array.isArray(data.plans)&&2===data.plans.length&&data.activePlanId){var expireDate=now.toUTCString();document.cookie="ria_active="+data.activePlanId+"; path=/; expires="+expireDate+";";for(var i=0;i<data.plans.length;i++){var plan=data.plans[i];plan.riaInsuranceInformation=fixInsurancePlanName(plan.riaInsuranceInformation);jsonStr=JSON.stringify(plan);0===i?RiaHelper.getCookie("ria_0")?document.cookie="ria_0="+jsonStr+"; path=/; expires="+expireDate+";":document.cookie="ria_1="+jsonStr+"; path=/; expires="+expireDate+";":1===i&&(document.cookie="ria_2="+jsonStr+"; path=/; expires="+expireDate+";")}}}else{data.riaInsuranceInformation=fixInsurancePlanName(data.riaInsuranceInformation);var jsonStr=JSON.stringify(data);RiaHelper.getCookie("ria_0")?document.cookie="ria_0="+jsonStr+"; path=/; expires="+now.toUTCString()+";":document.cookie="ria_1="+jsonStr+"; path=/; expires="+now.toUTCString()+";"}},toggleInsurance:function(on){var now=new Date,time=now.getTime()+18e5;now.setTime(time);var jsonString="";on?(jsonString=RiaHelper.getCookie("ria_0"),document.cookie="ria_0=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",RiaHelper.setTentativeCookie(4),$(".pdp-container").length>0&&($(".lc-lens-enh-item.added").removeClass("added"),$(".existing-lens-addons").empty())):(jsonString=RiaHelper.getCookie("ria_1"),document.cookie="ria_1=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;"),document.cookie="ria_"+(on?"1":"0")+"="+jsonString+"; path=/; expires="+now.toUTCString()+";"},isInsuranceOn:function(){return""!==RiaHelper.getCookie("ria_1")},setTentativeCookie:function(val){var now=new Date,time=now.getTime()+36e5;now.setTime(time),document.cookie=val?"tentative_user="+val+"; path=/;":"tentative_user=0; path=/; expires="+now.toUTCString()+";"},removeInsuranceCookie:function(){document.cookie="ria_0=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="ria_1=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="ria_2=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="tentative_user=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="ria_active=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},checkAllBenefits:function(){var benefitsAvailable=!1;if(""!==RiaHelper.getInsuranceCookie()){for(var i=0,tempBenefitsAvailable=!0,plans=RiaHelper.getAllInsuranceJSON();i<plans.length&&tempBenefitsAvailable;){var plan=plans[i];if(plan.data)for(var j=0,categoryKeys=Object.keys(plan.data);j<categoryKeys.length&&tempBenefitsAvailable;){var categoryKey=categoryKeys[j];!0!==plan.data[categoryKey][0].available&&(tempBenefitsAvailable=!1),j++}i++}tempBenefitsAvailable&&(benefitsAvailable=tempBenefitsAvailable)}return benefitsAvailable},checkSingleBenefit:function(benefitCategory){var benefitAvailable=!1;if(""!==RiaHelper.getInsuranceCookie()&&benefitCategory)for(var i=0,plans=RiaHelper.getAllInsuranceJSON();i<plans.length&&!benefitAvailable;){var plan=plans[i];if(plan.data)for(var j=0,categoryKeys=Object.keys(plan.data);j<categoryKeys.length&&!benefitAvailable;){var categoryKey=categoryKeys[j];categoryKey===benefitCategory&&!0===plan.data[categoryKey][0].available&&(benefitAvailable=!0),j++}i++}return benefitAvailable},getInsuranceActivePlanId:function(){return RiaHelper.getCookie("ria_active")},setInsuranceActivePlanId:function(planId){if(planId){var now=new Date,time=now.getTime()+18e5;now.setTime(time),document.cookie="ria_active="+planId+"; path=/; expires="+now.toUTCString()+";"}}},sha256=function sha256(ascii){if((str=ascii)&&!/^\s*$/.test(str)){var str;ascii=ascii.toLowerCase().trim();for(var i,j,mathPow=Math.pow,maxWord=mathPow(2,32),result="",words=[],asciiBitLength=8*ascii.length,hash=sha256.h=sha256.h||[],k=sha256.k=sha256.k||[],primeCounter=k.length,isComposite={},candidate=2;primeCounter<64;candidate++)if(!isComposite[candidate]){for(i=0;i<313;i+=candidate)isComposite[i]=candidate;hash[primeCounter]=mathPow(candidate,.5)*maxWord|0,k[primeCounter++]=mathPow(candidate,1/3)*maxWord|0}for(ascii+="Â€";ascii.length%64-56;)ascii+="\0";for(i=0;i<ascii.length;i++){if((j=ascii.charCodeAt(i))>>8)return;words[i>>2]|=j<<(3-i)%4*8}for(words[words.length]=asciiBitLength/maxWord|0,words[words.length]=asciiBitLength,j=0;j<words.length;){var w=words.slice(j,j+=16),oldHash=hash;for(hash=hash.slice(0,8),i=0;i<64;i++){var w15=w[i-15],w2=w[i-2],a=hash[0],e=hash[4],temp1=hash[7]+(rightRotate(e,6)^rightRotate(e,11)^rightRotate(e,25))+(e&hash[5]^~e&hash[6])+k[i]+(w[i]=i<16?w[i]:w[i-16]+(rightRotate(w15,7)^rightRotate(w15,18)^w15>>>3)+w[i-7]+(rightRotate(w2,17)^rightRotate(w2,19)^w2>>>10)|0);(hash=[temp1+((rightRotate(a,2)^rightRotate(a,13)^rightRotate(a,22))+(a&hash[1]^a&hash[2]^hash[1]&hash[2]))|0].concat(hash))[4]=hash[4]+temp1|0}for(i=0;i<8;i++)hash[i]=hash[i]+oldHash[i]|0}for(i=0;i<8;i++)for(j=3;j+1;j--){var b=hash[i]>>8*j&255;result+=(b<16?0:"")+b.toString(16)}return result}function rightRotate(value,amount){return value>>>amount|value<<32-amount}},MD5=function(string){if((str=string)&&!/^\s*$/.test(str)){var str;string=string.toLowerCase().trim();var k,AA,BB,CC,DD,a,b,c,d,x=Array();for(string=function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}(string),x=function(string){for(var lWordCount,lMessageLength=string.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords=16*((lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64+1),lWordArray=Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;lByteCount<lMessageLength;)lBytePosition=lByteCount%4*8,lWordArray[lWordCount=(lByteCount-lByteCount%4)/4]=lWordArray[lWordCount]|string.charCodeAt(lByteCount)<<lBytePosition,lByteCount++;return lBytePosition=lByteCount%4*8,lWordArray[lWordCount=(lByteCount-lByteCount%4)/4]=lWordArray[lWordCount]|128<<lBytePosition,lWordArray[lNumberOfWords-2]=lMessageLength<<3,lWordArray[lNumberOfWords-1]=lMessageLength>>>29,lWordArray}(string),a=1732584193,b=4023233417,c=2562383102,d=271733878,k=0;k<x.length;k+=16)AA=a,BB=b,CC=c,DD=d,a=FF(a,b,c,d,x[k+0],7,3614090360),d=FF(d,a,b,c,x[k+1],12,3905402710),c=FF(c,d,a,b,x[k+2],17,606105819),b=FF(b,c,d,a,x[k+3],22,3250441966),a=FF(a,b,c,d,x[k+4],7,4118548399),d=FF(d,a,b,c,x[k+5],12,1200080426),c=FF(c,d,a,b,x[k+6],17,2821735955),b=FF(b,c,d,a,x[k+7],22,4249261313),a=FF(a,b,c,d,x[k+8],7,1770035416),d=FF(d,a,b,c,x[k+9],12,2336552879),c=FF(c,d,a,b,x[k+10],17,4294925233),b=FF(b,c,d,a,x[k+11],22,2304563134),a=FF(a,b,c,d,x[k+12],7,1804603682),d=FF(d,a,b,c,x[k+13],12,4254626195),c=FF(c,d,a,b,x[k+14],17,2792965006),a=GG(a,b=FF(b,c,d,a,x[k+15],22,1236535329),c,d,x[k+1],5,4129170786),d=GG(d,a,b,c,x[k+6],9,3225465664),c=GG(c,d,a,b,x[k+11],14,643717713),b=GG(b,c,d,a,x[k+0],20,3921069994),a=GG(a,b,c,d,x[k+5],5,3593408605),d=GG(d,a,b,c,x[k+10],9,38016083),c=GG(c,d,a,b,x[k+15],14,3634488961),b=GG(b,c,d,a,x[k+4],20,3889429448),a=GG(a,b,c,d,x[k+9],5,568446438),d=GG(d,a,b,c,x[k+14],9,3275163606),c=GG(c,d,a,b,x[k+3],14,4107603335),b=GG(b,c,d,a,x[k+8],20,1163531501),a=GG(a,b,c,d,x[k+13],5,2850285829),d=GG(d,a,b,c,x[k+2],9,4243563512),c=GG(c,d,a,b,x[k+7],14,1735328473),a=HH(a,b=GG(b,c,d,a,x[k+12],20,2368359562),c,d,x[k+5],4,4294588738),d=HH(d,a,b,c,x[k+8],11,2272392833),c=HH(c,d,a,b,x[k+11],16,1839030562),b=HH(b,c,d,a,x[k+14],23,4259657740),a=HH(a,b,c,d,x[k+1],4,2763975236),d=HH(d,a,b,c,x[k+4],11,1272893353),c=HH(c,d,a,b,x[k+7],16,4139469664),b=HH(b,c,d,a,x[k+10],23,3200236656),a=HH(a,b,c,d,x[k+13],4,681279174),d=HH(d,a,b,c,x[k+0],11,3936430074),c=HH(c,d,a,b,x[k+3],16,3572445317),b=HH(b,c,d,a,x[k+6],23,76029189),a=HH(a,b,c,d,x[k+9],4,3654602809),d=HH(d,a,b,c,x[k+12],11,3873151461),c=HH(c,d,a,b,x[k+15],16,530742520),a=II(a,b=HH(b,c,d,a,x[k+2],23,3299628645),c,d,x[k+0],6,4096336452),d=II(d,a,b,c,x[k+7],10,1126891415),c=II(c,d,a,b,x[k+14],15,2878612391),b=II(b,c,d,a,x[k+5],21,4237533241),a=II(a,b,c,d,x[k+12],6,1700485571),d=II(d,a,b,c,x[k+3],10,2399980690),c=II(c,d,a,b,x[k+10],15,4293915773),b=II(b,c,d,a,x[k+1],21,2240044497),a=II(a,b,c,d,x[k+8],6,1873313359),d=II(d,a,b,c,x[k+15],10,4264355552),c=II(c,d,a,b,x[k+6],15,2734768916),b=II(b,c,d,a,x[k+13],21,1309151649),a=II(a,b,c,d,x[k+4],6,4149444226),d=II(d,a,b,c,x[k+11],10,3174756917),c=II(c,d,a,b,x[k+2],15,718787259),b=II(b,c,d,a,x[k+9],21,3951481745),a=AddUnsigned(a,AA),b=AddUnsigned(b,BB),c=AddUnsigned(c,CC),d=AddUnsigned(d,DD);return(WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d)).toLowerCase()}function RotateLeft(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits}function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;return lX8=2147483648&lX,lY8=2147483648&lY,lResult=(1073741823&lX)+(1073741823&lY),(lX4=1073741824&lX)&(lY4=1073741824&lY)?2147483648^lResult^lX8^lY8:lX4|lY4?1073741824&lResult?3221225472^lResult^lX8^lY8:1073741824^lResult^lX8^lY8:lResult^lX8^lY8}function FF(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(function(x,y,z){return x&y|~x&z}(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function GG(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(function(x,y,z){return x&z|y&~z}(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function HH(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(function(x,y,z){return x^y^z}(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function II(a,b,c,d,x,s,ac){return a=AddUnsigned(a,AddUnsigned(AddUnsigned(function(x,y,z){return y^(x|~z)}(b,c,d),x),ac)),AddUnsigned(RotateLeft(a,s),b)}function WordToHex(lValue){var lCount,WordToHexValue="",WordToHexValue_temp="";for(lCount=0;lCount<=3;lCount++)WordToHexValue+=(WordToHexValue_temp="0"+(lValue>>>8*lCount&255).toString(16)).substr(WordToHexValue_temp.length-2,2);return WordToHexValue}};function setupTooltips(){setTimeout((function(){$(".tooltip-link").each((function(){var $this=$(this),$tool=$this.prev(".tooltip"),top=$tool.height()-15,left=$tool.width()/2-20;$tool.css("left","-9999px").show(),$tool.css("top","-"+top+"px").css("left","-"+left+"px").hide(),$this.hover((function(){$tool.show()}),(function(){$tool.hide()}))}))}),100)}function updateTotalInput(e){e=e||window.event;var inputValue=$("input[name='payment_card_1']").val();if(isAmex=/^3[47][0-9]{5,}$/.test(inputValue.replace(new RegExp(CheckoutPayments.cardSeparator,"g"),"")),8!=e.keyCode&&(!isAmex&&inputValue.length<22||isAmex&&inputValue.length<20)){if(isAmex){var first4=(inputValue=$("input[name='payment_card_1']").val().replace(new RegExp(CheckoutPayments.cardSeparator,"g"),"")).slice(0,4),next6=inputValue.slice(4,10),last5=inputValue.slice(10);newValue=first4+CheckoutPayments.cardSeparator+next6+CheckoutPayments.cardSeparator+last5}else{var blocks=$("input[name='payment_card_1']").val().replace(new RegExp(CheckoutPayments.cardSeparator,"g"),"").match(/.{1,4}/g);$("input[name='payment_card_1']").val("");var newValue=$("input[name='payment_card_1']").val();if(null!=blocks){$.each(blocks,(function(index,value){index++,4==value.length&&index<4&&(value+=CheckoutPayments.cardSeparator),newValue+=value}))}}$("input[name='payment_card_1']").val(newValue),$("input[name='account1']").val($("input[name='payment_card_1']").val().replace(new RegExp(CheckoutPayments.cardSeparator,"g"),"")),$("input[name='account1']").change()}}function clearLoginErrorMessages(){$(".LogOnFailureResponseMessageDiv").empty(),$(".header-sign-in-modal span.required ").not(".LogOnFailureResponseMessageDiv").remove()}function clearLoginFields(){$(".headerEmailAddress").val(""),$(".header-logonPassword").val("")}function clearRegErrorMessages(){$(".RegFailureResponseMessageDiv").empty(),$(".header-register-modal span.required ").not(".RegFailureResponseMessageDiv").remove()}function clearResetForgotPWDErrors(){$(".WC_PasswordUpdateForm_FormInput_logonPasswordOld_In_Logon_1").val(""),$(".logonPassword_updateModel").val(""),$(".WC_PasswordUpdateForm_FormInput_logonPasswordVerify_In_Logon_1").val(""),$(".PasswordUpdateFailureResponseMessageDiv").empty(),$(".header-set-a-new-password-modal span.required").not(".ResetPasswordFailureResponseMessageDiv").remove(),$(".logonPassword_updateModel,.WC_PasswordUpdateForm_FormInput_logonPasswordVerify_In_Logon_1,.WC_PasswordUpdateForm_FormInput_logonPasswordOld_In_Logon_1,.WC_PasswordUpdateForm_FormInput_EmailAddress").addClass("resetHighlight")}function clearResetPwdErrorMessages(){document.getElementsByClassName("WC_PasswordResetForm_FormInput_logonId_In_ResetPasswordForm_1")[0].value="",$(".ResetPasswordFailureResponseMessageDiv").empty(),$(".header-reset-password-modal span.required").not(".ResetPasswordFailureResponseMessageDiv").remove()}function hideSaveFavorites(){$(".save-favorites-modal-text").hide(),$.cookie("saveFavoritesHidePrompt","1",{path:"/"})}function showLogonModal(){if(hideSaveFavorites(),$(".header-register-modal").css("display","none").attr("aria-hidden","true"),$(".header-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".header-update-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".background-update-reset").css("display","none"),$(".header-reset-password-done-modal").css("display","none").attr("aria-hidden","true"),$(".header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true"),$(".header-sign-in-modal").css("display","block").attr("aria-hidden","false"),$(".headerEmailAddress").focus(),$(".notification-count").removeClass("active"),$(".sign-in-link").addClass("open"),window.scrollTo(0,0),$(".headerEmailAddress").focus(),clearResetPwdErrorMessages(),clearResetForgotPWDErrors(),clearRegErrorMessages(),void 0!==$.getUrlVar("resetPassword")&&"true"==$.getUrlVar("resetPassword")){$(".header-sign-in-modal").css("display","none").attr("aria-hidden","true"),$(".header-set-a-new-password-modal").css("display","block").attr("aria-hidden","false"),$(".header-reset-password-modal").css("display","none").attr("aria-hidden","true");var email="";return void 0!==$.getUrlVar("emailId")&&(email=$.getUrlVar("emailId"),document.getElementsByClassName("WC_PasswordUpdateForm_FormInput_EmailAddress").value=email),!0}return!1}function closeForgetPasswordPopUp(){$(".header-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".header-reset-password-done-modal").css("display","none").attr("aria-hidden","true"),$(".thank-you-page-overlay")&&$(".thank-you-page-overlay").addClass("hidden"),$(".headerEmailAddress").focus(),$(".sign-in-link").removeClass("open"),clearResetPwdErrorMessages(),$("#myaccount-rectangle > .backdrop").addClass("hide")}function closeUpdatePsw(){return $(".header-update-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".background-update-reset").css("display","none"),$("#myaccount-rectangle > .backdrop").addClass("hide"),!1}function filterAjaxResponseCart(response){return response&&"string"==typeof response&&response.length?$.parseJSON(response.replace(/^\s*\/\*/,"").replace(/\*\/\s*$/,"")):response}function invokeResetPasswordService(params,showModal){return $.ajax({url:getAbsoluteURL()+"AjaxResetPassword",data:params,dataType:"html",type:"post",success:function(response){try{var serviceResponse=response;"string"==typeof serviceResponse&&(serviceResponse=filterAjaxResponseCart(response));var modalForError=".examResetPasswordFailureResponseMessageDiv",hidePWModalForFavorites=!0;modelPWReset&&(modalForError="#favoriteSignInModal .ForgotPasswordSection .examResetPasswordFailureResponseMessageDiv");var tempurl=MessageHelper.messages.RediectHomePageURL;if(null!=serviceResponse.errorMessage&&!serviceResponse.errorMessage.success||0==serviceResponse.success){var msg=$(".ResetPasswordErrorMsg").html();$(".ResetPasswordFailureResponseMessageDiv").length>0&&("EXIST_IN_US"==serviceResponse.errorMessage?($(".ResetPasswordFailureResponseMessageDiv").html(MessageHelper.messages.ERR_MSG_DID_YOU_MEAN),$(".ResetPasswordFailureResponseMessageDiv").append("<a target='_blank' href='"+tempurl+"'>"+MessageHelper.messages.LenscrafterUS+"</a>?"),$(".ResetPasswordFailureResponseMessageDiv").css("display","block").attr("aria-hidden","false")):"EXIST_IN_CA"==serviceResponse.errorMessage?($(".ResetPasswordFailureResponseMessageDiv").html(MessageHelper.messages.ERR_MSG_DID_YOU_MEAN),$(".ResetPasswordFailureResponseMessageDiv").append("<a target='_blank' href='"+tempurl+"'>"+MessageHelper.messages.LenscrafterCA+"</a>?").show(),$(".ResetPasswordFailureResponseMessageDiv").css("display","block").attr("aria-hidden","false")):(serviceResponse.errorMessage.indexOf("personal information is not complete")>-1?$(".ResetPasswordFailureResponseMessageDiv").html("This email is not associated with a member account. If this email is in use with a social account, please use social login to proceed"):$(".ResetPasswordFailureResponseMessageDiv").html(serviceResponse.errorMessage),$(".ResetPasswordFailureResponseMessageDiv").css("display","block").attr("aria-hidden","false"))),$(modalForError).length>0&&$(modalForError).html(msg),hidePWModalForFavorites=!1}else{if(null!=serviceResponse.PASSWORDEXPIRED)return $(".header-reset-password-modal").css("display","none"),$(".header-set-a-new-password-modal").css("display","block"),$(".sign-in-link").addClass("open"),removeUIoverlay(),addUIoverlay(),!1;data={site_events:{forgot_password_submit:!0}},callTrackAnalytics(data);var currentID="";null!=document.getElementsByClassName("currentID")&&(currentID=document.getElementsByClassName("currentID").value),$(".ResetPasswordSuccessFullResponseMessageDiv").length>0&&($(".ResetPasswordFailureResponseMessageDiv").html(""),$(".header-reset-password-modal").css("display","none").attr("aria-hidden","true"),showModal&&($(".header-reset-password-done-modal").css("display","block").attr("aria-hidden","false"),$(".sentTempPasswordText").html($(".sentTempPasswordText").html().replace("{0}",currentID)))),$(".examResetPasswordSuccessFullResponseMessageDiv").length>0&&$(".examResetPasswordSuccessFullResponseMessageDiv").html(MessageHelper.messages.PASSWORD_RESET_SUCCESS)}modelPWReset&&(modelPWReset=!1),hidePWModalForFavorites&&($("#favoriteSignInModal").parent().hide(),$(".ui-widget-overlay").hide())}catch(err){console.error(err)}},error:function(response){if(response)try{var serviceResponse=filterAjaxResponseCart(response.responseText),modalForError=".ResetPasswordFailureResponseMessageDiv",tempurl=MessageHelper.messages.RediectHomePageURL;if(modelPWReset&&(modalForError="#favoriteSignInModal .ForgotPasswordSection .examResetPasswordFailureResponseMessageDiv",modelPWReset=!1),serviceResponse){var errMsg=serviceResponse.errorMessage;"EXIST_IN_US"==errMsg?($(".ResetPasswordFailureResponseMessageDiv").html(MessageHelper.messages.ERR_MSG_DID_YOU_MEAN),$(".ResetPasswordFailureResponseMessageDiv").append("<a target='_blank' href='"+tempurl+"'>www.lenscrafters.com</a>?").show()):"EXIST_IN_CA"==errMsg?($(".ResetPasswordFailureResponseMessageDiv").html(MessageHelper.messages.ERR_MSG_DID_YOU_MEAN),$(".ResetPasswordFailureResponseMessageDiv").append("<a target='_blank' href='"+tempurl+"'>www.lenscrafters.ca</a>?").show()):serviceResponse.errorMessage?$(modalForError).length>0&&$(modalForError).html(serviceResponse.errorMessage):serviceResponse.errorMessageKey&&$(modalForError).length>0&&$(modalForError).html(serviceResponse.errorMessageKey)}}catch(e){console.error(e)}}})}function showPassword(id){var x=document.getElementById(id),icon=document.getElementById(id+"-icon");"password"===x.type?(x.type="text",icon.querySelector("use").setAttribute("href","#eye-icon-hide")):(x.type="password",icon.querySelector("use").setAttribute("href","#eye-icon-show"))}function resetPswMobile(){var f=$(".ResetPasswordUpdateSubmitForm"),timeDiff=(new Date).valueOf()-startTime,sessiontimeOut=$(".sessionDuration").val()||"";if(timeDiff>=sessiontimeOut&&""!=sessiontimeOut)window.location.reload();else{var data=f.serializeArray(),newData=[{name:"logonId",value:logonId}],originalURL=null;$("#successPassword").hide();for(var i=0;i<data.length;i++){var d=data[i];"URL"==d.name?(originalURL=d.value,newData.push({name:"URL",value:"ResetPasswordAjaxView"})):newData.push(d)}$.ajax({url:getAbsoluteURL(!0)+"ResetPassword",data:newData,type:"POST",dataType:"json",success:function(data){if(data.success)if(null==$("#successPassword").html()){var nextUrl=originalURL;null!=nextUrl&&nextUrl.length&&"#"==nextUrl.charAt(nextUrl.length-1)&&(nextUrl=nextUrl.substring(0,x.length-1)),window.location=nextUrl}else $("#successPassword").show();else $(".PasswordUpdateFailureResponseMessageDiv").html(data.errorMessage)},error:function(jqXHR,textStatus,errorThrown){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.")}})}}function removeDisabledAttr(){$("#shippingBillingPageNext").removeAttr("disabled")}function updateDateInput(){$(".expdateFinal").val($("select[name='payment_expire_1']").val()+"/"+$("select[name='payment_expire_2']").val().slice(2,4)).change(),removeDisabledAttr()}function savePlacement(){currentTopPosition=$(window).scrollTop()}function getPlacement(){return currentTopPosition}$("#subscribeContainer").on("click",".subscribeUserLink",(function(){var isSubscribed=$(this).attr("data-subscribe"),subscribeType=$(this).attr("data-subtype"),dataType=$(this).data("subtype");if(profileSubscribeFormSubmit($(this).parents("form"),isSubscribed,subscribeType),"email"==dataType){var email=$(this).siblings(".pref-email").text().toLowerCase();try{var obj={id:"WCS-D-Unsubscribe",User_Email_MD5:MD5(email),User_Email_SHA256:sha256(email)}}catch(err){obj={id:"WCS-D-Unsubscribe-Error",Error_Source:"Server",Error_Code:"utag_data syntax - "+err.message};tealium_data2track.push(obj)}finally{obj.id="WCS-D-Unsubscribe",obj.User_Email_MD5=MD5(email),obj.User_Email_SHA256=sha256(email),tealium_data2track.push(obj)}}return!1})),modelPWReset=!0,$(".close-reset-password-done").click((function(){return $(".header-reset-password-done-modal").css("display","none").attr("aria-hidden","true"),$(".sign-in-link").removeClass("open"),!1})),$(".close-reset-cancel-password").click((function(){return $(".header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true"),$(".header-reset-password-done-modal ").css("display","none").attr("aria-hidden","true"),$(".header-sign-in-modal").css("display","block").attr("aria-hidden","true"),$(".headerEmailAddress").focus(),$(".sign-in-link").removeClass("open"),$("#myaccount-rectangle > .backdrop").addClass("hide"),clearResetPwdErrorMessages(),clearResetForgotPWDErrors(),!1})),$(".close-update-reset-cancel-password").click((function(){return $(".header-update-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".background-update-reset").css("display","none"),$("#myaccount-rectangle > .backdrop").addClass("hide"),!1})),$(".set-new-password").click((function(){return $(".header-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".header-set-a-new-password-modal").css("display","block").attr("aria-hidden","false"),!1})),$(".close-set-new-password").click((function(){return $(".header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true"),$(".sign-in-link").removeClass("open"),!1})),$("document").ready((function(){if(null!=$.validator){function closeModal(){return $("html,body").toggleClass("hidden-overflow"),window.loginFlowHandler&&window.loginFlowHandler.onCancel(),$(".header-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".header-reset-password-done-modal").css("display","none").attr("aria-hidden","true"),$(".header-update-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".background-update-reset").css("display","none"),$(".thank-you-page-overlay")&&$(".thank-you-page-overlay").addClass("hidden"),$(".headerEmailAddress").focus(),$(".sign-in-link").removeClass("open"),clearResetPwdErrorMessages(),$("#myaccount-rectangle > .backdrop").addClass("hide"),!1}function resetPassword(){var resetForm=document.ResetPasswordForm;""==resetForm.logonId.value&&(resetForm=$("#favoriteSignInModal .ForgotPasswordSection .ResetPasswordForm")[0]);var params={};params.challengeAnswer=resetForm.challengeAnswer.value,params.state=resetForm.state.value,params.URL=resetForm.URL.value,params.errorViewName=resetForm.errorViewName.value,params.logonId=resetForm.logonId.value,params.email1=resetForm.logonId.value,params.emailType="forgotpassword",params.senderEmail=resetForm.logonId.value,params.senderName=resetForm.logonId.value,params.email1=resetForm.logonId.value,params.receiveEmail="true",params.recipientEmail=resetForm.logonId.value,params.receiveEmail="true",params.fromName=resetForm.logonId.value,params.pdp_18yrs="true",params.storeId=resetForm.storeId.value,params.logonId||(params.logonId=sessionStorage.getItem("resendEmail")),params.email1||(params.email1=sessionStorage.getItem("resendEmail")),params.senderEmail||(params.senderEmail=sessionStorage.getItem("resendEmail")),params.senderName||(params.senderName=sessionStorage.getItem("resendEmail")),params.email1||(params.email1=sessionStorage.getItem("resendEmail")),params.recipientEmail||(params.recipientEmail=sessionStorage.getItem("resendEmail")),params.fromName||(params.fromName=sessionStorage.getItem("resendEmail")),invokeResetPasswordService(params,!0),sessionStorage.setItem("resendEmail",resetForm.logonId.value)}$.validator.addMethod("atLeastOneLetterAndOneDigit",(function(value,element){return/^(?=.*[0-9])(?=.*[a-zA-Z])(.*)$/.test(value)})),$(".ResetPasswordUpdateSubmitForm").validate({onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",rules:{logonId:{required:!0,email:!0},logonTempPassword:{required:!0,minlength:2},logonPassword:{required:!0,minlength:8,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:!0},logonPasswordVerify:{required:!0,equalTo:"#new-password"}},messages:{logonId:{required:MessageHelper.messages.ERROR_Logon_model_EmailInvalid,email:MessageHelper.messages.ERROR_Logon_model_EmailInvalid},logonTempPassword:{required:MessageHelper.messages.OLD_PASSWORD_EMPTY_ERROR,minlength:MessageHelper.messages.OLD_PASSWORD_EMPTY_ERROR},logonPassword:{required:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,minlength:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR},logonPasswordVerify:{required:MessageHelper.messages.PASSWORD_UPDATE_CONFIRM_ERROR,equalTo:MessageHelper.messages.ERROR_PASSWORD_MISMATCH}},showErrors:function(errorMap,errorList){console.log(errorMap,errorList),this.defaultShowErrors();$("#new-password").val()}}),$(".UpdatePasswordUpdateSubmitForm").validate({onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",rules:{logonId:{required:!0,email:!0},logonTempPassword:{required:!0,minlength:2},logonPassword:{required:!0,minlength:8,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:!0},logonPasswordVerify:{required:!0,equalTo:".logonPassword_updateModel"}},messages:{logonId:{required:MessageHelper.messages.ERROR_Logon_model_EmailInvalid,email:MessageHelper.messages.ERROR_Logon_model_EmailInvalid},logonTempPassword:{required:MessageHelper.messages.OLD_PASSWORD_EMPTY_ERROR,minlength:MessageHelper.messages.OLD_PASSWORD_EMPTY_ERROR},logonPassword:{required:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,minlength:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR,atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial:MessageHelper.messages.PASSWORD_UPDATE_INVALID_ERROR},logonPasswordVerify:{required:MessageHelper.messages.PASSWORD_UPDATE_CONFIRM_ERROR,equalTo:MessageHelper.messages.ERROR_PASSWORD_MISMATCH}},errorPlacement:function(error,element){"logonPassword"==$(element).attr("name")?$(error).insertAfter($(element).closest("form").find(".check-psw")):$(error).insertAfter(element),$(error).attr("aria-live","rude")},showErrors:function(errorMap,errorList){console.log(errorMap,errorList),this.defaultShowErrors();$("#new-password").val()}}),$(".close-reset-password").click(closeModal),$(".close-reset-cancel-password").click((function(){return $(".header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true"),$(".header-reset-password-done-modal ").css("display","none").attr("aria-hidden","true"),$(".header-sign-in-modal").css("display","block").attr("aria-hidden","true"),$(".headerEmailAddress").focus(),$(".sign-in-link").removeClass("open"),$("#myaccount-rectangle > .backdrop").addClass("hide"),clearResetPwdErrorMessages(),clearResetForgotPWDErrors(),!1})),$(".close-reset-password-done").click((function(){return $(".header-reset-password-done-modal").css("display","none").attr("aria-hidden","true"),$(".sign-in-link").removeClass("open"),!1})),$(".set-new-password").click((function(){return $(".header-reset-password-modal").css("display","none").attr("aria-hidden","true"),$(".header-set-a-new-password-modal").css("display","block").attr("aria-hidden","false"),!1})),$(".close-set-new-password").click((function(){return $(".header-set-a-new-password-modal").css("display","none").attr("aria-hidden","true"),$(".sign-in-link").removeClass("open"),!1})),$(".ResetPasswordForm").validate({onfocusout:!1,onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",rules:{logonId:{required:!0,email:!0}},messages:{logonId:{required:MessageHelper.messages.ERROR_Logon_model_EmailInvalid,email:MessageHelper.messages.ERROR_Logon_model_EmailInvalid}}}),$("#PasswordUpdateForm").validate({onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",rules:{logonPassword:{required:!0,minlength:2,pattern:/\d/},logonPasswordVerify:{required:!0,minlength:2,pattern:/\d/,equalTo:".logonPassword_updateModel"}},messages:{logonPassword:{required:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,minlength:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,pattern:MessageHelper.messages.PASSWORD_MIN_LENGTH_NUMERIC_ERROR},logonPasswordVerify:{required:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,minlength:MessageHelper.messages.PASSWORD_MIN_LENGTH_ERROR,pattern:MessageHelper.messages.PASSWORD_MIN_LENGTH_NUMERIC_ERROR,equalTo:MessageHelper.messages.ERROR_PASSWORD_MISMATCH}}}),$(".ResetPasswordUpdateSubmitForm").off("submit").on("submit",(function(){return function(form){var f=$(form),currentTime=(new Date).valueOf();startTime=(new Date).valueOf();var timeDiff=currentTime-startTime,sessiontimeOut=$(".sessionDuration").val()||"";if(timeDiff>=sessiontimeOut&&""!=sessiontimeOut)window.location.reload();else if(f.valid()){$("#successPassword").hide();var logonId=$("#passwordUpdateEmailInput").val();logonId||(logonId=$('form[name="ResetPasswordUpdateSubmitForm"] > #passwordUpdateEmailInput').val());var logonPassword=f.find(".WC_PasswordUpdateForm_FormInput_logonPasswordOld_In_Logon_1").val(),errorViewName="LogonAjaxView",reLogonURL="LogonAjaxView",rememberMe="true",url="LogonAjaxView",temp_signinPassword="",differentErrorMessgaeRequired="true",autoPopulatedEmail=f.find(".autoPopulatedEmailHiddenDesktop").val();if(constants.ajaxParams.loggedIn)if(logonId!=autoPopulatedEmail)$(".WC_PasswordUpdateForm_FormInput_EmailAddress").addClass("required").removeClass("valid resetHighlight"),$(".PasswordUpdateFailureResponseMessageDiv").html("Your email address is incorrect, please try again.").show();else{var data=$(".ResetPasswordUpdateSubmitForm").serializeArray(),newData=[{name:"logonId",value:logonId}];myperksURL=null;for(var i=0;i<data.length;i++){var d=data[i];"URL"==d.name?(d.value,newData.push({name:"URL",value:"ResetPasswordAjaxView"})):newData.push(d)}$.ajax({url:getAbsoluteURL(!0)+"ResetPassword",data:newData,type:"POST",dataType:"json",success:function(data){if(data.success){if(window.loginFlowHandler)return window.loginFlowHandler.onSuccess(),void closeModal();var nextUrl=$("#headerMyAccountURL").val();utagLinkSafe({link_name:"login"}),window.location=nextUrl}else $(".PasswordUpdateFailureResponseMessageDiv").html(data.errorMessage)},error:function(jqXHR,textStatus,errorThrown){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.")}})}else{var logonAjaxData={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,logonId:logonId,logonPassword:logonPassword,errorViewName:errorViewName,reLogonURL:reLogonURL,rememberMe:rememberMe,URL:url,temp_signinPassword:temp_signinPassword,differentErrorMessgaeRequired:differentErrorMessgaeRequired};url="LogonAjax";$.ajax({url:getAbsoluteURL(!0)+url,data:logonAjaxData,type:"POST",dataType:"json",success:function(response){if(response.success){var data=$(".ResetPasswordUpdateSubmitForm").serializeArray(),newData=[{name:"logonId",value:logonId}],originalURL=null;myperksURL=null;for(var i=0;i<data.length;i++){var d=data[i];"URL"==d.name?(originalURL=d.value,newData.push({name:"URL",value:"ResetPasswordAjaxView"})):newData.push(d)}newData.push({name:"logonId",value:logonId}),$.ajax({url:getAbsoluteURL(!0)+"ResetPassword",data:newData,type:"POST",dataType:"json",success:function(data){if(data.success){if(window.loginFlowHandler)return window.loginFlowHandler.onSuccess(),void closeModal();var nextUrl=originalURL||"/account";utagLinkSafe({link_name:"login"}),window.location=nextUrl}else $(".PasswordUpdateFailureResponseMessageDiv").html(data.errorMessage)},error:function(jqXHR,textStatus,errorThrown){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.")}})}else"20101"==response.errorCode?$(".WC_PasswordUpdateForm_FormInput_EmailAddress").addClass("required").removeClass("valid resetHighlight"):"20301"==response.errorCode&&$(".WC_PasswordUpdateForm_FormInput_logonPasswordOld_In_Logon_1").addClass("required").removeClass("valid resetHighlight"),$(".PasswordUpdateFailureResponseMessageDiv").html(response.errorMessage).show()},error:function(jqXHR,textStatus,errorThrown){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.").show()}})}}}($(this)),!1})),$(".UpdatePasswordUpdateSubmitForm").off("submit").on("submit",(function(){return function(form){var f=$(form),currentTime=(new Date).valueOf();startTime=(new Date).valueOf();var timeDiff=currentTime-startTime,sessiontimeOut=$(".sessionDuration").val()||"";if(timeDiff>=sessiontimeOut&&""!=sessiontimeOut)window.location.reload();else if(f.valid()){$("#successPassword").hide();var logonId=$("#passwordUpdateEmailInput").val(),logonPassword=f.find(".WC_PasswordUpdateForm_FormInput_logonPasswordOld_In_Logon_1").val(),errorViewName="LogonAjaxView",reLogonURL="LogonAjaxView",rememberMe="true",url="LogonAjaxView",temp_signinPassword="",autoPopulatedEmail=f.find(".autoPopulatedEmailHiddenDesktop").val();if(constants.ajaxParams.loggedIn)if(logonId!=autoPopulatedEmail)$(".WC_PasswordUpdateForm_FormInput_EmailAddress").addClass("required").removeClass("valid resetHighlight"),$(".PasswordUpdateFailureResponseMessageDiv").html("Your email address is incorrect, please try again.").show();else{var data=$(".ResetPasswordUpdateSubmitForm").serializeArray(),newData=[{name:"logonId",value:logonId}];myperksURL=null;for(var i=0;i<data.length;i++){var d=data[i];"URL"==d.name?(d.value,newData.push({name:"URL",value:"ResetPasswordAjaxView"})):newData.push(d)}newData.push({name:"logonId",value:logonId}),$.ajax({url:getAbsoluteURL(!0)+"ResetPassword",data:newData,type:"POST",dataType:"json",success:function(data){if(data.success){var nextUrl=$("#headerMyAccountURL").val();utagLinkSafe({link_name:"login"}),window.location=nextUrl}else $(".PasswordUpdateFailureResponseMessageDiv").html(data.errorMessage)},error:function(jqXHR,textStatus,errorThrown){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.")}})}else{var logonAjaxData={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,logonId:logonId,logonPassword:logonPassword,errorViewName:errorViewName,reLogonURL:reLogonURL,rememberMe:rememberMe,URL:url,temp_signinPassword:temp_signinPassword};url="LogonAjax";$.ajax({url:getAbsoluteURL(!0)+url,data:logonAjaxData,type:"POST",dataType:"json",success:function(response){if(response.success){var data=$(".UpdatePasswordUpdateSubmitForm").serializeArray(),newData=[{name:"logonId",value:logonId}];myperksURL=null;for(var i=0;i<data.length;i++){var d=data[i];"URL"==d.name?(d.value,newData.push({name:"URL",value:"ResetPasswordAjaxView"})):newData.push(d)}$.ajax({url:getAbsoluteURL(!0)+"ResetPassword",data:newData,type:"POST",dataType:"json",success:function(data){if(data.success){if($("#guestShopperContinue")[0]){var userType=document.getElementById("userType").value,nextStepURL=document.getElementById("nextStepURL").value,PhysicalStoreSelectionURL=document.getElementById("PhysicalStoreSelectionURL").value;setTimeout((function(){CheckoutHelperJS.canCheckoutContinue(userType)&&CheckoutHelperJS.updateShoppingCart(document.ShopCartForm,!0)&&ShipmodeSelectionExtJS.guestShopperContinue(nextStepURL,PhysicalStoreSelectionURL)}),500)}if($(".schedule-exam-reset")[0])sessionStorage.setItem("psw_reset",$("#new-password-update").val()),$(".background-update-reset").css("display","block"),$(".schedule-exam-reset")[0].click();else{var nextUrl="/myAccount?myAcctMain=1&catalogId="+catalogId+"&langId="+langId+"&registration=true&storeId="+storeId;utagLinkSafe({link_name:"login"}),window.location=nextUrl}}else $(".PasswordUpdateFailureResponseMessageDiv").html(data.errorMessage)},error:function(jqXHR,textStatus,errorThrown){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.")}})}else"20101"==response.errorCode?$(".WC_PasswordUpdateForm_FormInput_EmailAddress").addClass("required").removeClass("valid resetHighlight"):"20301"==response.errorCode&&$(".WC_PasswordUpdateForm_FormInput_logonPasswordOld_In_Logon_1").addClass("required").removeClass("valid resetHighlight"),$(".PasswordUpdateFailureResponseMessageDiv").html(response.errorMessage).show()},error:function(jqXHR,textStatus,errorThrown){$(".PasswordUpdateFailureResponseMessageDiv").html("Reset password update failed - please try again later.").show()}})}}}($(this)),!1})),$(".ResetPasswordForm").keypress((function(e){return 13!=e.keyCode||($(".ResetPasswordForm").valid()&&resetPassword(),!1)})),null!=$.validator&&$.validator.addMethod("atLeastOneLetterUpperAndLowerAndOneDigitAndSpecial",(function(value,element){return/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~])(.*)$/.test(value)})),$(".forgotPasswordLink, #forgotPassword").on("click",(function(){return clearLoginFields(),clearLoginErrorMessages(),$("html,body").toggleClass("hidden-overflow"),$(".examSignInModal").dialog("close"),$(".header-sign-in-modal").css("display","none").attr("aria-hidden","true"),$(".header-reset-password-modal").css("display","block").attr("aria-hidden","false"),$(".sign-in-link").addClass("open"),$("#myaccount-rectangle > .backdrop").removeClass("hide"),$("#myaccount-rectangle").removeClass("hide"),$(".WC_PasswordResetForm_FormInput_logonId_In_ResetPasswordForm_1").focus(),!1})),$(".LogOnModalSubmitButton").click((function(){logonFormSubmit($(this).parents("form"));var emailIdToAutoPopulate=document.getElementsByClassName("headerEmailAddress")[0].value;return emailIdToAutoPopulate&&(document.getElementsByClassName("WC_PasswordUpdateForm_FormInput_EmailAddress").value=emailIdToAutoPopulate,document.getElementsByClassName("autoPopulatedEmailHiddenDesktop").value=emailIdToAutoPopulate),!1})),$(".passwordResetSubmitButton, .passwordResetResendButton").off("click").on("click",(function(){if($(".ResetPasswordFailureResponseMessageDiv").css("display","none").attr("aria-hidden","false"),null!=document.getElementsByClassName("WC_PasswordResetForm_FormInput_logonId_In_ResetPasswordForm_1")&&"Enter your email address"!=document.getElementsByClassName("WC_PasswordResetForm_FormInput_logonId_In_ResetPasswordForm_1")[0].value){var currentID=document.getElementsByClassName("currentID");null!=currentID&&(currentID.value=document.getElementsByClassName("WC_PasswordResetForm_FormInput_logonId_In_ResetPasswordForm_1")[0].value)}return $(".ResetPasswordForm").valid()?(resetPassword(),$(".ResetPasswordForm .WC_PasswordResetForm_FormInput_logonId_In_ResetPasswordForm_1").removeClass("error"),$(".ResetPasswordForm .icon-error-field").css("display","none"),$(".empty-email-message").addClass("hide"),$(".invalid-email-message").addClass("hide")):($(".ResetPasswordForm .WC_PasswordResetForm_FormInput_logonId_In_ResetPasswordForm_1").addClass("error"),$(".ResetPasswordForm .icon-error-field").css("display","block"),$(".ResetPasswordForm #logonId").val()||($(".empty-email-message").removeClass("hide"),$(".invalid-email-message").addClass("hide")),$(".ResetPasswordForm #logonId").val()&&($(".empty-email-message").addClass("hide"),$(".invalid-email-message").removeClass("hide"))),!1})),$(".setNewPassword").click((function(){window.sessionStorage.resendEmail?($(".logon-email").text(window.sessionStorage.resendEmail),$(".logon-email").show(),$("#passwordUpdateEmailInput").val(window.sessionStorage.resendEmail),$("#passwordUpdateEmailInputContainer").hide()):$(".logon-email").hide(),$(".header-set-a-new-password-modal").css("display","block").attr("aria-hidden","false"),document.getElementsByClassName("WC_PasswordUpdateForm_FormInput_EmailAddress").value=document.getElementsByClassName("currentID").value}))}}));