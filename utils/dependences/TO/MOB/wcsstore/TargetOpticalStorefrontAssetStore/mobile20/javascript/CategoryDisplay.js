function rxInputToggle(){var t=$('input[name="rx"]:checked').val();$(".contact-my-doctor").toggle("doctor"==t),$(".upload-my-prescription").toggle("upload"==t),$(".fax-my-prescription").toggle("fax"==t),$(".text-my-prescription").toggle("text"==t)}function pdToggle(){var t=$("#rxPupilDistanceBoth").is(":checked");$(".pd-select-one").toggle(!t),$(".pd-select-both").toggle(t),$(".select-container-absolute").toggle(t),$("#rxPupilDistance").prop("disabled",t),$("#rxRightPupilDistance").prop("disabled",!t),$("#rxLeftPupilDistance").prop("disabled",!t)}function rxRightPrismToggle(){$(".right-prism-fields :input").prop("disabled",!$("#rxRightPrism").is(":checked"))}function rxLeftPrismToggle(){$(".left-prism-fields :input").prop("disabled",!$("#rxLeftPrism").is(":checked"))}function lensProductChange(t){var e=$('input[name="productId"]:checked').val(),a={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,productId:e,showSiblings:!0};$(".lens-color-actual").empty().addClass("loading"),$.get("GetCatalogEntryDetailsByID",a,function(e){for(var a=$("#brownLens").attr("src"),r=$("#grayLens").attr("src"),i=0;i<e.catalogEntry.siblings.length;i++){var n=e.catalogEntry.siblings[i],s=$("#lensTemplate").clone().removeAttr("id");s.find(".catentry-name:not(.thumb)").text(n.name),s.find(".catentry-radio").val(n.uniqueID).prop("checked",n.uniqueID==t),"brown"==n.name.toLowerCase()?(s.find(".catentry-image").attr("src",a),s.find("label.catentry-name").attr("onmouseup",'utagFiller.updatePDPLensColor("Brown")')):(s.find(".catentry-image").attr("src",r),s.find("label.catentry-name").attr("onmouseup",'utagFiller.updatePDPLensColor("Gray")')),s.find("input.catentry-radio").attr("id","lens-color-input-"+(i+1)),s.find("label.catentry-name").attr("for","lens-color-input-"+(i+1)),$(".lens-color-actual").append(s.wrap('<div class="lens-holder" />')).removeClass("loading")}$(".lens-color-actual label:not(.thumb)").append('<span class="required-field"> *</span>')},"json")}function hideShowAddonsDiv(){var t=!1;$(".add-ons .lens-container .check-row ").each(function(){"none"!=$(this).css("display")&&(t=!0)}),t?$("#hic-addons").show():($("#hic-addons").hide(),$("#hic-addons").text(" "))}function antiReflectiveSelect(t){var e=$(".ar-available:checked").length>0,a=$(".antireflective").toggle(e).find(":checkbox");t||(a.prop("checked",!1),addOnsClick(a)),hideShowAddonsDiv()}function calculateSummarySubtotal(){var t=0;$(".content-block").find(".price:visible").not(".listPrice").each(function(){t+=parseFloat($.trim($(this).html()).substring(1))}),$(".price-subtotal").html("$"+t.toFixed(2))}function populateTrialPack(t,e){$(t).find(".pack-name").html(e.name),$(t).find(".pack-short-description").html(e.shortDescription),$(t).find(".pack-link").attr("href",e.url)}function addOnsClick(t){if(t.is(":checked")){var e=t.parents(".step1"),a=e.find("label").html(),r=e.find(".offerprice").html();r||(r=e.find("span.price").html());var i=$("#addon-row-template").clone();i.find(".name").html(a),i.find(".price").html(r),i.attr("id","addon-row-"+t.val()),$(".lens-row:last").after(i.show())}else $("#addon-row-"+t.val()).remove();calculateSummarySubtotal()}function triggerContactLensUtag(t){var e=$("#categoryId"),a=$("#productId");if(""!=$.trim(e.val())&&""!=$.trim(a.val())){var r={contact_brand:$("#categoryId option:selected").text().toLowerCase(),contact_name:$("#productId option:selected").text().toLowerCase(),product_id:t.catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber};$(document).trigger("utag",["contactLensView",r])}$(".box-low-price").length>0&&$(".box-low-price").text()==$(".box-normal-price").text()&&$(".box-low-price").parent().parent().parent().hide()}function triggerContactAdd(){var t={add_quantity:parseInt($("#rightQuantity").val(),10)+parseInt($("#leftQuantity").val(),10),add_price:$("#contact-lens-price").val(),product_id:$("#productId").val()};$(document).trigger("utag",["addtobuy",t])}function triggerLensAdd(){val=$("#rxLensForm input[name=lensCatentryId]:checked").val(),price=$.trim($(".price-subtotal").text());var t={add_price:price,product_id:val};$(document).trigger("utag",["addtobuy",t])}function handleAddToCartUtag(t,e){try{var a=$(this),r=[],i=[],n=[];t=t||"addtobuy",e=e||[];if(a.is(".browsing-history *"))n.push("recently viewed"),r.push(a.closest(".container").find(".thumbnail-product-price").text()),i.push(a.closest(".container").find("[data-partNumber]").attr("data-partNumber"));else if(a.is(".product-detail *")){$(".product-price").each(function(){r.push($(this).text())});var s=$.trim($("#product-part-number").val());""==s&&(s=$.trim($("#bundle-part-numbers").val()));for(var o=s.split(","),d=0;d<o.length;d++)i.push(o[d]),n.push("product detail")}else n.push("browse results"),r.push(a.closest(".item-tile").find(".thumbnail-product-price").text()),i.push(a.closest("[data-partNumber]").attr("data-partNumber"));for(d=0;d<r.length;d++)r[d]=r[d].replace(/[^0-9.-]/g,"");var c={add_location:n.join(","),product_id:i.join(","),add_quantity:e.join(","),add_price:r.join(",")};$(document).trigger("utag",[t,c])}catch(t){console&&console.error&&console.error(t)}}function ajaxAddItemToTryAtHome(t){for(var e=$(t).data("catentryid").toString().split(","),a=$(t).data("bundleid"),r=[],i=0;i<e.length;i++)r.push(1);handleAddToCartUtag.call(t,"addtotry",r),categoryDisplayJS.AddItem2TryAtHomeCartAjax(e,{productId:a})}categoryDisplayJS={entitledItems:[],entitledItemsArray:[],selectedProducts:new Object,selectedAttributes:new Object,errorMessages:new Object,langId:"-1",storeId:"",catalogId:"",orderId:"",ajaxShopCart:!0,ajaxMyAccount:!0,contextChanged:!1,isHistory:!1,merchandisingAssociationItems:[],baseCatalogEntryDetails:[],associationThumbnailIndex:1,totalAssociationCount:0,baseItemAddedToCart:!1,merchandisingProductAssociationAddToCart:!1,merchandisingProductAssociationForm:"",isParentBundleBean:!1,userType:"",moreInfoUrl:"",displayPrevAssociation:"",displayNextAssociation:"",defaultItemArray:[],currentPageType:"",currentCatalogEntryId:"",entitledItemJsonObject:null,isPopup:!1,displayPriceRange:!0,itemPriceJsonOject:[],initHistory:function(t,e){var a=new categoryDisplayJS.HistoryTracker(t,e);dojo.back.setInitialState(a)},processCategoryURL:function(){var t,e=location.hash,a=!1;if(e){t=e=e.substring(1,e.length);var r=e.indexOf("identifier",0);r>=0&&(t=e.substring(0,r)),a=!0,t=unescape(t)}a&&(isHistory=!0,wc.render.getRefreshControllerById("CategoryDisplay_Controller").url=t,wc.render.updateContext("CategoryDisplay_Context"))},setAjaxShopCart:function(t){this.ajaxShopCart=t},setAjaxMyAccount:function(t){this.ajaxMyAccount=t},setCommonParameters:function(t,e,a,r){this.langId=t,this.storeId=e,this.catalogId=a,this.userType=r},setEntitledItems:function(t){this.entitledItems=t},setEntitledItemsArray:function(t,e){this.entitledItemsArray[t]=e},setSelectedAttribute:function(t,e){console.debug(t+" : "+e),this.selectedAttributes[t]=e,this.moreInfoUrl=this.moreInfoUrl+"&"+t+"="+e},setSelectedAttributeJS:function(t,e){console.debug(t.replace(/'/g,"&#039;")+" : "+e.replace(/'/g,"&#039;")),this.selectedAttributes[t.replace(/'/g,"&#039;")]=e.replace(/'/g,"&#039;"),this.moreInfoUrl=this.moreInfoUrl+"&"+t.replace(/'/g,"&#039;")+"="+e.replace(/'/g,"&#039;")},changePrice:function(entitledItemId,isPopup,displayPriceRange){var entitledItemJSON;this.displayPriceRange=displayPriceRange,this.isPopup=isPopup,entitledItemJSON=null==dojo.byId(entitledItemId)||this.isPopup?this.getEntitledItemJsonObject():eval("("+dojo.byId(entitledItemId).innerHTML+")"),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(null!=catalogEntryId)if(null!=this.itemPriceJsonOject[catalogEntryId]&&"undefined"!=this.itemPriceJsonOject[catalogEntryId])this.displayPrice(this.itemPriceJsonOject[catalogEntryId].catalogEntry),console.debug("CategoryDisplay.changePrice: using stored json object.");else{var parameters={};parameters.storeId=this.storeId,parameters.langId=this.langId,parameters.catalogId=this.catalogId,parameters.productId=catalogEntryId,parameters.onlyCatalogEntryPrice="true",dojo.xhrPost({url:getAbsoluteURL()+"GetCatalogEntryDetailsByID",handleAs:"json-comment-filtered",content:parameters,service:this,load:categoryDisplayJS.displayPriceServiceResponse,error:function(t,e){console.debug("CategoryDisplay.changePrice: Unexpected error occurred during an xhrPost request.")}})}else console.debug("CategoryDisplay.changePrice: all attributes are not selected.")},displayPriceServiceResponse:function(t,e){categoryDisplayJS.itemPriceJsonOject[t.catalogEntry.catalogEntryIdentifier.uniqueID]=t,categoryDisplayJS.displayPrice(t.catalogEntry)},displayPrice:function(t){var e=categoryDisplayJS.isPopup;if(1==e&&(document.getElementById("productPrice").innerHTML=t.offerPrice,document.getElementById("productName").innerHTML=t.description[0].name,document.getElementById("productSKUValue").innerHTML=t.catalogEntryIdentifier.externalIdentifier.partNumber),0==e){var a="";if(a=!t.listPriced||t.listPrice<=t.offerPrice?"<span class='price bold'>"+MessageHelper.messages.PRICE+" </span><span class='price bold'>"+t.offerPrice+"</span>":"<span class='price bold'>"+MessageHelper.messages.PRICE+" </span><span class='price listPrice bold'>"+t.listPrice+"</span><div class='price offerprice bold'>"+t.offerPrice+"</div>",1==categoryDisplayJS.displayPriceRange)for(var r in t.priceRange)a="null"!=t.priceRange[r].endingNumberOfUnits?a+"<span class='price bold'>"+MessageHelper.messages.TieredPricingDisp.replace("{0}",t.priceRange[r].startingNumberOfUnits).replace("{1}",t.priceRange[r].endingNumberOfUnits).replace("{2}",t.priceRange[r].localizedPrice)+"</span>":a+"<span class='price bold'>"+MessageHelper.messages.TieredPricingDispLast.replace("{0}",t.priceRange[r].startingNumberOfUnits).replace("{1}",t.priceRange[r].localizedPrice)+"</span>",a+="<br />";document.getElementById("WC_CachedProductOnlyDisplay_div_4").innerHTML=a,document.getElementById("catalog_link").innerHTML=t.description[0].name}},setSelectedAttributeOfProduct:function(t,e,a){selectedAttributesForProduct=new Object,this.selectedProducts[t]&&(selectedAttributesForProduct=this.selectedProducts[t]),selectedAttributesForProduct[e]=a,this.selectedProducts[t]=selectedAttributesForProduct},gotoASubCategoryDisplayPage:function(t,e,a,r){if(""!=(t=trim(t)))if(0!=MessageHelper.IsNumeric(t,!1))if(t>=1&&t<=e){MessageHelper.hideAndClearMessage();var i=r+"&beginIndex="+(t-1)*a;this.loadSubCategoryContentURL(i)}else MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages.ERROR_PAGE_NUM);else MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages.ERROR_PAGE_NUM);else MessageHelper.formErrorHandleClient(document.getElementById("subCategoriesListDisplayPageNum").id,MessageHelper.messages.ERROR_EMPTY_NUM)},getCatalogEntryId:function(){var t=[];for(attribute in this.selectedAttributes)t.push(attribute+"_"+this.selectedAttributes[attribute]);return this.resolveSKU(t)},getCatalogEntryIdforProduct:function(t){var e=[];for(attribute in t)e.push(attribute+"_"+t[attribute]);return this.resolveSKU(e)},getCatalogEntryIdforBundleProduct:function(t,e){var a=[];for(attribute in e)a.push(attribute+"_"+e[attribute]);return this.resolveSKUForBundleProduct(t,a)},resolveSKU:function(t){console.debug("Resolving SKU >> "+t+">>"+this.entitledItems);var e="",a=t.length;for(x in this.entitledItems){e=this.entitledItems[x].catentry_id;var r=this.entitledItems[x].Attributes,i=0;for(index in r)i++;if(0==a&&0==i)return e;if(0!=i&&a>=i){var n=0;for(attributeName in t){t[attributeName]in r&&n++}if(i==n)return console.debug("CatEntryId:"+e+" for Attribute: "+t),e}}return null},resolveSKUForBundleProduct:function(t,e){console.debug("Resolving SKU >> "+e+">>"+this.entitledItemsArray[t]);var a="",r=e.length;for(x in this.entitledItemsArray[t]){a=this.entitledItemsArray[t][x].catentry_id;var i=this.entitledItemsArray[t][x].Attributes,n=0;for(index in i)n++;if(0==r&&0==n)return a;if(0!=n&&r>=n){var s=0;for(attributeName in e){e[attributeName]in i&&s++}if(n==s)return console.debug("CatEntryId:"+a+" for Attribute: "+e),a}}return null},updateParamObject:function(t,e,a,r,i){if(null==t&&(t=[]),null!=t[e]&&r)if(dojo.lang.isArrayLike(t[e]))null!=i&&""!=i?t[e][i]=a:t[e].push(a);else{var n=t[e];t[e]=[],t[e].push(n),t[e].push(a)}else if(null!=i&&""!=i&&-1!=i)t[e+"_"+i]=a;else if(-1==i){for(var s=1;null!=t[e+"_"+s];)s++;t[e+"_"+s]=a}else t[e]=a;return t},setDefaultItem:function(t,e){this.defaultItemArray[t]=e},getDefaultItem:function(t){return this.defaultItemArray[t]},AddBundle2ShopCartAjax:function(t){var e=[];e.storeId=this.storeId,e.catalogId=this.catalogId,e.langId=this.langId,e.orderId=".",e.calculationUsage="-1,-2,-3,-4,-5,-6,-7";for(var a=t.numberOfProduct.value,r=1;r<=a;r++){var i=t["catEntryId_"+r].value;this.selectedProducts[i]&&(i=this.getCatalogEntryIdforBundleProduct(i,this.selectedProducts[i]));var n=t["quantity_"+r].value;if(null==n||""==n||n<=0)return void MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);if(null==n||""==n||null==i)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);this.updateParamObject(e,"catEntryId",i,!1,-1),this.updateParamObject(e,"quantity",n,!1,-1),this.baseItemAddedToCart=!0;var s=document.getElementsByName("contractSelectForm_contractId_"+i);if(null!=s&&"undefined"!=s)for(j=0;j<s.length;j++)if(s[j].checked){t["contractId_"+r].value=s[j].value;break}var o=t["contractId_"+r].value;null!=o&&""!=o&&this.updateParamObject(e,"contractId",o,!1,-1)}submitRequest()&&(cursor_wait(),wc.service.invoke("AjaxAddOrderItem",e))},AddBundle2ShopCart:function(t){t.URL.value="AjaxOrderItemDisplayView";for(var e=t.numberOfProduct.value,a=1;a<=e;a++){var r=t["catEntryId_"+a].value;if(this.selectedProducts[r]){if(null==(r=this.getCatalogEntryIdforBundleProduct(r,this.selectedProducts[r])))return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);t["catEntryId_"+a].value=r}var i=t["quantity_"+a].value;if(null==i||""==i||i<=0)return void MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);var n=document.getElementsByName("contractSelectForm_contractId_"+r);if(null!=n&&"undefined"!=n)for(j=0;j<n.length;j++)if(n[j].checked){t["contractId_"+a].value=n[j].value;break}}submitRequest()&&t.submit()},Add2ShopCart:function(entitledItemId,form,quantity,isPopup){var entitledItemJSON;entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(null!=catalogEntryId){if(this.merchandisingProductAssociationAddToCart)return void this.AddAssociation2ShopCart(catalogEntryId,quantity);form.catEntryId.value=catalogEntryId,form.productId.value=catalogEntryId,this.AddItem2ShopCart(form,quantity),hidePopup("second_level_category_popup")}else 1==isPopup?(dojo.byId("second_level_category_popup").style.zIndex="1",MessageHelper.formErrorHandleClient("addToCartLink",MessageHelper.messages.ERR_RESOLVING_SKU)):MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU)},AddItem2ShopCart:function(t,e){if(isPositiveInteger(e)){t.quantity.value=e;var a=document.getElementsByName("contractSelectForm_contractId");if(null!=a&&"undefined"!=a)for(i=0;i<a.length;i++)if(a[i].checked){t.contractId.value=a[i].value;break}submitRequest()&&t.submit()}else MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR)},Add2ShopCartAjax:function(entitledItemId,quantity,isPopup,customParams){var entitledItemJSON;entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();null!=catalogEntryId?(this.AddItem2ShopCartAjax(catalogEntryId,quantity,customParams),this.baseItemAddedToCart=!0,hidePopup("second_level_category_popup")):1==isPopup?(dojo.byId("second_level_category_popup").style.zIndex="1",MessageHelper.formErrorHandleClient("addToCartLinkAjax",MessageHelper.messages.ERR_RESOLVING_SKU)):(MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU),this.baseItemAddedToCart=!1)},setEntitledItemJsonObject:function(t){this.entitledItemJsonObject=t},getEntitledItemJsonObject:function(){return this.entitledItemJsonObject},ReplaceItemAjax:function(entitledItemId,quantity){var entitledItemJSON;entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(),removeOrderItemId="",removeOrderItemId=replaceOrderItemId,typeId=document.getElementById("shipmentTypeId"),addressId="",shipModeId="";null!=typeId&&""!=typeId&&("2"==typeId.value?(addressId=document.getElementById("MS_ShipmentAddress_"+removeOrderItemId).value,shipModeId=document.getElementById("MS_ShippingMode_"+removeOrderItemId).value):(addressId=document.getElementById("addressId_all").value,shipModeId=document.getElementById("shipModeId_all").value)),null!=catalogEntryId?""==removeOrderItemId||this.ReplaceItemAjaxHelper(catalogEntryId,quantity,removeOrderItemId,addressId,shipModeId):MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU)},ReplaceItemNonAjax:function(entitledItemId,quantity,form){var entitledItemJSON;entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(),removeOrderItemId="",removeOrderItemId=replaceOrderItemId;if(null!=catalogEntryId)if(""==removeOrderItemId);else{var addressId,shipModeId;if(form.orderItemId.value=removeOrderItemId,0==quantity&&console.debug("An invalid quantity was selected"),null!=form.shipmentTypeId&&""!=form.shipmenTypeId?("2"==form.shipmentTypeId.value?(addressId=document.getElementById("MS_ShipmentAddress_"+removeOrderItemId).value,shipModeId=document.getElementById("MS_ShippingMode_"+removeOrderItemId).value):(addressId=document.getElementById("addressId_all").value,shipModeId=document.getElementById("shipModeId_all").value),form.URL.value="OrderChangeServiceItemAddTO?calculationUsage=-1,-2,-3,-4,-5,-6,-7&catEntryId="+catalogEntryId+"&quantity="+quantity+"&addressId="+addressId+"&shipModeId="+shipModeId+"&URL=OrderChangeServiceShipInfoUpdate?URL="+form.URL.value):form.URL.value="OrderChangeServiceItemAddTO?calculationUsage=-1,-2,-3,-4,-5,-6,-7&catEntryId="+catalogEntryId+"&quantity="+quantity+"&URL="+form.URL.value,!submitRequest())return;form.submit()}else MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU)},AddItem2ShopCartAjax:function(t,e,a){var r={storeId:this.storeId,catalogId:this.catalogId,langId:this.langId,orderId:".",catEntryId:t,frame:t,action:"add",cache:!1,URL:"GetCatalogEntryDetailsByID",errorViewName:"LogonAjaxView"};console.debug("param:"+r.storeId+" : "+r.catalogId+" : "+r.langId+" : "+a.partType),$.extend(r,a);var i=null!=r.orderItemId&&""!=r.orderItemId,n=i?"UpdateOrderItemLensDataCmd":"OrderItemAddFrameCmd";"EYEGLASSES_FRAMES"==a.partType||"SUNGLASSES_FRAMES"==a.partType?$.post(getAbsoluteURL()+n,r,function(t){if(console.debug(t),t){var a=$.parseJSON(t),r={storeId:this.storeId,catalogId:this.catalogId,langId:this.langId,orderId:".",productId:a.productId,cache:!1,orderItemTotal:a.orderItemTotal,errorViewName:"LogonAjaxView"};$.get("GetCatalogEntryDetailsByID",r,function(t){if(t.catalogEntry){$(".add-to-cart-pdp-url").attr("href",t.catalogEntryURL);var r="",n="";$.each(t.catalogEntryAttributes.attributes,function(){null!=this.attributeIdentifier&&("COLOR"==this.attributeIdentifier.externalIdentifier.identifier&&(r=this.value.value),"RXABLE"==this.attributeIdentifier.externalIdentifier.identifier&&(n="RxAble"==this.value.value))}),$(".add-to-cart-color").html(r);var s=$.param({storeId:categoryDisplayJS.storeId,catalogId:categoryDisplayJS.catalogId,langId:categoryDisplayJS.langId,orderItemId:a.orderItemId});if($(".add-to-cart-add-lenses").toggle(n).attr("href",getAbsoluteURL()+"LensOptions?"+s),i||categoryDisplayJS.IncrementOrderItemCount(e),n)window.location=getAbsoluteURL()+"LensOptions?"+s;else{var o=$.param({storeId:categoryDisplayJS.storeId,catalogId:categoryDisplayJS.catalogId,langId:categoryDisplayJS.langId,URL:"AjaxOrderItemDisplayView",errorViewName:"AjaxOrderItemDisplayView",updatePrices:"1",calculationUsageId:"-1",orderId:"."});window.location=getAbsoluteURL()+"OrderCalculate?"+o}}else t.errorKey&&(utagFiller.setUnableToAddToCart(),MessageHelper.displayErrorMessage(t.errorMessage))},"json")}else t.errorKey&&(utagFiller.setUnableToAddToCart(),MessageHelper.displayErrorMessage(t.errorMessage))}):"CONTACT_LENSES"==a.partType&&$.post(getAbsoluteURL()+"OrderItemAddContactLensesCmd",r,function(t){if(console.debug("data:"+t),t.catalogEntry){var e=parseInt(a.rightQuantity)+parseInt(a.leftQuantity),r="";r=1==e?e+" box of "+t.catalogEntry.description[0].name+" contact lenses was just added to your cart":e+" boxes of "+t.catalogEntry.description[0].name+" contact lenses were just added to your cart",$.cookie("checkoutMessage",r,{path:"/"}),categoryDisplayJS.AddItem2ShopCartAjaxDisplayCL(t,e,"contacts"),categoryDisplayJS.IncrementOrderItemCount(e)}else if(t.errorKey){utagFiller.setUnableToAddToCart();try{var i=$.parseHTML(t.errorMessage),n="";$.each(i,function(t,e){n+=e.nodeValue+"<br/>"}),MessageHelper.displayErrorMessage(n)}catch(e){MessageHelper.displayErrorMessage(t.errorMessage)}}},"json")},AddItem2ShopCartAjaxDisplayShared:function(t,e,a){$("#addToCartContainer").removeClass().addClass("add-to-cart-"+a),$(".add-to-cart-price").text(t.orderItemTotal),$(".add-to-cart-name").html(t.catalogEntry.description[0].name),$(".add-to-cart-quantity").html(e),$(".add-to-cart-item-added").toggle(1==e),$(".add-to-cart-items-added").toggle(e>1),$(".add-to-cart-thumbnail").attr("src",t.catalogEntry.description[0].thumbnail);var r=$.param({storeId:categoryDisplayJS.storeId,catalogId:categoryDisplayJS.catalogId,langId:categoryDisplayJS.langId,URL:"AjaxOrderItemDisplayView",errorViewName:"AjaxOrderItemDisplayView",updatePrices:"1",calculationUsageId:"-1",orderId:"."});window.location=getAbsoluteURL()+"OrderCalculate?"+r},AddItem2ShopCartAjaxDisplayCL:function(t,e,a){$("#addToCartContainer").removeClass().addClass("add-to-cart-"+a),$(".add-to-cart-price").text(t.orderItemTotal),$(".add-to-cart-name").html(t.catalogEntry.description[0].name),$(".add-to-cart-quantity").html(e),$(".add-to-cart-item-added").toggle(1==e),$(".add-to-cart-items-added").toggle(e>1),$(".add-to-cart-thumbnail").attr("src",t.catalogEntry.description[0].thumbnail),window.openPDPMinicart()},IncrementOrderItemCount:function(t){var e=parseInt($("#order-quantity-header").text());$("#order-quantity-header").text(e+t)},AddItem2TryAtHomeCartAjax:function(t,e){var a={storeId:this.storeId,catalogId:this.catalogId,langId:this.langId,productId:t[0],URL:"GetCatalogEntryDetailsByID",errorViewName:"LogonAjaxView"};$.each(t,function(t,e){a["catEntryId_"+t]=e}),$.extend(a,e),$.post(getAbsoluteURL()+"TAHItemAddCmd",a,function(e){if(e.catalogEntry){$(".add-to-tah-thumbnail").attr("src",e.catalogEntry.description[0].thumbnail);var a="";$.each(e.catalogEntryAttributes.attributes,function(t){null!=t.attributeIdentifier&&"COLOR"==t.attributeIdentifier.externalIdentifier.identifier&&(a=t.value.value)}),$(".add-to-tah-color").html(a),$(".add-to-tah-name").html(e.catalogEntry.description[0].name),$(".add-to-tah-url").attr("href",e.catalogEntryURL),$(".add-to-tah-error").hide(),$(".add-to-tah-frame").show(),$("#AddToTryAtHomeModal").dialog("open"),$(".tah-these-frames").show();var r=parseInt($("#tah-quantity-header").text());$("#tah-quantity-header").text(r+t.length)}else e.errorKey&&(utagFiller.setUnableToAddToCart(),$(".add-to-tah-error").html(e.errorMessage),$(".add-to-tah-frame").hide(),$(".add-to-tah-error").show(),$("#AddToTryAtHomeModal").dialog("open"))},"json")},ConfigureDynamicKit:function(t,e,a){var r=[];if(r.storeId=this.storeId,r.catalogId=this.catalogId,r.langId=this.langId,r.catEntryId=t,r.quantity=e,isPositiveInteger(e)){var i=document.getElementsByName("contractSelectForm_contractId");if(null!=i&&"undefined"!=i)for(s=0;s<i.length;s++)if(i[s].checked){r.contractId=i[s].value;break}if(null!=a&&"undefined"!=a)for(s in a)r[s]=a[s];if(submitRequest()){cursor_wait();var n="ConfigureView",s=0;for(param in r)n+=(0==s++?"?":"&")+param+"="+r[param];document.location.href=getAbsoluteURL()+n}}else MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR)},ReplaceItemAjaxHelper:function(t,e,a,r,i){var n=[];n.storeId=this.storeId,n.catalogId=this.catalogId,n.langId=this.langId,n.orderItemId=a,n.orderId=null!=this.orderId&&"undefined"!=this.orderId&&""!=this.orderId?this.orderId:".",n.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var s=[];s.storeId=this.storeId,s.catalogId=this.catalogId,s.langId=this.langId,s.catEntryId=t,s.quantity=e,s.orderId=null!=this.orderId&&"undefined"!=this.orderId&&""!=this.orderId?this.orderId:".",s.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var o=[];o.storeId=this.storeId,o.catalogId=this.catalogId,o.langId=this.langId,o.orderId=null!=this.orderId&&"undefined"!=this.orderId&&""!=this.orderId?this.orderId:".",o.calculationUsage="-1,-2,-3,-4,-5,-6,-7",o.allocate="***",o.backorder="***",o.remerge="***",o.check="*n";var d=!1;null!=r&&""!=r&&null!=i&&""!=i&&(o.addressId=r,o.shipModeId=i,d=!0),wc.service.declare({id:"AjaxReplaceItem",actionId:"AjaxReplaceItem",url:"AjaxOrderChangeServiceItemDeleteTO",formId:"",successHandler:function(t){d?wc.service.invoke("AjaxAddOrderItemTemp",s):wc.service.invoke("AjaxAddOrderItem",s)},failureHandler:function(t){t.errorMessage?MessageHelper.displayErrorMessage(t.errorMessage):t.errorMessageKey&&MessageHelper.displayErrorMessage(t.errorMessageKey),cursor_clear()}}),wc.service.declare({id:"AjaxAddOrderItemTemp",actionId:"AjaxAddOrderItemTemp",url:"AjaxOrderChangeServiceItemAddTO",formId:"",successHandler:function(t){wc.service.invoke("OrderItemAddressShipMethodUpdate",o)},failureHandler:function(t){MessageHelper.displayErrorMessage(t.errorMessageKey)}}),submitRequest()&&(cursor_wait(),wc.service.invoke("AjaxReplaceItem",n))},AddBundle2WishList:function(t){isAuthenticated||setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");for(var e=t.numberOfProduct.value,a=1;a<=e;a++){var r=t["catEntryId_"+a].value;if(this.selectedProducts[r]){if(null==(r=this.getCatalogEntryIdforBundleProduct(r,this.selectedProducts[r])))return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);t["catEntryId_"+a].value=r}}t.action="InterestItemAdd",t.page.value="customerlinkwishlist",this.ajaxMyAccount?"G"==this.userType?t.URL.value="InterestItemDisplay":t.URL.value="AjaxLogonForm":"G"==this.userType?t.URL.value="InterestItemDisplay":t.URL.value="NonAjaxAccountWishListDisplayView",submitRequest()&&t.submit()},AddBundle2WishListAjax:function(t){isAuthenticated||setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");var e=[];e.storeId=this.storeId,e.catalogId=this.catalogId,e.langId=this.langId,e.updateable=0,e.orderId=".";var a;a=t.catEntryIDS.value.toString().split(",");for(var r=0;r<a.length;r++){var i=document.getElementById("quantity_"+a[r]).value,n=a[r];if(this.selectedProducts[a[r]]&&(n=this.getCatalogEntryIdforBundleProduct(n,this.selectedProducts[a[r]])),0!=i&&null!=i||(i=1),null==i||""==i||null==n)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);this.updateParamObject(e,"catEntryId",n,!1,-1),this.updateParamObject(e,"quantity",i,!1,-1)}submitRequest()&&(cursor_wait(),wc.service.invoke("AjaxInterestItemAdd",e))},Add2WishListAjaxByID:function(t){if(null!=t){isAuthenticated||setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");var e=[];if(e.storeId=this.storeId,e.catalogId=this.catalogId,e.langId=this.langId,e.catEntryId=t,e.updateable=0,e.URL="SuccessfulAJAXRequest",null!=document.getElementById("controllerURLWishlist")&&"undefined"!=document.getElementById("controllerURLWishlist")&&CommonControllersDeclarationJS.setControllerURL("WishlistDisplay_Controller",document.getElementById("controllerURLWishlist").value),!submitRequest())return;cursor_wait(),this.ajaxShopCart?wc.service.invoke("AjaxInterestItemAdd",e):wc.service.invoke("AjaxInterestItemAdd_shopCart",e)}else MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU)},Add2WishListAjax:function(entitledItemId){var entitledItemJSON;isAuthenticated||setWarningMessageCookie("WISHLIST_GUEST_ADDITEM"),entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();this.Add2WishListAjaxByID(catalogEntryId)},AddItem2WishListAjax:function(t){isAuthenticated||setWarningMessageCookie("WISHLIST_GUEST_ADDITEM");var e=[];e.storeId=this.storeId,e.catalogId=this.catalogId,e.langId=this.langId,e.catEntryId=t,e.updateable=0,e.URL="SuccessfulAJAXRequest",null!=document.getElementById("controllerURLWishlist")&&"undefined"!=document.getElementById("controllerURLWishlist")&&CommonControllersDeclarationJS.setControllerURL("WishlistDisplay_Controller",document.getElementById("controllerURLWishlist").value),submitRequest()&&(cursor_wait(),this.ajaxShopCart?wc.service.invoke("AjaxInterestItemAdd",e):wc.service.invoke("AjaxInterestItemAdd_shopCart",e))},Add2WishList:function(entitledItemId,form){var entitledItemJSON;isAuthenticated||setWarningMessageCookie("WISHLIST_GUEST_ADDITEM"),entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();this.Add2WishListByID(catalogEntryId,form)},Add2WishListByID:function(t,e){if(isAuthenticated||setWarningMessageCookie("WISHLIST_GUEST_ADDITEM"),null!=t){if(e.productId.value=t,e.catEntryId.value=t,e.action="InterestItemAdd",e.page.value="customerlinkwishlist",this.ajaxMyAccount?"G"==this.userType?e.URL.value="InterestItemDisplay":e.URL.value="AjaxLogonForm":"G"==this.userType?e.URL.value="InterestItemDisplay":e.URL.value="NonAjaxAccountWishListDisplayView",e.quantity.value="1",!submitRequest())return;e.submit()}else MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU)},AddItem2WishList:function(t){isAuthenticated||setWarningMessageCookie("WISHLIST_GUEST_ADDITEM"),t.action="InterestItemAdd",t.quantity.value="1",t.page.value="customerlinkwishlist",this.ajaxMyAccount?"G"==this.userType?t.URL.value="InterestItemDisplay":t.URL.value="AjaxLogonForm":"G"==this.userType?t.URL.value="InterestItemDisplay":t.URL.value="NonAjaxAccountWishListDisplayView",submitRequest()&&t.submit()},loadContentURL:function(t){submitRequest()&&(cursor_wait(),CommonControllersDeclarationJS.setControllerURL("CategoryDisplay_Controller",t),wc.render.updateContext("CategoryDisplay_Context"))},loadSubCategoryContentURL:function(t){MessageHelper.hideAndClearMessage(),submitRequest()&&(cursor_wait(),CommonControllersDeclarationJS.setControllerURL("SubCategoryDisplay_Controller",t),wc.render.updateContext("SubCategoryDisplay_Context"))},goBack:function(){categoryDisplayJS.loadContentURL(this.changeUrl),categoryDisplayJS.isHistory=!0},goForward:function(){categoryDisplayJS.loadContentURL(this.changeUrl),isHistory=!0},HistoryTracker:function(t,e){this.elementId=t,this.changeUrl=e},processBookmarkURL:function(){var t=location.hash;if(t&&(t=t.substring(1,t.length)),t){var e=t.indexOf("identifier",0);if(e>=0)t.substring(0,e-1)}},initializeMerchandisingAssociation:function(thumbnailIndex){var associationDisplay=document.getElementById("marchandisingAssociationDisplay"),totalPriceMsg=document.getElementById("totalPriceMsg").value,baseCatEntryJSON=eval("("+dojo.byId("baseCatEntryDetails").innerHTML+")");this.baseCatalogEntryDetails=baseCatEntryJSON;var basePrice=this.baseCatalogEntryDetails[0].baseCatEntry_Price;this.totalAssociationCount=this.baseCatalogEntryDetails[0].totalAssociations;var identifierJSON="associatedCatEntries_"+thumbnailIndex,associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON;var totalPrice=parseFloat(basePrice)+parseFloat(this.merchandisingAssociationItems[0].catEntry_Price),dragType="";"ProductBean"==this.merchandisingAssociationItems[0].catEntry_Type?dragType="product":"ItemBean"==this.merchandisingAssociationItems[0].catEntry_Type?dragType="item":"PackageBean"==this.merchandisingAssociationItems[0].catEntry_Type?dragType="package":"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type&&(dragType="bundle");var widgetHTML="";if(document.getElementById("addToCartLink")){var url="AjaxOrderItemDisplayView?storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId;widgetHTML=widgetHTML+"<form name='OrderItemAddForm_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' action='OrderChangeServiceItemAddTO' method='post' id='OrderItemAddForm_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'>\n<input type='hidden' name='storeId' value='"+this.storeId+"' id='OrderItemAddForm_storeId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='orderId' value='.' id='OrderItemAddForm_orderId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='catalogId' value='"+this.catalogId+"' id='OrderItemAddForm_orderId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='URL' value='"+url+"' id='OrderItemAddForm_url_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='errorViewName' value='InvalidInputErrorView' id='OrderItemAddForm_errorViewName_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='catEntryId' value='"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' id='OrderItemAddForm_catEntryId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' name='productId' value='"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' id='OrderItemAddForm_productId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='1' name='quantity' id='OrderItemAddForm_quantity_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='' name='page' id='OrderItemAddForm_page_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='-1,-2,-3,-4,-5,-6,-7' name='calculationUsage' id='OrderItemAddForm_calcUsage_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='0' name='updateable' id='OrderItemAddForm_updateable_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n<input type='hidden' value='' name='giftListId' id='OrderItemAddForm_giftListId_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'/>\n</form>\n"}widgetHTML+="<div class='scroller' id='WC_CategoryDisplayJS_div_1'>",this.totalAssociationCount>1&&(this.associationThumbnailIndex<this.totalAssociationCount&&(widgetHTML+="\t\t<a href='Javascript:categoryDisplayJS.showNextAssociation()'  id='WC_ProductAssociation_UpArrow_Link_1'>"),widgetHTML=widgetHTML+"\t\t<img src='"+this.baseCatalogEntryDetails[0].storeImage_Path+"i_up_arrow.png' alt='"+this.displayNextAssociation+"'/></a>"),widgetHTML=widgetHTML+" <br /><div id='baseContent_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"'","true"==this.merchandisingAssociationItems[0].showProductQuickView?widgetHTML=widgetHTML+" onmouseover='showPopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");' onmouseout='hidePopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");'>":widgetHTML+=" >","true"==this.merchandisingAssociationItems[0].productDragAndDrop&&(widgetHTML=widgetHTML+" <div dojoType='dojo.dnd.Source' jsId='dndSource' id="+this.merchandisingAssociationItems[0].catEntry_Identifier+" copyOnly='true' dndType='"+dragType+"'>\t\t<div class='dojoDndItem' dndType='"+dragType+"' id='WC_CategoryDisplayJS_div_draganddrop'>"),widgetHTML=widgetHTML+"\t<a href='"+this.merchandisingAssociationItems[0].catEntry_ProductLink+"'  id='img"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' onfocus='showPopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");'>","true"==this.merchandisingAssociationItems[0].productDragAndDrop&&6==dojo.isIE&&(widgetHTML=widgetHTML+"<iframe class='productDnDIFrame' scrolling='no' frameborder='0' src='"+getImageDirectoryPath()+"images/empty.gif'></iframe>"),widgetHTML=widgetHTML+"\t\t<img src='"+this.merchandisingAssociationItems[0].catEntry_Thumbnail+"' alt='"+this.merchandisingAssociationItems[0].catEntry_ShortDescription+"' class='img' width='70' height='70'/>\t</a><br />","true"==this.merchandisingAssociationItems[0].productDragAndDrop&&(widgetHTML+="\t\t</div>\t</div>"),"true"==this.merchandisingAssociationItems[0].showProductQuickView&&(widgetHTML=widgetHTML+" <div id='popupButton_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' class='main_quickinfo_button'><span class='secondary_button' >\n<span class='button_container' >\n<span class='button_bg' >\n<span class='button_top'>\n<span class='button_bottom'>\n<a id='QuickInfoButton_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' href='#' onclick='javaScript:var actionListImageAcct = new popupActionProperties(); actionListImageAcct.showWishList="+this.merchandisingAssociationItems[0].associationProductBuyable+"; actionListImageAcct.showAddToCart="+this.merchandisingAssociationItems[0].associationProductBuyable+"; showPopup("+this.merchandisingAssociationItems[0].catEntry_Identifier+",event,null,null,actionListImageAcct);' onkeypress='javaScript:var actionListImageAcct = new popupActionProperties(); actionListImageAcct.showWishList="+this.merchandisingAssociationItems[0].associationProductBuyable+"; actionListImageAcct.showAddToCart="+this.merchandisingAssociationItems[0].associationProductBuyable+"; showPopup("+this.merchandisingAssociationItems[0].catEntry_Identifier+",event,null,null,actionListImageAcct);' onblur='hidePopupButton("+this.merchandisingAssociationItems[0].catEntry_Identifier+");' role='button' aria-haspopup='true'>"+this.merchandisingAssociationItems[0].showProductQuickViewLable+"</a></span>\n</span>\n</span>\n</span>\n</span>\n</div>\n"),widgetHTML+="</div>",this.totalAssociationCount>1&&(this.associationThumbnailIndex>1&&(widgetHTML+="\t\t<a href='Javascript:categoryDisplayJS.showPreviousAssociation()'  id='WC_ProductAssociation_DownArrow_Link_1'>"),widgetHTML=widgetHTML+"\t\t<img src='"+this.baseCatalogEntryDetails[0].storeImage_Path+"i_down_arrow.png' alt='"+this.displayPrevAssociation+"'/></a>");var comboText=this.baseCatalogEntryDetails[0].associatedProductsName.replace(/%0/,this.baseCatalogEntryDetails[0].baseCatEntry_Name);comboText=comboText.replace(/%1/,this.merchandisingAssociationItems[0].catEntry_Name),widgetHTML=widgetHTML+"</div><div class='combo_text' id='WC_CategoryDisplayJS_div_2'>\n\t<h1 id='maHeader' class='status_msg'>"+comboText+"</h1>\n\t<span id='maPrice' class='grey'>"+totalPriceMsg+dojo.currency.format(totalPrice.toFixed(2),{currency:this.baseCatalogEntryDetails[0].currency})+"</span>\n</div>\n",widgetHTML=widgetHTML+"<input type='hidden' id='compareImgPath_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_Thumbnail_compare+"'/><input type='hidden' id='compareProductDetailsPath_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_ProductLink+"'/><input type='hidden' id='compareImgDescription_"+this.merchandisingAssociationItems[0].catEntry_Identifier+"' value='"+this.merchandisingAssociationItems[0].catEntry_ShortDescription+"'/>",associationDisplay.innerHTML=null,associationDisplay.innerHTML=widgetHTML,dojo.parser.parse(associationDisplay)},showNextAssociation:function(){this.associationThumbnailIndex<this.totalAssociationCount&&(this.associationThumbnailIndex=this.associationThumbnailIndex+1,this.initializeMerchandisingAssociation(this.associationThumbnailIndex))},showPreviousAssociation:function(){this.associationThumbnailIndex>1&&(this.associationThumbnailIndex=this.associationThumbnailIndex-1,this.initializeMerchandisingAssociation(this.associationThumbnailIndex))},AddAssociation2ShopCartAjax:function(baseProductId,baseProductQuantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex,associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");if(this.merchandisingAssociationItems=associationEntryJSON,this.baseItemAddedToCart=!1,"ProductBean"==this.merchandisingAssociationItems[0].catEntry_Type)this.Add2ShopCartAjax(baseProductId,baseProductQuantity),this.baseItemAddedToCart&&showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(t){return t},"marchandisingAssociationDisplay");else if("ItemBean"==this.merchandisingAssociationItems[0].catEntry_Type||"PackageBean"==this.merchandisingAssociationItems[0].catEntry_Type||"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var entitledItemJSON=eval("("+dojo.byId(baseProductId).innerHTML+")");this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId(),params=[];if(params.storeId=this.storeId,params.catalogId=this.catalogId,params.langId=this.langId,params.orderId=".",params.calculationUsage="-1,-2,-3,-4,-5,-6,-7",null==catalogEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);if(this.updateParamObject(params,"catEntryId",catalogEntryId,!1,-1),this.updateParamObject(params,"quantity",baseProductQuantity,!1,-1),"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var form=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId),catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value,catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])&&(catEntryId=this.getDefaultItem(catEntryArray[i])),0!=qty&&null!=qty||(qty=1),null==qty||""==qty||null==catEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);this.updateParamObject(params,"catEntryId",catEntryId,!1,-1),this.updateParamObject(params,"quantity",qty,!1,-1)}}else this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,!1,-1),this.updateParamObject(params,"quantity",1,!1,-1);if(!submitRequest())return;cursor_wait(),wc.service.invoke("AjaxAddOrderItem",params)}},AddMarchandisingAssociation2ShopCart:function(entitledItemId,form,quantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex,associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")"),entitledItemJSON;this.merchandisingAssociationItems=associationEntryJSON,entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId_1=this.getCatalogEntryId();if("ProductBean"==this.merchandisingAssociationItems[0].catEntry_Type){if(null==catalogEntryId_1)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);form.catEntryId_1.value=catalogEntryId_1,form.productId_1.value=catalogEntryId_1,form.quantity_1.value=quantity,this.merchandisingProductAssociationAddToCart=!0,this.merchandisingProductAssociationForm=form,showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(t){return t},"marchandisingAssociationDisplay")}else if("ItemBean"==this.merchandisingAssociationItems[0].catEntry_Type||"PackageBean"==this.merchandisingAssociationItems[0].catEntry_Type||"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){if(null==catalogEntryId_1)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);if(form.catEntryId_1.value=catalogEntryId_1,form.productId_1.value=catalogEntryId_1,form.quantity_1.value=quantity,"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId),catEntryArray=[];catEntryArray=bundleForm.catEntryIDS.value.toString().split(",");for(var catEntryCount=3,i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value,catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])&&(catEntryId=this.getDefaultItem(catEntryArray[i])),0!=qty&&null!=qty||(qty=1),null==qty||""==qty||null==catEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);if(0==i)form.catEntryId_2.value=catEntryId,form.productId_2.value=catEntryId,form.quantity_2.value=qty;else{var input1=document.createElement("input");input1.setAttribute("id","OrderAssociationItemAddForm_catEntryId_"+catEntryId),input1.setAttribute("type","hidden"),input1.setAttribute("name","catEntryId_"+catEntryCount),input1.setAttribute("value",catEntryId),form.appendChild(input1);var input2=document.createElement("input");input2.setAttribute("id","OrderAssociationItemAddForm_productId_"+catEntryId),input2.setAttribute("type","hidden"),input2.setAttribute("name","productId_"+catEntryCount),input2.setAttribute("value",catEntryId),form.appendChild(input2);var quantity1=document.createElement("input");quantity1.setAttribute("id","OrderAssociationItemAddForm_quantity_"+catEntryId),quantity1.setAttribute("type","hidden"),quantity1.setAttribute("name","quantity_"+catEntryCount),quantity1.setAttribute("value","1"),form.appendChild(quantity1),catEntryCount+=1}}}else form.catEntryId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier,form.productId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier,form.quantity_2.value="1";if(!submitRequest())return;form.submit()}},AddAssociation2ShopCart:function(t,e){var a=this.merchandisingProductAssociationForm;if(this.merchandisingProductAssociationAddToCart=!1,this.isParentBundleBean){var r;r=a.catEntryIDS.value.toString().split(",");for(var i=1,n=0;n<r.length;n++){var s=document.getElementById("quantity_"+r[n]).value,o=r[n];if(this.selectedProducts[r[n]]&&(o=this.getCatalogEntryIdforProduct(this.selectedProducts[r[n]])),0!=s&&null!=s||(s=1),null==s||""==s||null==o)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);var d=document.createElement("input");d.setAttribute("id","OrderItemAddForm_catEntryId_"+o),d.setAttribute("type","hidden"),d.setAttribute("name","catEntryId_"+i),d.setAttribute("value",o),i+=1,a.appendChild(d)}var c=document.createElement("input");c.setAttribute("id","OrderItemAddForm_catEntryId_"+t),c.setAttribute("type","hidden"),c.setAttribute("name","catEntryId_"+i),c.setAttribute("value",t),a.appendChild(c);var l=document.createElement("input");l.setAttribute("id","OrderItemAddForm_quantity_"+t),l.setAttribute("type","hidden"),l.setAttribute("name","quantity_"+i),l.setAttribute("value",e),a.appendChild(l),a.URL.value="AjaxOrderItemDisplayView",this.isParentBundleBean=!1}else a.catEntryId_2.value=t,a.productId_2.value=t,a.quantity_2.value=e;submitRequest()&&(a.submit(),this.merchandisingProductAssociationForm="")},AddAssociationItem2ShopCartAjax:function(baseItemId,baseItemQuantity,customParams){var ajaxShopCartService="AjaxAddOrderItem",identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex,associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");if(this.merchandisingAssociationItems=associationEntryJSON,this.baseItemAddedToCart=!1,"ProductBean"==this.merchandisingAssociationItems[0].catEntry_Type)this.AddItem2ShopCartAjax(baseItemId,baseItemQuantity,customParams),this.baseItemAddedToCart&&showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(t){return t},"marchandisingAssociationDisplay");else if("ItemBean"==this.merchandisingAssociationItems[0].catEntry_Type||"PackageBean"==this.merchandisingAssociationItems[0].catEntry_Type||"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var params=[];if(params.storeId=this.storeId,params.catalogId=this.catalogId,params.langId=this.langId,params.orderId=".",params.calculationUsage="-1,-2,-3,-4,-5,-6,-7",this.updateParamObject(params,"catEntryId",baseItemId,!1,-1),this.updateParamObject(params,"quantity",baseItemQuantity,!1,-1),"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var form=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId),catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value,catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])&&(catEntryId=this.getDefaultItem(catEntryArray[i])),0!=qty&&null!=qty||(qty=1),null==qty||""==qty||null==catEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);this.updateParamObject(params,"catEntryId",catEntryId,!1,-1),this.updateParamObject(params,"quantity",qty,!1,-1)}}else this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,!1,-1),this.updateParamObject(params,"quantity",1,!1,-1);if(!submitRequest())return;cursor_wait(),null!=customParams&&"undefined"!=customParams&&"dynamicKit"==customParams.catalogEntryType&&(ajaxShopCartService="AjaxAddPreConfigurationToCart"),wc.service.invoke(ajaxShopCartService,params)}},AddAssociationItem2ShopCart:function(form,quantity){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex,associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");if(this.merchandisingAssociationItems=associationEntryJSON,"ProductBean"==this.merchandisingAssociationItems[0].catEntry_Type)quantity&&(form.quantity_1.value=quantity),this.merchandisingProductAssociationAddToCart=!0,this.merchandisingProductAssociationForm=form,showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(t){return t},"marchandisingAssociationDisplay");else if("ItemBean"==this.merchandisingAssociationItems[0].catEntry_Type||"PackageBean"==this.merchandisingAssociationItems[0].catEntry_Type||"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){if(quantity&&(form.quantity_1.value=quantity),"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId),catEntryArray=[];catEntryArray=bundleForm.catEntryIDS.value.toString().split(",");for(var catEntryCount=3,i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value,catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])&&(catEntryId=this.getDefaultItem(catEntryArray[i])),0!=qty&&null!=qty||(qty=1),0==i)form.catEntryId_2.value=catEntryId,form.productId_2.value=catEntryId,form.quantity_2.value=qty;else{var input1=document.createElement("input");input1.setAttribute("id","OrderAssociationItemAddForm_catEntryId_"+catEntryId),input1.setAttribute("type","hidden"),input1.setAttribute("name","catEntryId_"+catEntryCount),input1.setAttribute("value",catEntryId),form.appendChild(input1);var input2=document.createElement("input");input2.setAttribute("id","OrderAssociationItemAddForm_productId_"+catEntryId),input2.setAttribute("type","hidden"),input2.setAttribute("name","productId_"+catEntryCount),input2.setAttribute("value",catEntryId),form.appendChild(input2);var quantity1=document.createElement("input");quantity1.setAttribute("id","OrderAssociationItemAddForm_quantity_"+catEntryId),quantity1.setAttribute("type","hidden"),quantity1.setAttribute("name","quantity_"+catEntryCount),quantity1.setAttribute("value","1"),form.appendChild(quantity1),catEntryCount+=1}}}else form.catEntryId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier,form.productId_2.value=this.merchandisingAssociationItems[0].catEntry_Identifier,form.quantity_2.value="1";if(!submitRequest())return;form.submit()}},AddAssociationBundle2ShopCartAjax:function(form){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex,associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");this.merchandisingAssociationItems=associationEntryJSON,this.baseItemAddedToCart=!1;var params=[];params.storeId=this.storeId,params.catalogId=this.catalogId,params.langId=this.langId,params.orderId=".",params.calculationUsage="-1,-2,-3,-4,-5,-6,-7";var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value,catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])&&(catEntryId=this.getDefaultItem(catEntryArray[i])),0!=qty&&null!=qty||(qty=1),null==qty||""==qty||null==catEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);this.updateParamObject(params,"catEntryId",catEntryId,!1,-1),this.updateParamObject(params,"quantity",qty,!1,-1),this.baseItemAddedToCart="true"}if("BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId),innerCatEntryArray=[];innerCatEntryArray=bundleForm.catEntryIDS.value.toString().split(",");for(var i=0;i<innerCatEntryArray.length;i++){var qty=document.getElementById("quantity_"+innerCatEntryArray[i]).value,innerCatEntryId=innerCatEntryArray[i];if(this.getDefaultItem(innerCatEntryArray[i])&&(innerCatEntryId=this.getDefaultItem(innerCatEntryArray[i])),0!=qty&&null!=qty||(qty=1),null==qty||""==qty||null==innerCatEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);this.updateParamObject(params,"catEntryId",innerCatEntryId,!1,-1),this.updateParamObject(params,"quantity",qty,!1,-1)}}else"PackageBean"!=this.merchandisingAssociationItems[0].catEntry_Type&&"ItemBean"!=this.merchandisingAssociationItems[0].catEntry_Type||(this.updateParamObject(params,"catEntryId",this.merchandisingAssociationItems[0].catEntry_Identifier,!1,-1),this.updateParamObject(params,"quantity",1,!1,-1));submitRequest()&&(cursor_wait(),wc.service.invoke("AjaxAddOrderItem",params),"ProductBean"==this.merchandisingAssociationItems[0].catEntry_Type&&showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(t){return t},"marchandisingAssociationDisplay"))},setOrderId:function(t){this.orderId=t},AddAssociationBundle2ShopCart:function(form){var identifierJSON="associatedCatEntries_"+this.associationThumbnailIndex,associationEntryJSON=eval("("+dojo.byId(identifierJSON).innerHTML+")");if(this.merchandisingAssociationItems=associationEntryJSON,this.isParentBundleBean=!0,"ProductBean"==this.merchandisingAssociationItems[0].catEntry_Type){this.merchandisingProductAssociationAddToCart=!0,this.merchandisingProductAssociationForm=form;var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var bundleItemsCount=1,i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value,catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])&&(catEntryId=this.getDefaultItem(catEntryArray[i])),null==catEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);form["catEntryId_"+catEntryArray[i]].value=catEntryId,bundleItemsCount+=1}showPopup(this.merchandisingAssociationItems[0].catEntry_Identifier,function(t){return t},"marchandisingAssociationDisplay")}else if("ItemBean"==this.merchandisingAssociationItems[0].catEntry_Type||"PackageBean"==this.merchandisingAssociationItems[0].catEntry_Type||"BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var catEntryArray=[];catEntryArray=form.catEntryIDS.value.toString().split(",");for(var bundleItemsCount=1,i=0;i<catEntryArray.length;i++){var qty=document.getElementById("quantity_"+catEntryArray[i]).value,catEntryId=catEntryArray[i];if(this.getDefaultItem(catEntryArray[i])&&(catEntryId=this.getDefaultItem(catEntryArray[i])),null==catEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);form["catEntryId_"+catEntryArray[i]].value=catEntryId,bundleItemsCount+=1}if("BundleBean"==this.merchandisingAssociationItems[0].catEntry_Type){var bundleForm=document.getElementById(this.merchandisingAssociationItems[0].catEntry_BundleFormId),innerCatEntryArray=[];innerCatEntryArray=bundleForm.catEntryIDS.value.toString().split(",");for(var i=0;i<innerCatEntryArray.length;i++){var qty=document.getElementById("quantity_"+innerCatEntryArray[i]).value,innerCatEntryId=innerCatEntryArray[i];if(this.getDefaultItem(innerCatEntryArray[i])&&(innerCatEntryId=this.getDefaultItem(innerCatEntryArray[i])),0!=qty&&null!=qty||(qty=1),null==qty||""==qty||null==innerCatEntryId)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU);var input2=document.createElement("input");input2.setAttribute("id","OrderItemAddForm_catEntryId_"+innerCatEntryId),input2.setAttribute("type","hidden"),input2.setAttribute("name","catEntryId_"+bundleItemsCount),input2.setAttribute("value",innerCatEntryId),form.appendChild(input2);var quantity2=document.createElement("input");quantity2.setAttribute("id","OrderItemAddForm_quantity_"+innerCatEntryId),quantity2.setAttribute("type","hidden"),quantity2.setAttribute("name","quantity_"+bundleItemsCount),quantity2.setAttribute("value","1"),form.appendChild(quantity2),bundleItemsCount+=1}}else{var input2=document.createElement("input");input2.setAttribute("id","OrderItemAddForm_catEntryId_"+this.merchandisingAssociationItems[0].catEntry_Identifier),input2.setAttribute("type","hidden"),input2.setAttribute("name","catEntryId_"+bundleItemsCount),input2.setAttribute("value",this.merchandisingAssociationItems[0].catEntry_Identifier),form.appendChild(input2);var quantity2=document.createElement("input");quantity2.setAttribute("id","OrderItemAddForm_quantity_"+this.merchandisingAssociationItems[0].catEntry_Identifier),quantity2.setAttribute("type","hidden"),quantity2.setAttribute("name","quantity_"+bundleItemsCount),quantity2.setAttribute("value","1"),form.appendChild(quantity2)}if(form.URL.value="AjaxOrderItemDisplayView",!submitRequest())return;form.submit()}},addToNewListFromProductDetail:function(entitledItemId,quantityElemId,currentPage){var entitledItemJSON;MessageHelper.hideAndClearMessage(),entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();if(null==catalogEntryId)return MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST),void(null!=dijit.byId("second_level_category_popup")&&hidePopup("second_level_category_popup"));this.addItemToNewListFromProductDetail(catalogEntryId,quantityElemId,currentPage)},addItemToNewListFromProductDetail:function(t,e,a){if(MessageHelper.hideAndClearMessage(),null!=t){var r=document.getElementById(e).value;if(null==r||""==r||r<=0||!RequisitionList.isNumber(r))return MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR),void(null!=dijit.byId("second_level_category_popup")&&hidePopup("second_level_category_popup"));if(this.ajaxMyAccount)var i="AjaxLogonForm?page=createrequisitionlist";else i="RequisitionListDetailView?editable=true&newList=true";var n=document.createElement("form");n.setAttribute("method","POST");var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("value",a),s.setAttribute("name","previousPage"),n.appendChild(s),n.action=i+"&catEntryId="+t+"&quantity="+r+"&storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId,document.body.appendChild(n),n.submit()}else MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST)},addBundleToNewListFromProductDetail:function(t,e){var a=t.numberOfProduct.value,r="";r=this.ajaxMyAccount?"AjaxLogonForm?page=createrequisitionlist":"RequisitionListDetailView?editable=true&newList=true";for(var i=1;i<=a;i++){var n=t["catEntryId_"+i].value;this.selectedProducts[n]&&(n=this.getCatalogEntryIdforBundleProduct(n,this.selectedProducts[n]));var s=t["quantity_"+i].value;if(null==s||""==s||s<=0||!RequisitionList.isNumber(s))return void MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);if(null==n)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST);r=r+"&catEntryId="+n+"&quantity="+s}var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("value",e),o.setAttribute("name","previousPage"),t.appendChild(o),r=r+"&numberOfProduct="+t.numberOfProduct.value+"&storeId="+this.storeId+"&catalogId="+this.catalogId+"&langId="+this.langId,t.action=r,t.submit()},addToExistingRequisitionList:function(entitledItemId,quantityElemId,ajaxAddToCart){var entitledItemJSON;entitledItemJSON=null!=dojo.byId(entitledItemId)?eval("("+dojo.byId(entitledItemId).innerHTML+")"):this.getEntitledItemJsonObject(),this.setEntitledItems(entitledItemJSON);var catalogEntryId=this.getCatalogEntryId();null!=catalogEntryId?this.addItemToExistingRequisitionList(catalogEntryId,quantityElemId,ajaxAddToCart):MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST)},addBundleToExistingRequisitionList:function(t,e){for(var a=document.getElementsByName("RequisitionListTableDisplay_RequisitionListSelection"),r=0;r<a.length;r++)if(a.item(r).checked)var i=a.item(r).value;if(e){var n=[];n.storeId=this.storeId,n.catalogId=this.catalogId,n.langId=this.langId,n.requisitionListId=i;var s=t.numberOfProduct.value;for(r=1;r<=s;r++){var o=t["catEntryId_"+r].value;this.selectedProducts[o]&&(o=this.getCatalogEntryIdforBundleProduct(o,this.selectedProducts[o]));var d=t["quantity_"+r].value;if(null==d||""==d||d<=0||!RequisitionList.isNumber(d))return void MessageHelper.displayeErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR);if(null==d||""==d||null==o)return void MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST);this.updateParamObject(n,"catEntryId",o,!1,-1),this.updateParamObject(n,"quantity",d,!1,-1),this.baseItemAddedToCart=!0}if(!submitRequest())return;cursor_wait(),wc.service.invoke("requisitionListAddItem_popup",n)}else{if(t.action="RequisitionListItemUpdate?requisitionListId="+i,this.ajaxMyAccount?t.URL.value="AjaxLogonForm?page=editrequisitionlist&requisitionListId="+i+"&editable=true":t.URL.value="RequisitionListDetailView?requisitionListId="+i+"&editable=true",!submitRequest())return;cursor_wait(),t.submit()}},addItemToExistingRequisitionList:function(t,e,a){if(null!=t){var r=document.getElementById(e).value;if(!RequisitionList.isNumber(r)||r<=0)return"productPopUpQty"==e?(MessageHelper.displayErrorMessage(MessageHelper.messages.QUANTITY_INPUT_ERROR),void(null!=dijit.byId("second_level_category_popup")&&hidePopup("second_level_category_popup"))):void MessageHelper.formErrorHandleClient(e,MessageHelper.messages.QUANTITY_INPUT_ERROR);for(var i=document.getElementsByName("RequisitionListTableDisplay_RequisitionListSelection"),n=0;n<i.length;n++)if(i.item(n).checked)var s=i.item(n).value;if(a){var o={};if(o.requisitionListId=s,o.catEntryId=t,o.quantity=r,o.storeId=this.storeId,o.catalogId=this.catalogId,o.langId=this.langId,!submitRequest())return;cursor_wait(),wc.service.invoke("requisitionListAddItem_popup",o)}else{var d=document.forms.RequisitionListPopupForm;if(d.requisitionListId.value=s,d.quantity.value=r,d.catEntryId.value=t,this.ajaxMyAccount?d.URL.value="AjaxLogonForm?page=editrequisitionlist&requisitionListId="+s+"&editable=true":d.URL.value="RequisitionListDetailView?requisitionListId="+s+"&editable=true",!submitRequest())return;cursor_wait(),d.submit()}}else MessageHelper.displayErrorMessage(MessageHelper.messages.ERR_RESOLVING_SKU_REQ_LIST)},setCurrentPageType:function(t){this.currentPageType=t},setCurrentCatalogEntryId:function(t){this.currentCatalogEntryId=t},removeFacet:function(t,e,a,r,i){for(var n=t+":"+e,s=$.getUrlVars(),o={},d=0;d<s.length;d++){var c=s[d],l=$.getUrlVar(c);o[c]=l}delete o.facet,o.filterFacet=n,o.metaData=a,null==i&&void 0==i||(o.facet=i);var u=document.location.protocol+"//"+document.location.host+document.location.pathname,p=!0;for(var c in o)p?(u+="?"+c+"="+encodeURIComponent(o[c]),p=!1):u+="&"+c+"="+encodeURIComponent(o[c]);return categoryDisplayJS.removeFromFacetCookie(r,e),document.location.href=u,!1},removeAllFacet:function(){for(var t=$.getUrlVars(),e={},a=0;a<t.length;a++){var r=t[a],i=$.getUrlVar(r);e[r]=i}delete e.facet,delete e.metaData;var n=document.location.protocol+"//"+document.location.host+document.location.pathname,s=!0;for(var r in e)s?(n+="?"+r+"="+encodeURIComponent(e[r]),s=!1):n+="&"+r+"="+encodeURIComponent(e[r]);return document.cookie="facets=;path=/;",document.location.href=n,!1},removeFromFacetCookie:function(t,e){if(""!=t){var a=decodeURIComponent($.cookie("facets")).replace("|"+t+":"+e,"");document.cookie="facets="+a+"; path=/"}},handleCategorySubscription:function(t,e){if(1==e||"true"==e){var a=document.forms[t],r={};if(r.DM_ReqCmd=a.DM_ReqCmd.value,r.storeId=a.storeId.value,r.catalogId=a.catalogId.value,r.langId=a.langId.value,r.categoryId=a.categoryId.value,!submitRequest())return;cursor_wait(),wc.service.invoke("AjaxCategorySubscribe",r)}else{(a=document.forms[t]).URL.value=location.href,a.submit()}},loadMoreResults:function(t){var e=parseInt($("#pageSize").val()),a=parseInt($("#resultsLeft").val()),r=parseInt($("#beginIndexCount").val());if(a>0){var i={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,beginIndex:r,categoryId:t,pageSize:e,searchType:"0"};$.get("AjaxContactLensCategoryResultsView",i,function(t){$(".results_grid").append(t),a<e?($("#currentResults").text(parseInt($("#currentResults").text())+a),$("#resultsLeft").val(a-a),$("#loadResultsButton").hide()):($("#resultsLeft").val(a-e),$("#currentResults").text(parseInt($("#currentResults").text())+e),$("#beginIndexCount").val(r+e))},"html")}},loadMoreResultsMobile:function(t,e){var a=parseInt($("#resultsLeft").val());isNaN(a)&&(a=parseInt($("#resultsLeftContacts").val()));var r=parseInt($("#beginIndexCount").val());if(isNaN(r)&&(r=parseInt($("#beginIndexCountContacts").val())),console.log("loadMoreResults pageSize "+e+" resultsLeft "+a+" beginIndexCount "+r),0==parseInt($("#loadMorePressedFlag").val())){$("#loadMorePressedFlag").val(1);e=e,a=parseInt($("#resultsLeft").val()),r=parseInt($("#beginIndexCount").val());if(a>0){var i={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,beginIndex:r,categoryId:t,pageSize:e,searchType:"0",facet:globalFacet};$.get("AjaxContactLensCategoryResultsView",i,function(t){a<=e?($("#currentResults").text(parseInt($("#currentResults").text())+a),$("#resultsLeft").length>0&&$("#resultsLeft").val(a-a),$("#resultsLeftContacts").length>0&&$("#resultsLeftContacts").val(a-a),$("#loadResultsButton").hide(),$(".items-shown",".resultsNumber").text(parseInt($("#currentResults").text()))):($("#resultsLeft").length>0&&$("#resultsLeft").val(a-e),$("#resultsLeftContacts").length>0&&$("#resultsLeftContacts").val(a-a),$("#currentResults").text(parseInt($("#currentResults").text())+e),$(".__prjid5_showable").text($("#resultsLeft").val()),$("#beginIndexCount").val(r+e),$(".items-shown",".resultsNumber").text(e+r),a-e<e&&$(".__prjid5_loadable").text($("#resultsLeft").val())),$("#loadMorePressedFlag").val(0),$("#Search_Area_div .results_grid .item_container").each(function(){manageListItem(discountedPricesManager,this),showBestDealBadge(this)}),$(".results_grid").append(t),monetateFiller.onContactsPLP()},"html")}}},loadMoreFrameResultsMobile:function(t){if(0==parseInt($("#loadMorePressedFlag").val())){$("#loadMorePressedFlag").val(1);var e=parseInt($("#pageSize").val()),a=parseInt($("#resultsLeft").val()),r=parseInt($("#beginIndexCount").val()),i=$("#searchType").val();if(void 0!=i&&""!=i||(i="0"),a>0){var n={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,beginIndex:r,categoryId:t,pageSize:e,searchType:i,facet:globalFacet,orderBy:globalOrder,metaData:globalMetadata};$.get("AjaxMobileFrameCategoryResultsView",n,function(t){$("#loadMorePressedFlag").val(0);var i=a-e;i<=e?($(".__prjid5_loadable").html(i),$(".__prjid5_showable").html(a-e)):($(".__prjid5_showable").html(a-e),$(".__prjid5_loadable").html(e)),a<=e?($("#currentResults").text(parseInt($("#currentResults").text())+a),$("#resultsLeft").val(a-a),$("#loadResultsButton").hide(),$(".items-shown",".resultsNumber").text(parseInt($("#currentResults").text()))):($("#resultsLeft").val(a-e),$("#currentResults").text(parseInt($("#currentResults").text())+e),$("#beginIndexCount").val(r+e),$(".items-shown",".resultsNumber").text(e+r)),$(".products-holder").append(t),monetateFiller.onGlassesPLP(),initColorCarousel(),initFaceShapeModal()},"html")}}},loadMoreFrameSearchResultsMobile:function(t){if(0==parseInt($("#loadMorePressedFlag").val())){$("#loadMorePressedFlag").val(1);var e=parseInt($("#pageSize").val()),a=parseInt($("#resultsLeft").val()),r=parseInt($("#beginIndexCount").val());if(a>0){var i={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,beginIndex:r,searchTerm:t,pageSize:e,searchType:"0",facet:globalFacet,orderBy:globalOrder};$.get("AjaxMobileFrameSearchResultsView",i,function(t){var i=a-e;i<=e?($(".__prjid5_loadable").html(i),$(".__prjid5_showable").html(a-e)):($(".__prjid5_showable").html(a-e),$(".__prjid5_loadable").html(e)),a<=e?($("#currentResults").text(parseInt($("#currentResults").text())+a),$("#resultsLeft").val(a-a),$("#loadResultsButton").hide(),$(".items-shown",".resultsNumber").text(parseInt($("#currentResults").text()))):($("#resultsLeft").val(a-e),$("#currentResults").text(parseInt($("#currentResults").text())+e),$("#beginIndexCount").val(r+e),$(".items-shown",".resultsNumber").text(e+r)),$("#loadMorePressedFlag").val(0),$(".products-holder").append(t),initColorCarousel(),initFaceShapeModal()},"html")}}}},categoryDisplayJS.HistoryTracker.prototype.back=categoryDisplayJS.goBack,categoryDisplayJS.HistoryTracker.prototype.forward=categoryDisplayJS.goForward;var DiscountedPricesManager=function(){var t,e="ordered_boxes_qty",a="u",r="t",i="r",n=!1;this.init=function(a){if(a){for(var r in t={},a){var i=a[r],o={};$.extend(o,i);var d=$.map(i,function(t,e){return isNaN(parseInt(e))?null:e});d.sort(s),o[e]=d,t[r.toLowerCase()]=o}n=!0}},this.isInitialized=function(){return n},this.findUnitPriceByBoxes=function(t,a){var r=o(t);if(!r)return null;var i=r[e];if(!i||i.length<=0)return null;for(var n=0;n<i.length&&!(i[n]>a);n++);return d(r,n-1)},this.findFirstUnitPrice=function(t){var e=o(t);return e?d(e,0):null},this.findLastUnitPrice=function(t){var e=o(t);return e?d(e,999):null};var s=function(t,e){return t-e},o=function(e){return t&&e?t[e.toLowerCase()]:null};function d(t,n){var s=t[e];if(!s||s.length<=0)return null;if(n>=s.length)n=s.length-1;else if(n<0)return null;var o=s[n],d=t[o];return[o,d[a],d[r],t[i]]}};DiscountedPricesManager.formatPriceNumber=function(t){return"$"+(t=(""+(t=t.toFixed(2))).replace(",","."))},DiscountedPricesManager.formatMessage||(DiscountedPricesManager.formatMessage=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,a){return void 0!==e[a]?e[a]:t})});var discountedPricesManager=new DiscountedPricesManager;$(document).ready(function(){window.DISCOUNTS_MAP&&discountedPricesManager.init(window.DISCOUNTS_MAP)});var LookingForRelated=function(){this.map={};var t=!1;this.init=function(e){this.map=e,t=!0},this.getByProductCode=function(t,e){if(!t)return null;var a=this.map[t.toUpperCase()];return a?a[e]:void 0},this.getRelatedProductByProductCode=function(t){return this.getByProductCode(t,"target")},this.getHtmlByProductCode=function(t){return this.getByProductCode(t,"html")},this.isInitialized=function(){return t}},lookingForRelated=new LookingForRelated;$(document).ready(function(){window.RELATED_PRODUCTS_MAP&&lookingForRelated.init(window.RELATED_PRODUCTS_MAP)});var ContactsMapInformations=function(){this.init=function(t){this._internalMap=t,this._initialized=!0},this.getProductById=function(t){return this._initialized&&this._internalMap&&this._internalMap[t.toLowerCase()]?this._internalMap[t.toLowerCase()]:{}},this.getProductName=function(t){return this.getProductById(t).name},this.getProductBrand=function(t){return this.getProductById(t).brand},this.getProductManufacturer=function(t){return this.getProductById(t).manuf},this.getProductType=function(t){return this.getProductById(t).type},this.getProductWater=function(t){return this.getProductById(t).water},this.getProductMaterial=function(t){return this.getProductById(t).material},this.getProductUrl=function(t){return this.getProductById(t).url},this.getProductPublicationDate=function(t){return this.getProductById(t).pubDate},this.isInitialized=function(){return!1}},contactsMapInformations=new ContactsMapInformations;function calculateContactsTotal(){if(products&&products[0]){var t,e=products[0].product_id;if(!e)return t="Cannot retrieve product-part from products[0]['product_id']!",void(window.console&&window.console.log&&window.console.log(t));e&&""!==e&&(e=e.toLowerCase());var a=0,r=0;""!=$(".box-regular-price").text()&&(r=parseFloat($(".box-regular-price").text().replace(/\$/,"")),a=parseFloat($("#rightQuantity").val())+parseFloat($("#leftQuantity").val()));var i,n=r*a,s=n,o=n,d=r;if(discountedPricesManager.isInitialized()){var c=discountedPricesManager.findUnitPriceByBoxes(e,a);if(c&&c.length>=4){var l=c[2],u=parseFloat(l);o=s=n+u,d=s/a,0!==u?($(".box-regular-price").parent().parent().hide(),$(".box-normal-price").parent().parent().show()):($(".box-regular-price").parent().parent().show(),$(".box-normal-price").parent().parent().hide())}else $(".box-regular-price").parent().parent().show(),$(".box-normal-price").parent().parent().hide()}if($.cookie("json_insurance")&&RiaHelper.checkSingleBenefit("contact")&&$("#__prjid5_insurance_toggle_CL div").hasClass("active")){var p=JSON.parse($.cookie("json_insurance")).data.contact[0].discount+JSON.parse($.cookie("json_insurance")).data.contact[0].reimbursement;""===p&&(p=0);var m=s-p;m<0&&(m=0),d=(o=m)/a}i=n-o;var g=DiscountedPricesManager.formatPriceNumber(s),h=DiscountedPricesManager.formatPriceNumber(o),I=DiscountedPricesManager.formatPriceNumber(n),y=DiscountedPricesManager.formatPriceNumber(i),f=DiscountedPricesManager.formatPriceNumber(d);i>0?($(".to-total").text(h),$(".to-total-quantity").text(I),$(".box-regular-price").parent().parent().hide(),$(".box-normal-price").parent().parent().show(),$(".total_details ").parent().parent().show(),$(".box-normal-price").text("  "+f),$(".to-total-saved-cl").show(),$("#saving-price").text(y),p>0?($(".box-normal-price").addClass("contact_lens_price_with_insurance"),$("#totals").addClass("contact_lens_total_price_with_insurance")):($(".box-normal-price").removeClass("contact_lens_price_with_insurance"),$("#totals").text(g),$("#totals").removeClass("contact_lens_total_price_with_insurance"))):($("#totals").text(I),$(".box-normal-price").parent().parent().hide(),$(".box-regular-price").parent().parent().show(),$(".to-total-saved-cl").hide(),$("#totals").removeClass("contact_lens_total_price_with_insurance"));a>=2&&"{0} boxes, {1}",$("#totals_price").text(DiscountedPricesManager.formatMessage(I));var v=$("#totals").text(),E=Number(v.replace(/[^0-9.-]+/g,""));if($("#afterpayPlacement").length>0&&$("#afterpayPlacement").attr("data-amount",E),"undefined"!=typeof affirm&&"undefined"!==$("#totals").text()){$("#affirmPrice").attr("data-amount",100*E);try{affirm.ui.ready(function(){affirm.ui.refresh()})}catch(t){console.error("Error refreshing Affirm: "+t)}}}}$(document).ready(function(){window.CONTACTS_MAP&&contactsMapInformations.init(window.CONTACTS_MAP)});var performInitialLoad=!1;function selectContactLensProductIfLoading(){if(performInitialLoad){var t=$.getUrlVar("productId");$("#productId").val(t),$("#productId").change(),performInitialLoad=!1}}function verifyPrescriptionComplete(){var t=!1;$(".to-pdp-patient-info select").each(function(){$(this).is(":visible")&&null===$(this).val()&&(t=!0)}),$(".to-pdp-patient-info input[type=text]").each(function(){$(this).is(":visible")&&""===$(this).val()&&(t=!0)}),parseInt($("#rightQuantity").val())>0&&$("#righteyeOD select").each(function(){$(this).is(":visible")&&null===$(this).val()&&(t=!0)}),parseInt($("#leftQuantity").val())>0&&$("#lefteyeOS select").each(function(){$(this).is(":visible")&&null===$(this).val()&&(t=!0)}),0===parseInt($("#rightQuantity").val())&&0===parseInt($("#leftQuantity").val())&&(t=!0),t?($(".to-checkout-footer #addToCartButton").hide(),$(".to-checkout-footer #addPrescriptionButton").show()):($(".to-checkout-footer #addToCartButton").show(),$(".to-checkout-footer #addPrescriptionButton").hide())}function getProductInformation(t){var e={storeId:categoryDisplayJS.storeId,catalogId:categoryDisplayJS.catalogId,langId:categoryDisplayJS.langId,productId:t};$.get("GetContactLensesByProductID",e,function(t){if(void 0!==t&&""!==t&&null!==t){var e=(t=$.parseJSON(t)).catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber,a={PRD_POWER:"Power",PRF_BASECURVE:"Bc",PRF_DIAMETER:"Dia",PRD_AXIS:"Axis",PRD_CYLINDER:"Cyl",PRD_COLOR:"Color",PRD_ADDITION_TXT:"Add"};if(t.catalogEntry.catalogEntryIdentifier.buyable&&1-t.catalogEntry.catalogEntryIdentifier.deleted){$.each(["rxRight","rxLeft"],function(e,r){$.each(t.attributes,function(t,e){var i=r+a[t],n=$("#"+i);$("span#"+i+"-span").remove(),$("input#"+i+"-input").remove(),n.html('<option disabled selected value="">select</option>'),e&&1==e.length?(n.parent().attr("disabled","disabled"),n.parent().find(".required-field").hide(),n.attr("disabled","disabled").hide().after('<span class="placeholder contact-lens" id="'+i+'-span">'+e[0]+"</span>").after('<input type="hidden" name="'+i+'" id="'+i+'-input" value="'+e[0]+'" />')):(n.parent().removeAttr("disabled"),$.each(e,function(t,e){n.append($("<option>",{value:e,text:e}))}),n.removeAttr("disabled").removeAttr("name").after('<input type="hidden" name="'+i+'" id="'+i+'-input" value="'+e[0]+'" />').change(function(){var t=$(this).attr("id")+"-input";$("#"+t).attr("value",$(this).val())}).show())})});var r=$("#rxRightCyl option").length>1||$("#rxRightAxis option").length>1;r=r&&0!=parseFloat($("#rxRightCyl option:nth-child(2)").val()),$(".astigmatism-only").toggle(r);var i=$("#rxRightColor option").length>1,n=i&&"Clear"==$("#rxRightColor option:nth-child(2)").val();n&&$("#rxRightColor, #rxLeftColor").val("Clear"),$(".color-only").toggle(i&&!n);var s=$("#rxRightAdd option").length>1;$(".add-only").toggle(s),verifyPrescriptionComplete()}var o=discountedPricesManager.findLastUnitPrice(e.toLowerCase());if(o){var d,c=0!==$(".partnumberitemprodrelpdp").length,l=o[0]*o[1];$(".partnumberitemprodrelpdp").each(function(){$(this).text();var t=discountedPricesManager.findLastUnitPrice($(this).text().toLowerCase());if(t){var e=t[0]*t[1];e<l?(d=$(this),l=e,c=!1):e===l&&(d=void 0,c=!1)}}),c?($(".badgedealnewest-ctnwrap .badge-bestdeal-pdp").show(),$(".badgedealnewest-ctnwrap .badge-newest-pdp").is(":hidden")?$("#contactLensesFormMobile .badge-bestdeal-pdp").css("top","0"):($(".to-pdp-container").css("margin-top","80px"),$(".badgedealnewest-ctnwrap").css("margin-top","-70px"))):d&&d.parent().find(".badgeitemrel").show()}calculateContactsTotal(),$(".badgedealnewest-ctnwrap .badge-newest-pdp").is(":hidden")&&$(".badgedealnewest-ctnwrap .badge-bestdeal-pdp").is(":hidden")&&$("#bazaar_voice_review_summary_wrapper").css("left",0);var u=discountedPricesManager.findLastUnitPrice(e.toLowerCase()),p=0;if(u){p=u[0]/2,$(".box_one_year").text(u[0]/2),u[1]!=u[3]&&($(".price_one_year_value").text(-1*u[2]),$(".price_one_year_value").parent().parent().show(),$(".price_one_year_value").parent().parent().removeClass("hide"));var m=discountedPricesManager.findFirstUnitPrice(e.toLowerCase());m[0]!=u[0]?($(".box_six_months").text(m[0]/2),m[1]!=m[3]&&($(".price_six_months_value").text(-1*m[2]),$(".price_six_months_value").parent().parent().show(),$(".price_six_months_value").parent().parent().removeClass("hide")),u[1]!=u[3]||m[1]!=m[3]?$(".box-regular-price").parent().parent().hide():(u[1]==u[3]&&m[1]!=m[3]||u[1]!=u[3]&&m[1]==m[3])&&$(".box-regular-price").parent().parent().show()):$(".box_six_months").text(m[0]/4)}else p=6,$(".box_one_year").text(2*p),$(".box_six_months").text(p);var g=$.parseJSON($.cookie("current_item_prescription"));$("#oneYearSupply").click(),$(".contact-lens-rx-area").show(),triggerContactLensUtag(t),cookiePrescriptionCheckNewItem(g),$("input[name=orderItemId]").val()&&(preselectContactPrescriptionInfo(),$("#customSupply").prop("checked",!0),$("#rightQuantity").change(),$("#leftQuantity").change(),$("#leftQuantity").parent().removeClass("disabled"),$("#rightQuantity").parent().removeClass("disabled"))}})}function preselectContactPrescriptionInfo(){$("select#rxRightPower option").each(function(){parseFloat($(this).val()).toFixed(2)==parseFloat($("input[name=rightContactsPower]").val()).toFixed(2)&&$(this).prop("selected",!0).change()}),$("select#rxLeftPower option").each(function(){parseFloat($(this).val()).toFixed(2)==parseFloat($("input[name=leftContactsPower]").val()).toFixed(2)&&$(this).prop("selected",!0).change()}),$("select#rxRightBc option").each(function(){parseFloat($(this).val()).toFixed(2)==parseFloat($("input[name=rightContactsBaseCurve]").val()).toFixed(2)&&$(this).prop("selected",!0).change()}),$("select#rxLeftBc option").each(function(){parseFloat($(this).val()).toFixed(2)==parseFloat($("input[name=leftContactsBaseCurve]").val()).toFixed(2)&&$(this).prop("selected",!0).change()}),$("select#rxRightDia option").each(function(){parseFloat($(this).val()).toFixed(2)==parseFloat($("input[name=rightContactsDiameter]").val()).toFixed(2)&&$(this).prop("selected",!0).change()}),$("select#rxLeftDia option").each(function(){parseFloat($(this).val()).toFixed(2)==parseFloat($("input[name=leftContactsDiameter]").val()).toFixed(2)&&$(this).prop("selected",!0).change()}),$("select#rxRightCyl option").each(function(){parseFloat($(this).val()).toFixed(2)==parseFloat($("input[name=rightContactsCylinder]").val()).toFixed(2)&&$(this).prop("selected",!0).change()}),$("select#rxLeftCyl option").each(function(){parseFloat($(this).val()).toFixed(2)==parseFloat($("input[name=leftContactsCylinder]").val()).toFixed(2)&&$(this).prop("selected",!0).change()}),$('select#rxRightAxis option[value="'+$("input[name=rightContactsAxis]").val()+'"]').prop("selected",!0).change(),$('select#rxLeftAxis option[value="'+$("input[name=leftContactsAxis]").val()+'"]').prop("selected",!0).change(),$('select#rxRightAdd option[value="'+$("input[name=rightContactsAdd]").val()+'"]').prop("selected",!0).change(),$('select#rxLeftAdd option[value="'+$("input[name=leftContactsAdd]").val()+'"]').prop("selected",!0).change(),$('select#rxRightColor option[value="'+$("input[name=rightContactsColor]").val()+'"]').prop("selected",!0).change(),$('select#rxLeftColor option[value="'+$("input[name=leftContactsColor]").val()+'"]').prop("selected",!0).change(),$('select#rightQuantity option[value="'+$("input[name=rightContactsQtyValue]").val()+'"]').prop("selected",!0).change(),$('select#leftQuantity option[value="'+$("input[name=leftContactsQtyValue]").val()+'"]').prop("selected",!0).change()}function manageListItem(t,e){var a='<span class="regularprice_msg">reg <span class="regularprice">{0}</span></span>',r=$(e).find(".item.item-tile"),i=r.attr("data-partnumber");if(i&&""!==i){i=i.toLowerCase();var n=t.findLastUnitPrice(i);if(n&&n[1]!=n[3]){var s=n[0],o=n[1],d=parseFloat(o),c=n[2],l=parseFloat(c),u=DiscountedPricesManager.formatPriceNumber(d),p=n[3],m=p,g=parseFloat(p),h=-1*l;(A=r.find(".offerprice span.productPriceSpan")).addClass("discountedprice-ctn");var I='<span class="contactlenses discountedprice">'+u+'</span><span class="regularprice">$'+m+"</span>",y=A.parent().parent().parent().find(".col:nth-child(2) p"),f=(A.parent().parent().find(".percent"),A.parent().parent().find(".listPrice span.productPriceSpan"));if(g){var v=100*(g-d)/g;I=I+'<span class="redtxt regularprice" style="display: none;">%'+(v=Math.round(v)).toFixed(0)+"</span>",I+='<div class="clearfix"></div>'}else f.hide(),y.hide();var E='<span class="regularprice_msg">reg <span class="regularprice">{0}</span></span>';if(1==s&&(E=a),h>0){var _=r.find(".badges .badge-savings");_.html("SAVE "+DiscountedPricesManager.formatPriceNumber(h)),_.show()}I+=$.cookie("json_insurance")?'<span class="contactlenses per_box">&nbsp;per box with instant savings before insurance</span>':'<span class="contactlenses per_box">&nbsp;per box with instant savings</span>',A.html(I),A.parent().parent().parent().find(".col:nth-child(2)").hide(),A.parent().parent().parent().find(".col:nth-child(1)").css("width","100%"),y.html(DiscountedPricesManager.formatMessage(E,DiscountedPricesManager.formatPriceNumber(g)))}else{var A;m=p,I='<span class="list contactlenses regprice discountedprice">'+(A=r.find(".offerprice span.productPriceSpan")).text().replace("per box","")+'</span><span class="list contactlenses per_box_normal">&nbsp;per box</span>';A.html(I),(y=A.parent().parent().parent().find(".col:nth-child(2) p")).text("")}}}function setupContactLenses101(){$(".content-types-Of-contacts .type-Content").hide(),$(".content-types-Of-contacts .type-Content:first").show(),$(".content-types-Of-contacts a").click(function(){$(".content-types-Of-contacts .type-Content").hide(),$(this).next(".type-Content").show()})}function buildMessage(t,e,a){if("EYEGLASSES_FRAMES"==e||"SUNGLASSES_FRAMES"==e){var r=a+" was just added to your cart";$.cookie("checkoutMessage",r,{path:"/"})}}function showBestDealBadge(t){isBestDeal($(t).find(".item").attr("data-partnumber"))&&$(t).find(".badge-bestdeal-pdp").show()}function isBestDeal(t){var e=discountedPricesManager.findLastUnitPrice(t.toLowerCase());if(e){var a=!1,r=e[0]*e[1],i=getRelatedList(t);if(i&&i.length>0)for(related in a=!0,i){var n=discountedPricesManager.findLastUnitPrice(i[related].toLowerCase());if(n){var s=n[0]*n[1];(s<r||s===r)&&(a=!1)}}return a}}function getRelatedList(t){var e=[];return void 0!=window.RELATED_CONTACTS_MAP&&(e=RELATED_CONTACTS_MAP[t.toLowerCase()]),e}function cookiePrescriptionCheckNewItem(t){null==t||t.productId!==$("#productId").val()?$.cookie("current_item_prescription",JSON.stringify({productId:$("#productId").val()})):($.cookie("current_item_prescription",JSON.stringify(t)),cookiePrescriptionPopulateValues())}function cookiePrescriptionAddValue(t,e){var a=$.parseJSON($.cookie("current_item_prescription"));null!=a&&(a[t]=e,$.cookie("current_item_prescription",JSON.stringify(a)))}function cookiePrescriptionPopulateValues(){for(var t=$.parseJSON($.cookie("current_item_prescription")),e=["BIRTH_MONTH","BIRTH_DAY","BIRTH_YEAR","rxRightPower","rxLeftPower","rxRightBc","rxLeftBc","rxRightDia","rxLeftDia","rxRightCyl","rxLeftCyl","rxRightAxis","lxLeftAxis","rightQuantity","leftQuantity"],a=0;a<e.length;a++)t.hasOwnProperty(e[a])&&$("select#"+e[a]+' option[value="'+t[e[a]]+'"]').prop("selected",!0).change();var r=["FIRST_NAME","LAST_NAME"];for(a=0;a<r.length;a++)t.hasOwnProperty(r[a])&&$("input#"+r[a]).val(t[r[a]]);(t.hasOwnProperty("rightQuantity")||t.hasOwnProperty("leftQuantity"))&&(t.leftQuantity===$(".box_one_year").text()&&t.rightQuantity===$(".box_one_year").text()?$("#oneYearSupply").click():t.leftQuantity===$(".box_six_months").text()&&t.leftQuantity===$(".box_six_months").text()?$("#sixMonthsSupply").click():($("#customSupply").prop("checked",!0),$("#rightQuantity").change(),$("#leftQuantity").change(),$("#leftQuantity").parent().removeClass("disabled"),$("#rightQuantity").parent().removeClass("disabled"))),verifyPrescriptionComplete()}$(document).ready(function(){var t=!1;$("#facetList .facet .facet-subnav .facet-link.active").each(function(t){let e=$(this).clone();try{e.filter(".vm").find("span.indent").text("Virtual Try On")}catch(t){}e.appendTo("#clone-facets-selected .facet-subnav")}),$("#facetListContactLenses .facet .facet-subnav .facet-link.active").each(function(t){$(this).clone().appendTo("#clone-facets-selected-cl .facet-subnav")}),$("#faceted_search .facettip").click(function(e){var a=$(this).parent(),r=a.data("facetprefix"),i=a.data("encodedlabel"),n=$("."+r.toLowerCase()+".numResults"),s=Number(n.text());if(a.hasClass("disabled"))return!1;a.toggleClass("inactive"),a.toggleClass("active"),$(this).toggleClass("ajaxProductCount"),$(this).toggleClass("ProductCount"),"FS"===r||"FC"===r?($(this).toggleClass("active"),$(this).toggleClass("disabled")):$(this).find("span.check").toggleClass("checked");var o=a.hasClass("inactive"),d=a.hasClass("active");o?(clearSelectedFacet(r,i,null),0===s?$(this).closest(".facet").find(".results").toggleClass("hide"):(s--,n.text(s),0===s&&$(this).closest(".facet").find(".results").toggleClass("hide"))):d&&(!function(t,e,a){var r=decodeURIComponent(read_cookie("facets"));"BR"!=t&&"CLB"!=t||(e=decodeURIComponent(e));var i,n=r.split("|");for(i=0;i<n.length;i++)if(""!==n[i]&&null!==n[i]&&void 0!==n[i]){var s=n[i].split(":");t.indexOf("CL")>-1&&-1==s[0].indexOf("CL")?r=r.replace("|"+s[0]+":"+s[1],""):-1==t.indexOf("CL")&&s[0].indexOf("CL")>-1&&(r=r.replace("|"+s[0]+":"+s[1],""))}var o=encodeURIComponent(r+"|"+t+":"+e);if(document.cookie="facets="+o+"; path=/",a){var d=$(a);document.location.href=d.attr("href")}}(r,i,null),s++,n.text(s),$(this).closest(".facet").find(".results").removeClass("hide"));var c=[];return $("#facetList, #facetListContactLenses").each(function(){$(this).find("li.active").each(function(){var t=$(this).attr("data-facetvalue");t.indexOf("%2B")>-1&&(t=t.replace("%2B","%252B")),c.push(t)})}),t=!0,!1}),$("#clone-facets-selected .facettip, #clone-facets-selected-cl .facettip").click(function(e){var a=$(this).parent(),r=a.data("facetprefix"),i=(a.data("encodedlabel"),$("."+r.toLowerCase()+".numResults"));Number(i.text());if(a.hasClass("disabled"))return!1;a.toggleClass("inactive"),a.toggleClass("active"),$(this).toggleClass("ajaxProductCount"),$(this).toggleClass("ProductCount"),"FS"===r||"FC"===r?($(this).toggleClass("active"),$(this).toggleClass("disabled")):$(this).find("span.check").toggleClass("checked");var n=$(this).parent().attr("data-facetvalue");return $('#facetList li.active[data-facetvalue="'+n+'"] a').click(),$(".applyButton")[0].click(),t=!0,!1}),$(".applyButton").click(function(){var e=a(t,!0),r=$(this).attr("href");e.includes("price_USD")&&(r=r.replaceAll("searchType=0","searchType=100")),$(this).attr("href",r+e)});var e=[];function a(t,e){var a=[],r=e?"&facet=":"facet=";return $("#facetList, #facetListContactLenses").each(function(){$(this).find("li.active").each(function(){var t=$(this).attr("data-facetvalue");t.indexOf("%2B")>-1&&(t=t.replace("%2B","%252B"));var e=t.substring(0,t.indexOf("%")),r=function(t,e){var a;for(a=0;a<t.length;a++)if(t[a].indexOf(e)>-1)return a;return-1}(a,e);r>-1?a[r]+="OR("+t+")":a.push("("+t+")")})}),a.length>0?r+"("+a.join(")AND(")+")":t?r:""}$("#facetList, #facetListContactLenses").each(function(){$(this).find("li.active").each(function(){e.push($(this).attr("data-facetvalue"))})}),$("#clone-facets-selected, #clone-facets-selected-cl").each(function(){$(this).find("li.active").each(function(){e.push($(this).attr("data-facetvalue"))})}),$(document).ready(function(){var t=function(){null!=JSON.parse($.cookie("json_insurance"))?($("#__prjid5_insurance_toggle_CL div").toggleClass("active"),$("#__prjid5_insurance_toggle div").hasClass("active")&&sendDLOnInsuranceToggleClick(),calculateContactsTotal()):(openSticky&&openSticky(),$("html, body").animate({scrollTop:$("#sticky-box").offset().top},500))};$("#__prjid5_insurance_toggle_CL .toggleInsurance_CL_btn").on("click",t).on("keydown",function(e){13===e.keyCode&&t.apply(this)})}),$(".ajaxAddItemToTryAtHome").click(function(){return ajaxAddItemToTryAtHome(this),!1}),$("#ShopCartDisplay").on("click",".ajaxAddItemToTryAtHome",function(){return ajaxAddItemToTryAtHome(this),!1}),$(".close-add-to-tah-modal").click(function(){return $("#AddToTryAtHomeModal").dialog("close"),!1}),$("#addToCartContainer").on("click",".add-to-cart-name.add-to-cart-contacts-only, .add-to-cart-close",function(){return $("#AddToCartModal").dialog("close"),!1}),$(".rxInput").click(function(){rxInputToggle()}),$(".show-prism, .hide-prism").click(function(){return $(".show-prism").toggle(),$(".hide-prism").toggle(),$(".all-prism").toggle(),$("#rxRightPrism, #rxLeftPrism").prop("checked",!1),!1}),$("#rxRightPrism").click(function(){rxRightPrismToggle()}),$("#rxLeftPrism").click(function(){rxLeftPrismToggle()}),$("#rxPupilDistanceBoth").click(function(){pdToggle()}),$("#selectContacts").on("click",function(){return $("#addToCartButton").click(),!1}),antiReflectiveSelect(!0),$(".addOns").click(function(){addOnsClick($(this))}),$(".lens-color").on("click",".catentry-radio",function(){var t=$(this).parents(".lens-holder").find("label").clone().children().remove().end().text();$(".lens-row").find(".color").html(t),$("#lensColor").val(t)}),$("#rxLensForm").validate({onfocusout:!1,onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",ignore:":disabled, :hidden",rules:{addRxLenses:{required:!0},rx:{required:!0},lens:{required:!0},productId:{required:!0},lensCatentryId:{required:!0},rxFirstName:{required:!0},rxLastName:{required:!0},rxDoctorName:{required:!0},rxDoctorNumber:{required:!0,number:!0},rxPupilDistance:{required:!0},rxRightPupilDistance:{required:!0},rxLeftPupilDistance:{required:!0},lensColor:{required:!0}},errorPlacement:function(t,e){"rx"==$(e).attr("name")?$(t).insertAfter(e.siblings("label")):"lens"==$(e).attr("name")?$(t).insertAfter($(".lens-color-default")):"productId"==$(e).attr("name")?$("[name^=productId]:visible").each(function(){var e=$(this);$error=$(t).clone(),$price=e.siblings(".price"),$error.insertAfter($price)}):"addRxLenses"==$(e).attr("name")?$(t).insertBefore(".checkedPrescription"):"rxPupilDistance"==$(e).attr("name")?$(t).insertAfter($(".pd-container")):$(t).insertAfter(e),$(t).attr("aria-live","rude")}}),$("#contactLensesFormMobile").validate({onfocusout:!1,onkeyup:!1,onclick:!1,errorClass:"required",errorElement:"span",errorPlacement:function(t,e){e.parent().hasClass("custom-select")?"BIRTH_MONTH"==e.attr("name")||"BIRTH_DAY"==e.attr("name")||"BIRTH_YEAR"==e.attr("name")?t.insertAfter($(".custom-select.year")):"rxRightPower"==e.attr("name")||"rxRightCyl"==e.attr("name")||"rxRightAxis"==e.attr("name")||"rxRightBc"==e.attr("name")||"rxRightDia"==e.attr("name")||"rxRightColor"==e.attr("name")?t.insertBefore($('label[for="rightQuantity"]').parent()):"rxLeftPower"==e.attr("name")||"rxLeftCyl"==e.attr("name")||"rxLeftAxis"==e.attr("name")||"rxLeftBc"==e.attr("name")||"rxLeftDia"==e.attr("name")||"rxLeftColor"==e.attr("name")?t.insertBefore($('label[for="leftQuantity"]').parent()):"leftQuantity"==e.attr("name")||"rightQuantity"==e.attr("name")?($(e).parent().addClass("required"),$(".contacts-error-box").show()):t.insertAfter($(e).closest(".custom-select")):t.insertAfter(e)},rules:{rxRightPower:{required:function(){return $("#rightQuantity").val()>0}},rxRightCyl:{required:function(){return $("#rightQuantity").val()>0}},rxRightAxis:{required:function(){return $("#rightQuantity").val()>0}},rxRightBc:{required:function(){return $("#rightQuantity").val()>0}},rxRightDia:{required:function(){return $("#rightQuantity").val()>0}},rxRightColor:{required:function(){return $("#rightQuantity").val()>0}},rightQuantity:{required:!0},rxLeftPower:{required:function(){return $("#leftQuantity").val()>0}},rxLeftCyl:{required:function(){return $("#leftQuantity").val()>0}},rxLeftAxis:{required:function(){return $("#leftQuantity").val()>0}},rxLeftBc:{required:function(){return $("#leftQuantity").val()>0}},rxLeftDia:{required:function(){return $("#leftQuantity").val()>0}},rxLeftColor:{required:function(){return $("#leftQuantity").val()>0}},leftQuantity:{required:!0,contactQuantity:{left:"#leftQuantity",right:"#rightQuantity"}},FIRST_NAME:{required:!0},LAST_NAME:{required:!0},BIRTH_MONTH:{required:!0,date:!0},BIRTH_DAY:{required:!0},BIRTH_YEAR:{required:!0}},messages:{BIRTH_MONTH:{required:"Is required"},BIRTH_DAY:{required:"Is required"},BIRTH_YEAR:{required:"Is required"},rxRightPower:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxRightCyl:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxRightAxis:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxRightBc:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxRightDia:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxRightColor:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxLeftPower:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxLeftCyl:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxLeftAxis:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxLeftBc:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxLeftDia:{required:"Please make all prescription selections to add the contact lens boxes to your cart"},rxLeftColor:{required:"Please make all prescription selections to add the contact lens boxes to your cart"}},groups:{phone1:"BIRTH_MONTH BIRTH_DAY BIRTH_YEAR",rxRight:"rxRightPower rxRightCyl rxRightAxis rxRightBc rxRightDia rxRightColor",rxLeft:"rxLeftPower rxLeftCyl rxLeftAxis rxLeftBc rxLeftDia rxLeftColor"},submitHandler:function(t){$(".contacts-error-box-header").hide(),$(".dob-error-box").hide(),$(".contacts-error-box").hide(),$(".custom-select").removeClass("required");for(var e=$("#contactLensesFormMobile").serializeArray(),a={},r=0;r<e.length;r++)a[e[r].name]=e[r].value;categoryDisplayJS.AddItem2ShopCartAjax($("#productId").val(),null,a),triggerContactAdd()}}),$("#lensOptionsPageNext").click(function(){return document.URL.indexOf("fromPage=ShopCart")>0&&($("#addRxLenses1:checked").length>0&&$.cookie("checkoutMessage","Prescription has been removed for your lens",{path:"/"}),$("#addRxLenses2:checked").length>0&&$.cookie("checkoutMessage","Prescription has been added for your lens",{path:"/"})),$("#lensOptionsSubmitButton").click(),!1}),rxInputToggle(),pdToggle(),rxRightPrismToggle(),rxLeftPrismToggle();var r=$("#rxRightPrism, #rxLeftPrism").is(":checked");if($(".all-prism, .hide-prism").toggle(r),$(".show-prism").toggle(!r),$("#categoryId").change(function(){if(""!=$(this).val()){var t={storeId:constants.ajaxParams.storeId,catalogId:constants.ajaxParams.catalogId,langId:constants.ajaxParams.langId,categoryId:$(this).val()};$("#productId").empty().append($("<option></option>").text("select your lenses")).prop("disabled",!0),$.get("GetCatalogEntriesByCategoryID",t,function(t){$.each(t.catalogEntries,function(t,e){$("#productId").append($("<option></option>").attr("value",t).text(e))}),$("#productId").prop("disabled",!1),selectContactLensProductIfLoading()},"json")}else $("#productId").prop("disabled",!0)}),$("#productId").change(function(){if(""!=$(this).val()){var t={storeId:categoryDisplayJS.storeId,catalogId:categoryDisplayJS.catalogId,langId:categoryDisplayJS.langId,productId:$(this).val()};$.get("GetContactLensesByProductID",t,function(t){if(void 0!==t&&""!==t&&null!==t){var e=(t=$.parseJSON(t)).catalogEntry.catalogEntryIdentifier.externalIdentifier.partNumber;$(".contact-lens-product-image").attr("src",$("#akamaiContact").val()+e+"_fr.png?imwidth="),$(".contact-lens-name").html(t.catalogEntry.description[0].name),$(".contact-lens-price").html(t.catalogEntry.offerPrice),$(".contact-lens-short-description").html(t.catalogEntry.description[0].shortDescription);var a={PRD_POWER:"Power",PRF_BASECURVE:"Bc",PRF_DIAMETER:"Dia",PRD_AXIS:"Axis",PRD_CYLINDER:"Cyl",PRD_COLOR:"Color",PRD_ADDITION_TXT:"Add"};if(1==t.catalogEntry.catalogEntryIdentifier.buyable&&0==t.catalogEntry.catalogEntryIdentifier.deleted){$.each(["rxRight","rxLeft"],function(e,r){$.each(t.attributes,function(t,e){var i=r+a[t],n=$("#"+i);$("span#"+i+"-span").remove(),$("input#"+i+"-input").remove(),n.html("<option>"),e&&1==e.length?(n.parent().attr("disabled","disabled"),n.parent().find(".required-field").hide(),n.attr("disabled","disabled").hide().after('<span class="placeholder contact-lens" id="'+i+'-span">'+e[0]+"</span>").after('<input type="hidden" name="'+i+'" id="'+i+'-input" value="'+e[0]+'" />')):(n.parent().removeAttr("disabled"),$.each(e,function(t,e){n.append($("<option>",{value:e,text:e}))}),n.removeAttr("disabled").removeAttr("name").after('<input type="hidden" name="'+i+'" id="'+i+'-input" value="'+e[0]+'" />').change(function(){var t=$(this).attr("id")+"-input";$("#"+t).attr("value",$(this).val())}).show())})});var r=$("#rxRightCyl option").length>1||$("#rxRightAxis option").length>1;r=r&&0!=parseFloat($("#rxRightCyl option:nth-child(2)").val()),$(".astigmatism-only").toggle(r);var i=$("#rxRightColor option").length>1,n=i&&"Clear"==$("#rxRightColor option:nth-child(2)").val();n&&$("#rxRightColor, #rxLeftColor").val("Clear"),$(".color-only").toggle(i&&!n);var s=$("#rxRightAdd option").length>1;$(".add-only").toggle(s),verifyPrescriptionComplete()}calculateContactsTotal(),$(".contact-lens-rx-area").show(),triggerContactLensUtag(t)}})}else $(".contact-lens-product-area").hide()}),$("#addToCartButton").on("click",function(){$(".contacts-error-box").hide(),$(".custom-select").removeClass("required"),$('select[name="rightQuantity"]').parent().removeClass("required"),""==$('select[name="rxRightPower"]').val()&&""==$('select[name="rxRightBc"]').val()&&""==$('select[name="rxRightCyl"]').val()&&""==$('select[name="rxRightAxis"]').val()&&""==$('select[name="rxRightDia"]').val()||($(".contacts-error-box").show(),$('select[name="rightQuantity"]').parent().addClass("required"))}),$("#ContactLensesRefillForm").submit(function(){return $(this).find(':input[name="rightQuantity"]').val()+$(this).find(':input[name="leftQuantity"]').val()==0?$(".contacts-refill-error-box").show():categoryDisplayJS.AddItem2ShopCartAjax($(this).find(':input[name="productId"]').val(),null,$(this).serializeObject()),!1}),$("#rightQuantity, #leftQuantity").change(function(){cookiePrescriptionAddValue($(this).attr("id"),$(this).val()),calculateContactsTotal()}),$("#productId").length>0&&$.getUrlVar("mfname")&&$.getUrlVar("productId")){var i=$.getUrlVar("mfname").replace(/\+/g," ");performInitialLoad=!0,$("#categoryId").find('option[data-brandcategory="'+i+'"]').prop("selected",!0),$("#categoryId").change()}if($("ul.price .price:last").on("blur",function(){$("a.hovered").removeClass("hovered"),$("ul.price").addClass("hide").removeClass("hide")}),$(".item .round-button").focus("focus",function(){$(this).closest(".item").addClass("focused")}),$(".item .round-button").blur("focus",function(){$(this).closest(".item").removeClass("focused")}),"undefined"!=typeof currentTrialPack){for(var n=0,s=0,o=0;o<trialPacks.length;o++)if(trialPacks[o].catEntryId==currentTrialPack){n=o+1,(s=o-1)<0&&(s=trialPacks.length-1),n>=trialPacks.length&&(n=0);break}populateTrialPack(".last-pack",trialPacks[s]),populateTrialPack(".next-pack",trialPacks[n])}$(".rxInput").bind("change",function(){$('label[for="uploadPrescription"]').next().hasClass("required")&&($('label[for="uploadPrescription"]').next().remove(),$(".rxInput").unbind("change"))}),$("#contactLensesFormMobile #addToCartButton").on("click",function(t){currentOrderTAH&&(t.preventDefault(),$(".tah-error-message").text($("#tah-remove-tah-error").html()),$(".tah-error-message").show())}),$("#Search_Area_div").length>=1&&$("#Search_Area_div .results_grid .item_container").each(function(){manageListItem(discountedPricesManager,this),showBestDealBadge(this)})}),$(document).ready(function(){$("#rightQuantity").on("change",function(){verifyPrescriptionComplete()}),$("#leftQuantity").on("change",function(){verifyPrescriptionComplete()}),$(".contact-lens-rx-area select").on("change",function(){cookiePrescriptionAddValue($(this).attr("id"),$(this).val()),verifyPrescriptionComplete()}),$(".search-tab a").click(function(){$(this).parent().hasClass("products")&&($(this).addClass("active"),$(".search-tab.contacts.tab a").removeClass("active"),$(".sort-by.col.glasses").removeClass("hide").attr("aria-hidden","false"),$("#box").removeClass("hide").attr("aria-hidden","false"),$("#box-2").addClass("hide").attr("aria-hidden","true"),$(".glasses-facets").removeClass("hide").attr("aria-hidden","false"),$(".contact-lenses-facets").addClass("hide").attr("aria-hidden","true"),$(".faceted_searchCL").hide(),$("#clone-facets-selected").show()),$(this).parent().hasClass("contacts")&&($(this).addClass("active"),$(".search-tab.products.tab a").removeClass("active"),$(".sort-by.col.glasses").addClass("hide").attr("aria-hidden","true"),$("#box").addClass("hide").attr("aria-hidden","true"),$("#box-2").removeClass("hide").attr("aria-hidden","false"),$(".glasses-facets").addClass("hide").attr("aria-hidden","true"),$(".contact-lenses-facets").removeClass("hide").attr("aria-hidden","false"),$(".facet-search-glasses").hide(),$("#clone-facets-selected").hide())})}),$(window).load(function(){JSON.parse(null!=$.cookie("json_insurance"))&&$("#__prjid5_insurance_toggle_CL .toggleInsurance_CL_btn").click()}),$(document).ready(function(){window.preventDefault=function(t){t.preventDefault()}}),$(document).ready(function(){$("#facet-type").hide(),$(".facet-subnav.type li").each(function(){"progressive"!=$(this).data("encodedlabel")&&"multi-focal"!=$(this).data("encodedlabel")&&"Rx sunglasses"!=$(this).data("encodedlabel")||$(this).hide()}),$("#espot_MOB_PLP_Contacts_Header_BannerNoFilters").length>0&&$("#espot_MOB_PLP_Contacts_Header_Banner").show(),$("#contactLensesFormMobile").length>0&&getProductInformation($("#contactLensesFormMobile input#productId")[0].defaultValue),$(".to-table-row.list-lenses").length>0&&$(".to-table-row.list-lenses").each(function(){0==$(this).find("article").length&&$(this).css("display","none")}),"R"==constants.ajaxParams.loggedIn||$(".registered").length>0?($("#login-user-hamburger").hide(),$(".registered","#navigation").show(),$(".name","#navigation").length>0&&$(".name","#navigation").html($("#contact-info").html().trim()),$(".guest","#navigation").hide()):($("#login-user-hamburger").show(),$("#login-user-hamburger .submenu").hide(),$("#login-user-hamburger").removeClass("has-drop"),$("#login-user-hamburger a").attr("href","LogonForm?catalogId=12751&langId=-1&storeId=12001")),$("#title-plp-shop").length>0&&$("#title-plp-shop").text($("#title-plp-shop").text().replace("sunglasses sunglasses","sunglasses"))});
//# sourceMappingURL=CategoryDisplay.js.map