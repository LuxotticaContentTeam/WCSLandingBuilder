var canadaURL="",storeSearchRequiredMessage="",invalidPostalCode="";function populateStoreLocatorSearchBox(){var e=$.getUrlVar("locationEntry"),o=$("#locationEntry"),t=$.cookie("to_city"),r=$.cookie("to_state"),a=$.cookie("to_lastValidStoreSearch");if(!o.length||""!=$.trim(o.val())&&o.val()!=o.attr("placeholder"))utag_data.form_name="find a store",utag_data.form_field=error_list;else if(null!=e&&""!=e)$("#locationEntry").attr("value",e.replace(/\+/g," "));else if(a)$("#locationEntry").val(a);else{var n=t+", "+r;t&&r&&"null"!=t&&"null"!=r&&/\w/.test(n)&&$("#locationEntry").val(n)}}function isStoreLocatorPage(){return $(".store-locator-page").length>0}function renderLatLong(e,o){var t="",r=!1,a=!1;if(t=t+e[0].location.lat()+"|"+e[0].location.lng(),o!==google.maps.GeocoderStatus.OK?("street_address"==e[0].types[0]||null!=e[0].address_components[e[0].address_components.length-1].short_name&&e[0].address_components[e[0].address_components.length-1].short_name==$("#currentCountryName").val())&&(r=!0):(a=!0,requestSubmitted=!1),r||storeLocatorJS.noValidate){r&&storeLocatorJS.currentForm.find('input[name="latLong"]').val(t);var n=null;n=null!=window.lastSearchForm&&$(window.lastSearchForm).find("[id=locationEntry]")?$(window.lastSearchForm).find("[id=locationEntry]").val():$("#locationEntry").val(),$.cookie("to_lastValidStoreSearch",n,{path:"/"}),$.cookie("to_latitude",e.results[0].locations[0].latLng.lat,{path:"/"}),$.cookie("to_longitude",e.results[0].locations[0].latLng.lng,{path:"/"});var s=null!=window.lastSearchForm&&"recs-form"==$(window.lastSearchForm).attr("id");storeLocatorJS.isStoreLocatorResultsPage()&&!s?!isFirst&&isStoreLocatorPage()?(storeLocatorJS.displayMoreLocation(!0,!0),isFirst=!0):isFirst||(storeLocatorJS.displayMoreLocation(!0,!1),isFirst=!0):window.location="AjaxStoreLocatorDisplayView?"+storeLocatorJS.currentForm.serialize()}else{if(a)$("span[for=locationEntry],#ErrorDivStoreSearch,#ModalErrorDivStoreSearch").hide(),$("#currentCountryName").val(),fromModal?fromModal&&$("#ModalErrorDivStoreSearch").text("Please enter a valid US address, city or Zip Code."):$("#ErrorDivStoreSearch").text("Please enter a valid US address, city or Zip Code."),$("#ErrorDivStoreSearch").siblings("div#map_accountDashBoard").size()>0?$("#ErrorDivStoreSearch").insertAfter($("#locationEntry")):$("#ErrorDivStoreSearch").siblings("form#storeSearchForm").size()>0?$("#ErrorDivStoreSearch").appendTo($("#ErrorDivStoreSearch").siblings("form#locationEntry")).css("clear","none"):"map"==$("#ErrorDivStoreSearch").parent("form").siblings("div#map").attr("id")?$("#ErrorDivStoreSearch").insertAfter($("#ErrorDivStoreSearch").parent("form").find("#locationEntry")).css("clear","none").css("position","absolute").css("top","104px"):$("#ErrorDivStoreSearch").insertAfter($("#locationEntry")),$("#ErrorDivStoreSearch").show(),$("#ModalErrorDivStoreSearch").show();else{if("US"==$("#currentCountryName").val()){$("#ErrorDivStoreSearch").insertAfter($("#locationEntry"));$(".ca .ca_flag").attr("href");fromModal?fromModal&&$("#ModalErrorDivStoreSearch").html("Please enter a valid US address, city or Zip Code."):$("#ErrorDivStoreSearch").html("Please enter a valid US address, city or Zip Code."),$("span[for=locationEntry]").hide()}else{$(".us .us_flag").attr("href");fromModal?fromModal&&$("#ModalErrorDivStoreSearch").html("Please enter a valid US address, city or Zip Code."):$("#ErrorDivStoreSearch").html("Please enter a valid US address, city or Zip Code."),$("span[for=locationEntry]").hide()}$("#ErrorDivStoreSearch").siblings("div#map_accountDashBoard").size()>0?$("#ErrorDivStoreSearch").appendTo($("#ErrorDivStoreSearch").siblings("div#map_accountDashBoard").find("#storeSearchForm")):$("#ErrorDivStoreSearch").siblings("form#storeSearchForm").size()>0?$("#ErrorDivStoreSearch").appendTo($("#ErrorDivStoreSearch").siblings("form#storeSearchForm")).css("clear","none"):"map"==$("#ErrorDivStoreSearch").parent("form").siblings("div#map").attr("id")&&$("#ErrorDivStoreSearch").insertAfter($("#ErrorDivStoreSearch").parent("form").find(".submit-find-store")).css("clear","none").css("position","absolute").css("top","104px"),$("#ErrorDivStoreSearch").show(),$("#ModalErrorDivStoreSearch").show()}requestSubmitted=!1}}function sendLocationDL(e,o){var t=getBasicDLObject();t.stores=[],t.zip_code=e,t.site_events=o;var r=0;$(".storeLocation").each(function(e,o){var a={};a.result_position=r,a.store_id=$(o).attr("data-unique-id"),a.address=$(o).find(".TOAddressForStoreLocator")[0].innerText,a.city=$(o).find(".TOCityForStoreLocator")[0].innerText,a.state=$(o).find(".TOStateForStoreLocator")[0].innerText,a.miles_from_customer=$(o).find(".store_icon")[0].innerText.split("?")[0]+" miles",a.store_name=$(o).find(".store_title")[0].innerText,a.avail_exam=!0,a.online_scheduling=!0,r++,t.stores.push(a)}),sessionStorage.setItem("store_list",JSON.stringify(t.stores)),callTrackAnalytics(t)}$(document).ready(function(){storeLocatorJS.setupBasicModals(),storeLocatorJS.addDoctorModalScrollBars(),storeLocatorJS.setupDoctorInfoModal(),$(document).keydown(function(e){if(13==e.keyCode&&$('[id="locationEntry"]').is(":focus")){var o=$('[id="locationEntry"]').filter(":focus").closest("form").find('.submit-find-store, input[type="submit"]').first();o.length?o.click():$(".submit-find-store").click()}}),$("#texas_flow_modal").dialog({autoOpen:!1,draggable:!1,resizable:!1,modal:!0,zIndex:9999,width:$(window).width()-45,position:[10,$(window).height()/2-$("#texas_flow_modal").height()/2]}),$(".openTexasFlowModal").click(function(e){e.preventDefault(),storeLocation=$(this).attr("data-id"),$("#texas_flow_modal").dialog("open")}),$("#california_flow_modal").dialog({autoOpen:!1,draggable:!1,resizable:!1,modal:!0,zIndex:9999,width:$(window).width()-45,position:[10,$(window).height()/2-$("#california_flow_modal").height()/2]}),$(".openCaliforniaFlowModal").on("click",function(e){e.preventDefault(),storeLocation=$(this).data("id"),$("#california_flow_modal").dialog("open")}),$.validator.addMethod("USPostalCode",function(e,o){return $("span[for=locationEntry],#ErrorDivStoreSearch").hide(),!MessageHelper.IsNumeric(e)||/^\d{5}|\d{5}-\d{4}$/.test(e)},"Please Enter a Valid US Zip Code"),$.validator.addMethod("CityValidation",function(e,o){var t=document.getDirectionsForm,r=!0;return"City"!=t.city.value&&""!=t.city.value&&0!=t.city.value.length||(r=!1),r}),$.validator.addMethod("Address1Validation",function(e,o){var t=document.getDirectionsForm,r=!0;return"Address 1"!=t.address1.value&&""!=t.address1.value&&0!=t.address1.value.length||(r=!1),r}),"US"==$("#currentCountryName").val()?(storeSearchRequiredMessage="Please enter a valid City, State, or ZIP Code",error_list.push(storeSearchRequiredMessage),invalidPostalCode="Please enter a valid ZIP code",canadaURL="LensCrafters.ca"):(storeSearchRequiredMessage="Please enter a valid City, Province or Postal Code",error_list.push(storeSearchRequiredMessage),invalidPostalCode="Please enter a valid Postal code",canadaURL="LensCrafters.com");var e={onfocusout:!1,onclick:!1,onkeyup:!1,errorClass:"required",errorElement:"span",rules:{modalLocationEntry:{required:!0,USPostalCode:!0,antipattern:otherCountryZipPattern}},messages:{modalLocationEntry:{required:storeSearchRequiredMessage,minlength:"minimum 5 digits",USPostalCode:invalidPostalCode,antipattern:"Did you mean to go to "+canadaURL.link("https://"+canadaURL)+"?"}},submitHandler:function(e){$("span[for=modalLocationEntry],#ModalErrorDivStoreSearch").hide(),storeLocatorJS.handleStoreSearchForm($(e))},invalidHandler:function(e,o){cursor_clear(),$("span[for=modalLocationEntry],#ModalErrorDivStoreSearch").hide()},errorPlacement:function(e,o){$("span[for=modalLocationEntry],#ModalErrorDivStoreSearch").hide(),"storeSearchForm"==$(o).parent("form").attr("id")?$(e).insertAfter($(o).parent("form").find(".submit-find-store")).css("clear","none"):"storeSearchFormChange"==$(o).parent("form").attr("name")?"map"==$(e).parent(o).siblings("div#map").attr("id")?$(e).insertAfter($(o).parent("form").find(".submit-find-store")).css("clear","none").css("position","absolute").css("top","104px"):$(e).insertAfter($(o).parent("form").find(".submit-find-store")).css("clear","none"):"storeSearchFormChange"==$(o).parent("form").attr("name")?$(e).insertAfter($(o).parent("form").find(".submit-find-store")).css("clear","none"):"storeSearchForm"==$(o).parent("div").parent("form").attr("id")?$(e).insertAfter($(o).parent("div").parent("form").find(".submit-find-store")):$(e).insertAfter(o)}},o={onfocusout:!1,onclick:!1,onkeyup:!1,errorClass:"required",errorElement:"span",rules:{locationEntry:{required:!0,USPostalCode:!0,antipattern:otherCountryZipPattern}},messages:{locationEntry:{required:" ",minlength:"minimum 5 digits",USPostalCode:invalidPostalCode,antipattern:"Did you mean to go to "+canadaURL.link("https://"+canadaURL)+"?"}},submitHandler:function(e){$("span[for=locationEntry],#ErrorDivStoreSearch").hide(),storeLocatorJS.handleStoreSearchForm($(e))},invalidHandler:function(e,o){cursor_clear(),$("span[for=locationEntry],#ErrorDivStoreSearch").hide()},errorPlacement:function(e,o){$("span[for=locationEntry],#ErrorDivStoreSearch").hide(),"storeSearchForm"==$(o).parent("form").attr("id")?$(e).insertAfter($(o).parent("form").find(".submit-find-store")).css("clear","none"):"NewStoreLocationAddForm"==$(o).parent("form").attr("name")?"map"==$(e).parent(o).siblings("div#map").attr("id")?$(e).insertAfter($(o).parent("form").find(".submit-find-store")).css("clear","none").css("position","absolute").css("top","104px"):$(e).insertAfter($(o).parent("form").find(".submit-find-store")).css("clear","none"):"StoreLocationAddForm"==$(o).parent("form").attr("name")?$(e).insertAfter($(o).parent("form").find(".submit-find-store")).css("clear","none"):"storeSearchFormAdd"==$(o).parent("div").parent("form").attr("id")?($(e).insertAfter($(o).parent("div").parent("form").find(".submit-find-store")),$("span[for=locationEntry],#ErrorDivStoreSearch").hide()):$(e).insertAfter(o)}};if($("#storeSearchForm").validate(o),$("#storeSearchFormChange").validate(e),$("#storeSearchFormGo1").validate(o),$("#storeSearchFormGo2").validate(o),$("#storeSearchFormGo3").validate(o),$("#storeSearchFormAdd").validate(o),$("#recs-form").validate(o),delete o.rules,$("#storeSearchFormNoRules").validate(o),storeLocatorJS.isStoreLocatorResultsPage()){var t=!1,r=!1;if(isStoreLocatorPage()&&$("#storeResultNumber").length&&"0"!=$("#storeResultNumber").val()&&(t=!0,r=!0),isStoreLocatorPage()&&$("#storeResultNumber").length){var a=$("#StoreLocator_ProductId").val();if(""!=a&&void 0!=a)storeResultNumber>0?utagViewSafe({page_name:"in store product look up",sc_event:"event31,event40"}):utagViewSafe({page_name:"in store product look up",sc_event:"event31,event41"});else{storeResultNumber>0&&("event10,event11",storeResultNumber)}}null!=$.getUrlVar("latLong")?($("#latLong").val($.getUrlVar("latLong")),storeLocatorJS.initializeMapquest(t,r)):$(".storeLocatorResults:visible").length>0&&storeLocatorJS.initializeMapquest(t,r),otherCountryZipPattern.test($("#locationEntry").val())&&($("span[for=locationEntry],#ErrorDivStoreSearch").hide(),$("#storeSearchForm").submit())}}),storeLocatorJS={formName:"",checkField:function(e,o){this.formName=e;var t=e.zipOrCity.value,r="";if(r=void 0!==o||null===o?o:$(e).parent().parent().find(".ErrorMessageDivClass"),null==e.zipOrCity.value||0==e.zipOrCity.value.length)r.html(MessageHelper.messages.INVALID_SEARCH_VALUE_MOBILE);else{sendDLOnSearchLocationFooter(e.zipOrCity.value);var a=new google.maps.Geocoder;try{a.geocode({address:t,componentRestrictions:{country:this.formName.countryName.value}},function(e,o){storeLocatorJS.retrieveGeocodeResults(r,e,o)}),$.cookie("to_lastValidStoreSearch",e.zipOrCity.value,{path:"/"})}catch(e){utagFiller.setOEEError("Error getting data from service")}}},checkFieldAjax:function(e){this.formName=e;var o=e.zipOrCity.value,t=$(e).parent().parent().find(".ErrorMessageDivClass");null==e.zipOrCity.value||0==e.zipOrCity.value.length?t.html(MessageHelper.messages.INVALID_SEARCH_VALUE_MOBILE):((new google.maps.Geocoder).geocode({address:o,componentRestrictions:{country:this.formName.countryName.value}},function(e,o){storeLocatorJS.retrieveGeocodeResultsAjax(t,e,o)}),$.cookie("to_lastValidStoreSearch",e.zipOrCity.value,{path:"/"}))},bindInfoWindowEvents:function(){$("a.make-preferred-store").toggleClass("sign-in-link",!constants.ajaxParams.loggedIn),$("a.make-preferred-store").toggleClass("makePreferred",constants.ajaxParams.loggedIn);var e=function(e){$("#StoreAddedMsgDiv").dialog("open"),tooptipContentObj=$(this);var o=$(this).parents(".mqabasicwnd-content");0==o.length&&(o=$("#storeInfoDiv"));var t=o.find(".stLocId").html();null==t?(t=$(this).data("stlocid"),o=$(this).parents(".store"),$("body").data("storeInfo",o.children(".store-address").clone())):$("body").data("storeInfo",o.clone());var r={},a=storeLocatorJS.pois["stLocId-"+t];return a&&a.toggleInfoWindow(),userStoresArray.push(t),storeAddedResponseDiv=o,r.storeId=constants.ajaxParams.storeId,r.catalogId=constants.ajaxParams.catalogId,r.langId=constants.ajaxParams.langId,r.stLocId=t,r.storeName=o.find(".storeName").html(),null==r.storeName&&(r.storeName=o.find(".store-name").html()),null!=this.preferredStoreNumber&&""!=this.preferredStoreNumber&&(r.preferredStoreNumber=this.preferredStoreNumber),$(".responseStoreNameLabel").html(r.storeName),r.primary="0",r.storeNickName="",r.requesttype="ajax",$.ajax({url:getAbsoluteURL()+"AjaxUpdatePreferredStoreCmd",data:r,dataType:"html",type:"post",complete:function(e){try{var o=filterAjaxResponse(e.responseText);storeLocatorJS.storeAddedResponseDiv=$("#StoreAddedAsPrefferedDiv"),storeLocatorJS.storeId=o.storeId,storeLocatorJS.langId=o.langId,storeLocatorJS.catalogId=o.catalogId,storeLocatorJS.stLocId=o.stLocId.toString(),storeLocatorJS.storeName=o.storeName}catch(e){console&&console.error("Could not add preferred store")}},error:function(){console&&console.error("Could not add preferred store")}}),e.preventDefault(),!1};navigator.userAgent.indexOf("Mobile"),$(".makePreferred").off("click").on("click",e),$(".sign-in-link").unbind("click"),$(".sign-in-link").on("click",function(){return showLogonModal(),!1})},retrieveGeocodeResults:function(e,o,t){t!==google.maps.GeocoderStatus.OK?(e.html(MessageHelper.messages.INVALID_SEARCH_VALUE_MOBILE),e.show()):("street_address"==o[0].types[0]||o[0].address_components.length>1&&null!=o[0].address_components[o[0].address_components.length-1].short_name&&o[0].address_components[o[0].address_components.length-1].short_name==this.formName.countryName.value)&&null!=o[0].geometry.location.lat()&&null!=o[0].geometry.location.lng()?(this.formName.geoCodeLatitude.value=o[0].geometry.location.lat(),this.formName.geoCodeLongitude.value=o[0].geometry.location.lng(),$.cookie("to_latitude",o[0].geometry.location.lat(),{path:"/"}),$.cookie("to_longitude",o[0].geometry.location.lng(),{path:"/"}),this.formName.action=this.formName.storeLocatorResultsURL.value,this.formName.submit()):(e.html(MessageHelper.messages.INVALID_SEARCH_VALUE_MOBILE),e.show())},retrieveResultsFindNearMeAjax:function(){URL=this.formName.storeLocatorResultsURL.value;var e={storeId:this.formName.storeId.value,langId:this.formName.langId.value,catalogId:this.formName.catalogId.value,productId:this.formName.productId.value,type:this.formName.type.value,geoCodeLatitude:this.formName.geoCodeLatitude.value,geoCodeLongitude:this.formName.geoCodeLongitude.value};"http:"==location.protocol?URL=URL.replace("https:","http:"):URL=URL.replace("http:","https:"),$.ajax({url:URL,data:$.param(e),type:"post",success:function(e){var o=$('form[name="'+storeLocatorJS.formName.name+'"]').attr("id").replace("store_locator_form","");$('form[name="'+storeLocatorJS.formName.name+'"]').find("#storelocator_loading").hide(),$('form[name="'+storeLocatorJS.formName.name+'"]').find(".zip_go").hide(),$("#storelocator_results"+o).append(e),$("#storelocator_results"+o).show()}})},retrieveGeocodeResultsAjax:function(e,o,t){if(t!==google.maps.GeocoderStatus.OK)e.html(MessageHelper.messages.INVALID_SEARCH_VALUE_MOBILE);else if("street_address"==o[0].types[0]||null!=o[0].address_components[o[0].address_components.length-1].short_name&&o[0].address_components[o[0].address_components.length-1].short_name==this.formName.countryName.value)if(null!=o[0].geometry.location.lat()&&null!=o[0].geometry.location.lng()){URL=this.formName.storeLocatorResultsURL.value;var r={storeId:this.formName.storeId.value,langId:this.formName.langId.value,catalogId:this.formName.catalogId.value,productId:this.formName.productId.value,type:this.formName.type.value,geoCodeLatitude:o[0].geometry.location.lat(),geoCodeLongitude:o[0].geometry.location.lng()};"http:"==location.protocol?URL=URL.replace("https:","http:"):URL=URL.replace("http:","https:"),console.log(URL),$.ajax({url:URL,data:$.param(r),type:"post",success:function(e){var o=$('form[name="'+storeLocatorJS.formName.name+'"]').attr("id").replace("store_locator_form","");$('form[name="'+storeLocatorJS.formName.name+'"]').find(".zip_go").hide(),$("#storelocator_results"+o).append(e),$("#storelocator_results"+o).show()}})}else e.html(MessageHelper.messages.INVALID_SEARCH_VALUE_MOBILE);else e.html(MessageHelper.messages.INVALID_SEARCH_VALUE_MOBILE),e.show()},displayMoreResultsAjax:function(e){URL=e.storeLocatorResultsURL.value;var o={storeId:e.storeId.value,langId:e.langId.value,catalogId:e.catalogId.value,productId:e.productId.value,type:e.type.value,geoCodeLatitude:e.geoCodeLatitude.value,geoCodeLongitude:e.geoCodeLongitude.value,resultLimit:e.resultLimit.value};"http:"==location.protocol?URL=URL.replace("https:","http:"):URL=URL.replace("http:","https:"),$.ajax({url:URL,data:$.param(o),type:"post",success:function(o){var t=$(e).attr("data-partNumber");$("#storelocator_results"+t).empty(),$("#storelocator_results"+t).append(o)}})},displayStoreHours:function(e){document.getElementById("hours-section_"+e).parentNode.classList.toggle("show-hours")},getLocationAjax:function(e){navigator.geolocation?($('form[name="'+e.name+'"]').find("#storelocator_loading").show(),this.formName=e,navigator.geolocation.getCurrentPosition(function(o){e.geoCodeLatitude.value=o.coords.latitude,e.geoCodeLongitude.value=o.coords.longitude,storeLocatorJS.retrieveResultsFindNearMeAjax()},function(){$('form[name="'+e.name+'"]').find("#ErrorMessageDiv").text("We can't locate you, please try using a Zip Code or City"),$("#zip_or_city").addClass("required"),$('form[name="'+e.name+'"]').find("#storelocator_loading").hide()},{timeout:1e4})):this.formName.errorMsgKey.value="STLOC_NOT_SUPPORTED"},getLocation:function(e){navigator.geolocation?(navigator.geolocation.getCurrentPosition(storeLocatorJS.showPosition,storeLocatorJS.showError),$.cookie("to_lastValidStoreSearch","",{path:"/"})):(this.formName.errorMsgKey.value="STLOC_NOT_SUPPORTED",this.formName.action=e.storeLocatorURL.value,this.formName.submit())},showPosition:function(e){var o=document.forms.locations_store_locator_form;o.geoCodeLatitude.value=e.coords.latitude,o.geoCodeLongitude.value=e.coords.longitude,(new google.maps.Geocoder).geocode({address:e.coords.latitude+","+e.coords.longitude},function(e,o){storeLocatorJS.retrieveCountry(e)})},retrieveCountry:function(e){var o=document.forms.locations_store_locator_form,t=storeLocatorJS.getAddressComponent(e[0],"country");void 0!==t&&null!=t&&o.countryName.value==t.short_name?(o.action=o.storeLocatorResultsURL.value,o.submit()):(o.action=o.storeLocatorURL.value,o.errorMsgKey.value="MSTLOCRES_NO_STORE_CURRENT_LOCATION",o.submit())},getAddressComponent:function(e,o){for(var t=e.address_components,r=0;r<t.length;r++)for(var a=t[r].types;0<a.length;a++)if(a[0]==o)return t[r];return null},calltoClick:function(){null!=utag&&utag.link({link_name:"callClick"})},drivingDirectionUtag:function(){sendLocationDL($.cookie("to_lastValidStoreSearch"),{get_directions:!0})},showError:function(e){switch(this.formName=document.forms.locations_store_locator_form,this.formName.action=this.formName.storeLocatorURL.value,e.code){case e.PERMISSION_DENIED:this.formName.errorMsgKey.value="MSTLOCRES_NO_STORE_CURRENT_LOCATION",this.formName.submit();break;case e.POSITION_UNAVAILABLE:this.formName.errorMsgKey.value="STLOC_UNAVAILABLE",this.formName.submit();break;case e.TIMEOUT:this.formName.errorMsgKey.value="STLOC_TIMEOUT",this.formName.submit();break;case e.UNKNOWN_ERROR:this.formName.errorMsgKey.value="STLOC_UNKNOWN_ERROR",this.formName.submit()}},setupBasicModals:function(){$("[data-modal-id]").click(function(){var e="#"+$(this).attr("data-modal-id");return $(e).dialog({modal:!0}),!1})},addDoctorModalScrollBars:function(){var e=$("#doctor-accordion");scrollableHeight=e.height()-$("#the-accordion").height()||0,scrollableHeight<=0?$("#slider-vertical-doctor-modal").hide():$("#slider-vertical-doctor-modal").show(),$("#slider-vertical-doctor-modal").slider({orientation:"vertical",range:"max",min:0,max:scrollableHeight,value:scrollableHeight,create:function(e,o){},slide:function(o,t){e.css({top:t.value-scrollableHeight})},change:function(o,t){e.css({top:t.value-scrollableHeight})}})},setupDoctorInfoModal:function(){$("body").on("click","[data-store-number]",function(){var e=$(this),o=e.attr("data-store-number"),t=e.attr("data-online"),r=!1;t&&"true"==t&&(r=!0);var a={storeId:constants.ajaxParams.storeId,langId:constants.ajaxParams.langId,catalogId:constants.ajaxParams.catalogId,storeNumber:o,online:r};return $.ajax({url:getAbsoluteURL()+"AjaxDoctorInfoView",data:$.param(a),dataType:"html",type:"post",complete:function(e){try{var o=e.responseText;$("#doctorInformationModalContent").html(o),$("#doctorInformationModalContent").find(".openTexasFlowModal").click(function(e){e.preventDefault(),storeLocation=$(this).attr("data-id"),$("#texas_flow_modal").dialog("open")}),$("#content_wrapper_box").addClass("hide"),$("#doctorInformationModal").removeClass("hide");var t=$("#doctorInformationModal");t.find(".cancel").bind("click",function(){t.find(".cancel").unbind("click"),$("#doctorInformationModal").addClass("hide"),$("#content_wrapper_box").removeClass("hide")}),$(window).scrollTop(0),$(this).height($(document).height())}catch(e){MessageHelper.displayErrorMessage(constants.error.ajax)}}}),!1})},isStoreLocatorResultsPage:function(){return $(".storeLocatorResults").length>0},isPreferredStoresPage:function(){return $(".stores").length>0},handleStoreSearchForm:function(e){miCounter=0,storeLocatorJS.currentForm=e;var o=e.find('input[name="locationEntry"]').val();(fromModal=!1,o||(o=e.find('input[name="modalLocationEntry"]').val(),fromModal=!0),storeLocatorJS.noValidate="storeSearchFormNoRules"==storeLocatorJS.currentForm.attr("id"),"CA"==constants.ajaxParams.countryName&&(o=o),document.getElementById("ErrorDivStoreSearch")&&(document.getElementById("ErrorDivStoreSearch").innerHTML=""),storeLocatorJS.isStoreLocatorResultsPage()&&""==o&&MessageHelper.formErrorHandleClient("location",MessageHelper.messages.ERROR_SearchBoxEmpty),""!=o)&&($.cookie("zip_code",JSON.stringify(o),{path:"/"}),(new google.maps.Geocoder).geocode({address:o,componentRestrictions:{country:this.formName.countryName.value}},function(e,o){renderLatLong(e,o)}),window.lastSearchForm=e)},checkAndSubmitZipCode:function(){if(""===$("#locationEntry").val())return $("#ErrorMessageDiv").text(MessageHelper.messages.INVALID_SEARCH_VALUE_MOBILE),!1;if(""==$("#form_footer_location").attr("action")){$.cookie("to_lastValidStoreSearch",$("#locationEntry").val(),{path:"/"}),$("#form_footer_location").attr("action","AjaxStoreLocatorResultsView");try{$("#form_footer_location").submit(),utagFiller.setOEEError("Error getting data from service")}catch(e){utagFiller.setOEEError("Error getting data from service")}}}};var directionsPage={directionsUrl:null,mapIndex:null,completeDirectionsUrl:null,openAndPopulateDirectionsPage:function(e,o,t,r,a,n){$(".toBeHiddenOnDirectionPage").hide(),$(".toBeShownOnDirectionPage").show(),this.directionsUrl="https://www.google.com/maps/dir/?api=1&destination="+e+" "+o+" "+t,$(".destination-container .shop-name").html(a),$(".destination-container .address").html(e),$(".destination-container .address2").html(o+", "+t),$(".destination-container .phone").html(r),this.mapIndex=n},goToGoogleDirections:function(){var e=void 0!==$("input[name=startingAddress]").val()?$("input[name=startingAddress]").val():"",o=void 0!==$("input[name=startingCity]").val()?$("input[name=startingCity]").val():"",t=void 0!==$("input[name=startingState]").val()?$("input[name=startingState]").val():"",r=void 0!==$("input[name=startingZipCode]").val()?$("input[name=startingZipCode]").val():"";this.completeDirectionsUrl=this.directionsUrl;var a="&origin="+e+" "+o+" "+t+" "+r;return a.length>10&&(this.completeDirectionsUrl=this.completeDirectionsUrl+a),window.location=encodeURI(this.completeDirectionsUrl),!1},closeDirectionsPage:function(){$(".toBeShownOnDirectionPage").hide(),$(".toBeHiddenOnDirectionPage").show()}};$(".toggleMapOnDirections").on("click",function(){$(this).next().toggleClass("directions_specific_map"),$(this).next().hasClass("directions_specific_map")?($(this).next().css("background-image",$("#map_loc_"+directionsPage.mapIndex).css("background-image")),$(this).html("hide map")):$(this).html("view on map")});
//# sourceMappingURL=StoreLocator.js.map