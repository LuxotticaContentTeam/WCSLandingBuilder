function getMetaValue(e){var t="";return t=null!==document.querySelector("meta[name="+e+"][content]")?document.querySelector("meta[name="+e+"][content]").content:t}window._trackAnalytics||(window._trackAnalytics=function(){});var absoluteURL=getMetaValue("absoluteURL"),imageDirectoryPath=getMetaValue("imageDirectoryPath"),styleDirectoryPath=getMetaValue("styleDirectoryPath"),supportPaymentTypePromotions="false"!=getMetaValue("supportPaymentTypePromotions"),subsFulfillmentFrequencyAttrName=getMetaValue("subsFulfillmentFrequencyAttrName"),subsPaymentFrequencyAttrName=getMetaValue("subsPaymentFrequencyAttrName"),subsTimePeriodAttrName=getMetaValue("subsTimePeriodAttrName"),commerceStoreId=getMetaValue("storeId"),commerceCatalogId=getMetaValue("catalogId"),commerceLangId=getMetaValue("langId"),storeId=commerceStoreId,catalogId=commerceCatalogId,langId=commerceLangId,currentOrderId="",orderId="",_dl={},currentOrderTAH=!1,isAuthenticated=!1;function getAbsoluteURL(e){if(""!=absoluteURL){var t=document.URL,r="";-1!=t.indexOf("://")&&(r=t.substring(0,t.indexOf("://")));t="";if(-1!=absoluteURL.indexOf("://")&&(t=absoluteURL.substring(0,absoluteURL.indexOf("://"))),e)return"https"+absoluteURL.substring(absoluteURL.indexOf("://"));r!=t&&(absoluteURL=r+absoluteURL.substring(absoluteURL.indexOf("://")))}return absoluteURL}function getImageDirectoryPath(){return imageDirectoryPath}function getStyleDirectoryPath(){return styleDirectoryPath}"G"!=getMetaValue("contextUserType")&&(isAuthenticated=!0),void 0!==window.dojo&&(window.dojo.version="1.7"),dojo.addOnLoad(function(){0<$(".currentOrderIdElem").length&&(orderId=$(".currentOrderIdElem").val(),constants.ajaxParams.orderId=orderId,currentOrderId=orderId),(currentOrderItemCount=0)<$(".currentOrderItemCountElem").length&&(currentOrderItemCount=$(".currentOrderItemCountElem").val());var e=commerceCatalogId.substr(0,5);CommonContextsJS.setCommonParameters(commerceLangId,commerceStoreId,commerceCatalogId),CommonControllersDeclarationJS.setCommonParameters(commerceLangId,commerceStoreId,e),CommonControllersDeclarationJS.setControllerURL("MiniShoppingCartController",getAbsoluteURL()+"AjaxQuickCartDisplay?storeId="+commerceStoreId+"&catalogId="+e+"&langId="+commerceLangId)}),utagFiller={partNumber:null,name:null,buyable:null,smartGlasses:!1,initialize:function(){utag_data.Page_Country="US",utag_data.Page_Language="EN",utag_data.Page_Brand="TO",utag_data.Page_DeviceType="D",utag_data.Page_Platform="WCS",utag_data.Order_CodeVersion="1",this.init(),this.setMiniCartId()},formatSectionText(e){return this.camelizeText(e,!0).replaceAll("-","")},camelizeText:function(e,t){return(t?e.replace(/(^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}):w.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},getFirstFolderInUrl:function(){var e=window.location.pathname.split("/");if(2<e.length)return this.formatSectionText(e[2])},getSecondFolderInUrl:function(){var e=window.location.pathname.split("/");if(3<e.length)return this.formatSectionText(e[3])},init:function(){$.ajax({type:"GET",url:"/wcs/resources/store/"+constants.ajaxParams.storeId+"/usercontext/@self/contextdata",traditional:!0,data:null,dataType:null,cache:!1,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"},success:function(e){"R"==e.basicInfo.registerType?(utag_data.user_id=constants.ajaxParams.userId,utag_data.User_LoginStatus="Logged",utag_data.User_Id=constants.ajaxParams.userId,utag_data.User_LoginType="Standard"):utag_data.User_LoginStatus="Guest"},error:function(e,t,r){console.error("Unable to load getUserParams - usercontext/@self/contextdata")}})},setPage:function(e,t,r){utag_data.Page_Type=e,void 0===t&&(t=e),utag_data.Page_Section1=t,void 0!==r&&(utag_data.Page_Section2=r)},setCategory:function(){var e=$("#facet-gender .facet-subnav .facet-link.selected").toArray();1==e.length&&(r=(r=$(e[0]).attr("data-item").split(":").pop().toLowerCase()).charAt(0).toUpperCase()+r.slice(1));var t=$("#categoryName").val().toLowerCase(),e=-1!==t.indexOf("eyeglasses")||-1!==t.indexOf("kid")?"Eyeglasses":-1!==t.indexOf("sunglasses")?"Sunglasses":this.getFirstFolderInUrl(),r=-1!==t.indexOf("men")?"Men":-1!==t.indexOf("women")?"Women":-1!==t.indexOf("kid")?"Kids":this.getSecondFolderInUrl();utag_data.Page_Type="Plp",utag_data.Page_Section1=e,utag_data.Page_Section2="",null!=r&&(utag_data.Page_Section2=r),utag_data.Order_Currency="USD",this.setPLPList(),this.setFilters()},setContactsCategory:function(){utag_data.Page_Type="Plp",utag_data.Page_Section1="ContactLenses",utag_data.Page_Section2="",this.setCLFilters(),this.setCLPLPList(),utag_data.Order_Currency="USD"},setPDP:function(e,t,r,a,o){this.partNumber=e,this.name=t,this.buyable=r,this.smartGlasses=a;var n=$("h2.to-brand").text(),s=o,d=parseInt(productInventory);s.Products={},s.Page_Type="Pdp",s.Page_Section1=n,s.Page_Section2=e,s.Products[e]={};a=$("#framePrice").val(),o=$("#frameFullPrice").val();if(a==o||(s.Products[e].PriceFull=o),s.Products[e].Price=a,s.Products[e].Units="1",s.Products[e].Status="true"===r&&0<d?"Available":"Out-of-stock",s.Products[e].Engraving="N","true"==this.smartGlasses)s.Products[e].Category="ELECTRONICS";else switch($("#frameCategory").val()){case"sunglasses":s.Products[e].Category="SUN";break;case"eyeglasses":s.Products[e].Category="OPTICS"}s.Products[e].Brand=n,s.Products[e].Sku=t;t=$("#frameModel").val();null!=t&&(s.Products[e].ModelName=t),s.Order_Currency="USD";t=$(".to-select-colors-icon.active").attr("title");return null!=t&&(s.Products[e].FrameColor=t.charAt(0).toUpperCase()+t.slice(1)),s.Products[e].Type="STD",s},updatePDPProduct:function(e){var r=this;setTimeout(function(){var t;if(0<$("#breadcrumbs_manufacturer").length)try{(t=r.setPDP(r.partNumber,r.name,r.buyable,r.smartGlasses,{})).Products[r.partNumber].LensTechnology=$("input[name=productId]:checked").attr("data-upc"),t.Products[r.partNumber].LensUPC=$("input[name=productId]:checked").attr("data-upc2"),t.Products[r.partNumber].Type="RX",t.id="WCS-D-PDP-Prods-Update"}catch(e){t={id:"Error",Error_Source:"Client",Error_Code:"utag_data syntax - "+e.message,Error_Detail:""}}finally{tealium_data2track.push(t)}},200)},updatePDPLensColor:function(e){var r=this;setTimeout(function(){var t;if(0<$("#breadcrumbs_manufacturer").length)try{(t=r.setPDP(r.partNumber,r.name,r.buyable,r.smartGlasses,{})).Products[r.partNumber].LensColor=e,t.Products[r.partNumber].LensTechnology=$("input[name=productId]:checked").attr("data-upc"),t.Products[r.partNumber].LensUPC=$("input[name=productId]:checked").attr("data-upc2"),t.Products[r.partNumber].Type="RX",t.id="WCS-D-PDP-Prods-Update"}catch(e){t={id:"Error",Error_Source:"Client",Error_Code:"utag_data syntax - "+e.message,Error_Detail:""}}finally{tealium_data2track.push(t)}},200)},addToCartFromPDP:function(){var t;try{(t=this.setPDP(this.partNumber,this.name,this.buyable,this.smartGlasses,{})).Products[this.partNumber].ModelName=$("input[name=productId]:checked").attr("data-upc2"),t.Products[this.partNumber].LensColor=$("input[name=lens]:checked").parent().find(".nome").text(),t.Products[this.partNumber].LensTechnology=$("input[name=productId]:checked").attr("data-upc"),t.Products[this.partNumber].LensUPC=$("input[name=productId]:checked").attr("data-upc2"),t.Products[this.partNumber].Type="RX",t.id="WCS-D-PDP-AddToCart"}catch(e){t={id:"Error",Error_Source:"Client",Error_Code:"utag_data syntax - "+e.message,Error_Detail:""}}finally{tealium_data2track.push(t)}},setContactsPDP:function(e,t,r){this.partNumber=e,this.name=t,this.buyable=r;var a={Products:{},Page_Type:"Pdp"};a.Page_Section1=$("#breadcrumbs .brand").text().trim(),a.Page_Section2=e,a.Products[e]={};var o,n,s=$(".box-low-price").toArray(),t=$(".regularPrice").toArray();return(o=1==s.length?$(s)[0].innerHTML.replace("$","").trim():o)==(n=1==t.length?$(t)[0].innerHTML.split("$").pop().trim():n)||(a.Products[e].PriceFull=n),a.Products[e].Price=o,a.Products[e].Units=(2*parseInt($("#rightQuantity").val())).toString(),a.Products[e].Status=0<r?"Available":"Not-for-sale",a.Products[e].Category="CONTACT LENSES",a.Products[e].Brand=a.Page_Section1,a.Products[e].ModelName=$("h1.brand-name").text(),a.Products[e].Type="RX",a.Products[e].LensUPC=e,a.Order_Currency="USD",a},canUpdate:!1,updateContactsPDPProduct:function(e){var t;this.canUpdate&&((t=this.setContactsPDP(this.partNumber,this.name,this.buyable)).id="WCS-D-PDP-Prods-Update",tealium_data2track.push(t)),!0===e&&(this.canUpdate=!0)},setSearchPage:function(e,t){utag_data.Page_Type="Search",utag_data.Page_Section1="Common",utag_data.Page_Section2="InternalSearch",utag_data.Search_Keyword=e,null!==sessionStorage.getItem("utagSearchType")?(utag_data.Search_Type="free",sessionStorage.removeItem("utagSearchType")):utag_data.Search_Type="suggested",utag_data.Search_ResultItemsQnt=t,utag_data.Order_Currency="USD",this.setPLPList()},setInPageSearch:function(e,t,r){"undefined"!=r&&null!=r&&tealium_data2track.push({id:"SearchPageReady",Search_Keyword:e,Search_Type:t,Search_ResultItemsQnt:r})},setSearchFlag:function(){sessionStorage.setItem("utagSearchType","free")},setEmptyCart:function(){utag_data.Page_Type="CartPage",utag_data.Page_Section1="EmptyBag"},setContentCart:function(){utag_data.Page_Type="CartPage",utag_data.Page_Section1="Cart";var e=null,t=-1,r=!(utag_data.Products={}),a=$("#hidden-items [data-description]").toArray(),o=!1,n=a.length,s=0,d=!1;for(index in a){var i,u,l,c,g,p,m,_=$(a[index]).attr("data-description"),h=$(a[index]).attr("data-orderitemid");"SUN"==$(a[index]).attr("data-comment")||"EYE"==$(a[index]).attr("data-comment")?(utag_data.Products[_]={},utag_data.Products[_].Type="STD",h=$(a[index]).attr("data-orderitemid"),"Electronics"==document.getElementById(h+"_CATEGORY").value?utag_data.Products[_].Category="ELECTRONICS":(utag_data.Products[_].Category=$(a[index]).attr("data-comment"),"EYE"==$(a[index]).attr("data-comment")&&(utag_data.Products[_].Category="OPTICS")),utag_data.Products[_].Units="1",utag_data.Products[_].Engraving="N",utag_data.Products[_].PerkCode="",0<parseInt($(a[index]).attr("data-inventory"))?utag_data.Products[_].Status="Available":utag_data.Products[_].Status="Out-of-stock",utag_data.Products[_].TaxRate="",0<(g=$(".subTotal_"+h).toArray()).length&&(utag_data.Products[_].PriceFull=$(g[0]).text().split("$").pop().trim(),utag_data.Products[_].Price=utag_data.Products[_].PriceFull),0<(i=$(".frameDisc_"+h+" .to-price").toArray()).length&&(u=$(i[0]).text().split("$").pop().trim(),utag_data.Products[_].PriceFull=(parseFloat(u)+parseFloat(utag_data.Products[_].PriceFull)).toFixed(2).toString(),d=!0),0<(u=$(".lensDisc_"+h+" .to-price").toArray()).length&&(u=$(u[0]).text().split("$").pop().trim(),utag_data.Products[_].PriceFull=(parseFloat(u)+parseFloat(utag_data.Products[_].PriceFull)).toFixed(2).toString(),d=!0),0<(l=$(".utagInsurDisc_"+h).toArray()).length&&(utag_data.Products[_].InsuranceAmount=(-1*parseFloat($(l[0]).text().split("$").pop().trim())).toString(),r=!0,utag_data.Products[_].PriceFull=(utag_data.Products[_].PriceFull-utag_data.Products[_].InsuranceAmount).toString(),sessionStorage.setItem("utagInsuranceCodePartNumber",_),sessionStorage.setItem("utagInsuranceCode","Eyemed - applied"),sessionStorage.setItem("utagInsuranceBenefits",utag_data.Order_InsuranceBenefits)),0<$("#"+h+"_FRAME_MODEL").length&&(utag_data.Products[_].ModelName=$("#"+h+"_FRAME_MODEL").val()),0<$("#"+h+"_FRAME_BRAND").length&&(utag_data.Products[_].Brand=$("#"+h+"_FRAME_BRAND").val()),e=_,t=index,this.getCartAdditionalInfo(_,h)):"LCON"==$(a[index]).attr("data-comment")?(utag_data.Products[_]={},utag_data.Products[_].Category="CONTACT LENSES",utag_data.Products[_].Status="Available",utag_data.Products[_].Engraving="",utag_data.Products[_].PerkCode="",utag_data.Products[_].TaxRate="",c=$(a[index]).attr("data-catalogentryid"),m=$(".L_catalog[data-catalogentry="+c+"] .submit-on-change [selected]"),utag_data.Products[_].Units=$(m[0]).val(),0<(g=$("."+h+"_Price").toArray()).length&&(utag_data.Products[_].Price=$(g[0]).val(),utag_data.Products[_].Price=(parseFloat(utag_data.Products[_].Price.replace(",",""))/parseFloat(utag_data.Products[_].Units)).toFixed(2).toString()),0<(p=$(".offer_catalogentry_"+c).toArray()).length&&(utag_data.Products[_].PriceFull=$(p[0]).text().split("$").pop(),utag_data.Products[_].PriceFull=(parseFloat(utag_data.Products[_].PriceFull.replace(",",""))/parseFloat(utag_data.Products[_].Units)).toFixed(2).toString(),d=!0),0==p.length?utag_data.Products[_].PriceFull=utag_data.Products[_].Price:utag_data.Products[_].PriceFull=(parseFloat(utag_data.Products[_].PriceFull)/2+parseFloat(utag_data.Products[_].Price)).toFixed(2).toString(),o=!0,s+=parseFloat(utag_data.Products[_].Units),utag_data.Products[_].Brand=$(".L_catalog[data-catalogentry="+c+"] input[name=contactBrand]").val(),utag_data.Products[_].Sku=$(".L_catalog[data-catalogentry="+c+"] input[name=contactPN]").val(),utag_data.Products[_].Type="RX",utag_data.Products[_].LensUPC=utag_data.Products[_].Sku,this.getCartAdditionalInfo(_)):"RCON"==$(a[index]).attr("data-comment")?void 0===utag_data.Products[_]?(utag_data.Products[_]={},utag_data.Products[_].Category="CONTACT LENSES",utag_data.Products[_].Status="Available",utag_data.Products[_].Engraving="",utag_data.Products[_].PerkCode="",utag_data.Products[_].TaxRate="",c=$(a[index]).attr("data-catalogentryid"),m=$(".R_catalog[data-catalogentry="+c+"] .submit-on-change [selected]"),0<utag_data.Products[_].Units?utag_data.Products[_].Units=(parseInt(utag_data.Products[_].Units)+parseInt($(m[0]).val())).toString():utag_data.Products[_].Units=$(m[0]).val(),0<(g=$("."+h+"_Price").toArray()).length&&(utag_data.Products[_].Price=$(g[0]).val(),utag_data.Products[_].Price=(parseFloat(utag_data.Products[_].Price.replace(",",""))/parseFloat(utag_data.Products[_].Units)).toFixed(2).toString()),0<(p=$(".offer_catalogentry_"+c).toArray()).length&&(utag_data.Products[_].PriceFull=$(p[0]).text().split("$").pop(),utag_data.Products[_].PriceFull=(parseFloat(utag_data.Products[_].PriceFull.replace(",",""))/parseFloat(utag_data.Products[_].Units)).toFixed(2).toString(),d=!0),0==p.length?utag_data.Products[_].PriceFull=utag_data.Products[_].Price:utag_data.Products[_].PriceFull=(parseFloat(utag_data.Products[_].PriceFull)/2+parseFloat(utag_data.Products[_].Price)).toFixed(2).toString(),o=!0,s+=parseFloat(utag_data.Products[_].Units),utag_data.Products[_].Brand=$(".R_catalog[data-catalogentry="+c+"] input[name=contactBrand]").val(),utag_data.Products[_].Sku=$(".R_catalog[data-catalogentry="+c+"] input[name=contactPN]").val(),utag_data.Products[_].Type="RX",utag_data.Products[_].LensUPC=utag_data.Products[_].Sku,this.getCartAdditionalInfo(_)):(m=$(".R_catalog[data-catalogentry="+c+"] .submit-on-change [selected]"),0<utag_data.Products[_].Units&&(utag_data.Products[_].Units=(parseInt(utag_data.Products[_].Units)+parseInt($(m[0]).val())).toString(),s=parseFloat(utag_data.Products[_].Units),n=1)):"LENS"==$(a[index]).attr("data-comment")&&(null!==t&&index-t==1&&null!==e&&(utag_data.Products[e].Sku=$(a[index]).attr("data-description")),h=$(a[index]).attr("data-catalogentryid"),0<$("."+h+"_lens-name").length&&(utag_data.Products[e].LensTechnology=$("."+h+"_lens-name").text().trim()),0<$("."+h+"_treatment").length&&(utag_data.Products[e].LensColor=$("."+h+"_treatment").attr("data-treatment")),utag_data.Products[e].LensUPC=utag_data.Products[e].Sku,utag_data.Products[e].Type="RX")}if(0<(l=$(".insur_catalogentry_"+c).toArray()).length&&o){var r=!0,C=parseFloat($(l[0]).text().split("$").pop()),f=-1*C/s;for(index in utag_data.Products)utag_data.Products[index].InsuranceAmount=(C/n*-1).toFixed(2).toString(),utag_data.Products[index].Price=(parseFloat(utag_data.Products[index].Price)+f).toFixed(2).toString(),sessionStorage.setItem("utagInsuranceCodePartNumber",_),sessionStorage.setItem("utagInsuranceCode","Eyemed - applied"),sessionStorage.setItem("utagInsuranceBenefits",utag_data.Order_InsuranceBenefits)}utag_data.Order_Currency="USD",utag_data.Order_GiftCardCode="",0<$("#ShoppingCart_RedCard_Checkbox").length&&$("#ShoppingCart_RedCard_Checkbox").is(":checked")&&(utag_data.Order_GiftCardCode="REDCARD"),sessionStorage.setItem("utagGiftCard",utag_data.Order_GiftCardCode),utag_data.Order_DiscountCode="",0<$(".all-promotion-active .specific_promotion").length&&(utag_data.Order_DiscountCode=$(".all-promotion-active .specific_promotion").attr("data-promotion")),sessionStorage.setItem("utagDiscCode",utag_data.Order_DiscountCode),utag_data.Order_DiscountAmount="0",0<$(".total-savings").length&&!d&&!r&&(S=Number($(".total-savings").data("discount")),P=isNaN(S)?0:0<S?"-"+S:""+S,utag_data.Order_DiscountAmount=P),sessionStorage.setItem("utagDiscAmount",utag_data.Order_DiscountAmount),utag_data.Order_DiscountName="",0<$("#promo-names").length&&(utag_data.Order_DiscountName=$("#promo-names").data("promoNames").trim()),sessionStorage.setItem("utagDiscName",utag_data.Order_DiscountName),0<$("#UtagOrderAmt").length&&(utag_data.Order_ProductsAmount=parseFloat($("#UtagOrderAmt").val()).toFixed(2).toString()),sessionStorage.setItem("utagProducts",JSON.stringify(utag_data.Products));var S=$("#UtagOrderAmt").val(),P=Number(S.replace(/[^0-9.-]+/g,""));if(0<$("#afterpayPlacement").length&&$("#afterpayPlacement").attr("data-amount",P),"undefined"!=typeof affirm){$("#affirmPrice").attr("data-amount",100*P);try{affirm.ui.ready(function(){void 0!==affirm.ui.refresh&&"function"==typeof affirm.ui.refresh&&affirm.ui.refresh()})}catch(e){console.error("Error refreshing Affirm: "+e)}}null!==$("#shipModeAnalytics").val()&&void 0!==$("#shipModeAnalytics").val()&&(S="",S="Collect in store"==(P=$("#shipModeAnalytics").val())?"Pick-up-point":"next day air"==P?"Next Business Day":"2 day air"==P?"2 business day":"Ground",utag_data.Order_ShippingMode=S),this.addAbandonedCartUrl(),this.retrieveRecommendedProducts()},setCheckoutDelivery:function(){utag_data.Page_Type="Delivery",utag_data.Page_Section1="Checkout",utag_data.Order_Currency="USD",null!==sessionStorage.getItem("utagGiftCard")&&(utag_data.Order_GiftCardCode=sessionStorage.getItem("utagGiftCard")),null!==sessionStorage.getItem("utagDiscCode")&&(utag_data.Order_DiscountCode=sessionStorage.getItem("utagDiscCode")),null!==sessionStorage.getItem("utagDiscAmount")&&(utag_data.Order_DiscountAmount=sessionStorage.getItem("utagDiscAmount")),null!==sessionStorage.getItem("utagDiscName")&&(utag_data.Order_DiscountName=sessionStorage.getItem("utagDiscName")),null!==sessionStorage.getItem("utagProducts")&&(utag_data.Products=$.parseJSON(sessionStorage.getItem("utagProducts")),utag_data.Products=null==utag_data.Products?{}:utag_data.Products),0<$("#UtagOrderAmt").length&&(utag_data.Order_ProductsAmount=parseFloat($("#UtagOrderAmt").val()).toFixed(2).toString());var e=$("#UtagOrderAmt").val(),t=Number(e.replace(/[^0-9.-]+/g,""));if(0<$("#afterpayPlacement").length&&$("#afterpayPlacement").attr("data-amount",t),"undefined"!=typeof affirm){$("#affirmPrice").attr("data-amount",100*t);try{affirm.ui.ready(function(){affirm.ui.refresh()})}catch(e){console.error("Error refreshing Affirm: "+e)}}null!==$("#shipModeAnalytics").val()&&void 0!==$("#shipModeAnalytics").val()&&(e="",e="Collect in store"==(t=$("#shipModeAnalytics").val())?"Pick-up-point":"next day air"==t?"Next Business Day":"2 day air"==t?"2 business day":"Ground",utag_data.Order_ShippingMode=e)},setCheckoutPayment:function(){utag_data.Page_Type="Payment",utag_data.Page_Section1="Checkout",utag_data.Order_Currency="USD",null!==sessionStorage.getItem("utagGiftCard")&&(utag_data.Order_GiftCardCode=sessionStorage.getItem("utagGiftCard")),null!==sessionStorage.getItem("utagDiscCode")&&(utag_data.Order_DiscountCode=sessionStorage.getItem("utagDiscCode")),null!==sessionStorage.getItem("utagDiscAmount")&&(utag_data.Order_DiscountAmount=sessionStorage.getItem("utagDiscAmount")),null!==sessionStorage.getItem("utagDiscName")&&(utag_data.Order_DiscountName=sessionStorage.getItem("utagDiscName")),null!==sessionStorage.getItem("utagProducts")&&(utag_data.Products=$.parseJSON(sessionStorage.getItem("utagProducts")),utag_data.Products=null==utag_data.Products?{}:utag_data.Products),utag_data.Order_ShippingAmount="",null!==sessionStorage.getItem("utagShipCart")&&(utag_data.Order_ShippingAmount=parseFloat(sessionStorage.getItem("utagShipCart")).toFixed(2).toString()),utag_data.Order_ShippingTaxRate="",null!==sessionStorage.getItem("utagShipTax")&&(utag_data.Order_ShippingTaxRate=parseFloat(sessionStorage.getItem("utagShipTax")).toFixed(2).toString()),utag_data.Order_TaxAmount="",null!==sessionStorage.getItem("utagTotalTax")&&(utag_data.Order_TaxAmount=sessionStorage.getItem("utagTotalTax")),0<$(".side_shipping_method").length&&(utag_data.Order_ShippingMode=$(".side_shipping_method").attr("data-shipping"),"ground"===utag_data.Order_ShippingMode.toLowerCase()&&(utag_data.Order_ShippingAmount="0.00",utag_data.Order_ShippingMode="Ground"),sessionStorage.setItem("utagShippingMeth",utag_data.Order_ShippingMode)),0<$("#UtagOrderAmt").length&&(utag_data.Order_ProductsAmount=parseFloat($("#UtagOrderAmt").val()).toFixed(2).toString(),0<parseFloat(utag_data.Order_TaxAmount)&&(utag_data.Order_ProductsAmount=parseFloat(utag_data.Order_ProductsAmount)-parseFloat(utag_data.Order_TaxAmount)),0<parseFloat(utag_data.Order_ShippingAmount)&&(utag_data.Order_ProductsAmount=parseFloat(utag_data.Order_ProductsAmount)-parseFloat(utag_data.Order_ShippingAmount)),utag_data.Order_ProductsAmount=parseFloat(utag_data.Order_ProductsAmount).toFixed(2).toString(),sessionStorage.setItem("utagProdAmount",utag_data.Order_ProductsAmount)),void 0!==$.cookie("_bill_state")&&null!==$.cookie("_bill_state")&&(utag_data.Order_State=$.cookie("_bill_state")),void 0!==$.cookie("_bill_zipcode")&&null!==$.cookie("_bill_zipcode")&&(utag_data.Order_ZipCode=$.cookie("_bill_zipcode"));var e=$("#UtagOrderAmt").val(),t=Number(e.replace(/[^0-9.-]+/g,""));if(0<$("#afterpayPlacement").length&&$("#afterpayPlacement").attr("data-amount",t),"undefined"!=typeof affirm){$("#affirmPrice").attr("data-amount",100*t);try{affirm.ui.ready(function(){affirm.ui.refresh()})}catch(e){console.error("Error refreshing Affirm: "+e)}}null!==$("#shipModeAnalytics").val()&&void 0!==$("#shipModeAnalytics").val()&&(e="",e="Collect in store"==(t=$("#shipModeAnalytics").val())?"Pick-up-point":"next day air"==t?"Next Business Day":"2 day air"==t?"2 business day":"Ground",utag_data.Order_ShippingMode=e),-1<window.location.href.indexOf("reorder=true")?utag_data.Page_Section2="Reorder":utag_data.Page_Section2="Standard",sessionStorage.setItem("utagDataPageSection2",utag_data.Page_Section2)},setCheckoutThankYou:function(){var e,t;utag_data.Page_Type="Thankyou",utag_data.Page_Section1="Checkout",null!==sessionStorage.getItem("utagDataPageSection2")&&(utag_data.Page_Section2=sessionStorage.getItem("utagDataPageSection2")),utag_data.Order_Currency="USD",utag_data.Order_PaymentInstallments="",utag_data.Order_Insured="0",null!==sessionStorage.getItem("utagGiftCard")&&(utag_data.Order_GiftCardCode=sessionStorage.getItem("utagGiftCard")),null!==sessionStorage.getItem("utagDiscCode")&&(utag_data.Order_DiscountCode=sessionStorage.getItem("utagDiscCode")),null!==sessionStorage.getItem("utagDiscAmount")&&(utag_data.Order_DiscountAmount=sessionStorage.getItem("utagDiscAmount")),null!==sessionStorage.getItem("utagDiscName")&&(utag_data.Order_DiscountName=sessionStorage.getItem("utagDiscName")),utag_data.Products={},null!==sessionStorage.getItem("utagProducts")&&(utag_data.Products=$.parseJSON(sessionStorage.getItem("utagProducts")),utag_data.Products=null==utag_data.Products?{}:utag_data.Products),null!==sessionStorage.getItem("utagProdAmount")&&(utag_data.Order_ProductsAmount=sessionStorage.getItem("utagProdAmount")),null!==sessionStorage.getItem("utagShippingMeth")&&(utag_data.Order_ShippingMode=sessionStorage.getItem("utagShippingMeth")),0<$("#spec_order_id").length&&(utag_data.Order_Id=$("#spec_order_id").attr("data-order-id")),utag_data.Order_ShippingAmount="",null!==sessionStorage.getItem("utagShipCart")&&(utag_data.Order_ShippingAmount=parseFloat(sessionStorage.getItem("utagShipCart")).toFixed(2).toString()),utag_data.Order_ShippingTaxRate="",null!==sessionStorage.getItem("utagShipTax")&&(utag_data.Order_ShippingTaxRate=parseFloat(sessionStorage.getItem("utagShipTax")).toFixed(2).toString()),utag_data.Order_TaxAmount="",null!==sessionStorage.getItem("utagTotalTax")&&(utag_data.Order_TaxAmount=sessionStorage.getItem("utagTotalTax")),null!==sessionStorage.getItem("utagInsuranceCodePartNumber")&&null!==sessionStorage.getItem("utagInsuranceCode")&&(utag_data.Products[sessionStorage.getItem("utagInsuranceCodePartNumber")].InsuranceCode=sessionStorage.getItem("utagInsuranceCode")),null!==sessionStorage.getItem("utagInsuranceCodePartNumber")&&null!==sessionStorage.getItem("utagInsuranceBenefits")&&(utag_data.Products[sessionStorage.getItem("utagInsuranceCodePartNumber")].InsuranceBenefits=sessionStorage.getItem("utagInsuranceBenefits")),utag_data.Order_State=getInputHiddenValue("shippingStateToTrack"),utag_data.shippingZipCodeToTrack=getInputHiddenValue("shippingZipCodeToTrack"),utag_data.Order_PaymentType=this.getOrderPayment(),"Affirm"===utag_data.Order_PaymentType&&null!==sessionStorage.getItem("affirmInstallments")&&(utag_data.Order_PaymentInstallments=sessionStorage.getItem("affirmInstallments")),null!==$("#shipModeAnalytics").val()&&void 0!==$("#shipModeAnalytics").val()&&(t="",t="Collect in store"==(e=$("#shipModeAnalytics").val())?"Pick-up-point":"next day air"==e?"Next Business Day":"2 day air"==e?"2 business day":"Ground",utag_data.Order_ShippingMode=t)},getOrderPayment:function(){var e="";if(null!==sessionStorage.getItem("utagCreditCard"))switch(e=sessionStorage.getItem("utagCreditCard")){case"VISA":e="Visa";break;case"Master Card":e="MasterCard";break;case"AMEX":e="Amex";break;case"DISCOVER":e="Discover";break;case"DINERS":e="Diners";break;case"PAYPAL":e="PayPal";break;case"PayPalExpressCheckout":e="PayPalExpressCheckout";break;case"AFFIRM":e="Affirm";break;case"AFTERPAY":e="Afterpay";break;default:e=""}return e},setCheckoutDoctor:function(){utag_data.Page_Type="Prescription",utag_data.Page_Section1="Checkout",utag_data.Order_Currency="USD",null!==sessionStorage.getItem("utagGiftCard")&&(utag_data.Order_GiftCardCode=sessionStorage.getItem("utagGiftCard"),sessionStorage.removeItem("utagGiftCard")),null!==sessionStorage.getItem("utagDiscCode")&&(utag_data.Order_DiscountCode=sessionStorage.getItem("utagDiscCode"),sessionStorage.removeItem("utagDiscCode")),null!==sessionStorage.getItem("utagDiscAmount")&&(utag_data.Order_DiscountAmount=sessionStorage.getItem("utagDiscAmount"),sessionStorage.removeItem("utagDiscAmount")),null!==sessionStorage.getItem("utagDiscName")&&(utag_data.Order_DiscountName=sessionStorage.getItem("utagDiscName"),sessionStorage.removeItem("utagDiscName")),utag_data.Products={},null!==sessionStorage.getItem("utagProducts")&&(utag_data.Products=$.parseJSON(sessionStorage.getItem("utagProducts")),utag_data.Products=null==utag_data.Products?{}:utag_data.Products,sessionStorage.removeItem("utagProducts")),null!==sessionStorage.getItem("utagProdAmount")&&(utag_data.Order_ProductsAmount=sessionStorage.getItem("utagProdAmount")),null!==sessionStorage.getItem("utagShippingMeth")&&(utag_data.Order_ShippingMode=sessionStorage.getItem("utagShippingMeth"),sessionStorage.removeItem("utagShippingMeth")),utag_data.Order_ShippingAmount="",null!==sessionStorage.getItem("utagShipCart")&&(utag_data.Order_ShippingAmount=parseFloat(sessionStorage.getItem("utagShipCart")).toFixed(2).toString(),sessionStorage.removeItem("utagShipCart")),utag_data.Order_ShippingTaxRate="",null!==sessionStorage.getItem("utagShipTax")&&(utag_data.Order_ShippingTaxRate=parseFloat(sessionStorage.getItem("utagShipTax")).toFixed(2).toString(),sessionStorage.removeItem("utagShipTax")),utag_data.Order_TaxAmount="",null!==sessionStorage.getItem("utagTotalTax")&&(utag_data.Order_TaxAmount=sessionStorage.getItem("utagTotalTax"),sessionStorage.removeItem("utagTotalTax")),void 0!==$.cookie("_bill_state")&&null!==$.cookie("_bill_state")&&(utag_data.Order_State=$.cookie("_bill_state")),void 0!==$.cookie("_bill_zipcode")&&null!==$.cookie("_bill_zipcode")&&(utag_data.Order_ZipCode=$.cookie("_bill_zipcode")),sessionStorage.removeItem("trackShoppingCart")},setSentPrescription:function(){var e={Order_PrescriptionMethod:""};0<$("input[name='prescription']:checked").length&&(e.Order_PrescriptionMethod=$("input[name='prescription']:checked").val()),e.id="WCS-D-Checkout-Order-PrescriptionOk",tealium_data2track.push(e)},setRegistrationFlag:function(){sessionStorage.setItem("registration","true"),"checked"===$("#receiveEmail_checkBox").attr("checked")&&sessionStorage.setItem("emailSignUp","true")},setRegLoginConfirm:function(){utag_data.Page_Type="Static",utag_data.Page_Section1="MyAccount",null!==sessionStorage.getItem("registration")?(utag_data.Page_Section2="Register",utag_data.Events_UserAccountNew="1",sessionStorage.removeItem("registration")):(utag_data.Page_Section2="Login",utag_data.Events_UserLogin="1"),null!==sessionStorage.getItem("emailSignUp")&&(sessionStorage.removeItem("emailSignUp"),this.setEmailSignUp())},setEmailSignUp:function(){tealium_data2track.push({id:"WCS-D-SignupForm",Events_UserEmailSub:"1"})},setDeleteExam:function(){tealium_data2track.push({id:"WCS-D-Exam-Funnel-Cancellation",Events_AppointmentCanceled:"1"})},setStoreLocator:function(){utag_data.Page_Type="FindStore",utag_data.Page_Section1="Exam",utag_data.Page_Section2=""},setPersonalInfo:function(){utag_data.Page_Type="Info",utag_data.Page_Section1="Exam",utag_data.Page_Section2="PersonalInfo",null!==sessionStorage.getItem("anotherExam")&&(sessionStorage.removeItem("anotherExam"),tealium_data2track.push({id:"WCS-D-Exam-Funnel-AddExam"}))},setExamPageInfo:function(e,t){if(utag_data.Page_Section1="Exam",utag_data.Page_Section2="",utag_data.Page_Type="ThankYouSchedulingPage"!==t?"Review":"Confirmation",utag_data.Exam_ZipCode=e,null!==sessionStorage.getItem("examContents")){var r=JSON.parse(sessionStorage.getItem("examContents"));if(0<r.length){for(var a=[],o=[],n=[],s=0;s<r.length;s++)a.push(r[s].previousExam),o.push(r[s].fitting),void 0!==r[s].wornBefore&&n.push(r[s].wornBefore);utag_data.Exam_PreviousExam=a.join(","),utag_data.Exam_Fitting=o.join(","),utag_data.Exam_WornBefore=n.join(","),utag_data.Exam_PatientNum=""+a.length,"ThankYouSchedulingPage"===t&&sessionStorage.removeItem("examContents")}}},setExamFlag:function(){sessionStorage.setItem("anotherExam","true")},setOtherPage:function(e,t,r){utag_data.Page_Type=r,utag_data.Page_Section1=t,utag_data.Page_Section2=e},setStaticPage:function(e){utag_data.Page_Type="Static";var t=this.getFirstFolderInUrl();utag_data.Page_Section1=t;t=this.getSecondFolderInUrl();utag_data.Page_Section2="",null!=t&&(utag_data.Page_Section2=t)},setNotFoundPage:function(){utag_data.Page_Type="Error",utag_data.Page_Section1="Other",utag_data.Page_Section2="ErrorHttp404",utag_data.Error_Source="404",utag_data.Error_Code="404 - page not found"},setGenericServerError:function(){obj={id:"Error",Error_Source:"Server",Error_Details:"Generic Server Errors",Error_Code:"Loading error",Error_Message:"Sorry, the page you are looking has not been found.",Events_Error:1},tealium_data2track.push(obj)},setPageNotFoundError:function(e){obj={id:"Error",Error_Source:"404",Error_Details:e,Error_Code:"404 - page not found",Error_Message:"Sorry, the page you are looking has not been found",Events_Error:1},tealium_data2track.push(obj)},setMiniCart:function(){var r={id:"WCS-D-MiniCartOverlay-Open",Products:{}};$(".utagProductMiniCart").each(function(){var e=$(this).attr("partnumber");r.Products[e]={};var t=r.Products[e];t.Sku=$(this).attr("sku"),"eyeglasses"===$(this).attr("category")?t.Category="OPTICS":"sunglasses"===$(this).attr("category")?t.Category="SUN":"contact lenses"===$(this).attr("category")&&(t.Category="CONTACT LENSES"),t.Brand=$(this).attr("brand"),t.ModelName=$(this).attr("model"),t.Price=parseFloat($(this).attr("price")).toFixed(2).toString(),t.Engraving="N",t.Status="Available",null===sessionStorage.getItem("utagProducts")||(e=$.parseJSON(sessionStorage.getItem("utagProducts"))[e])&&(t.LensUPC=e.LensUPC,t.Type=e.Type)}),tealium_data2track.push(r)},setMiniCartId:function(){utag_data.Cart_Id=sessionStorage.getItem("cartId"),null!=utag_data.Cart_Id&&""!=utag_data.Cart_Id||(utag_data.Cart_Id="","undefined"!=typeof constants&&void 0!==constants.ajaxParams&&typeof constants.ajaxParams&&(utag_data.Cart_Id=constants.ajaxParams.orderId,sessionStorage.setItem("cartId",utag_data.Cart_Id)))},setOrderId:function(e){"Thankyou"===utag_data.Page_Type&&(utag_data.Order_Id=e),utag_data.Cart_Id=e,_dl.cart_id=e},setExamContent:function(e){"undefined"!=typeof jsonExams&&null!==jsonExams||(jsonExams=JSON.parse(sessionStorage.getItem("examContents")),null===jsonExams&&(jsonExams=[]));var t={},e=e.attr("data-exam-number");t.examNumber=parseInt(e),t.previousExam=$("#previousExam_"+e+"_yes").prop("checked")?"Y":"N",t.fitting=$("#fitting_"+e+"_yes").prop("checked")?"Y":"N","Y"===t.fitting&&(t.wornBefore=$("#contacts_"+e+"_yes").prop("checked")?"Y":"N");for(var r=-1,a=0;a<jsonExams.length;a++)jsonExams[a].examNumber===t.examNumber&&(r=a);-1===r?jsonExams.push(t):jsonExams[r]=t},setExamContentFlag:function(){"undefined"!=typeof jsonExams&&null!==jsonExams&&sessionStorage.setItem("examContents",JSON.stringify(jsonExams))},setFilters:function(){var a,e;0<$(".facet-subnav .facet-link.selected").length?(utag_data.Events_SearchFiltering="1",a="",$(".facet-options>li").each(function(){var e=$(this).attr("id");void 0!==e&&(e=e.split("-").pop()+"=");for(var t=[],r=0;r<$(this).find(".facet-subnav .selected").length;r++)t.push($($(this).find(".facet-subnav .selected")[r]).attr("data-item").split(":").pop());0<t.length&&(a=a+e+t.join("|")+"&")}),e=a.length-1,0<a.length&&"&"===a[e]&&(a=a.substr(0,e)),utag_data.Search_FacetValues_String=a,0<$(".total-items").length&&(utag_data.Search_ResultItemsQnt=$($(".total-items")[0]).text())):utag_data.Events_SearchFiltering="0"},setCLFilters:function(){var a,e;0<$(".facet-subnav .facet-link.selected").length?(utag_data.Events_SearchFiltering="1",a="",$(".facet-options>li").each(function(){var e=$(this).find(".facet-subnav").attr("data-facet-name");void 0!==e&&(e=e.split("-").pop()+"=");for(var t=[],r=0;r<$(this).find(".facet-subnav .selected").length;r++)t.push($($(this).find(".facet-subnav .selected")[r]).attr("data-selected").split(":").pop());0<t.length&&(a=a+e+t.join("|")+"&")}),e=a.length-1,0<a.length&&"&"===a[e]&&(a=a.substr(0,e)),utag_data.Search_FacetValues_String=a,0<$("#totalResultsCopy").length&&(utag_data.Search_ResultItemsQnt=$("#totalResultsCopy").text())):utag_data.Events_SearchFiltering="0"},setPLPList:function(){utag_data.Products={},$(".item").each(function(e){if(5==e)return!1;var t=$(this).attr("data-partNumber"),e=parseInt($(this).attr("data-inventory"));void 0!==t&&(utag_data.Products[t]={},utag_data.Products[t].Status=0<e?"Available":"Out-of-stock",utag_data.Products[t].Engraving="N",$(this).find(".currentCategory")&&(e=$(this).find(".currentCategory").val().toLowerCase(),utag_data.Products[t].Category="sunglasses"===e?"SUN":"OPTICS"),0<$(this).find(".offer-price").length&&(utag_data.Products[t].Price=$(this).find(".offer-price").text().split("$").pop().trim()),0<$(this).find(".list-price").length?utag_data.Products[t].PriceFull=$(this).find(".list-price").text().split("$").pop().trim():(utag_data.Products[t].PriceFull=utag_data.Products[t].Price,delete utag_data.Products[t].Price))})},setCLPLPList:function(){utag_data.Products={},$(".item").each(function(e){if(5==e)return!1;e=$(this).attr("data-partnumber");void 0!==e&&(utag_data.Products[e]={},utag_data.Products[e].Status="Available",utag_data.Products[e].Category="CONTACT LENSES",0<$(this).find(".retail-price").length&&(utag_data.Products[e].PriceFull=$(this).find(".retail-price").text().split("$").pop().trim()),0<$(this).find(".unit-price").length?utag_data.Products[e].Price=$(this).find(".unit-price").text().split("$").pop().trim():delete utag_data.Products[e].Price)})},setCartProducts:function(){var e;for(item in e=null!==sessionStorage.getItem("trackShoppingCart")?null==(e=$.parseJSON(sessionStorage.getItem("trackShoppingCart")))?[]:e:e)"contact lenses"!==e[item].product_id.category&&void 0!==utag_data.Products[e[item].product_id]&&void 0!==e[item].frame_shape&&(utag_data.Products[e[item].product_id].Shape=e[item].frame_shape.trim())},setAddToCart:function(){var e=this.setContactsPDP(this.partNumber,this.name,this.buyable);e.id="AddToCart",tealium_data2track.push(e)},setPayWithPaymentType:function(){var e={id:"Checkout-Step-Gateway"};e.Order_PaymentType=this.getOrderPayment(),"Affirm"===e.Order_PaymentType&&null!==sessionStorage.getItem("affirmInstallments")&&(e.Order_PaymentInstallments=sessionStorage.getItem("affirmInstallments")),null!==sessionStorage.getItem("utagProducts")&&(e.Products=$.parseJSON(sessionStorage.getItem("utagProducts"))),tealium_data2track.push(e)},getCartAdditionalInfo:function(e,t){var r=$("[data-cart-element="+e+"]");0<r.length&&(utag_data.Products[e].Url=$(r).attr("href"),void 0!==$(r).attr("data-alt-url")&&null!==$(r).attr("data-alt-url")&&(utag_data.Products[e].Url=$(r).attr("data-alt-url")),utag_data.Products[e].MoCo=$(r).attr("data-prod-name"));r=$("[data-cart-element="+e+"] img");0<r.length&&(utag_data.Products[e].Image=$(r).attr("src")),null!=t&&""!==t&&(utag_data.Products[e].MoCo=$("#"+t+"_FRAME_MODEL").val()+"_"+$("#"+t+"_SAP_MATERIAL_CODE").val(),utag_data.Products[e].Size=$("#"+t+"_SAP_SIZE").val())},addAbandonedCartUrl:function(){var e,t;0<$("#orderIdCodElem").length&&0<$("#membIdCodElem").length&&(e=$("#orderIdCodElem").val(),t=$("#membIdCodElem").val(),utag_data.Order_CartUrl=location.origin+"/PlaceNewOrderTO?encOrderid="+e+"&storeId="+storeId+"&fromCart=true&encMemberId="+t)},populateRecommendedProducts:function(){var e={},t=$("#other-looks .catEntryThumbnail");if(0<t.length)for(var r=0;r<t.length;r++){var a,o,n=$($("#other-looks .catEntryThumbnail")[r]).attr("data-element-catId"),s=$("#"+n+"_partnumber").val();null!=s&&""!==s&&(a="#other-looks [data-element-catId="+n+"]",(o={}).Recommended_Url=$(a+" .productImagePdpLink").attr("href"),o.Recommended_ModelName=$(a+" .productImagePdpLink img").attr("alt"),o.Recommended_Price=$("#"+n+"_price").val(),void 0!==o.Recommended_Price&&null!==o.Recommended_Price&&(o.Recommended_Price=o.Recommended_Price.replace("$","")),o.Recommended_Image=$(a+" .productImagePdpLink img").attr("src"),o.Recommended_Brand=$("#"+n+"_brand").val(),e[s]=o)}sessionStorage.setItem("utagRecommendation",JSON.stringify(e))},retrieveRecommendedProducts:function(){utag_data.Recommendations=[],null!==sessionStorage.getItem("utagRecommendation")&&(utag_data.Recommendations=$.parseJSON(sessionStorage.getItem("utagRecommendation")))},insuranceApplied:function(e,t){utag_data.Order_InsuranceCode=t||"Unknown",utag_data.Order_InsuranceBenefits=e,sessionStorage.setItem("utagOrderInsuranceBenefits",e)},insuranceAppliedEvent:function(e,t){obj={id:"Insurance-Applied",Order_InsuranceCode:t||"Unknown",Order_InsuranceBenefits:e},tealium_data2track.push(obj)},insuranceTentative:function(e,t,r){obj={id:"Insurance-Tentative",Order_InsuranceCode:r||"Unknown",Error_Source:"User",Error_Code:"Insurance - "+e,Error_Message:t},tealium_data2track.push(obj)},setOEEError:function(e){obj={id:"Error",Error_Source:"Server",Error_Code:"OEE",Error_Details:e},tealium_data2track.push(obj)},setUserRegistrationError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Signup",Error_Details:"Sign up Request Failed"},tealium_data2track.push(obj)},setUserLoginError:function(){obj={id:"Error",Error_Source:"User",Error_Code:"Login",Error_Details:"Unable to find the profile"},tealium_data2track.push(obj)},setLoginRequestError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Login",Error_Details:"Login Request Failed"},tealium_data2track.push(obj)},setUnableToSearchError:function(){obj={id:"Error",Error_Source:"Client",Error_Code:"Search",Error_Details:"Unable to search for products"},tealium_data2track.push(obj)},setPPExpressError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment",Error_Details:"Paypal express"},tealium_data2track.push(obj)},setPPError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment",Error_Details:"Paypal"},tealium_data2track.push(obj)},setAffirmError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment",Error_Details:"Affirm"},tealium_data2track.push(obj)},setAfterpayError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment",Error_Details:"Afterpay"},tealium_data2track.push(obj)},setPaymentDeclinedError:function(e){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Payment declined",Error_Details:e},tealium_data2track.push(obj)},setProductError:function(){obj={id:"Error",Error_Source:"Product",Error_Code:"404 - Inactive or Unpublished Product"},tealium_data2track.push(obj)},setIncorrectFileTypeError:function(){obj={id:"Error",Error_Source:"User",Error_Code:"RX panel",Error_Message:"Incorrect File Type"},tealium_data2track.push(obj)},setFileisTooBigtoUploadError:function(){obj={id:"Error",Error_Source:"User",Error_Code:"RX panel",Error_Message:"File is too big to upload"},tealium_data2track.push(obj)},setUnabletogetdoctorlist:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"RX panel",Error_Details:"Unable to get doctor list"},tealium_data2track.push(obj)},setMissingFieldDuringUploadPrescription:function(){obj={id:"Error",Error_Source:"User",Error_Code:"RX panel",Error_Message:"Missing select doctor"},tealium_data2track.push(obj)},setUnableUploadRXImage:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"RX panel",Error_Details:"Unable to upload the RX image"},tealium_data2track.push(obj)},setUnableToLoadRX:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"RX panel",Error_Details:"Unable to load prescription detail"},tealium_data2track.push(obj)},setUnableToAddToCart:function(){obj={id:"Error",Error_Source:"Client",Error_Code:"AddtoCart",Error_Details:"Unable to add product in the cart"},tealium_data2track.push(obj)},setUnableToSaveShippingPage:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Checkout - Shipping",Error_Message:"Unable to save billing page"},tealium_data2track.push(obj)},setCartLoadingError:function(){obj={id:"Error",Error_Source:"Server",Error_Code:"Cart",Error_Details:"Cart Loading Error"},tealium_data2track.push(obj)},setCartReloadingError:function(e){obj={id:"Error",Error_Source:"Server",Error_Code:"Cart",Error_Details:e||"Unable to reload cart"},tealium_data2track.push(obj)},setInvalidFieldShippingPage:function(){obj={id:"Error",Error_Source:"User",Error_Code:"Checkout - Shipping",Error_Details:"Please provide a valid city, zip code, etc"},tealium_data2track.push(obj)},setAddToCartDelay:function(){obj={id:"Error",Error_Source:"Client",Error_Code:"AddtoCart",Error_Details:"Add to cart over 10sec"},tealium_data2track.push(obj)},setTYPError:function(){obj={id:"Error",Error_Source:"Client",Error_Code:"Checkout - Thank You Page",Error_Details:"Thank You Page Redirect Error"},tealium_data2track.push(obj)}},"undefined"!=typeof MessageHelper&&MessageHelper&&MessageHelper.topicNamespace||(MessageHelper={messages:{},identifier:"",getCurrentYear:function(){return(new Date).getFullYear()},getCurrentMonth:function(){return(new Date).getMonth()+1},getCurrentDay:function(){return(new Date).getDate()},getRenderContextProperty:function(e,t){if(console.debug("enter getRenderContextProperty with propertyName = "+t),null==e)return console.debug("context is null. Return null..."),null;t=e.properties[t];return console.debug("the found property value is: "+t),t},setMessage:function(e,t){this.messages[e]=t},showHideMessageArea:function(e){cursor_clear(),null!=e&&null!=e||(e=0);dojo.byId("MessageArea");$("#ErrorMessageText").dialog({width:350,open:function(e,t){setTimeout(function(){$("#ErrorMessageText").dialog("close")},7e3)}})},displayErrorCybersource:function(){top.MessageHelper.showErrorCybersource()},showErrorCybersource:function(){cursor_clear(),/iphone|ipad|android|ie|blackberry|fennec/.test(navigator.userAgent.toLowerCase())?$("#to-warn-cybersource-error").dialog({position:{my:"center",at:"center",of:window},modal:!0,draggable:!1,open:function(e,t){$(this).removeClass("hide")},close:function(){}}):$("#to-warn-cybersource-error").dialog({position:{my:"center",at:"center",of:window},modal:!0,draggable:!1,appendTo:"#modalList",open:function(e,t){$(this).removeClass("hide")},close:function(){}}),$("#to-warn-cybersource-error").dialog("open")},hideMessageArea:function(){cursor_clear();var e=dojo.byId("MessageArea"),t=new Array;return t.node=e,t.duration=500,t.onEnd=function(){dojo.style(e,"display","none"),dojo.style(e,"opacity",100)},dojo.fadeOut(t).play(),dojo.byId("ErrorMessageText").innerHTML="",!1},displayErrorMessage:function(e,t,r){null!=t&&null!=t||(t=0),null!=r&&null!=r&&1!=r||null!=this.messages.ERROR_MESSAGE_TYPE&&"undefined"!=this.messages.ERROR_MESSAGE_TYPE&&(e=this.messages.ERROR_MESSAGE_TYPE+e),this.setMessageAreaStyle("2"),dojo.byId("ErrorMessageText").innerHTML=e,this.showHideMessageArea(t),dojo.byId("MessageArea").focus(),setTimeout("dojo.byId('ErrorMessageText').focus()",1e3)},setMessageAreaStyle:function(e){null!=dojo.byId("MessageArea")&&(dojo.byId("MessageArea").className="msgpopup"+e)},displayStatusMessage:function(e,t){null!=t&&null!=t||(t=0),this.setMessageAreaStyle("1"),dojo.byId("ErrorMessageText").innerHTML=e,this.showHideMessageArea(t),dojo.byId("MessageArea").focus(),setTimeout("dojo.byId('ErrorMessageText').focus()",1e3)},hideAndClearMessage:function(){null!=dojo.byId("ErrorMessageText")&&(dojo.byId("ErrorMessageText").innerHTML=""),null!=dojo.byId("MessageArea")&&(dojo.byId("MessageArea").style.display="none")},adjustCoordinates:function(e){var t,r,a;"none"!=dojo.style("MessageArea","display")&&(a=dojo.byId("page"),t=dojo.byId("MessageArea"),null!=a&&null!=t&&(a=(r=dojo.coords(a,!0)).w,dojo.isSafari&&(a=dojo.style("page","width")),null!=e&&null!=e||(e=0),dojo.style(t,{width:a+20+"px",left:r.x-10+"px",top:r.y+e+"px"})))},formErrorHandle:function(e,t){this.formErrorHandleClient(e.errorMessageParam,e.errorMessage)},formErrorHandleClient:function(e,t){var r,e=dojo.byId(e);null!=t?e&&((r=$("<div />").text(t)).dialog({create:function(){setTimeout(function(){r.dialog("destroy")},5e3)}}),this.identifier):console.debug("formErrorHandleClient: The error message is null.")},clearCurrentIdentifier:function(){this.identifier=""},emptyFunc:function(e){},containsDoubleByte:function(e){for(var t=new String(e),r=0;r<t.length;r++)if(chr=t.charCodeAt(r),127<chr)return!0;return!1},isValidEmail:function(e){return!this.containsDoubleByte(e)&&(0==e.length||!(e.length<5)&&(!(0<e.indexOf(" "))&&(!(e.indexOf("@")<1)&&(!(e.lastIndexOf(".")<e.indexOf("@")+2)&&!(e.lastIndexOf(".")>=e.length-2)))))},isValidUTF8length:function(e,t){return!(this.utf8StringByteLength(e)>t)},utf8StringByteLength:function(e){if(null===e)return 0;var t=String(e),r=t.length;for(i=0;i<t.length;i++)chr=t.charCodeAt(i),127<chr&&(r+=1),2047<chr&&(r+=1);return r},IsNumeric:function(e,t){var r;r=t?"0123456789.":"0123456789";var a,o=!0;for(i=0;i<e.length&&1==o;i++)a=e.charAt(i),-1==r.indexOf(a)&&(o=!1);return o},IsValidPhone:function(e){var t,r=!0;for(i=0;i<e.length&&1==r;i++)t=e.charAt(i),-1=="0123456789()-+ ".indexOf(t)&&(r=!1);return r}}),dojo.addOnLoad(function(){MessageHelper.setMessage("US_ZIP_ERROR","Please enter a valid US address, city or Zip Code."),MessageHelper.setMessage("ERROR_RETRIEVE_PRICE","The store has encountered a problem processing the last request. Please try again. If the problem persists, contact us for assistance."),MessageHelper.setMessage("ERR_RESOLVING_SKU","Your selection is either incomplete or not in stock. Please be sure to supply a value for each attribute or consider a different combination of values."),MessageHelper.setMessage("QUANTITY_INPUT_ERROR","The value in the Quantity field is invalid. Ensure the value is a positive integer and try again."),MessageHelper.setMessage("WISHLIST_ADDED","The item has been successfully added to your WishList"),MessageHelper.setMessage("SHOPCART_ADDED","The item has been successfully added to your shopping cart"),MessageHelper.setMessage("SHOPCART_REMOVEITEM","The item was removed from the Shopping Cart."),MessageHelper.setMessage("ERROR_CONTRACT_EXPIRED_GOTO_ORDER","Expired contract: go to order"),MessageHelper.setMessage("ERROR_Logon_modal_EmailInvalid","Please enter a valid email address."),MessageHelper.setMessage("ERROR_LOGON_MODEL_EMAIL_CONFIRM","Please re-enter your email address."),MessageHelper.setMessage("ERROR_PASSWORD_VALID","Please enter a valid password."),MessageHelper.setMessage("ERROR_PASSWORD_UPDATE_VALID","Password does not meet the requirements."),MessageHelper.setMessage("ERROR_EMAIL_MISMATCH","The email addresses you entered do not match."),MessageHelper.setMessage("ERROR_RecipientTooLong","The value entered in the recipient field is too long."),MessageHelper.setMessage("ERROR_FirstNameTooLong","The value entered in the first name field is too long."),MessageHelper.setMessage("ERROR_LastNameTooLong","The value entered in the first name field is too long."),MessageHelper.setMessage("ERROR_MiddleNameTooLong","The value entered in the middle name field is too long."),MessageHelper.setMessage("ERROR_AddressTooLong","The value entered in the street address field is too long."),MessageHelper.setMessage("ERROR_CityTooLong","The value entered in the city field is too long."),MessageHelper.setMessage("ERROR_StateTooLong","The value entered in the state field is too long."),MessageHelper.setMessage("ERROR_CountryTooLong","The value entered in the country/region field is too long."),MessageHelper.setMessage("ERROR_ZipCodeTooLong","The value entered in the ZIP code field is too long."),MessageHelper.setMessage("ERROR_EmailTooLong","The value entered in the email field is too long."),MessageHelper.setMessage("ERROR_PhoneTooLong","The value entered in the phone number field is too long."),MessageHelper.setMessage("ERROR_RecipientEmpty","The recipient field cannot be empty."),MessageHelper.setMessage("ERROR_LastNameEmpty","Please provide your last name."),MessageHelper.setMessage("ERROR_MiddleNameEmpty","The middle name field cannot be empty."),MessageHelper.setMessage("ERROR_AddressEmpty","Please provide a valid address."),MessageHelper.setMessage("ERROR_CityEmpty","Please provide a valid city."),MessageHelper.setMessage("ERROR_StateEmpty","Please select a valid state."),MessageHelper.setMessage("ERROR_CountryEmpty","The country/region field cannot be empty."),MessageHelper.setMessage("ERROR_ZipCodeEmpty","Please provide a valid zip code."),MessageHelper.setMessage("ERROR_EmailEmpty","Please provide a valid email address."),MessageHelper.setMessage("ERROR_FirstNameEmpty","Please provide your first name."),MessageHelper.setMessage("ERROR_INVALIDEMAILFORMAT","The email entered is not in a valid format."),MessageHelper.setMessage("ERROR_MESSAGE_TYPE","Error:message type"),MessageHelper.setMessage("ERROR_INVALIDPHONE","The phone number entered is not in a valid format."),MessageHelper.setMessage("ERROR_PromoEmpty","Error: promo is empty"),MessageHelper.setMessage("ERROR_INVALIDPHONE","The phone number entered is not in a valid format."),MessageHelper.setMessage("ERROR_PhonenumberEmpty","Please provide a valid phone number in the following format: xxx-xxx-xxxx."),MessageHelper.setMessage("ERROR_RecipientInvalid","Error: Recipient is invalid"),MessageHelper.setMessage("ERROR_FirstNameInvalid","Please provide your first name."),MessageHelper.setMessage("ERROR_LastNameInvalid","Please provide your last name. "),MessageHelper.setMessage("ERROR_InvalidFieldChar",'This field may not contain the characters "!" or "#".'),MessageHelper.setMessage("ERROR_UPDATE_FIRST","The shipping information has been modified. Please click Update before continuing."),MessageHelper.setMessage("SHIPPING_INVALID_ADDRESS","Please select a valid address"),MessageHelper.setMessage("ERROR_QUICKCHECKOUT_ADDRESS_CHANGE","Please use My Account to change your quick checkout profile address."),MessageHelper.setMessage("REQUESTED_SHIPPING_DATE_OUT_OF_RANGE_ERROR","The requested shipping date must be a future date."),MessageHelper.setMessage("ERROR_ShippingInstructions_TooLong","The value entered in the Shipping Instructions field is too long."),MessageHelper.setMessage("PAST_DATE_ERROR","Error: past date"),MessageHelper.setMessage("SCHEDULE_ORDER_MISSING_START_DATE","Error: order missing start date"),MessageHelper.setMessage("SCHEDULE_ORDER_MISSING_FREQUENCY","Error: order missing frequency"),MessageHelper.setMessage("ERROR_SWITCH_SINGLE_SHIPMENT","Error on switching to single shipment"),MessageHelper.setMessage("ERROR_LOGON_EMAIL","Please provide a valid email address."),MessageHelper.setMessage("ERROR_PasswordEmpty","The password field cannot be empty."),MessageHelper.setMessage("SELECT_BILLINGADDRESS_ERROR","Error: you must select a billing address"),MessageHelper.setMessage("ERROR_PromoEmpty","Error: promo Empty"),MessageHelper.setMessage("ERROR_Password_checks","Password does not meet the requirements."),MessageHelper.setMessage("ERROR_SHIPPING_METHOD_UPDATED","Your Shipping method has been updated, please verify your shipping info."),$("#clickableErrorMessage").on("click",function(){MessageHelper.hideMessageArea()}),$("#clickableErrorMessage").on("keypress",function(){MessageHelper.hideMessageArea()}),$("clickableErrorMessageImg").on("click",function(){MessageHelper.hideMessageArea()}),$("clickableErrorMessageImg").on("keypress",function(){MessageHelper.hideMessageArea()})});var order_updated={AjaxAddOrderItem:"AjaxAddOrderItem",AjaxAddOrderItemWithShipingInfo:"AjaxAddOrderItemWithShipingInfo",AjaxDeleteOrderItem:"AjaxDeleteOrderItem",AjaxUpdateOrderItem:"AjaxUpdateOrderItem",AjaxUpdateOrderShippingInfo:"AjaxUpdateOrderShippingInfo",AjaxOrderCalculate:"AjaxOrderCalculate",AjaxLogoff:"AjaxLogoff",AjaxSetPendingOrder:"AjaxSetPendingOrder",AjaxUpdatePendingOrder:"AjaxUpdatePendingOrder",AjaxSingleOrderCancel:"AjaxSingleOrderCancel",AjaxUpdateRewardOption:"AjaxUpdateRewardOption",OrderItemAddressShipMethodUpdate:"OrderItemAddressShipMethodUpdate",AjaxTaxCalculationUpdateTO:"AjaxTaxCalculationUpdateTO",OrderItemAddressShipMethodUpdateTO:"ExtAjaxOrderChangeServiceShipInfoUpdateTO"},address_updated={AjaxDeleteAddressForPerson:"AjaxDeleteAddressForPerson",AjaxAddAddressForPerson:"AjaxAddAddressForPerson",AjaxUpdateAddressForPerson:"AjaxUpdateAddressForPerson",AjaxAddShippingAndBillingAddressForPersonDuringCheckout:"AjaxAddShippingAndBillingAddressForPersonDuringCheckout"},user_changed={AjaxLogonService:"AjaxLogonService",AjaxLogoff:"AjaxLogoff"},wishlist_changed={AjaxInterestItemAdd:"AjaxInterestItemAdd",AjaxInterestItemDelete:"AjaxInterestItemDelete",AjaxLogonService:"AjaxLogonService",AjaxLogoff:"AjaxLogoff"},listorders_changed={AjaxOrderCreate:"AjaxOrderCreate",AjaxSingleOrderCancel:"AjaxSingleOrderCancel",AjaxSingleOrderSave:"AjaxSingleOrderSave",AjaxCurrentOrderCalculate:"AjaxCurrentOrderCalculate",AjaxSingleOrderCalculate:"AjaxSingleOrderCalculate",AjaxAddOrderItem:"AjaxAddOrderItem"};dojo.require("wc.render.common"),CommonContextsJS={langId:"-1",storeId:"",catalogId:"",setCommonParameters:function(e,t,r){this.langId=e,this.storeId=t,this.catalogId=r},setContextProperty:function(e,t,r){wc.render.getContextById(e).properties[t]=r}},wc.render.declareContext("multipleShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("singleShipmentShipChargeContext",null,""),wc.render.declareContext("multipleShipmentShipChargeContext",null,""),wc.render.declareContext("traditionalShipmentDetailsContext",{shipmentDetailsArea:"update"},""),wc.render.declareContext("currentOrder_Context",null,""),wc.render.declareContext("editShippingAddressContext",{shippingAddress:"0",addressType:"ShippingAndBilling"},"","Main"),wc.render.declareContext("billingAddressDropDownBoxContext",{billingAddress1:"0",billingAddress2:"0",billingAddress3:"0",billingURL1:"",billingURL2:"",billingURL3:"",areaNumber:"0",payment1:"",payment2:"",payment3:"",paymentTCId1:"",paymentTCId2:"",paymentTCId3:""},""),wc.render.declareContext("contextForMainAndAddressDiv",{showArea:"0",hideArea:"0"},""),wc.render.declareContext("shippingAddressDropDownBoxContext",null,""),wc.render.declareContext("MiniShoppingCartContext",null,""),wc.render.declareContext("MiniShopCartDropDownContext",null,""),wc.render.declareContext("CategoryDisplay_Context",{pageView:"",beginIndex:""},""),wc.render.declareContext("SubCategoryDisplay_Context",null,""),wc.render.declareContext("WishlistDisplay_Context",{url:""},""),wc.render.declareContext("SharedWishlistDisplay_Context",{url:""},""),wc.render.declareContext("ShopCartPaginationDisplay_Context",{},""),wc.render.declareContext("PendingOrderPaginationDisplay_Context",{},""),wc.render.declareContext("PendingOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("OrderDetailPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("MSOrderItemPaginationDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("CouponDisplay_Context",null,""),wc.render.declareContext("PromotionFreeGifts_Context",null,""),wc.render.declareContext("ListOrdersDisplay_Context",{startNumber:"0"},""),wc.render.declareContext("ScheduledOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"Scheduled"},""),wc.render.declareContext("ProcessedOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"PreviouslyProcessed"},""),wc.render.declareContext("WaitingForApprovalOrdersStatusDisplay_Context",{beginIndex:"0",selectedTab:"WaitingForApproval"},""),wc.render.declareContext("BrowsingHistoryContext",{status:"init"},""),wc.render.declareContext("BrowsingHistoryDisplay_Context",{currentPage:"0",pageView:""},""),wc.render.declareContext("CategorySubscriptionContext",null,""),wc.render.declareContext("RecurringOrderDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("SubscriptionDisplay_Context",{beginIndex:"0"},""),wc.render.declareContext("RecentRecurringOrderDisplay_Context",{beginIndex:"0",isMyAccountMainPage:"true"},""),wc.render.declareContext("RecentSubscriptionDisplay_Context",{beginIndex:"0",isMyAccountMainPage:"true"},""),wc.render.declareContext("RecurringOrderChildOrdersDisplay_Context",{beginIndex:"0",orderId:""},""),wc.render.declareContext("SubscriptionChildOrdersDisplay_Context",{beginIndex:"0",orderItemId:"",subscriptionName:""},""),wc.render.declareContext("AutoSuggest_Context",null,""),wc.render.declareContext("CachedSuggestions_Context",null,""),dojo.require("wc.render.common"),CommonControllersDeclarationJS={langId:"-1",storeId:"",catalogId:"",ajaxCheckOut:!0,setCommonParameters:function(e,t,r){this.langId=e,this.storeId=t,this.catalogId=r},setControllerURL:function(e,t){wc.render.getRefreshControllerById(e).url=t}},wc.render.declareRefreshController({id:"MiniShoppingCartController",renderContext:wc.render.getContextById("MiniShoppingCartContext"),url:"",formId:"",modelChangedHandler:function(e,t){var r;this.renderContext;(e.actionId in order_updated||"AjaxDeleteOrderItemForShippingBillingPage"==e.actionId)&&(r=[],"AjaxAddOrderItem"==e.actionId&&(r.addedOrderItemId=e.orderItemId+"",showDropdown=!0),t.refresh(r))},postRefreshHandler:function(e){this.renderContext;destroyDialog(),showDropdown&&(showMiniShopCartDropDown("placeHolder","quick_cart_container","orderItemAdded"),showDropdown=!1)}}),wc.render.declareRefreshController({id:"CategoryDisplay_Controller",renderContext:wc.render.getContextById("CategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;categoryDisplayJS.contextChanged=!0,t.refresh(r.properties)},postRefreshHandler:function(e){var t;this.renderContext;categoryDisplayJS.contextChanged&&!categoryDisplayJS.isHistory&&(t="&identifier="+(new Date).getTime(),t=new categoryDisplayJS.HistoryTracker("CategoryDisplay_Widget",this.url+t),dojo.back.addToHistory(t),categoryDisplayJS.contextChanged=!1,categoryDisplayJS.isHistory=!1),cursor_clear();try{"undefined"!=typeof ceadojo&&ceadojo.publish("/wc/collaboration/CategoryDisplayRefreshed",[])}catch(e){console.log(e)}}}),wc.render.declareRefreshController({id:"SubCategoryDisplay_Controller",renderContext:wc.render.getContextById("SubCategoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;categoryDisplayJS.contextChanged=!0,t.refresh(r.properties)},postRefreshHandler:function(e){var t;this.renderContext;categoryDisplayJS.contextChanged&&!categoryDisplayJS.isHistory&&(t="&identifier="+(new Date).getTime(),t=new categoryDisplayJS.HistoryTracker("SubCategoryDisplay_Widget",this.url+t),dojo.back.addToHistory(t),categoryDisplayJS.contextChanged=!1,categoryDisplayJS.isHistory=!1),cursor_clear()}}),wc.render.declareRefreshController({id:"WishlistDisplay_Controller",renderContext:wc.render.getContextById("WishlistDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;AccountWishListDisplay.contextChanged=!0,t.refresh(r.properties)},modelChangedHandler:function(e,t){var r=this.renderContext;"InterestItemDelete"==e.actionId&&(this.url=wc.render.getRefreshControllerById("WishlistDisplay_Controller").url,t.refresh(r.properties)),"AjaxInterestItemAdd"==e.actionId&&(this.url=wc.render.getRefreshControllerById("WishlistDisplay_Controller").url,t.refresh(r.properties)),"AjaxGiftListServiceCreate"!=e.actionId&&"AjaxGiftListServiceUpdateDescription"!=e.actionId&&"AjaxGiftListServiceDeleteGiftList"!=e.actionId&&"AjaxGiftListServiceRemoveItem"!=e.actionId&&"AjaxGiftListServiceAddItem"!=e.actionId||t.refresh(r.properties)},postRefreshHandler:function(e){var t,r=this.renderContext;AccountWishListDisplay.contextChanged&&!AccountWishListDisplay.isHistory&&(t="&identifier="+(new Date).getTime(),null!=(r=r.properties.url)&&""!=r||(r=this.url),t=new AccountWishListDisplay.HistoryTracker("WishlistDisplay_Widget",r+t,this.url+t),dojo.back.addToHistory(t),AccountWishListDisplay.contextChanged=!1,AccountWishListDisplay.isHistory=!1),null!=dojo.byId("multipleWishlistController_select")&&"undefined"!=dojo.byId("multipleWishlistController_select")&&(dojo.byId("multipleWishlistController_select").disabled=!1),cursor_clear()}}),wc.render.declareRefreshController({id:"SharedWishlistDisplay_Controller",renderContext:wc.render.getContextById("SharedWishlistDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"ShopCartDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;e.actionId in order_updated&&t.refresh(r.properties)},postRefreshHandler:function(e){var t=this.renderContext;null!=typeof savedOrdersJS&&"undefined"!=typeof savedOrdersJS&&savedOrdersJS.isCurrentOrderPage(!0);null!=document.getElementById("discountDetailsSection")&&(document.getElementById("discountDetailsSection").style.display="block"),null!=document.getElementById("appliedPromotionCodes")&&(document.getElementById("appliedPromotionCodes").style.display="block"),CheckoutHelperJS.isAjaxCheckOut()||(CheckoutHelperJS.setFieldDirtyFlag(!1),CheckoutHelperJS.initDojoEventListenerShoppingCartPage());t=t.properties.orderId;0<$(".currentOrderIdElem").length&&(t=$(".currentOrderIdElem").val()),ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(t),document.getElementById("OrderFirstItemId")&&(ShipmodeSelectionExtJS.orderItemId=document.getElementById("OrderFirstItemId").value);t=$(".total_figures").text().match(/\d+/)[0];$("#order-quantity-header").text(t),renderPaypalOnCart(),cursor_clear()}}),wc.render.declareRefreshController({id:"ShopCartPaginationDisplayController",renderContext:wc.render.getContextById("ShopCartPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){var t=this.renderContext;cursor_clear(),CheckoutHelperJS.isAjaxCheckOut()||(CheckoutHelperJS.setFieldDirtyFlag(!1),CheckoutHelperJS.initDojoEventListenerShoppingCartPage());t=t.properties.orderId;0<$(".currentOrderIdElem").length&&(t=$(".currentOrderIdElem").val()),ShipmodeSelectionExtJS.displaySavedShipmentTypeForOrder(t)}}),wc.render.declareRefreshController({id:"PendingOrderPaginationDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"OrderItemPaginationDisplayController",renderContext:wc.render.getContextById("OrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"MSOrderItemPaginationDisplayController",renderContext:wc.render.getContextById("MSOrderItemPaginationDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"CouponDisplay_Controller",renderContext:wc.render.getContextById("CouponDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;"AjaxCouponsAddRemove"!=e.actionId&&"AjaxWalletItemProcessServiceDelete"!=e.actionId||t.refresh(r.properties)}}),wc.render.declareRefreshController({id:"PromotionFreeGifts_Controller",renderContext:wc.render.getContextById("PromotionFreeGifts_Context"),url:"",formId:"",modelChangedHandler:function(e,t){this.renderContext},renderContextChangedHandler:function(e,t){var r=this.renderContext;t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear(),PromotionChoiceOfFreeGiftsJS.showFreeGiftsDialog()}}),wc.render.declareRefreshController({id:"ListOrdersDisplay_Controller",renderContext:wc.render.getContextById("ListOrdersDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;e.actionId in listorders_changed&&("AjaxOrderCreate"!=e.actionId&&"AjaxSingleOrderCalculate"!=e.actionId||0==this.renderContext.properties.startNumber?t.refresh(r.properties):wc.render.updateContext("ListOrdersDisplay_Context",{startNumber:0}))},renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["startNumber"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;savedOrdersJS.updateCurrentOrder&&(savedOrdersJS.initializeCurrentOrder(),savedOrdersJS.updateCurrentOrder=!1),savedOrdersJS.updateToolbar(),savedOrdersJS.checkAllIfNeeded()}}),wc.render.declareRefreshController({id:"PendingOrderDisplayController",renderContext:wc.render.getContextById("PendingOrderPaginationDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;e.actionId in order_updated&&(this.currentDesc=document.getElementById("OrderDescription_input").value,t.refresh(r.properties))},postRefreshHandler:function(e){var t;cursor_clear(),this.currentDesc==document.getElementById("OldOrderDescription").value||null!=(t=document.getElementById("OrderDescription_input"))&&"undefined"!=t&&(t.value=this.currentDesc,dojo.removeClass(t,"savedOrderDetailsInputBorder"),dojo.addClass(t,"savedOrderDetailsInputBorderWarning"))}}),wc.render.declareRefreshController({id:"BrowsingHistoryController",renderContext:wc.render.getContextById("BrowsingHistoryContext"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["status"])&&t.refresh(r.properties)},postRefreshHandler:function(e){document.getElementById("WC_ScrollingProductsESpot_EmptyImgContainer_BrowsingHistory")||(document.getElementById("WC_LeftSidebarDisplay_div_5").style.display="block")}}),wc.render.declareRefreshController({id:"BrowsingHistoryDisplay_Controller",renderContext:wc.render.getContextById("BrowsingHistoryDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;(this.testForChangedRC(["currentPage"])||this.testForChangedRC(["pageView"]))&&t.refresh(r.properties)},postRefreshHandler:function(e){cursor_clear()}}),wc.render.declareRefreshController({id:"CategorySubscriptionController",renderContext:wc.render.getContextById("CategorySubscriptionContext"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;"AjaxCategorySubscribe"==e.actionId&&t.refresh(r.properties)},postRefreshHandler:function(e){cursor_clear(),null==dojo.byId("CategorySubscriptionImage")&&dojo.animateProperty({node:dojo.byId("CategorySubscriptionLink"),duration:1500,properties:{backgroundColor:{start:"yellow",end:dojo.style("CategorySubscriptionLink","backgroundColor")}}}).play()}}),wc.render.declareRefreshController({id:"RecurringOrderDisplayController",renderContext:wc.render.getContextById("RecurringOrderDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;"AjaxCancelSubscription"==e.actionId&&(this.url=wc.render.getRefreshControllerById("RecurringOrderDisplayController").url,t.refresh(r.properties))},renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"SubscriptionDisplayController",renderContext:wc.render.getContextById("SubscriptionDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;"AjaxCancelSubscription"==e.actionId&&(this.url=wc.render.getRefreshControllerById("SubscriptionDisplayController").url,t.refresh(r.properties))},renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"RecentRecurringOrderDisplayController",renderContext:wc.render.getContextById("RecentRecurringOrderDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;"AjaxCancelSubscription"==e.actionId&&(this.url=wc.render.getRefreshControllerById("RecurringOrderDisplayController").url,t.refresh(r.properties))},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"RecentSubscriptionDisplayController",renderContext:wc.render.getContextById("RecentSubscriptionDisplay_Context"),url:"",formId:"",modelChangedHandler:function(e,t){var r=this.renderContext;"AjaxCancelSubscription"==e.actionId&&(this.url=wc.render.getRefreshControllerById("SubscriptionDisplayController").url,t.refresh(r.properties))},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"RecurringOrderChildOrdersDisplayController",renderContext:wc.render.getContextById("RecurringOrderChildOrdersDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"SubscriptionChildOrdersDisplayController",renderContext:wc.render.getContextById("SubscriptionChildOrdersDisplay_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;this.testForChangedRC(["beginIndex"])&&t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;cursor_clear()}}),wc.render.declareRefreshController({id:"AutoSuggestDisplayController",renderContext:wc.render.getContextById("AutoSuggest_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;null==document.getElementById("suggestedKeywordResults")&&(document.getElementById("autoSuggestDynamic_Result_div").innerHTML=""),showAutoSuggestIfResults()}}),wc.render.declareRefreshController({id:"AutoSuggestCachedSuggestionsController",renderContext:wc.render.getContextById("CachedSuggestions_Context"),url:"",formId:"",renderContextChangedHandler:function(e,t){var r=this.renderContext;t.refresh(r.properties)},postRefreshHandler:function(e){this.renderContext;var t=document.getElementById("cachedSuggestions");if(null==t)document.getElementById("autoSuggestCachedSuggestions_div").innerHTML="";else{for(var r=t.getElementsByTagName("script"),a=r.length,o=0;o<a;o++){var n=document.createElement("script");n.type="text/javascript",n.text=r[o].text,document.getElementById("autoSuggestCachedSuggestions_div").appendChild(n)}retrievedCachedSuggestions=!0;t=document.getElementById("SimpleSearchForm_SearchTerm").value;t.length>AUTOSUGGEST_THRESHOLD&&doStaticAutoSuggest(t)}}}),function(e){"use strict";function c(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function d(e,t,r,a,o,n){return c((n=c(c(t,e),c(a,n)))<<(o=o)|n>>>32-o,r)}function g(e,t,r,a,o,n,s){return d(t&r|~t&a,e,t,o,n,s)}function p(e,t,r,a,o,n,s){return d(t&a|r&~a,e,t,o,n,s)}function m(e,t,r,a,o,n,s){return d(t^r^a,e,t,o,n,s)}function _(e,t,r,a,o,n,s){return d(r^(t|~a),e,t,o,n,s)}function s(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r,a,o,n,s=1732584193,d=-271733879,i=-1732584194,u=271733878,l=0;l<e.length;l+=16)d=_(d=_(d=_(d=_(d=m(d=m(d=m(d=m(d=p(d=p(d=p(d=p(d=g(d=g(d=g(d=g(a=d,i=g(o=i,u=g(n=u,s=g(r=s,d,i,u,e[l],7,-680876936),d,i,e[l+1],12,-389564586),s,d,e[l+2],17,606105819),u,s,e[l+3],22,-1044525330),i=g(i,u=g(u,s=g(s,d,i,u,e[l+4],7,-176418897),d,i,e[l+5],12,1200080426),s,d,e[l+6],17,-1473231341),u,s,e[l+7],22,-45705983),i=g(i,u=g(u,s=g(s,d,i,u,e[l+8],7,1770035416),d,i,e[l+9],12,-1958414417),s,d,e[l+10],17,-42063),u,s,e[l+11],22,-1990404162),i=g(i,u=g(u,s=g(s,d,i,u,e[l+12],7,1804603682),d,i,e[l+13],12,-40341101),s,d,e[l+14],17,-1502002290),u,s,e[l+15],22,1236535329),i=p(i,u=p(u,s=p(s,d,i,u,e[l+1],5,-165796510),d,i,e[l+6],9,-1069501632),s,d,e[l+11],14,643717713),u,s,e[l],20,-373897302),i=p(i,u=p(u,s=p(s,d,i,u,e[l+5],5,-701558691),d,i,e[l+10],9,38016083),s,d,e[l+15],14,-660478335),u,s,e[l+4],20,-405537848),i=p(i,u=p(u,s=p(s,d,i,u,e[l+9],5,568446438),d,i,e[l+14],9,-1019803690),s,d,e[l+3],14,-187363961),u,s,e[l+8],20,1163531501),i=p(i,u=p(u,s=p(s,d,i,u,e[l+13],5,-1444681467),d,i,e[l+2],9,-51403784),s,d,e[l+7],14,1735328473),u,s,e[l+12],20,-1926607734),i=m(i,u=m(u,s=m(s,d,i,u,e[l+5],4,-378558),d,i,e[l+8],11,-2022574463),s,d,e[l+11],16,1839030562),u,s,e[l+14],23,-35309556),i=m(i,u=m(u,s=m(s,d,i,u,e[l+1],4,-1530992060),d,i,e[l+4],11,1272893353),s,d,e[l+7],16,-155497632),u,s,e[l+10],23,-1094730640),i=m(i,u=m(u,s=m(s,d,i,u,e[l+13],4,681279174),d,i,e[l],11,-358537222),s,d,e[l+3],16,-722521979),u,s,e[l+6],23,76029189),i=m(i,u=m(u,s=m(s,d,i,u,e[l+9],4,-640364487),d,i,e[l+12],11,-421815835),s,d,e[l+15],16,530742520),u,s,e[l+2],23,-995338651),i=_(i,u=_(u,s=_(s,d,i,u,e[l],6,-198630844),d,i,e[l+7],10,1126891415),s,d,e[l+14],15,-1416354905),u,s,e[l+5],21,-57434055),i=_(i,u=_(u,s=_(s,d,i,u,e[l+12],6,1700485571),d,i,e[l+3],10,-1894986606),s,d,e[l+10],15,-1051523),u,s,e[l+1],21,-2054922799),i=_(i,u=_(u,s=_(s,d,i,u,e[l+8],6,1873313359),d,i,e[l+15],10,-30611744),s,d,e[l+6],15,-1560198380),u,s,e[l+13],21,1309151649),i=_(i,u=_(u,s=_(s,d,i,u,e[l+4],6,-145523070),d,i,e[l+11],10,-1120210379),s,d,e[l+2],15,718787259),u,s,e[l+9],21,-343485551),s=c(s,r),d=c(d,a),i=c(i,o),u=c(u,n);return[s,d,i,u]}function i(e){for(var t="",r=32*e.length,a=0;a<r;a+=8)t+=String.fromCharCode(e[a>>5]>>>a%32&255);return t}function u(e){var t=[];for(t[(e.length>>2)-1]=void 0,a=0;a<t.length;a+=1)t[a]=0;for(var r=8*e.length,a=0;a<r;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<a%32;return t}function a(e){for(var t,r="",a=0;a<e.length;a+=1)t=e.charCodeAt(a),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function r(e){return unescape(encodeURIComponent(e))}function o(e){return i(s(u(e=r(e)),8*e.length))}function n(e,t){return function(e,t){var r,a=u(e),o=[],n=[];for(o[15]=n[15]=void 0,16<a.length&&(a=s(a,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^a[r],n[r]=1549556828^a[r];return t=s(o.concat(u(t)),512+8*t.length),i(s(n.concat(t),640))}(r(e),r(t))}function t(e,t,r){return t?r?n(t,e):a(n(t,e)):r?o(e):a(o(e))}"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.md5=t}(this),constants={services:{brandsLandingSearch:"BrandsLandingSearch?storeId=%storeId&searchTerm=%searchTerm&langId=%langId&catalogId=%catalogId",storeSearch:"AjaxStoreLocatorResultsURL?storeId=%storeId&langId=%langId",mapquest:"GetMapquestData?storeId=%storeId&langId=%langId",s7:"https://assets.targetoptical.com/is/image/TargetOptical/%upc__002__001.png?imwidth=%width",mapquestKey:getMetaValue("mapsApiKey")},ajaxParams:{storeId:commerceStoreId,catalogId:commerceCatalogId.substr(0,5),langId:commerceLangId,orderId:"",userId:getMetaValue("contextUserId"),loggedIn:getMetaValue("contextUserType"),insuranceCheckEligibility:!1},regex:{zip:{usa:/^\d{5}(-\d{4})?$/,canada:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i}},error:{ajax:"Sorry, we were unable to complete your request at this time. Please try again later."},akamai:{serverUrl:"//https://assets.targetoptical.com/is/image/",contentRoot:"/https://assets.targetoptical.com/is/skins/",asset:"TargetOptical/{0}__00{1}",config:{flyout:"TargetOptical/TO Flyout Viewer"},imageUrl:"//https://assets.targetoptical.com/is/image/TargetOptical/{0}__00{1}.png?imwidth={2}"}},$.extend({displayModalToggle:function(e){e.addClass("on").siblings().removeClass("on");var t=$("img",e).attr("rel");e.hasClass("pdp_fr")?r="1":e.hasClass("pdp_qt")&&(r="2");var r=$.stringTemplate(constants.services.s7,{upc:t,view:r,width:"1600"});window.iviewer.loadImage(r)},stringTemplate:function(r,e,a){return a=a||"%",null!=e&&$.each(e,function(e,t){-1!=r.indexOf(a+e)&&(r=r.replace(a+e,t))}),r},getParams:function(e){return $.jsonify(e?window.location.hash:window.location.search)},jsonify:function(e){var o={};return""==e||0<(e=(e=e.replace("?","").replace("#","")).substring(0,e.length).split("&")).length&&$.each(e,function(e,t){if(""!=t){for(var r=t.split("="),a=r[1].indexOf("+");-1<a;)r[1]=r[1].replace("+"," "),a=r[1].indexOf("+");o[r[0]]=unescape(r[1])}}),o}});var zipCodeRegex=/^\d{5}(-\d{4})?$/,phoneNumberRegex=/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/,otherCountryZipPattern=new RegExp(getMetaValue("OTHER_COUNTRY_ZIP_PATTERN"),"g");